parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function zj(a){return a&&a.__esModule?{d:a.default}:{d:a}}var Aj=this;var mg={};function da(){return function(){throw new Error("Unimplemented abstract method.")}()}var ho=0;function ga(t){return t.ol_uid||(t.ol_uid=String(++ho))}var ng="6.15.1";var io=mg&&mg.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),og=function(t){function r(r){var e=this,o="Assertion failed. See https://openlayers.org/en/"+("latest"===ng?ng:"v"+ng.split("-")[0])+"/doc/errors/#"+r+" for details.";return(e=t.call(this,o)||this).code=r,e.name="AssertionError",e.message=o,e}return io(r,t),r}(Error);mg.default=og;var Ge={};var He={};var Ja=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();function jo(t){t.stopPropagation()}var hc={PROPERTYCHANGE:"propertychange"};var Ie={};var pg={};var qg=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function Oa(){return!0}function ic(){return!1}function jc(){}function ko(r){var e,$,t,o=!1;return function(){var n=Array.prototype.slice.call(arguments);return o&&this===t&&Sb(n,$)||(o=!0,t=this,$=n,e=r.apply(this,arguments)),e}}function lo(r,e,n){for(var t,$,u=n||kc,o=0,l=r.length,i=!1;o<l;)($=+u(r[t=o+(l-o>>1)],e))<0?o=t+1:(l=t,i=!$);return i?o:~o}function kc(r,e){return r>e?1:r<e?-1:0}function Qc(r,e){return r.indexOf(e)>=0}function rg(r,e,n){var t=r.length;if(r[0]<=e)return 0;if(e<=r[t-1])return t-1;var $=void 0;if(n>0){for($=1;$<t;++$)if(r[$]<e)return $-1}else if(n<0){for($=1;$<t;++$)if(r[$]<=e)return $}else for($=1;$<t;++$){if(r[$]==e)return $;if(r[$]<e)return"function"==typeof n?n(e,r[$-1],r[$])>0?$-1:$:r[$-1]-e<e-r[$]?$-1:$}return t-1}function mo(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function Wa(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,$=0;$<t;$++)r[r.length]=n[$]}function Sb(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}function no(r,e,n){var t=e||kc;return r.every(function(e,$){if(0===$)return!0;var u=t(r[$-1],e);return!(u>0||n&&0===u)})}var ya="function"==typeof Object.assign?Object.assign:function(e,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,o=arguments.length;n<o;++n){var $=arguments[n];if(null!=$)for(var s in $)$.hasOwnProperty(s)&&(t[s]=$[s])}return t};function Rc(e){for(var r in e)delete e[r]}var sg="function"==typeof Object.values?Object.values:function(e){var r=[];for(var t in e)r.push(e[t]);return r};function Sc(e){var r;for(r in e)return!1;return!r}var oo=pg&&pg.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lc=function(e){function t(t){var n=e.call(this)||this;return n.eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return oo(t,e),t.prototype.addEventListener=function(e,t){if(e&&t){var n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);-1===r.indexOf(t)&&r.push(t)}},t.prototype.dispatchEvent=function(e){var t="string"==typeof e,n=t?e:e.type,r=this.listeners_&&this.listeners_[n];if(r){var i=t?new Ja(e):e;i.target||(i.target=this.eventTarget_||this);var s,o=this.dispatching_||(this.dispatching_={}),p=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,p[n]=0),++o[n];for(var l=0,a=r.length;l<a;++l)if(!1===(s="handleEvent"in r[l]?r[l].handleEvent(i):r[l].call(this,i))||i.propagationStopped){s=!1;break}if(0==--o[n]){var $=p[n];for(delete p[n];$--;)this.removeEventListener(n,jc);delete o[n]}return s}},t.prototype.disposeInternal=function(){this.listeners_&&Rc(this.listeners_)},t.prototype.getListeners=function(e){return this.listeners_&&this.listeners_[e]||void 0},t.prototype.hasListener=function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)},t.prototype.removeEventListener=function(e,t){var n=this.listeners_&&this.listeners_[e];if(n){var r=n.indexOf(t);-1!==r&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[r]=jc,++this.pendingRemovals_[e]):(n.splice(r,1),0===n.length&&delete this.listeners_[e]))}},t}(qg);pg.default=lc;var ba={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function ea(e,n,t,$,r){if($&&$!==e&&(t=t.bind($)),r){var i=t;t=function(){e.removeEventListener(n,t),i.apply(this,arguments)}}var s={target:e,type:n,listener:t};return e.addEventListener(n,t),s}function vd(e,n,t,$){return ea(e,n,t,$,!0)}function la(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Rc(e))}var po=Ie&&Ie.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tc=function(e){function t(){var t=e.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return po(t,e),t.prototype.changed=function(){++this.revision_,this.dispatchEvent(ba.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(e,t){if(Array.isArray(e)){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=ea(this,e[o],t);return n}return ea(this,e,t)},t.prototype.onceInternal=function(e,t){var r;if(Array.isArray(e)){var n=e.length;r=new Array(n);for(var o=0;o<n;++o)r[o]=vd(this,e[o],t)}else r=vd(this,e,t);return t.ol_key=r,r},t.prototype.unInternal=function(e,t){var r=t.ol_key;if(r)Bj(r);else if(Array.isArray(e))for(var n=0,o=e.length;n<o;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)},t}(lc);function Bj(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)la(e[t]);else la(e)}Tc.prototype.on,Tc.prototype.once,Tc.prototype.un,Ie.unByKey=Bj,Ie.default=Tc;var Cj=He&&He.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tg=function(t){function e(e,r,n){var s=t.call(this,e)||this;return s.key=r,s.oldValue=n,s}return Cj(e,t),e}(Ja);He.ObjectEvent=tg;var Xa=function(t){function e(e){var r=t.call(this)||this;return r.on,r.once,r.un,ga(r),r.values_=null,void 0!==e&&r.setProperties(e),r}return Cj(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&ya({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var r;r="change:".concat(t),this.hasListener(r)&&this.dispatchEvent(new tg(r,t,e)),r=hc.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new tg(r,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:".concat(t),e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:".concat(t),e)},e.prototype.set=function(t,e,r){var n=this.values_||(this.values_={});if(r)n[t]=e;else{var s=n[t];n[t]=e,s!==e&&this.notify(t,s)}},e.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},e.prototype.applyProperties=function(t){t.values_&&ya(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var r=this.values_[t];delete this.values_[t],Sc(this.values_)&&(this.values_=null),e||this.notify(t,r)}},e}(Tc);He.default=Xa;var ua={ADD:"add",REMOVE:"remove"};var Dj=Ge&&Ge.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ej={LENGTH:"length"},wd=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.element=r,o.index=n,o}return Dj(e,t),e}(Ja);Ge.CollectionEvent=wd;var Aa=function(t){function e(e,r){var n=t.call(this)||this;n.on,n.once,n.un;var o=r||{};if(n.unique_=!!o.unique,n.array_=e||[],n.unique_)for(var i=0,a=n.array_.length;i<a;++i)n.assertUnique_(n.array_[i],i);return n.updateLength_(),n}return Dj(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(Ej.LENGTH)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new wd(ua.ADD,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new wd(ua.REMOVE,e,t)),e},e.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new wd(ua.REMOVE,n,t)),this.dispatchEvent(new wd(ua.ADD,e,t))}else{for(var o=r;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(Ej.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new og(58)},e}(Xa);Ge.default=Aa;var Je={};function ha(r,$){if(!r)throw new og($)}var qo=Je&&Je.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),eb=function(e){function t(t){var r=e.call(this)||this;if(r.on,r.once,r.un,r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addChangeListener(r.geometryName_,r.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){var o=t;r.setGeometry(o)}else{var n=t;r.setProperties(n)}return r}return qo(t,e),t.prototype.clone=function(){var e=new t(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&e.setGeometry(r.clone());var o=this.getStyle();return o&&e.setStyle(o),e},t.prototype.getGeometry=function(){return this.get(this.geometryName_)},t.prototype.getId=function(){return this.id_},t.prototype.getGeometryName=function(){return this.geometryName_},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.handleGeometryChange_=function(){this.changed()},t.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(la(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=ea(e,ba.CHANGE,this.handleGeometryChange_,this)),this.changed()},t.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},t.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?Fj(e):void 0,this.changed()},t.prototype.setId=function(e){this.id_=e,this.changed()},t.prototype.setGeometryName=function(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},t}(Xa);function Fj(e){return"function"==typeof e?e:(Array.isArray(e)?t=e:(ha("function"==typeof e.getZIndex,41),t=[e]),function(){return t});var t}Je.createStyleFunction=Fj,Je.default=eb;var mc={};var sa={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var ug={};var xd={};var vg={};var ta={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},a={9001:ta.METERS,9002:ta.FEET,9003:ta.USFEET,9101:ta.RADIANS,9102:ta.DEGREES};var Pa={};Pa[ta.RADIANS]=6370997/(2*Math.PI),Pa[ta.DEGREES]=2*Math.PI*6370997/360,Pa[ta.FEET]=.3048,Pa[ta.METERS]=1,Pa[ta.USFEET]=1200/3937;var Tb="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",ro=-1!==Tb.indexOf("firefox");var so=-1!==Tb.indexOf("safari")&&-1==Tb.indexOf("chrom");var b=so&&!!(Tb.indexOf("version/15.4")>=0||Tb.match(/cpu (os|iphone os) 15_4 like mac os x/));var to=-1!==Tb.indexOf("webkit")&&-1==Tb.indexOf("edge");var uo=-1!==Tb.indexOf("macintosh");var Gj="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;var Ke="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope;var vo="undefined"!=typeof Image&&Image.prototype.decode;var Hj=function(){var $=!1;try{var e=Object.defineProperty({},"passive",{get:function(){$=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(r){}return $}();var wo,c=new Array(6);function kb(){return[1,0,0,1,0,0]}function xo(e,$,r,t,o,p,n){return e[0]=$,e[1]=r,e[2]=t,e[3]=o,e[4]=p,e[5]=n,e}function yo(e,$){return e[0]=$[0],e[1]=$[1],e[2]=$[2],e[3]=$[3],e[4]=$[4],e[5]=$[5],e}function za(e,$){var r=$[0],t=$[1];return $[0]=e[0]*r+e[2]*t+e[4],$[1]=e[1]*r+e[3]*t+e[5],$}function zo(e,$,r){return xo(e,$,0,0,r,0,0)}function Ab(e,$,r,t,o,p,n,A){var s=Math.sin(p),a=Math.cos(p);return e[0]=t*a,e[1]=o*s,e[2]=-t*s,e[3]=o*a,e[4]=n*t*a-A*t*s+$,e[5]=n*o*s+A*o*a+r,e}function wg(e,$){var r=Ao($);ha(0!==r,32);var t=$[0],o=$[1],p=$[2],n=$[3],A=$[4],s=$[5];return e[0]=n/r,e[1]=-o/r,e[2]=-p/r,e[3]=t/r,e[4]=(p*s-n*A)/r,e[5]=-(t*s-o*A)/r,e}function Ao(e){return e[0]*e[3]-e[1]*e[2]}function Ij(e){var $="matrix("+e.join(", ")+")";if(Ke)return $;var r=wo||(wo=document.createElement("div"));return r.style.transform=$,r.style.transform}function Ba(r){for(var t=Qa(),e=0,$=r.length;e<$;++e)Ad(t,r[e]);return t}function Bo(r,t,e){return fb(Math.min.apply(null,r),Math.min.apply(null,t),Math.max.apply(null,r),Math.max.apply(null,t),e)}function Le(r,t,e){return e?(e[0]=r[0]-t,e[1]=r[1]-t,e[2]=r[2]+t,e[3]=r[3]+t,e):[r[0]-t,r[1]-t,r[2]+t,r[3]+t]}function Jj(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r.slice()}function nc(r,t,e){var $,i;return($=t<r[0]?r[0]-t:r[2]<t?t-r[2]:0)*$+(i=e<r[1]?r[1]-e:r[3]<e?e-r[3]:0)*i}function yd(r,t){return xg(r,t[0],t[1])}function Ub(r,t){return r[0]<=t[0]&&t[2]<=r[2]&&r[1]<=t[1]&&t[3]<=r[3]}function xg(r,t,e){return r[0]<=t&&t<=r[2]&&r[1]<=e&&e<=r[3]}function yg(r,t){var e=r[0],$=r[1],i=r[2],o=r[3],n=t[0],p=t[1],a=Ca.UNKNOWN;return n<e?a|=Ca.LEFT:n>i&&(a|=Ca.RIGHT),p<$?a|=Ca.BELOW:p>o&&(a|=Ca.ABOVE),a===Ca.UNKNOWN&&(a=Ca.INTERSECTING),a}function Qa(){return[1/0,1/0,-1/0,-1/0]}function fb(r,t,e,$,i){return i?(i[0]=r,i[1]=t,i[2]=e,i[3]=$,i):[r,t,e,$]}function zd(r){return fb(1/0,1/0,-1/0,-1/0,r)}function Me(r,t){var e=r[0],$=r[1];return fb(e,$,e,$,t)}function Kj(r,t,e,$,i){return Mj(zd(i),r,t,e,$)}function Uc(r,t){return r[0]==t[0]&&r[2]==t[2]&&r[1]==t[1]&&r[3]==t[3]}function Lj(r,t){return t[0]<r[0]&&(r[0]=t[0]),t[2]>r[2]&&(r[2]=t[2]),t[1]<r[1]&&(r[1]=t[1]),t[3]>r[3]&&(r[3]=t[3]),r}function Ad(r,t){t[0]<r[0]&&(r[0]=t[0]),t[0]>r[2]&&(r[2]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[1]>r[3]&&(r[3]=t[1])}function Mj(r,t,e,$,i){for(;e<$;e+=i)Co(r,t[e],t[e+1]);return r}function Co(r,t,e){r[0]=Math.min(r[0],t),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],t),r[3]=Math.max(r[3],e)}function zg(r,t){var e;return(e=t(Vc(r)))?e:(e=t(Wc(r)))?e:(e=t(Cd(r)))?e:(e=t(Bb(r)))||!1}function Ne(r){var t=0;return Cg(r)||(t=ra(r)*Ya(r)),t}function Vc(r){return[r[0],r[1]]}function Wc(r){return[r[2],r[1]]}function oc(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function Do(r,t){var e;return"bottom-left"===t?e=Vc(r):"bottom-right"===t?e=Wc(r):"top-left"===t?e=Bb(r):"top-right"===t?e=Cd(r):ha(!1,13),e}function Ag(r,t,e,$,i){var o=Bg(r,t,e,$),n=o[0],p=o[1],a=o[2],x=o[3],D=o[4],Q=o[5],s=o[6],c=o[7];return fb(Math.min(n,a,D,s),Math.min(p,x,Q,c),Math.max(n,a,D,s),Math.max(p,x,Q,c),i)}function Bg(r,t,e,$){var i=t*$[0]/2,o=t*$[1]/2,n=Math.cos(e),p=Math.sin(e),a=i*n,x=i*p,D=o*n,Q=o*p,s=r[0],c=r[1];return[s-a+Q,c-x-D,s-a-Q,c-x+D,s+a-Q,c+x+D,s+a+Q,c+x-D,s-a+Q,c-x-D]}function Ya(r){return r[3]-r[1]}function Bd(r,t,e){var $=e||Qa();return Ka(r,t)?(r[0]>t[0]?$[0]=r[0]:$[0]=t[0],r[1]>t[1]?$[1]=r[1]:$[1]=t[1],r[2]<t[2]?$[2]=r[2]:$[2]=t[2],r[3]<t[3]?$[3]=r[3]:$[3]=t[3]):zd($),$}function Bb(r){return[r[0],r[3]]}function Cd(r){return[r[2],r[3]]}function ra(r){return r[2]-r[0]}function Ka(r,t){return r[0]<=t[2]&&r[2]>=t[0]&&r[1]<=t[3]&&r[3]>=t[1]}function Cg(r){return r[2]<r[0]||r[3]<r[1]}function Eo(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r}function Fo(r,t){var e=(r[2]-r[0])/2*(t-1),$=(r[3]-r[1])/2*(t-1);r[0]-=e,r[2]+=e,r[1]-=$,r[3]+=$}function Go(r,t,e){var $=!1,i=yg(r,t),o=yg(r,e);if(i===Ca.INTERSECTING||o===Ca.INTERSECTING)$=!0;else{var n=r[0],p=r[1],a=r[2],x=r[3],D=t[0],Q=t[1],s=e[0],c=e[1],u=(c-Q)/(s-D),d=void 0,g=void 0;o&Ca.ABOVE&&!(i&Ca.ABOVE)&&($=(d=s-(c-x)/u)>=n&&d<=a),$||!(o&Ca.RIGHT)||i&Ca.RIGHT||($=(g=c-(s-a)*u)>=p&&g<=x),$||!(o&Ca.BELOW)||i&Ca.BELOW||($=(d=s-(c-p)/u)>=n&&d<=a),$||!(o&Ca.LEFT)||i&Ca.LEFT||($=(g=c-(s-n)*u)>=p&&g<=x)}return $}function Ho(r,t,e,$){var i=[];if($>1)for(var o=r[2]-r[0],n=r[3]-r[1],p=0;p<$;++p)i.push(r[0]+o*p/$,r[1],r[2],r[1]+n*p/$,r[2]-o*p/$,r[3],r[0],r[3]-n*p/$);else i=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]];t(i,i,2);for(var a=[],x=[],D=(p=0,i.length);p<D;p+=2)a.push(i[p]),x.push(i[p+1]);return Bo(a,x,e)}function Nj(r,t){var e=t.getExtent(),$=oc(r);if(t.canWrapX()&&($[0]<e[0]||$[0]>=e[2])){var i=ra(e),o=Math.floor(($[0]-e[0])/i)*i;r[0]-=o,r[2]-=o}return r}function Io(r,t){if(t.canWrapX()){var e=t.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[e[0],r[1],e[2],r[3]]];Nj(r,t);var $=ra(e);if(ra(r)>$)return[[e[0],r[1],e[2],r[3]]];if(r[0]<e[0])return[[r[0]+$,r[1],e[2],r[3]],[e[0],r[1],r[2],r[3]]];if(r[2]>e[2])return[[r[0],r[1],e[2],r[3]],[e[0],r[1],r[2]-$,r[3]]]}return[r]}var Ca={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};var d=arguments[0];var Oj=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Pa[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();var lb={};function va(r,$,t){return Math.min(Math.max(r,$),t)}var Jo="cosh"in Math?Math.cosh:function(r){var $=Math.exp(r);return($+1/$)/2};var Ko="log2"in Math?Math.log2:function(r){return Math.log(r)*Math.LOG2E};function Lo(r,$,t,e,o,n){var a=o-t,p=n-e;if(0!==a||0!==p){var x=((r-t)*a+($-e)*p)/(a*a+p*p);x>1?(t=o,e=n):x>0&&(t+=a*x,e+=p*x)}return pc(r,$,t,e)}function pc(r,$,t,e){var o=t-r,n=e-$;return o*o+n*n}function Mo(r){for(var $=r.length,t=0;t<$;t++){for(var e=t,o=Math.abs(r[t][t]),n=t+1;n<$;n++){var a=Math.abs(r[n][t]);a>o&&(o=a,e=n)}if(0===o)return null;var p=r[e];r[e]=r[t],r[t]=p;for(var x=t+1;x<$;x++)for(var s=-r[x][t]/r[t][t],G=t;G<$+1;G++)t==G?r[x][G]=0:r[x][G]+=s*r[t][G]}for(var B=new Array($),u=$-1;u>=0;u--){B[u]=r[u][$]/r[u][u];for(var i=u-1;i>=0;i--)r[i][$]-=r[i][u]*B[u]}return B}function Pj(r){return 180*r/Math.PI}function Cb(r){return r*Math.PI/180}function qc(r,$){var t=r%$;return t*$<0?t+$:t}function Db(r,$,t){return r+t*($-r)}function Qj(r,$){var t=Math.pow(10,$);return Math.round(r*t)/t}function Oe(r,$){return Math.floor(Qj(r,$))}function Pe(r,$){return Math.ceil(Qj(r,$))}var No=lb&&lb.__extends||function(){var o=function($,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,$){o.__proto__=$}||function(o,$){for(var t in $)Object.prototype.hasOwnProperty.call($,t)&&(o[t]=$[t])})($,t)};return function($,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=$}o($,t),$.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xc=6378137;lb.RADIUS=Xc;var rc=Math.PI*Xc;lb.HALF_SIZE=rc;var Rj=[-rc,-rc,rc,rc];lb.EXTENT=Rj;var Sj=[-180,-85,180,85];lb.WORLD_EXTENT=Sj;var Dd=Xc*Math.log(Math.tan(Math.PI/2));lb.MAX_SAFE_Y=Dd;var Yc=function(o){function $($){return o.call(this,{code:$,units:ta.METERS,extent:Rj,global:!0,worldExtent:Sj,getPointResolution:function(o,$){return o/Jo($[1]/Xc)}})||this}return No($,o),$}(Oj),Dg=[new Yc("EPSG:3857"),new Yc("EPSG:102100"),new Yc("EPSG:102113"),new Yc("EPSG:900913"),new Yc("http://www.opengis.net/def/crs/EPSG/0/3857"),new Yc("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Tj(o,$,t){var r=o.length,e=t>1?t:2,s=$;void 0===s&&(s=e>2?o.slice():new Array(r));for(var l=0;l<r;l+=e){s[l]=rc*o[l]/180;var n=Xc*Math.log(Math.tan(Math.PI*(+o[l+1]+90)/360));n>Dd?n=Dd:n<-Dd&&(n=-Dd),s[l+1]=n}return s}function Uj(o,$,t){var r=o.length,e=t>1?t:2,s=$;void 0===s&&(s=e>2?o.slice():new Array(r));for(var l=0;l<r;l+=e)s[l]=180*o[l]/rc,s[l+1]=360*Math.atan(Math.exp(o[l+1]/Xc))/Math.PI-90;return s}lb.PROJECTIONS=Dg,lb.fromEPSG4326=Tj,lb.toEPSG4326=Uj;var Zc={};var Oo=Zc&&Zc.__extends||function(){var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Vj=6378137;Zc.RADIUS=Vj;var Eg=[-180,-90,180,90];Zc.EXTENT=Eg;var Wj=Math.PI*Vj/180;Zc.METERS_PER_UNIT=Wj;var sc=function(n){function t(t,r){return n.call(this,{code:t,units:ta.DEGREES,extent:Eg,axisOrientation:r,global:!0,metersPerUnit:Wj,worldExtent:Eg})||this}return Oo(t,n),t}(Oj),Fg=[new sc("CRS:84"),new sc("EPSG:4326","neu"),new sc("urn:ogc:def:crs:OGC:1.3:CRS84"),new sc("urn:ogc:def:crs:OGC:2:84"),new sc("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new sc("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new sc("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];Zc.PROJECTIONS=Fg;var Gg={};function Po($){return Gg[$]||Gg[$.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Qo($,t){Gg[$]=t}var $c={};function Qe($,r,e){var t=$.getCode(),o=r.getCode();t in $c||($c[t]={}),$c[t][o]=e}function Ro($,r){var e;return $ in $c&&r in $c[$]&&(e=$c[$][r]),e}function So(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function To(t,e){var r=e.getRadius(),$=e.getCenter(),n=$[0],s=$[1],o=t[0]-n,a=t[1]-s;0===o&&0===a&&(o=1);var p=Math.sqrt(o*o+a*a);return[n+r*o/p,s+r*a/p]}function Re(t,e){var r,$,n=t[0],s=t[1],o=e[0],a=e[1],p=o[0],j=o[1],i=a[0],G=a[1],x=i-p,c=G-j,u=0===x&&0===c?0:(x*(n-p)+c*(s-j))/(x*x+c*c||0);return u<=0?(r=p,$=j):u>=1?(r=i,$=G):(r=p+u*x,$=j+u*c),[r,$]}function gb(t,e){for(var r=!0,$=t.length-1;$>=0;--$)if(t[$]!=e[$]){r=!1;break}return r}function Hg(t,e){var r=Math.cos(e),$=Math.sin(e),n=t[0]*r-t[1]*$,s=t[1]*r+t[0]*$;return t[0]=n,t[1]=s,t}function Uo(t,e){return t[0]*=e,t[1]*=e,t}function Za(t,e){var r=t[0]-e[0],$=t[1]-e[1];return r*r+$*$}function Ig(t,e){return Math.sqrt(Za(t,e))}function Jg(t,e){return Za(t,Re(t,e))}function Xj(t,e){if(e.canWrapX()){var r=ra(e.getExtent()),$=Vo(t,e,r);$&&(t[0]-=$*r)}return t}function Vo(t,e,r){var $=e.getExtent(),n=0;if(e.canWrapX()&&(t[0]<$[0]||t[0]>$[2])){var s=r||ra($);n=Math.floor((t[0]-$[0])/s)}return n}var Se=6371008.8;function Kg(t,e,r){var a=r||Se,$=Cb(t[1]),o=Cb(e[1]),n=(o-$)/2,i=Cb(e[0]-t[0])/2,s=Math.sin(n)*Math.sin(n)+Math.sin(i)*Math.sin(i)*Math.cos($)*Math.cos(o);return 2*a*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}function Lg(t,e){for(var r=0,a=0,$=t.length;a<$-1;++a)r+=Kg(t[a],t[a+1],e);return r}function Wo(t,e){var r=e||{},a=r.radius||Se,$=r.projection||"EPSG:3857",o=t.getType();"GeometryCollection"!==o&&(t=t.clone().transform($,"EPSG:4326"));var n,i,s,g,R,E,h=0;switch(o){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":h=Lg(n=t.getCoordinates(),a);break;case"MultiLineString":case"Polygon":for(s=0,g=(n=t.getCoordinates()).length;s<g;++s)h+=Lg(n[s],a);break;case"MultiPolygon":for(s=0,g=(n=t.getCoordinates()).length;s<g;++s)for(R=0,E=(i=n[s]).length;R<E;++R)h+=Lg(i[R],a);break;case"GeometryCollection":var q=t.getGeometries();for(s=0,g=q.length;s<g;++s)h+=Wo(q[s],e);break;default:throw new Error("Unsupported geometry type: "+o);}return h}function Te(t,e){for(var r=0,a=t.length,$=t[a-1][0],o=t[a-1][1],n=0;n<a;n++){var i=t[n][0],s=t[n][1];r+=Cb(i-$)*(2+Math.sin(Cb(o))+Math.sin(Cb(s))),$=i,o=s}return r*e*e/2}function Xo(t,e){var r=e||{},a=r.radius||Se,$=r.projection||"EPSG:3857",o=t.getType();"GeometryCollection"!==o&&(t=t.clone().transform($,"EPSG:4326"));var n,i,s,g,R,E,h=0;switch(o){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(n=t.getCoordinates(),h=Math.abs(Te(n[0],a)),s=1,g=n.length;s<g;++s)h-=Math.abs(Te(n[s],a));break;case"MultiPolygon":for(s=0,g=(n=t.getCoordinates()).length;s<g;++s)for(i=n[s],h+=Math.abs(Te(i[0],a)),R=1,E=i.length;R<E;++R)h-=Math.abs(Te(i[R],a));break;case"GeometryCollection":var q=t.getGeometries();for(s=0,g=q.length;s<g;++s)h+=Xo(q[s],e);break;default:throw new Error("Unsupported geometry type: "+o);}return h}function Yo(t,e,r,a){var $=a||Se,o=Cb(t[1]),n=Cb(t[0]),i=e/$,s=Math.asin(Math.sin(o)*Math.cos(i)+Math.cos(o)*Math.sin(i)*Math.cos(r)),g=n+Math.atan2(Math.sin(r)*Math.sin(i)*Math.cos(o),Math.cos(i)-Math.sin(o)*Math.sin(s));return[Pj(g),Pj(s)]}var Zo=!0;function $o(t){Zo=!(void 0===t||t)}function Mg(t,r,o){var $;if(void 0!==r){for(var e=0,i=t.length;e<i;++e)r[e]=t[e];$=r}else $=t.slice();return $}function Ng(t,r,o){if(void 0!==r&&t!==r){for(var $=0,e=t.length;$<e;++$)r[$]=t[$];t=r}return t}function _o(t){Qo(t.getCode(),t),Qe(t,t,Mg)}function ap(t){t.forEach(_o)}function wa(t){return"string"==typeof t?Po(t):t||null}function Ue(t,r,o,$){var e,i=(t=wa(t)).getPointResolutionFunc();if(i){if(e=i(r,o),$&&$!==t.getUnits())(a=t.getMetersPerUnit())&&(e=e*a/Pa[$])}else{var n=t.getUnits();if(n==ta.DEGREES&&!$||$==ta.DEGREES)e=r;else{var a,s=_c(t,wa("EPSG:4326"));if(s===Ng&&n!==ta.DEGREES)e=r*t.getMetersPerUnit();else{var h=[o[0]-r/2,o[1],o[0]+r/2,o[1],o[0],o[1]-r/2,o[0],o[1]+r/2];h=s(h,h,2),e=(Kg(h.slice(0,2),h.slice(2,4))+Kg(h.slice(4,6),h.slice(6,8)))/2}void 0!==(a=$?Pa[$]:t.getMetersPerUnit())&&(e/=a)}}return e}function Yj(t){ap(t),t.forEach(function(r){t.forEach(function(t){r!==t&&Qe(r,t,Mg)})})}function bp(t,r,o,$){t.forEach(function(t){r.forEach(function(r){Qe(t,r,o),Qe(r,t,$)})})}function Og(t,r){return t?"string"==typeof t?wa(t):t:wa(r)}function tc(t,r){if(t===r)return!0;var o=t.getUnits()===r.getUnits();return t.getCode()===r.getCode()?o:_c(t,r)===Mg&&o}function _c(t,r){var o=t.getCode(),$=r.getCode(),e=Ro(o,$);return e||(e=Ng),e}function Ed(t,r){return _c(wa(t),wa(r))}function Pg(t,r,o){return Ed(r,o)(t,void 0,t.length)}function Zj(t,r,o,$){var e=Ed(r,o);return Ho(t,e,void 0,$)}var hb=null;function Ra(){return hb}function ad(t,r){return hb?Pg(t,r,hb):t}function pa(t,r){return hb?Pg(t,hb,r):(Zo&&!gb(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(Zo=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Fd(t,r){return hb?Zj(t,r,hb):t}function Vb(t,r){return hb?Zj(t,hb,r):t}function cp(t,r){if(!hb)return t;var o=wa(r).getUnits(),$=hb.getUnits();return o&&$?t*Pa[o]/Pa[$]:t}function dp(){Yj(Dg),Yj(Fg),bp(Fg,Dg,Tj,Uj)}dp();function uc(r,t,e,$,o,a){for(var n=a||[],s=0,f=t;f<e;f+=$){var l=r[f],p=r[f+1];n[s++]=o[0]*l+o[2]*p+o[4],n[s++]=o[1]*l+o[3]*p+o[5]}return a&&n.length!=s&&(n.length=s),n}function Qg(r,t,e,$,o,a,n){for(var s=n||[],f=Math.cos(o),l=Math.sin(o),p=a[0],w=a[1],x=0,G=t;G<e;G+=$){var L=r[G]-p,v=r[G+1]-w;s[x++]=p+L*f-v*l,s[x++]=w+L*l+v*f;for(var h=G+2;h<G+$;++h)s[x++]=r[h]}return n&&s.length!=x&&(s.length=x),s}function ep(r,t,e,$,o,a,n,s){for(var f=s||[],l=n[0],p=n[1],w=0,x=t;x<e;x+=$){var G=r[x]-l,L=r[x+1]-p;f[w++]=l+o*G,f[w++]=p+a*L;for(var v=x+2;v<x+$;++v)f[w++]=r[v]}return s&&f.length!=w&&(f.length=w),f}function $j(r,t,e,$,o,a,n){for(var s=n||[],f=0,l=t;l<e;l+=$){s[f++]=r[l]+o,s[f++]=r[l+1]+a;for(var p=l+2;p<l+$;++p)s[f++]=r[p]}return n&&s.length!=f&&(s.length=f),s}var fp=vg&&vg.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),_j=kb(),Rg=function(t){function r(){var r=t.call(this)||this;return r.extent_=Qa(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=ko(function(t,r,e){if(!e)return this.getSimplifiedGeometry(r);var o=this.clone();return o.applyTransform(e),o.getSimplifiedGeometry(r)}),r}return fp(r,t),r.prototype.simplifyTransformed=function(t,r){return this.simplifyTransformedInternal(this.getRevision(),t,r)},r.prototype.clone=function(){return da()},r.prototype.closestPointXY=function(t,r,e,o){return da()},r.prototype.containsXY=function(t,r){var e=this.getClosestPoint([t,r]);return e[0]===t&&e[1]===r},r.prototype.getClosestPoint=function(t,r){var e=r||[NaN,NaN];return this.closestPointXY(t[0],t[1],e,1/0),e},r.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},r.prototype.computeExtent=function(t){return da()},r.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var r=this.computeExtent(this.extent_);(isNaN(r[0])||isNaN(r[1]))&&zd(r),this.extentRevision_=this.getRevision()}return Eo(this.extent_,t)},r.prototype.rotate=function(t,r){da()},r.prototype.scale=function(t,r,e){da()},r.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},r.prototype.getSimplifiedGeometry=function(t){return da()},r.prototype.getType=function(){return da()},r.prototype.applyTransform=function(t){da()},r.prototype.intersectsExtent=function(t){return da()},r.prototype.translate=function(t,r){da()},r.prototype.transform=function(t,r){var e=wa(t),o=e.getUnits()==ta.TILE_PIXELS?function(t,o,n){var s=e.getExtent(),i=e.getWorldExtent(),$=Ya(i)/Ya(s);return Ab(_j,i[0],i[3],$,-$,0,0,0),uc(t,0,t.length,n,_j,o),Ed(e,r)(t,o,n)}:Ed(e,r);return this.applyTransform(o),this},r}(Xa);vg.default=Rg;var gp=xd&&xd.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),Eb=function(t){function r(){var r=t.call(this)||this;return r.layout=sa.XY,r.stride=2,r.flatCoordinates=null,r}return gp(r,t),r.prototype.computeExtent=function(t){return Kj(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.getCoordinates=function(){return da()},r.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},r.prototype.getFlatCoordinates=function(){return this.flatCoordinates},r.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},r.prototype.getLayout=function(){return this.layout},r.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var r=this.getSimplifiedGeometryInternal(t);return r.getFlatCoordinates().length<this.flatCoordinates.length?r:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},r.prototype.getSimplifiedGeometryInternal=function(t){return this},r.prototype.getStride=function(){return this.stride},r.prototype.setFlatCoordinates=function(t,r){this.stride=Gd(t),this.layout=t,this.flatCoordinates=r},r.prototype.setCoordinates=function(t,r){da()},r.prototype.setLayout=function(t,r,e){var o;if(t)o=Gd(t);else{for(var i=0;i<e;++i){if(0===r.length)return this.layout=sa.XY,void(this.stride=2);r=r[0]}t=hp(o=r.length)}this.layout=t,this.stride=o},r.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},r.prototype.rotate=function(t,r){var e=this.getFlatCoordinates();if(e){var o=this.getStride();Qg(e,0,e.length,o,t,r,e),this.changed()}},r.prototype.scale=function(t,r,e){var o=r;void 0===o&&(o=t);var i=e;i||(i=oc(this.getExtent()));var n=this.getFlatCoordinates();if(n){var a=this.getStride();ep(n,0,n.length,a,t,o,i,n),this.changed()}},r.prototype.translate=function(t,r){var e=this.getFlatCoordinates();if(e){var o=this.getStride();$j(e,0,e.length,o,t,r,e),this.changed()}},r}(Rg);function hp(t){var r;return 2==t?r=sa.XY:3==t?r=sa.XYZ:4==t&&(r=sa.XYZM),r}function Gd(t){var r;return t==sa.XY?r=2:t==sa.XYZ||t==sa.XYM?r=3:t==sa.XYZM&&(r=4),r}function ak(t,r,e){var o=t.getFlatCoordinates();if(o){var i=t.getStride();return uc(o,0,o.length,i,r,e)}return null}xd.getStrideForLayout=Gd,xd.transformGeom2D=ak,xd.default=Eb;function bk(r,a,t,e,$,s,o){var n,i=r[a],l=r[a+1],M=r[t]-i,u=r[t+1]-l;if(0===M&&0===u)n=a;else{var x=(($-i)*M+(s-l)*u)/(M*M+u*u);if(x>1)n=t;else{if(x>0){for(var p=0;p<e;++p)o[p]=Db(r[a+p],r[t+p],x);return void(o.length=e)}n=a}}for(p=0;p<e;++p)o[p]=r[n+p];o.length=e}function Sg(r,a,t,e,$){var s=r[a],o=r[a+1];for(a+=e;a<t;a+=e){var n=r[a],i=r[a+1],l=pc(s,o,n,i);l>$&&($=l),s=n,o=i}return $}function Tg(r,a,t,e,$){for(var s=0,o=t.length;s<o;++s){var n=t[s];$=Sg(r,a,n,e,$),a=n}return $}function ip(r,a,t,e,$){for(var s=0,o=t.length;s<o;++s){var n=t[s];$=Tg(r,a,n,e,$),a=n[n.length-1]}return $}function Ug(r,a,t,e,$,s,o,n,i,l,M){if(a==t)return l;var u,x;if(0===$){if((x=pc(o,n,r[a],r[a+1]))<l){for(u=0;u<e;++u)i[u]=r[a+u];return i.length=e,x}return l}for(var p=M||[NaN,NaN],f=a+e;f<t;)if(bk(r,f-e,f,e,o,n,p),(x=pc(o,n,p[0],p[1]))<l){for(l=x,u=0;u<e;++u)i[u]=p[u];i.length=e,f+=e}else f+=e*Math.max((Math.sqrt(x)-Math.sqrt(l))/$|0,1);if(s&&(bk(r,t-e,a,e,o,n,p),(x=pc(o,n,p[0],p[1]))<l)){for(l=x,u=0;u<e;++u)i[u]=p[u];i.length=e}return l}function Vg(r,a,t,e,$,s,o,n,i,l,M){for(var u=M||[NaN,NaN],x=0,p=t.length;x<p;++x){var f=t[x];l=Ug(r,a,f,e,$,s,o,n,i,l,u),a=f}return l}function jp(r,a,t,e,$,s,o,n,i,l,M){for(var u=M||[NaN,NaN],x=0,p=t.length;x<p;++x){var f=t[x];l=Vg(r,a,f,e,$,s,o,n,i,l,u),a=f[f.length-1]}return l}function ck(e,r,t,o){for(var a=0,$=t.length;a<$;++a)e[r++]=t[a];return r}function Ve(e,r,t,o){for(var a=0,$=t.length;a<$;++a)for(var l=t[a],n=0;n<o;++n)e[r++]=l[n];return r}function Wg(e,r,t,o,a){for(var $=a||[],l=0,n=0,d=t.length;n<d;++n){var f=Ve(e,r,t[n],o);$[l++]=f,r=f}return $.length=l,$}function kp(e,r,t,o,a){for(var $=a||[],l=0,n=0,d=t.length;n<d;++n){var f=Wg(e,r,t[n],o,$[l]);$[l++]=f,r=f[f.length-1]}return $.length=l,$}function Xg(r,t,$,e,p,a,o){var n=($-t)/e;if(n<3){for(;t<$;t+=e)a[o++]=r[t],a[o++]=r[t+1];return o}var u=new Array(n);u[0]=1,u[n-1]=1;for(var i=[t,$-e],s=0;i.length>0;){for(var E=i.pop(),I=i.pop(),x=0,l=r[I],c=r[I+1],f=r[E],g=r[E+1],d=I+e;d<E;d+=e){var v=r[d],y=r[d+1],h=Lo(v,y,l,c,f,g);h>x&&(s=d,x=h)}x>p&&(u[(s-t)/e]=1,I+e<s&&i.push(I,s),s+e<E&&i.push(s,E))}for(d=0;d<n;++d)u[d]&&(a[o++]=r[t+d*e],a[o++]=r[t+d*e+1]);return o}function lp(r,t,$,e,p,a,o,n){for(var u=0,i=$.length;u<i;++u){var s=$[u];o=Xg(r,t,s,e,p,a,o),n.push(o),t=s}return o}function vc(r,t){return t*Math.round(r/t)}function mp(r,t,$,e,p,a,o){if(t==$)return o;var n,u,i=vc(r[t],p),s=vc(r[t+1],p);t+=e,a[o++]=i,a[o++]=s;do{if(n=vc(r[t],p),u=vc(r[t+1],p),(t+=e)==$)return a[o++]=n,a[o++]=u,o}while(n==i&&u==s);for(;t<$;){var E=vc(r[t],p),I=vc(r[t+1],p);if(t+=e,E!=n||I!=u){var x=n-i,l=u-s,c=E-i,f=I-s;x*f==l*c&&(x<0&&c<x||x==c||x>0&&c>x)&&(l<0&&f<l||l==f||l>0&&f>l)?(n=E,u=I):(a[o++]=n,a[o++]=u,i=n,s=u,n=E,u=I)}}return a[o++]=n,a[o++]=u,o}function dk(r,t,$,e,p,a,o,n){for(var u=0,i=$.length;u<i;++u){var s=$[u];o=mp(r,t,s,e,p,a,o),n.push(o),t=s}return o}function np(r,t,$,e,p,a,o,n){for(var u=0,i=$.length;u<i;++u){var s=$[u],E=[];o=dk(r,t,s,e,p,a,o,E),n.push(E),t=s[s.length-1]}return o}function Wb(r,n,t,e,o){for(var a=void 0!==o?o:[],l=0,i=n;i<t;i+=e)a[l++]=r.slice(i,i+e);return a.length=l,a}function Hd(r,n,t,e,o){for(var a=void 0!==o?o:[],l=0,i=0,$=t.length;i<$;++i){var f=t[i];a[l++]=Wb(r,n,f,e,a[l]),n=f}return a.length=l,a}function Yg(r,n,t,e,o){for(var a=void 0!==o?o:[],l=0,i=0,$=t.length;i<$;++i){var f=t[i];a[l++]=Hd(r,n,f,e,a[l]),n=f[f.length-1]}return a.length=l,a}function ek(r,n,$,e){for(var i=0,t=r[$-e],a=r[$-e+1];n<$;n+=e){var o=r[n],g=r[n+1];i+=a*o-t*g,t=o,a=g}return i/2}function fk(r,n,$,e){for(var i=0,t=0,a=$.length;t<a;++t){var o=$[t];i+=ek(r,n,o,e),n=o}return i}function op(r,n,$,e){for(var i=0,t=0,a=$.length;t<a;++t){var o=$[t];i+=fk(r,n,o,e),n=o[o.length-1]}return i}var pp=ug&&ug.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Zg=function(t){function e(e,r){var o=t.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?o.setCoordinates(e,r):o.setFlatCoordinates(r,e),o}return pp(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,o){return o<nc(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Sg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ug(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,o))},e.prototype.getArea=function(){return ek(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Wb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=Xg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,sa.XY)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ve(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Eb);ug.default=Zg;var $g={};var qp=$g&&$g.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),mb=function(t){function e(e,r){var o=t.call(this)||this;return o.setCoordinates(e,r),o}return qp(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,o){var n=this.flatCoordinates,i=pc(t,e,n[0],n[1]);if(i<o){for(var s=this.stride,a=0;a<s;++a)r[a]=n[a];return r.length=s,i}return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Me(this.flatCoordinates,t)},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return xg(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ck(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Eb);$g.default=mb;function gk(r,t,e,o,n,$,i){for(var a,v,s,N,p,f,u,g=n[$+1],D=[],U=0,l=e.length;U<l;++U){var x=e[U];for(N=r[x-o],f=r[x-o+1],a=t;a<x;a+=o)p=r[a],u=r[a+1],(g<=f&&u<=g||f<=g&&g<=u)&&(s=(g-f)/(u-f)*(p-N)+N,D.push(s)),N=p,f=u}var y=NaN,h=-1/0;for(D.sort(kc),N=D[0],a=1,v=D.length;a<v;++a){p=D[a];var A=Math.abs(p-N);A>h&&(s=(N+p)/2,_g(r,t,e,o,s,g)&&(y=s,h=A)),N=p}return isNaN(y)&&(y=n[$]),i?(i.push(y,g,h),i):[y,g,h]}function rp(r,t,e,o,n){for(var $=[],i=0,a=e.length;i<a;++i){var v=e[i];$=gk(r,t,v,o,n,2*i,$),t=v[v.length-1]}return $}function sp(n,r,t,i,e){return!zg(e,function(e){return!wc(n,r,t,i,e[0],e[1])})}function wc(n,r,t,i,e,$){for(var o=0,a=n[t-i],d=n[t-i+1];r<t;r+=i){var s=n[r],l=n[r+1];d<=$?l>$&&(s-a)*($-d)-(e-a)*(l-d)>0&&o++:l<=$&&(s-a)*($-d)-(e-a)*(l-d)<0&&o--,a=s,d=l}return 0!==o}function _g(n,r,t,i,e,$){if(0===t.length)return!1;if(!wc(n,r,t[0],i,e,$))return!1;for(var o=1,a=t.length;o<a;++o)if(wc(n,t[o-1],t[o],i,e,$))return!1;return!0}function tp(n,r,t,i,e,$){if(0===t.length)return!1;for(var o=0,a=t.length;o<a;++o){var d=t[o];if(_g(n,r,d,i,e,$))return!0;r=d[d.length-1]}return!1}function We(r,i,t,e,n){var $=Mj(Qa(),r,i,t,e);return!!Ka(n,$)&&(!!Ub(n,$)||$[0]>=n[0]&&$[2]<=n[2]||$[1]>=n[1]&&$[3]<=n[3]||jk(r,i,t,e,function(r,i){return Go(n,r,i)}))}function up(r,i,t,e,n){for(var $=0,s=t.length;$<s;++$){if(We(r,i,t[$],e,n))return!0;i=t[$]}return!1}function hk(r,i,t,e,n){return!!We(r,i,t,e,n)||!!wc(r,i,t,e,n[0],n[1])||!!wc(r,i,t,e,n[0],n[3])||!!wc(r,i,t,e,n[2],n[1])||!!wc(r,i,t,e,n[2],n[3])}function ik(r,i,t,e,n){if(!hk(r,i,t[0],e,n))return!1;if(1===t.length)return!0;for(var $=1,s=t.length;$<s;++$)if(sp(r,t[$-1],t[$],e,n)&&!We(r,t[$-1],t[$],e,n))return!1;return!0}function vp(r,i,t,e,n){for(var $=0,s=t.length;$<s;++$){var o=t[$];if(ik(r,i,o,e,n))return!0;i=o[o.length-1]}return!1}function jk(r,$,o,e,i){var t;for($+=e;$<o;$+=e)if(t=i(r.slice($-e,$),r.slice($,$+e)))return t;return!1}function kk(r,e,n,i){for(var $=0,t=r[n-i],o=r[n-i+1];e<n;e+=i){var s=r[e],c=r[e+1];$+=(s-t)*(c+o),t=s,o=c}return 0===$?void 0:$>0}function lk(r,e,n,i,$){for(var t=void 0!==$&&$,o=0,s=n.length;o<s;++o){var c=n[o],a=kk(r,e,c,i);if(0===o){if(t&&a||!t&&!a)return!1}else if(t&&!a||!t&&a)return!1;e=c}return!0}function wp(r,e,n,i,$){for(var t=0,o=n.length;t<o;++t){var s=n[t];if(!lk(r,e,s,i,$))return!1;s.length&&(e=s[s.length-1])}return!0}function ah(r,e,n,i,$){for(var t=void 0!==$&&$,o=0,s=n.length;o<s;++o){var c=n[o],a=kk(r,e,c,i);(0===o?t&&a||!t&&!a:t&&!a||!t&&a)&&xp(r,e,c,i),e=c}return e}function mk(r,e,n,i,$){for(var t=0,o=n.length;t<o;++t)e=ah(r,e,n[t],i,$);return e}function xp(o,r,e,$){for(;r<e-$;){for(var t=0;t<$;++t){var a=o[r+t];o[r+t]=o[e-$+t],o[e-$+t]=a}r+=$,e-=$}}var yp=mc&&mc.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),nb=function(t){function e(e,r,i){var o=t.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==r&&i?(o.setFlatCoordinates(r,e),o.ends_=i):o.setCoordinates(e,r),o}return yp(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?Wa(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,i){return i<nc(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Tg(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vg(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,i))},e.prototype.containsXY=function(t,e){return _g(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return fk(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),ah(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Hd(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=oc(this.getExtent());this.flatInteriorPoint_=gk(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new mb(this.getFlatInteriorPoint(),sa.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Zg(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,i=[],o=0,n=0,s=r.length;n<s;++n){var a=r[n],$=new Zg(e.slice(o,a),t);i.push($),o=a}return i},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;lk(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ah(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=dk(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,i),new e(r,sa.XY,i)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return ik(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Wg(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(Eb);function zp(t,e,r,i){for(var o=r||32,n=[],s=0;s<o;++s)Wa(n,Yo(t,e,2*Math.PI*s/o,i));return n.push(n[0],n[1]),new nb(n,sa.XY,[n.length])}function xc(t){var e=t[0],r=t[1],i=t[2],o=t[3],n=[e,r,e,o,i,o,i,r,e,r];return new nb(n,sa.XY,[n.length])}function Id(t,e,r){for(var i=e||32,o=t.getStride(),n=t.getLayout(),s=t.getCenter(),a=o*(i+1),$=new Array(a),l=0;l<a;l+=o){$[l]=0,$[l+1]=0;for(var w=2;w<o;w++)$[l+w]=s[w]}var p=[$.length],h=new nb($,n,p);return bh(h,s,t.getRadius(),r),h}function bh(t,e,r,i){for(var o=t.getFlatCoordinates(),n=t.getStride(),s=o.length/n-1,a=i||0,$=0;$<=s;++$){var l=$*n,w=a+2*qc($,s)*Math.PI/s;o[l]=e[0]+r*Math.cos(w),o[l+1]=e[1]+r*Math.sin(w)}t.changed()}mc.default=nb,mc.circular=zp,mc.fromExtent=xc,mc.fromCircle=Id,mc.makeRegular=bh;var Xb={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var Xe=function(){function o(o){var r=o||{};this.color_=void 0!==r.color?r.color:null}return o.prototype.clone=function(){var r=this.getColor();return new o({color:Array.isArray(r)?r.slice():r||void 0})},o.prototype.getColor=function(){return this.color_},o.prototype.setColor=function(o){this.color_=o},o}();var ch={};function nk(r,e,t,n,i,o,$){var l,a,u=(t-e)/n;if(1===u)l=e;else if(2===u)l=e,a=i;else if(0!==u){for(var p=r[e],f=r[e+1],s=0,q=[0],v=e+n;v<t;v+=n){var D=r[v],T=r[v+1];s+=Math.sqrt((D-p)*(D-p)+(T-f)*(T-f)),q.push(s),p=D,f=T}var c=i*s,g=lo(q,c);g<0?(a=(c-q[-g-2])/(q[-g-1]-q[-g-2]),l=e+(-g-2)*n):l=e+g*n}var x=$>1?$:2,d=o||new Array(x);for(v=0;v<x;++v)d[v]=void 0===l?NaN:void 0===a?r[l+v]:Db(r[l+v],r[l+n+v],a);return d}function dh(r,e,t,n,i,o){if(t==e)return null;var $;if(i<r[e+n-1])return o?(($=r.slice(e,e+n))[n-1]=i,$):null;if(r[t-1]<i)return o?(($=r.slice(t-n,t))[n-1]=i,$):null;if(i==r[e+n-1])return r.slice(e,e+n);for(var l=e/n,a=t/n;l<a;){var u=l+a>>1;i<r[(u+1)*n-1]?a=u:l=u+1}var p=r[l*n-1];if(i==p)return r.slice((l-1)*n,(l-1)*n+n);var f=(i-p)/(r[(l+1)*n-1]-p);$=[];for(var s=0;s<n-1;++s)$.push(Db(r[(l-1)*n+s],r[l*n+s],f));return $.push(i),$}function Ap(r,e,t,n,i,o,$){if($)return dh(r,e,t[t.length-1],n,i,o);var l;if(i<r[n-1])return o?((l=r.slice(0,n))[n-1]=i,l):null;if(r[r.length-1]<i)return o?((l=r.slice(r.length-n))[n-1]=i,l):null;for(var a=0,u=t.length;a<u;++a){var p=t[a];if(e!=p){if(i<r[e+n-1])return null;if(i<=r[p-1])return dh(r,e,p,n,i,!1);e=p}}return null}function ok(r,n,t,e){for(var $=r[n],i=r[n+1],x=0,Z=n+e;Z<t;Z+=e){var g=r[Z],o=r[Z+1];x+=Math.sqrt((g-$)*(g-$)+(o-i)*(o-i)),$=g,i=o}return x}var Bp=ch&&ch.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),yc=function(t){function e(e,i){var o=t.call(this)||this;return o.flatMidpoint_=null,o.flatMidpointRevision_=-1,o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?o.setCoordinates(e,i):o.setFlatCoordinates(i,e),o}return Bp(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Wa(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,o){return o<nc(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Sg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ug(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,o))},e.prototype.forEachSegment=function(t){return jk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=sa.XYM&&this.layout!=sa.XYZM)return null;var i=void 0!==e&&e;return dh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Wb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return nk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return ok(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Xg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,sa.XY)},e.prototype.getType=function(){return"LineString"},e.prototype.intersectsExtent=function(t){return We(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ve(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Eb);ch.default=yc;var Jd=function(){function t(t){var i=t||{};this.color_=void 0!==i.color?i.color:null,this.lineCap_=i.lineCap,this.lineDash_=void 0!==i.lineDash?i.lineDash:null,this.lineDashOffset_=i.lineDashOffset,this.lineJoin_=i.lineJoin,this.miterLimit_=i.miterLimit,this.width_=i.width}return t.prototype.clone=function(){var i=this.getColor();return new t({color:Array.isArray(i)?i.slice():i||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();var eh={};var fh={};var qa={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function pk($){return $[0]>0&&$[1]>0}function Cp($,r,e){return void 0===e&&(e=[0,0]),e[0]=$[0]*r+.5|0,e[1]=$[1]*r+.5|0,e}function ib($,r){return Array.isArray($)?$:(void 0===r?r=[$,$]:(r[0]=$,r[1]=$),r)}var qk=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=ib(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getDeclutterMode=function(){return this.declutterMode_},t.prototype.getAnchor=function(){return da()},t.prototype.getImage=function(t){return da()},t.prototype.getHitDetectionImage=function(){return da()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return da()},t.prototype.getImageSize=function(){return da()},t.prototype.getOrigin=function(){return da()},t.prototype.getSize=function(){return da()},t.prototype.setDisplacement=function(t){this.displacement_=t},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=ib(t)},t.prototype.listenImageChange=function(t){da()},t.prototype.load=function(){da()},t.prototype.unlistenImageChange=function(t){da()},t}();var Dp=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Ep=/^([a-z]*)$|^hsla?\(.*\)$/i;function rk(r){return"string"==typeof r?r:tk(r)}function Fp(r){var e=document.createElement("div");if(e.style.color=r,""!==e.style.color){document.body.appendChild(e);var $=getComputedStyle(e).color;return document.body.removeChild(e),$}return""}var Gp=function(){var r={},e=0;return function($){var t;if(r.hasOwnProperty($))t=r[$];else{if(e>=1024){var o=0;for(var a in r)0==(3&o++)&&(delete r[a],--e)}t=Hp($),r[$]=t,++e}return t}}();function Ye(r){return Array.isArray(r)?r:Gp(r)}function Hp(r){var e,$,t,o,a;if(Ep.exec(r)&&(r=Fp(r)),Dp.exec(r)){var u=r.length-1,n=void 0;n=u<=4?1:2;var c=4===u||8===u;e=parseInt(r.substr(1+0*n,n),16),$=parseInt(r.substr(1+1*n,n),16),t=parseInt(r.substr(1+2*n,n),16),o=c?parseInt(r.substr(1+3*n,n),16):255,1==n&&(e=(e<<4)+e,$=($<<4)+$,t=(t<<4)+t,c&&(o=(o<<4)+o)),a=[e,$,t,o/255]}else 0==r.indexOf("rgba(")?sk(a=r.slice(5,-1).split(",").map(Number)):0==r.indexOf("rgb(")?((a=r.slice(4,-1).split(",").map(Number)).push(1),sk(a)):ha(!1,14);return a}function sk(r){return r[0]=va(r[0]+.5|0,0,255),r[1]=va(r[1]+.5|0,0,255),r[2]=va(r[2]+.5|0,0,255),r[3]=va(r[3],0,1),r}function tk(r){var e=r[0];e!=(0|e)&&(e=e+.5|0);var $=r[1];$!=(0|$)&&($=$+.5|0);var t=r[2];return t!=(0|t)&&(t=t+.5|0),"rgba("+e+","+$+","+t+","+(void 0===r[3]?1:Math.round(100*r[3])/100)+")"}function ob(r){return Array.isArray(r)?tk(r):r}function Sa(e,o,r,t){var n;return n=r&&r.length?r.shift():Ke?new OffscreenCanvas(e||300,o||300):document.createElement("canvas"),e&&(n.width=e),o&&(n.height=o),n.getContext("2d",t)}function uk(e){var o=e.canvas;o.width=1,o.height=1,e.clearRect(0,0,1,1)}function Ip(e){var o=e.offsetWidth,r=getComputedStyle(e);return o+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function Jp(e){var o=e.offsetHeight,r=getComputedStyle(e);return o+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function bd(e,o){var r=o.parentNode;r&&r.replaceChild(e,o)}function Ze(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function vk(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function Kp(e,o){for(var r=e.childNodes,t=0;;++t){var n=r[t],$=o[t];if(!n&&!$)break;n!==$&&(n?$?e.insertBefore($,n):(e.removeChild(n),--t):e.appendChild($))}}var _e="ol-hidden";var Lp="ol-selectable";var pb="ol-unselectable";var wk="ol-unsupported";var zc="ol-control";var af="ol-collapsed";var Mp=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),xk=["style","variant","weight","size","lineHeight","family"],yk=function(e){var $=e.match(Mp);if(!$)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},t=0,a=xk.length;t<a;++t){var o=$[t+1];void 0!==o&&(r[xk[t]]=o)}return r.families=r.family.split(/,\s?/),r};var zk="10px sans-serif";var Fb="#000";var bf="round";var Kd=[];var Ld=0;var cd="round";var Md=10;var Nd="#000";var Od="center";var cf="middle";var Ac=[0,0,0,0];var Pd=1;var Gb=new Xa;var Np=new lc;Np.setSize=function(){console.warn("labelCache is deprecated.")};var Op,df=null,gh={};var Pp=function(){var e,t,$=100,r="32px ",i=["monospace","serif"],a=i.length,o="wmytzilWMYTZIL@#/&?$%10\uF013";function n(e,$,n){for(var s=!0,x=0;x<a;++x){var l=i[x];if(t=ef(e+" "+$+" "+r+l,o),n!=l){var A=ef(e+" "+$+" "+r+n+","+l,o);s=s&&A!=t}}return!!s}function s(){for(var t=!0,r=Gb.getKeys(),i=0,a=r.length;i<a;++i){var o=r[i];Gb.get(o)<$&&(n.apply(this,o.split("\n"))?(Rc(gh),df=null,Op=void 0,Gb.set(o,$)):(Gb.set(o,Gb.get(o)+1,!0),t=!1))}t&&(clearInterval(e),e=void 0)}return function(t){var r=yk(t);if(r)for(var i=r.families,a=0,o=i.length;a<o;++a){var x=i[a],l=r.style+"\n"+r.weight+"\n"+x;void 0===Gb.get(l)&&(Gb.set(l,$,!0),n(r.style,r.weight,x)||(Gb.set(l,0,!0),void 0===e&&(e=setInterval(s,32))))}}}();var Qp=function(){var e;return function(t){var $=gh[t];if(null==$){if(Ke){var r=yk(t),i=Ak(t,"\u017Dg");$=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else e||((e=document.createElement("div")).innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),$=e.offsetHeight,document.body.removeChild(e);gh[t]=$}return $}}();function Ak(e,t){return df||(df=Sa(1,1)),e!=Op&&(df.font=e,Op=df.font),df.measureText(t)}function ef(e,t){return Ak(e,t).width}function Bk(e,t,$){if(t in $)return $[t];var r=t.split("\n").reduce(function(t,$){return Math.max(t,ef(e,$))},0);return $[t]=r,r}function Rp(e,t){for(var $=[],r=[],i=[],a=0,o=0,n=0,s=0,x=0,l=t.length;x<=l;x+=2){var A=t[x];if("\n"!==A&&x!==l){var p=t[x+1]||e.font,u=ef(p,A);$.push(u),o+=u;var G=Qp(p);r.push(G),s=Math.max(s,G)}else a=Math.max(a,o),i.push(o),o=0,n+=s}return{width:a,height:n,widths:$,heights:r,lineWidths:i}}function Sp(e,t,$,r,i,a,o,n,s,x,l){e.save(),1!==$&&(e.globalAlpha*=$),t&&e.setTransform.apply(e,t),r.contextInstructions?(e.translate(s,x),e.scale(l[0],l[1]),Tp(r,e)):l[0]<0||l[1]<0?(e.translate(s,x),e.scale(l[0],l[1]),e.drawImage(r,i,a,o,n,0,0,o,n)):e.drawImage(r,i,a,o,n,s,x,o*l[0],n*l[1]),e.restore()}function Tp(e,t){for(var $=e.contextInstructions,r=0,i=$.length;r<i;r+=2)Array.isArray($[r+1])?t[$[r]].apply(t,$[r+1]):t[$[r]]=$[r+1]}var Up=fh&&fh.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ck=function(t){function i(i){var e=this,r=void 0!==i.rotateWithView&&i.rotateWithView;return(e=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==i.rotation?i.rotation:0,scale:void 0!==i.scale?i.scale:1,displacement:void 0!==i.displacement?i.displacement:[0,0],declutterMode:i.declutterMode})||this).canvas_=void 0,e.hitDetectionCanvas_=null,e.fill_=void 0!==i.fill?i.fill:null,e.origin_=[0,0],e.points_=i.points,e.radius_=void 0!==i.radius?i.radius:i.radius1,e.radius2_=i.radius2,e.angle_=void 0!==i.angle?i.angle:0,e.stroke_=void 0!==i.stroke?i.stroke:null,e.size_=null,e.renderOptions_=null,e.render(),e}return Up(i,t),i.prototype.clone=function(){var t=this.getScale(),e=new i({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e},i.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var i=this.getDisplacement();return[t[0]/2-i[0],t[1]/2+i[1]]},i.prototype.getAngle=function(){return this.angle_},i.prototype.getFill=function(){return this.fill_},i.prototype.setFill=function(t){this.fill_=t,this.render()},i.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},i.prototype.getImage=function(t){var i=this.canvas_[t];if(!i){var e=this.renderOptions_,r=Sa(e.size*t,e.size*t);this.draw_(e,r,t),i=r.canvas,this.canvas_[t]=i}return i},i.prototype.getPixelRatio=function(t){return t},i.prototype.getImageSize=function(){return this.size_},i.prototype.getImageState=function(){return qa.LOADED},i.prototype.getOrigin=function(){return this.origin_},i.prototype.getPoints=function(){return this.points_},i.prototype.getRadius=function(){return this.radius_},i.prototype.getRadius2=function(){return this.radius2_},i.prototype.getSize=function(){return this.size_},i.prototype.getStroke=function(){return this.stroke_},i.prototype.setStroke=function(t){this.stroke_=t,this.render()},i.prototype.listenImageChange=function(t){},i.prototype.load=function(){},i.prototype.unlistenImageChange=function(t){},i.prototype.calculateLineJoinSize_=function(t,i,e){if(0===i||this.points_===1/0||"bevel"!==t&&"miter"!==t)return i;var r=this.radius_,o=void 0===this.radius2_?r:this.radius2_;if(r<o){var s=r;r=o,o=s}var n=void 0===this.radius2_?this.points_:2*this.points_,a=2*Math.PI/n,l=o*Math.sin(a),h=r-Math.sqrt(o*o-l*l),u=Math.sqrt(l*l+h*h),p=u/l;if("miter"===t&&p<=e)return p*i;var c=i/2/p,d=i/2*(h/u),f=Math.sqrt((r+c)*(r+c)+d*d)-r;if(void 0===this.radius2_||"bevel"===t)return 2*f;var _=r*Math.sin(a),$=o-Math.sqrt(r*r-_*_),v=Math.sqrt(_*_+$*$)/_;if(v<=e){var g=v*i/2-o-r;return 2*Math.max(f,g)}return 2*f},i.prototype.createRenderOptions=function(){var t,i=cd,e=0,r=null,o=0,s=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=Nd),t=ob(t),void 0===(s=this.stroke_.getWidth())&&(s=Pd),r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(i=this.stroke_.getLineJoin())&&(i=cd),void 0===(e=this.stroke_.getMiterLimit())&&(e=Md));var n=this.calculateLineJoinSize_(i,s,e),a=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:s,size:Math.ceil(2*a+n),lineDash:r,lineDashOffset:o,lineJoin:i,miterLimit:e}},i.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},i.prototype.draw_=function(t,i,e){if(i.scale(e,e),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){var r=this.fill_.getColor();null===r&&(r=Fb),i.fillStyle=ob(r),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.setLineDash&&t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())},i.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var i=this.fill_.getColor(),e=0;if("string"==typeof i&&(i=Ye(i)),null===i?e=1:Array.isArray(i)&&(e=4===i.length?i[3]:1),0===e){var r=Sa(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},i.prototype.createPath_=function(t){var i=this.points_,e=this.radius_;if(i===1/0)t.arc(0,0,e,0,2*Math.PI);else{var r=void 0===this.radius2_?e:this.radius2_;void 0!==this.radius2_&&(i*=2);for(var o=this.angle_-Math.PI/2,s=2*Math.PI/i,n=0;n<i;n++){var a=o+n*s,l=n%2==0?e:r;t.lineTo(l*Math.cos(a),l*Math.sin(a))}t.closePath()}},i.prototype.drawHitDetectionCanvas_=function(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=Fb,i.fill(),this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())},i}(qk);fh.default=Ck;var Vp=eh&&eh.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),ff=function(t){function e(e){var o=e||{};return t.call(this,{points:1/0,fill:o.fill,radius:o.radius,stroke:o.stroke,scale:void 0!==o.scale?o.scale:1,rotation:void 0!==o.rotation?o.rotation:0,rotateWithView:void 0!==o.rotateWithView&&o.rotateWithView,displacement:void 0!==o.displacement?o.displacement:[0,0],declutterMode:o.declutterMode})||this}return Vp(e,t),e.prototype.clone=function(){var t=this.getScale(),o=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return o.setOpacity(this.getOpacity()),o},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(Ck);eh.default=ff;var dd=function(){function e(e){var t=e||{};this.geometry_=null,this.geometryFunction_=Ek,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return e.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.setRenderer=function(e){this.renderer_=e},e.prototype.setHitDetectionRenderer=function(e){this.hitDetectionRenderer_=e},e.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},e.prototype.getGeometry=function(){return this.geometry_},e.prototype.getGeometryFunction=function(){return this.geometryFunction_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(e){this.fill_=e},e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(e){this.image_=e},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(e){this.stroke_=e},e.prototype.getText=function(){return this.text_},e.prototype.setText=function(e){this.text_=e},e.prototype.getZIndex=function(){return this.zIndex_},e.prototype.setGeometry=function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Ek,this.geometry_=e},e.prototype.setZIndex=function(e){this.zIndex_=e},e}();function Wp(e){var t;if("function"==typeof e)t=e;else{var r;if(Array.isArray(e))r=e;else ha("function"==typeof e.getZIndex,41),r=[e];t=function(){return r}}return t}var Dk=null;function Xp(e,t){if(!Dk){var r=new Xe({color:"rgba(255,255,255,0.4)"}),o=new Jd({color:"#3399CC",width:1.25});Dk=[new dd({image:new ff({fill:r,stroke:o,radius:5}),fill:r,stroke:o})]}return Dk}function Qd(){var e={},t=[255,255,255,1],r=[0,153,255,1];return e.Polygon=[new dd({fill:new Xe({color:[255,255,255,.5]})})],e.MultiPolygon=e.Polygon,e.LineString=[new dd({stroke:new Jd({color:t,width:5})}),new dd({stroke:new Jd({color:r,width:3})})],e.MultiLineString=e.LineString,e.Circle=e.Polygon.concat(e.LineString),e.Point=[new dd({image:new ff({radius:6,fill:new Xe({color:r}),stroke:new Jd({color:t,width:1.5})}),zIndex:1/0})],e.MultiPoint=e.Point,e.GeometryCollection=e.Polygon.concat(e.LineString,e.Point),e}function Ek(e){return e.getGeometry()}var Yp={POINT:"point",LINE:"line"};var hh={};var ih={};var gf={};var jh={};var oa={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var Zp=jh&&jh.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),kh=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un,r.background_=e.background;var o=ya({},e);return"object"==typeof e.properties&&(delete o.properties,ya(o,e.properties)),o[oa.OPACITY]=void 0!==e.opacity?e.opacity:1,ha("number"==typeof o[oa.OPACITY],64),o[oa.VISIBLE]=void 0===e.visible||e.visible,o[oa.Z_INDEX]=e.zIndex,o[oa.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,o[oa.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,o[oa.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,o[oa.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==o.className?o.className:"ol-layer",delete o.className,r.setProperties(o),r.state_=null,r}return Zp(e,t),e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=va(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r||e.managed?r:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return da()},e.prototype.getLayerStatesArray=function(t){return da()},e.prototype.getExtent=function(){return this.get(oa.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(oa.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(oa.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(oa.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(oa.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(oa.OPACITY)},e.prototype.getSourceState=function(){return da()},e.prototype.getVisible=function(){return this.get(oa.VISIBLE)},e.prototype.getZIndex=function(){return this.get(oa.Z_INDEX)},e.prototype.setBackground=function(t){this.background_=t,this.changed()},e.prototype.setExtent=function(t){this.set(oa.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(oa.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(oa.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(oa.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(oa.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){ha("number"==typeof t,64),this.set(oa.OPACITY,t)},e.prototype.setVisible=function(t){this.set(oa.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(oa.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(Xa);jh.default=kh;var $p=gf&&gf.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])})(r,t)};return function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rd=function(e){function r(r){var t=this,n=ya({},r);delete n.source,(t=e.call(this,n)||this).on,t.once,t.un,t.mapPrecomposeKey_=null,t.mapRenderKey_=null,t.sourceChangeKey_=null,t.renderer_=null,t.rendered=!1,r.render&&(t.render=r.render),r.map&&t.setMap(r.map),t.addChangeListener(oa.SOURCE,t.handleSourcePropertyChange_);var o=r.source?r.source:null;return t.setSource(o),t}return $p(r,e),r.prototype.getLayersArray=function(e){var r=e||[];return r.push(this),r},r.prototype.getLayerStatesArray=function(e){var r=e||[];return r.push(this.getLayerState()),r},r.prototype.getSource=function(){return this.get(oa.SOURCE)||null},r.prototype.getRenderSource=function(){return this.getSource()},r.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():"undefined"},r.prototype.handleSourceChange_=function(){this.changed()},r.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(la(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=ea(e,ba.CHANGE,this.handleSourceChange_,this)),this.changed()},r.prototype.getFeatures=function(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(function(e){return e([])})},r.prototype.getData=function(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null},r.prototype.render=function(e,r){var t=this.getRenderer();if(t.prepareFrame(e))return this.rendered=!0,t.renderFrame(e,r)},r.prototype.unrender=function(){this.rendered=!1},r.prototype.setMapInternal=function(e){e||this.unrender(),this.set(oa.MAP,e)},r.prototype.getMapInternal=function(){return this.get(oa.MAP)},r.prototype.setMap=function(e){this.mapPrecomposeKey_&&(la(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(la(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=ea(e,Xb.PRECOMPOSE,function(e){var r=e.frameState.layerStatesArray,t=this.getLayerState(!1);ha(!r.some(function(e){return e.layer===t.layer}),67),r.push(t)},this),this.mapRenderKey_=ea(this,ba.CHANGE,e.render,e),this.changed())},r.prototype.setSource=function(e){this.set(oa.SOURCE,e)},r.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},r.prototype.hasRenderer=function(){return!!this.renderer_},r.prototype.createRenderer=function(){return null},r.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},r}(kh);function Sd(e,r){if(!e.visible)return!1;var t=r.resolution;if(t<e.minResolution||t>=e.maxResolution)return!1;var n=r.zoom;return n>e.minZoom&&n<=e.maxZoom}gf.inView=Sd,gf.default=Rd;var lh,hf={};!function(t,i){"object"==typeof hf?hf=i():"function"==typeof lh&&lh.amd?lh(i):(t=t||self).RBush=i()}(hf,function(){function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1);t(n,r,Math.max(e,Math.floor(r-s*f/o+u)),Math.min(a,Math.floor(r+(o-s)*f/o+u)),h)}var c=n[r],m=e,p=a;for(i(n,e,r),h(n[a],c)>0&&i(n,e,a);m<p;){for(i(n,m,p),m++,p--;h(n[m],c)<0;)m++;for(;h(n[p],c)>0;)p--}0===h(n[e],c)?i(n,e,p):i(n,++p,a),p<=r&&(e=p+1),r<=p&&(a=p-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function c(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function m(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!m(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;m(t,o)&&(i.leaf?n.push(h):c(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!m(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(m(t,a)){if(i.leaf||c(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!c(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var c=f;c<=u;c+=s){var m=Math.min(c+s-1,u);e.children.push(this._build(t,c,m,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(c=t,m=s,(Math.max(m.maxX,c.maxX)-Math.min(m.minX,c.minX))*(Math.max(m.maxY,c.maxY)-Math.min(m.minY,c.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var c,m;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,c=1/0,m=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,void 0,void 0,void 0,void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),X=f(d)+f(x);v<c?(c=v,r=p,m=X<m?X:m):v===c&&X<m&&(m=X,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var c=t.children[f];o(a,t.leaf?e(c):c),l+=u(a)}for(var m=n-i-1;m>=i;m--){var p=t.children[m];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});var _p=ih&&ih.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fk={RENDER_ORDER:"renderOrder"},Gk=function(t){function e(e){var r=this,n=e||{},o=ya({},n);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(r=t.call(this,o)||this).declutter_=void 0!==n.declutter&&n.declutter,r.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(n.style),r.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,r.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,r}return _p(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(Fk.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){var $XGea$$interop$default=zj(hf);t.declutterTree||(t.declutterTree=new $XGea$$interop$default.d(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(Fk.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:Xp,this.styleFunction_=null===t?void 0:Wp(this.style_),this.changed()},e}(Rd);ih.default=Gk;var mh={};var nh={};var ca={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},jf=[ca.FILL];var Yb=[ca.STROKE];var Bc=[ca.BEGIN_PATH];var Hk=[ca.CLOSE_PATH];var Ik=function(){function t(){}return t.prototype.drawCustom=function(t,o,e,n){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,o){},t.prototype.drawFeature=function(t,o){},t.prototype.drawGeometryCollection=function(t,o){},t.prototype.drawLineString=function(t,o){},t.prototype.drawMultiLineString=function(t,o){},t.prototype.drawMultiPoint=function(t,o){},t.prototype.drawMultiPolygon=function(t,o){},t.prototype.drawPoint=function(t,o){},t.prototype.drawPolygon=function(t,o){},t.prototype.drawText=function(t,o){},t.prototype.setFillStrokeStyle=function(t,o){},t.prototype.setImageStyle=function(t,o){},t.prototype.setTextStyle=function(t,o){},t}();var aq=nh&&nh.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ed=function(t){function i(i,e,n,r){var o=t.call(this)||this;return o.tolerance=i,o.maxExtent=e,o.pixelRatio=r,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return aq(i,t),i.prototype.applyPixelRatio=function(t){var i=this.pixelRatio;return 1==i?t:t.map(function(t){return t*i})},i.prototype.appendFlatPointCoordinates=function(t,i){for(var e=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,r=this.coordinates,o=r.length,s=0,a=t.length;s<a;s+=i)n[0]=t[s],n[1]=t[s+1],yd(e,n)&&(r[o++]=n[0],r[o++]=n[1]);return o},i.prototype.appendFlatLineCoordinates=function(t,i,e,n,r,o){var s=this.coordinates,a=s.length,u=this.getBufferedMaxExtent();o&&(i+=n);var l,$,p,c=t[i],h=t[i+1],d=this.tmpCoordinate_,f=!0;for(l=i+n;l<e;l+=n)d[0]=t[l],d[1]=t[l+1],(p=yg(u,d))!==$?(f&&(s[a++]=c,s[a++]=h,f=!1),s[a++]=d[0],s[a++]=d[1]):p===Ca.INTERSECTING?(s[a++]=d[0],s[a++]=d[1],f=!1):f=!0,c=d[0],h=d[1],$=p;return(r&&f||l===i+n)&&(s[a++]=c,s[a++]=h),a},i.prototype.drawCustomCoordinates_=function(t,i,e,n,r){for(var o=0,s=e.length;o<s;++o){var a=e[o],u=this.appendFlatLineCoordinates(t,i,a,n,!1,!1);r.push(u),i=a}return i},i.prototype.drawCustom=function(t,i,e,n){this.beginGeometry(t,i);var r,o,s,a,u,l=t.getType(),$=t.getStride(),p=this.coordinates.length;switch(l){case"MultiPolygon":r=t.getOrientedFlatCoordinates(),a=[];var c=t.getEndss();u=0;for(var h=0,d=c.length;h<d;++h){var f=[];u=this.drawCustomCoordinates_(r,u,c[h],$,f),a.push(f)}this.instructions.push([ca.CUSTOM,p,a,t,e,Yg]),this.hitDetectionInstructions.push([ca.CUSTOM,p,a,t,n||e,Yg]);break;case"Polygon":case"MultiLineString":s=[],r="Polygon"==l?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(r,0,t.getEnds(),$,s),this.instructions.push([ca.CUSTOM,p,s,t,e,Hd]),this.hitDetectionInstructions.push([ca.CUSTOM,p,s,t,n||e,Hd]);break;case"LineString":case"Circle":r=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(r,0,r.length,$,!1,!1),this.instructions.push([ca.CUSTOM,p,o,t,e,Wb]),this.hitDetectionInstructions.push([ca.CUSTOM,p,o,t,n||e,Wb]);break;case"MultiPoint":r=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(r,$))>p&&(this.instructions.push([ca.CUSTOM,p,o,t,e,Wb]),this.hitDetectionInstructions.push([ca.CUSTOM,p,o,t,n||e,Wb]));break;case"Point":r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),o=this.coordinates.length,this.instructions.push([ca.CUSTOM,p,o,t,e]),this.hitDetectionInstructions.push([ca.CUSTOM,p,o,t,n||e]);}this.endGeometry(i)},i.prototype.beginGeometry=function(t,i){this.beginGeometryInstruction1_=[ca.BEGIN_GEOMETRY,i,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ca.BEGIN_GEOMETRY,i,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},i.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},i.prototype.reverseHitDetectionInstructions=function(){var t,i=this.hitDetectionInstructions;i.reverse();var e,n,r=i.length,o=-1;for(t=0;t<r;++t)(n=(e=i[t])[0])==ca.END_GEOMETRY?o=t:n==ca.BEGIN_GEOMETRY&&(e[2]=t,mo(this.hitDetectionInstructions,o,t),o=-1)},i.prototype.setFillStrokeStyle=function(t,i){var e=this.state;if(t){var n=t.getColor();e.fillStyle=ob(n||Fb)}else e.fillStyle=void 0;if(i){var r=i.getColor();e.strokeStyle=ob(r||Nd);var o=i.getLineCap();e.lineCap=void 0!==o?o:bf;var s=i.getLineDash();e.lineDash=s?s.slice():Kd;var a=i.getLineDashOffset();e.lineDashOffset=a||Ld;var u=i.getLineJoin();e.lineJoin=void 0!==u?u:cd;var l=i.getWidth();e.lineWidth=void 0!==l?l:Pd;var $=i.getMiterLimit();e.miterLimit=void 0!==$?$:Md,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0},i.prototype.createFill=function(t){var i=t.fillStyle,e=[ca.SET_FILL_STYLE,i];return"string"!=typeof i&&e.push(!0),e},i.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},i.prototype.createStroke=function(t){return[ca.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},i.prototype.updateFillStyle=function(t,i){var e=t.fillStyle;"string"==typeof e&&t.currentFillStyle==e||(void 0!==e&&this.instructions.push(i.call(this,t)),t.currentFillStyle=e)},i.prototype.updateStrokeStyle=function(t,i){var e=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=e||t.currentLineCap!=n||r!=t.currentLineDash&&!Sb(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=u)&&(void 0!==e&&i.call(this,t),t.currentStrokeStyle=e,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=u)},i.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[ca.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)},i.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Jj(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Le(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},i}(Ik);nh.default=ed;var oh={};var bq=oh&&oh.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),Jk=function(t){function i(i,e,o,h){var s=t.call(this,i,e,o,h)||this;return s.hitDetectionImage_=null,s.image_=null,s.imagePixelRatio_=void 0,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s.declutterMode_=void 0,s.declutterImageWithText_=void 0,s}return bq(i,t),i.prototype.drawPoint=function(t,i){if(this.image_){this.beginGeometry(t,i);var e=t.getFlatCoordinates(),o=t.getStride(),h=this.coordinates.length,s=this.appendFlatPointCoordinates(e,o);this.instructions.push([ca.DRAW_IMAGE,h,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ca.DRAW_IMAGE,h,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}},i.prototype.drawMultiPoint=function(t,i){if(this.image_){this.beginGeometry(t,i);var e=t.getFlatCoordinates(),o=t.getStride(),h=this.coordinates.length,s=this.appendFlatPointCoordinates(e,o);this.instructions.push([ca.DRAW_IMAGE,h,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ca.DRAW_IMAGE,h,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}},i.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},i.prototype.setImageStyle=function(t,i){var e=t.getAnchor(),o=t.getSize(),h=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=h[0],this.originY_=h[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i},i}(ed);oh.default=Jk;var ph={};var cq=ph&&ph.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Kk=function(t){function e(e,i,s,n){return t.call(this,e,i,s,n)||this}return cq(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,s){var n=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,i,s,!1,!1),o=[ca.MOVE_TO_LINE_TO,n,r];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i},e.prototype.drawLineString=function(t,e){var i=this.state,s=i.strokeStyle,n=i.lineWidth;if(void 0!==s&&void 0!==n){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ca.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Kd,Ld],Bc);var r=t.getFlatCoordinates(),o=t.getStride();this.drawFlatCoordinates_(r,0,r.length,o),this.hitDetectionInstructions.push(Yb),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,s=i.strokeStyle,n=i.lineWidth;if(void 0!==s&&void 0!==n){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ca.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Bc);for(var r=t.getEnds(),o=t.getFlatCoordinates(),p=t.getStride(),a=0,u=0,l=r.length;u<l;++u)a=this.drawFlatCoordinates_(o,a,r[u],p);this.hitDetectionInstructions.push(Yb),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Yb),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Yb),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(Bc)},e}(ed);ph.default=Kk;var qh={};var dq=qh&&qh.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),rh=function(t){function i(i,e,s,o){return t.call(this,i,e,s,o)||this}return dq(i,t),i.prototype.drawFlatCoordinatess_=function(t,i,e,s){var o=this.state,n=void 0!==o.fillStyle,r=void 0!==o.strokeStyle,l=e.length;this.instructions.push(Bc),this.hitDetectionInstructions.push(Bc);for(var h=0;h<l;++h){var a=e[h],u=this.coordinates.length,$=this.appendFlatLineCoordinates(t,i,a,s,!0,!r),c=[ca.MOVE_TO_LINE_TO,u,$];this.instructions.push(c),this.hitDetectionInstructions.push(c),r&&(this.instructions.push(Hk),this.hitDetectionInstructions.push(Hk)),i=a}return n&&(this.instructions.push(jf),this.hitDetectionInstructions.push(jf)),r&&(this.instructions.push(Yb),this.hitDetectionInstructions.push(Yb)),i},i.prototype.drawCircle=function(t,i){var e=this.state,s=e.fillStyle,o=e.strokeStyle;if(void 0!==s||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([ca.SET_FILL_STYLE,Fb]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([ca.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var n=t.getFlatCoordinates(),r=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(n,0,n.length,r,!1,!1);var h=[ca.CIRCLE,l];this.instructions.push(Bc,h),this.hitDetectionInstructions.push(Bc,h),void 0!==e.fillStyle&&(this.instructions.push(jf),this.hitDetectionInstructions.push(jf)),void 0!==e.strokeStyle&&(this.instructions.push(Yb),this.hitDetectionInstructions.push(Yb)),this.endGeometry(i)}},i.prototype.drawPolygon=function(t,i){var e=this.state,s=e.fillStyle,o=e.strokeStyle;if(void 0!==s||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([ca.SET_FILL_STYLE,Fb]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([ca.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var n=t.getEnds(),r=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(r,0,n,l),this.endGeometry(i)}},i.prototype.drawMultiPolygon=function(t,i){var e=this.state,s=e.fillStyle,o=e.strokeStyle;if(void 0!==s||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([ca.SET_FILL_STYLE,Fb]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([ca.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);for(var n=t.getEndss(),r=t.getOrientedFlatCoordinates(),l=t.getStride(),h=0,a=0,u=n.length;a<u;++a)h=this.drawFlatCoordinatess_(r,h,n[a],l);this.endGeometry(i)}},i.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var i=this.tolerance;if(0!==i)for(var e=this.coordinates,s=0,o=e.length;s<o;++s)e[s]=vc(e[s],i);return t.prototype.finish.call(this)},i.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},i}(ed);qh.default=rh;var kf={};function eq(h,t,r,$,a){var n,o,C,f,i,c,e,u,v,l=r,p=r,s=0,x=0,g=r;for(n=r;n<$;n+=a){var k=t[n],m=t[n+1];void 0!==f&&(u=k-f,v=m-i,C=Math.sqrt(u*u+v*v),void 0!==c&&(x+=o,Math.acos((c*u+e*v)/(o*C))>h&&(x>s&&(s=x,l=g,p=n),x=0,g=n-a)),o=C,c=u,e=v),f=k,i=m}return(x+=C)>s?[g,n]:[l,p]}var fq=kf&&kf.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),fd={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};kf.TEXT_ALIGN=fd;var Lk=function(t){function e(e,i,s,r){var l=t.call(this,e,i,s,r)||this;return l.labels_=null,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=void 0,l.textRotation_=0,l.textFillState_=null,l.fillStates={},l.textStrokeState_=null,l.strokeStates={},l.textState_={},l.textStates={},l.textKey_="",l.fillKey_="",l.strokeKey_="",l.declutterImageWithText_=void 0,l}return fq(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||s)){var l=this.coordinates,a=l.length,o=t.getType(),n=null,h=t.getStride();if(r.placement!==Yp.LINE||"LineString"!=o&&"MultiLineString"!=o&&"Polygon"!=o&&"MultiPolygon"!=o){var f=r.overflow?null:[];switch(o){case"Point":case"MultiPoint":n=t.getFlatCoordinates();break;case"LineString":n=t.getFlatMidpoint();break;case"Circle":n=t.getCenter();break;case"MultiLineString":n=t.getFlatMidpoints(),h=2;break;case"Polygon":n=t.getFlatInteriorPoint(),r.overflow||f.push(n[2]/this.resolution),h=3;break;case"MultiPolygon":var $=t.getFlatInteriorPoints();n=[];for(w=0,D=$.length;w<D;w+=3)r.overflow||f.push($[w+2]/this.resolution),n.push($[w],$[w+1]);if(0===n.length)return;h=2;}if((T=this.appendFlatPointCoordinates(n,h))===a)return;if(f&&(T-a)/2!=n.length/h){var u=a/2;f=f.filter(function(t,e){var i=l[2*(u+e)]===n[e*h]&&l[2*(u+e)+1]===n[e*h+1];return i||--u,i})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var g=r.padding;if(g!=Ac&&(r.scale[0]<0||r.scale[1]<0)){var p=r.padding[0],d=r.padding[1],c=r.padding[2],x=r.padding[3];r.scale[0]<0&&(d=-d,x=-x),r.scale[1]<0&&(p=-p,c=-c),g=[p,d,c,x]}var _=this.pixelRatio;this.instructions.push([ca.DRAW_IMAGE,a,T,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,g==Ac?Ac:g.map(function(t){return t*_}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);var S=1/_;this.hitDetectionInstructions.push([ca.DRAW_IMAGE,a,T,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[S,S],NaN,void 0,this.declutterImageWithText_,g,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),this.endGeometry(e)}else{if(!Ka(this.getBufferedMaxExtent(),t.getExtent()))return;var y=void 0;if(n=t.getFlatCoordinates(),"LineString"==o)y=[n.length];else if("MultiLineString"==o)y=t.getEnds();else if("Polygon"==o)y=t.getEnds().slice(0,1);else if("MultiPolygon"==o){var v=t.getEndss();y=[];for(var w=0,D=v.length;w<D;++w)y.push(v[w][0])}this.beginGeometry(t,e);for(var E=r.textAlign,k=0,m=void 0,z=0,F=y.length;z<F;++z){if(null==E){var L=eq(r.maxAngle,n,k,y[z],h);k=L[0],m=L[1]}else m=y[z];for(var w=k;w<m;w+=h)l.push(n[w],n[w+1]);var T=l.length;k=y[z],this.drawChars_(a,T),a=T}this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||Od,justify:e.justify,textBaseline:e.textBaseline||cf,scale:e.scale});var l=this.fillKey_;i&&(l in this.fillStates||(this.fillStates[l]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e){var i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,l=this.textKey_,a=this.fillKey_;this.saveTextStates_();var o=this.pixelRatio,n=fd[s.textBaseline],h=this.textOffsetY_*o,f=this.text_,$=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([ca.DRAW_CHARS,t,e,n,s.overflow,a,s.maxAngle,o,h,r,$*o,f,l,1]),this.hitDetectionInstructions.push([ca.DRAW_CHARS,t,e,n,s.overflow,a,s.maxAngle,1,h,r,$,f,l,1/o])},e.prototype.setTextStyle=function(t,e){var i,s,r;if(t){var l=t.getFill();l?((s=this.textFillState_)||(s={},this.textFillState_=s),s.fillStyle=ob(l.getColor()||Fb)):(s=null,this.textFillState_=s);var a=t.getStroke();if(a){(r=this.textStrokeState_)||(r={},this.textStrokeState_=r);var o=a.getLineDash(),n=a.getLineDashOffset(),h=a.getWidth(),f=a.getMiterLimit();r.lineCap=a.getLineCap()||bf,r.lineDash=o?o.slice():Kd,r.lineDashOffset=void 0===n?Ld:n,r.lineJoin=a.getLineJoin()||cd,r.lineWidth=void 0===h?Pd:h,r.miterLimit=void 0===f?Md:f,r.strokeStyle=ob(a.getColor()||Nd)}else r=null,this.textStrokeState_=r;i=this.textState_;var $=t.getFont()||zk;Pp($);var u=t.getScaleArray();i.overflow=t.getOverflow(),i.font=$,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||cf,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Ac,i.scale=void 0===u?[1,1]:u;var g=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),c=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===g?0:g,this.textOffsetY_=void 0===p?0:p,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0===c?0:c,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:ga(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?"string"==typeof s.fillStyle?s.fillStyle:"|"+ga(s.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},e}(ed);kf.default=Lk;var gq={Circle:rh,Default:ed,Image:Jk,LineString:Kk,Polygon:rh,Text:Lk},Mk=function(){function e(e,r,i,t){this.tolerance_=e,this.maxExtent_=r,this.pixelRatio_=t,this.resolution_=i,this.buildersByZIndex_={}}return e.prototype.finish=function(){var e={};for(var r in this.buildersByZIndex_){e[r]=e[r]||{};var i=this.buildersByZIndex_[r];for(var t in i){var d=i[t].finish();e[r][t]=d}}return e},e.prototype.getBuilder=function(e,r){var i=void 0!==e?e.toString():"0",t=this.buildersByZIndex_[i];void 0===t&&(t={},this.buildersByZIndex_[i]=t);var d=t[r];void 0===d&&(d=new(0,gq[r])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),t[r]=d);return d},e}();var lf={};var sh={};var hq=sh&&sh.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Nk=function(t){function e(e){var r=t.call(this)||this;return r.ready=!0,r.boundHandleImageChange_=r.handleImageChange_.bind(r),r.layer_=e,r.declutterExecutorGroup=null,r}return hq(e,t),e.prototype.getFeatures=function(t){return da()},e.prototype.getData=function(t){return null},e.prototype.prepareFrame=function(t){return da()},e.prototype.renderFrame=function(t,e){return da()},e.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,e,r){return function(o,n){var a=this.loadedTileCallback.bind(this,r,o);return t.forEachLoadedTile(e,o,n,a)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,o,n){},e.prototype.getDataAtPixel=function(t,e,r){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===qa.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=qa.LOADED&&e!=qa.ERROR&&t.addEventListener(ba.CHANGE,this.boundHandleImageChange_),e==qa.IDLE&&(t.load(),e=t.getState()),e==qa.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()},e.prototype.disposeInternal=function(){delete this.layer_,t.prototype.disposeInternal.call(this)},e}(Tc);sh.default=Nk;var th={};var iq=th&&th.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uh=function(t){function e(e,r,n,o){var $=t.call(this,e)||this;return $.inversePixelTransform=r,$.frameState=n,$.context=o,$}return iq(e,t),e}(Ja);th.default=uh;var jq=lf&&lf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),vh=[];lf.canvasPool=vh;var mf=null;function kq(){var t=document.createElement("canvas");t.width=1,t.height=1,mf=t.getContext("2d")}var wh=function(t){function e(e){var r=t.call(this,e)||this;return r.container=null,r.renderedResolution,r.tempTransform=kb(),r.pixelTransform=kb(),r.inversePixelTransform=kb(),r.context=null,r.containerReused=!1,r.pixelContext_=null,r.frameState=null,r}return jq(e,t),e.prototype.getImageData=function(t,e,r){var o;mf||kq(),mf.clearRect(0,0,1,1);try{mf.drawImage(t,e,r,1,1,0,0,1,1),o=mf.getImageData(0,0,1,1).data}catch(n){return mf=null,null}return o},e.prototype.getBackground=function(t){var e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0},e.prototype.useContainer=function(t,e,r){var o,n,a=this.getLayer().getClassName();t&&t.className===a&&(!r||t&&t.style.backgroundColor&&Sb(Ye(t.style.backgroundColor),Ye(r)))&&(l=t.firstElementChild)instanceof HTMLCanvasElement&&(n=l.getContext("2d"));if(n&&n.canvas.style.transform===e?(this.container=t,this.context=n,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(o=document.createElement("div")).className=a;var i=o.style;i.position="absolute",i.width="100%",i.height="100%";var l=(n=Sa()).canvas;o.appendChild(l),(i=l.style).position="absolute",i.left="0",i.transformOrigin="top left",this.container=o,this.context=n}this.containerReused||!r||this.container.style.backgroundColor||(this.container.style.backgroundColor=r)},e.prototype.clipUnrotated=function(t,e,r){var o=Bb(r),n=Cd(r),a=Wc(r),i=Vc(r);za(e.coordinateToPixelTransform,o),za(e.coordinateToPixelTransform,n),za(e.coordinateToPixelTransform,a),za(e.coordinateToPixelTransform,i);var l=this.inversePixelTransform;za(l,o),za(l,n),za(l,a),za(l,i),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,r){var o=this.getLayer();if(o.hasListener(t)){var n=new uh(t,this.inversePixelTransform,r,e);o.dispatchEvent(n)}},e.prototype.preRender=function(t,e){this.frameState=e,this.dispatchRenderEvent_(Xb.PRERENDER,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(Xb.POSTRENDER,t,e)},e.prototype.getRenderTransform=function(t,e,r,o,n,a,i){var l=n/2,$=a/2,s=o/e,p=-s,f=-t[0]+i,v=-t[1];return Ab(this.tempTransform,l,$,s,p,-r,f,v)},e.prototype.getDataAtPixel=function(t,e,r){var o=za(this.inversePixelTransform,t.slice()),n=this.context,a=this.getLayer().getExtent();if(a){var i=za(e.pixelToCoordinateTransform,t.slice());if(!yd(a,i))return null}var l,$=Math.round(o[0]),s=Math.round(o[1]),p=this.pixelContext_;if(!p){var f=document.createElement("canvas");f.width=1,f.height=1,p=f.getContext("2d"),this.pixelContext_=p}p.clearRect(0,0,1,1);try{p.drawImage(n.canvas,$,s,1,1,0,0,1,1),l=p.getImageData(0,0,1,1).data}catch(v){return"SecurityError"===v.name?(this.pixelContext_=null,new Uint8Array):l}return 0===l[3]?null:l},e.prototype.disposeInternal=function(){delete this.frameState,t.prototype.disposeInternal.call(this)},e}(Nk);lf.default=wh;function lq(r,t,a,$,e,i,p,o,x,n,l,v){var s=r[t],J=r[t+1],N=0,f=0,h=0,u=0;function m(){N=s,f=J,s=r[t+=$],J=r[t+1],u+=h,h=Math.sqrt((s-N)*(s-N)+(J-f)*(J-f))}do{m()}while(t<a-$&&u+h<i);for(var c=0===h?0:(i-u)/h,d=Db(N,s,c),M=Db(f,J,c),b=t-$,g=u,w=i+o*x(n,e,l);t<a-$&&u+h<w;)m();c=0===h?0:(w-u)/h;var P,q=Db(N,s,c),O=Db(f,J,c);if(v){var T=[d,M,q,O];Qg(T,0,4,2,v,T,T),P=T[0]>T[2]}else P=d>q;var j,k=Math.PI,I=[],y=b+$===t;if(h=0,u=g,s=r[t=b],J=r[t+1],y){m(),j=Math.atan2(J-f,s-N),P&&(j+=j>0?-k:k);var z=(q+d)/2,A=(O+M)/2;return I[0]=[z,A,(w-i)/2,j,e],I}for(var B=0,C=(e=e.replace(/\n/g," ")).length;B<C;){m();var D=Math.atan2(J-f,s-N);if(P&&(D+=D>0?-k:k),void 0!==j){var E=D-j;if(E+=E>k?-2*k:E<-k?2*k:0,Math.abs(E)>p)return null}j=D;for(var F=B,G=0;B<C;++B){var H=o*x(n,e[P?C-B-1:B],l);if(t+$<a&&u+h<i+G+H/2)break;G+=H}if(B!==F){var K=P?e.substring(C-F,C-B):e.substring(F,B);c=0===h?0:(i+G/2-u)/h;z=Db(N,s,c),A=Db(f,J,c);I.push([z,A,G/2,D,K]),i+=G}}return I}var gd=Qa(),Zb=[],Hb=[],Ib=[],$b=[];function Ok(t){return t[3].declutterBox}var mq=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Pk(t,e){return"start"!==e&&"end"!==e||mq.test(t)||(e="start"===e?"left":"right"),fd[e]}function nq(t,e,r){return r>0&&t.push("\n",""),t.push(e,""),t}var oq=function(){function t(t,e,r,i){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=kb(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,r,i){var a=t+e+r+i;if(this.labels_[a])return this.labels_[a];var o=i?this.strokeStates[i]:null,n=r?this.fillStates[r]:null,$=this.textStates[e],p=this.pixelRatio,s=[$.scale[0]*p,$.scale[1]*p],l=Array.isArray(t),h=$.justify?fd[$.justify]:Pk(Array.isArray(t)?t[0]:t,$.textAlign||Od),c=i&&o.lineWidth?o.lineWidth:0,E=l?t:t.split("\n").reduce(nq,[]),u=Rp($,E),v=u.width,m=u.height,d=u.widths,K=u.heights,f=u.lineWidths,Z=v+c,g=[],x=(Z+2)*s[0],_=(m+c)*s[1],T={width:x<0?Math.floor(x):Math.ceil(x),height:_<0?Math.floor(_):Math.ceil(_),contextInstructions:g};(1==s[0]&&1==s[1]||g.push("scale",s),i)&&(g.push("strokeStyle",o.strokeStyle),g.push("lineWidth",c),g.push("lineCap",o.lineCap),g.push("lineJoin",o.lineJoin),g.push("miterLimit",o.miterLimit),(Ke?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(g.push("setLineDash",[o.lineDash]),g.push("lineDashOffset",o.lineDashOffset)));r&&g.push("fillStyle",n.fillStyle),g.push("textBaseline","middle"),g.push("textAlign","center");for(var C,y=.5-h,S=h*Z+y*c,I=[],b=[],k=0,L=0,w=0,A=0,R=0,O=E.length;R<O;R+=2){var D=E[R];if("\n"!==D){var M=E[R+1]||$.font;M!==C&&(i&&I.push("font",M),r&&b.push("font",M),C=M),k=Math.max(k,K[w]);var B=[D,S+y*d[w]+h*(d[w]-f[A]),.5*(c+k)+L];S+=d[w],i&&I.push("strokeText",B),r&&b.push("fillText",B),++w}else L+=k,k=0,S=h*Z+y*c,++A}return Array.prototype.push.apply(g,I),Array.prototype.push.apply(g,b),this.labels_[a]=T,T},t.prototype.replayTextBackground_=function(t,e,r,i,a,o,n){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),n&&(this.setStrokeStyle_(t,n),t.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(t,e,r,i,a,o,n,$,p,s,l,h,c,E,u,v){var m,d=r-(n*=h[0]),K=i-($*=h[1]),f=a+p>t?t-p:a,Z=o+s>e?e-s:o,g=E[3]+f*h[0]+E[1],x=E[0]+Z*h[1]+E[2],_=d-E[3],T=K-E[0];return(u||0!==l)&&(Zb[0]=_,$b[0]=_,Zb[1]=T,Hb[1]=T,Hb[0]=_+g,Ib[0]=Hb[0],Ib[1]=T+x,$b[1]=Ib[1]),0!==l?(m=Ab(kb(),r,i,1,1,l,-r,-i),za(m,Zb),za(m,Hb),za(m,Ib),za(m,$b),fb(Math.min(Zb[0],Hb[0],Ib[0],$b[0]),Math.min(Zb[1],Hb[1],Ib[1],$b[1]),Math.max(Zb[0],Hb[0],Ib[0],$b[0]),Math.max(Zb[1],Hb[1],Ib[1],$b[1]),gd)):fb(Math.min(_,_+g),Math.min(T,T+x),Math.max(_,_+g),Math.max(T,T+x),gd),c&&(d=Math.round(d),K=Math.round(K)),{drawImageX:d,drawImageY:K,drawImageW:f,drawImageH:Z,originX:p,originY:s,declutterBox:{minX:gd[0],minY:gd[1],maxX:gd[2],maxY:gd[3],value:v},canvasTransform:m,scale:h}},t.prototype.replayImageOrLabel_=function(t,e,r,i,a,o,n){var $=!(!o&&!n),p=i.declutterBox,s=t.canvas,l=n?n[2]*i.scale[0]/2:0;return p.minX-l<=s.width/e&&p.maxX+l>=0&&p.minY-l<=s.height/e&&p.maxY+l>=0&&($&&this.replayTextBackground_(t,Zb,Hb,Ib,$b,o,n),Sp(t,i.canvasTransform,a,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=za(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.drawLabelWithPointPlacement_=function(t,e,r,i){var a=this.textStates[e],o=this.createLabel(t,e,i,r),n=this.strokeStates[r],$=this.pixelRatio,p=Pk(Array.isArray(t)?t[0]:t,a.textAlign||Od),s=fd[a.textBaseline||cf],l=n&&n.lineWidth?n.lineWidth:0;return{label:o,anchorX:p*(o.width/$-2*a.scale[0])+2*(.5-p)*l,anchorY:s*o.height/$+2*(.5-s)*l}},t.prototype.execute_=function(t,e,r,i,a,o,n,$){var p;this.pixelCoordinates_&&Sb(r,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=uc(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),yo(this.renderedTransform_,r));for(var s,l,h,c,E,u,v,m,d,K,f,Z,g,x,_,T,C=0,y=i.length,S=0,I=0,b=0,k=null,L=null,w=this.coordinateCache_,A=this.viewRotation_,R=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,O={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:A},D=this.instructions!=i||this.overlaps?0:200;C<y;){var M=i[C];switch(M[0]){case ca.BEGIN_GEOMETRY:g=M[1],T=M[3],g.getGeometry()?void 0===n||Ka(n,T.getExtent())?++C:C=M[2]+1:C=M[2];break;case ca.BEGIN_PATH:I>D&&(this.fill_(t),I=0),b>D&&(t.stroke(),b=0),I||b||(t.beginPath(),c=NaN,E=NaN),++C;break;case ca.CIRCLE:var B=p[S=M[1]],W=p[S+1],N=p[S+2]-B,P=p[S+3]-W,X=Math.sqrt(N*N+P*P);t.moveTo(B+X,W),t.arc(B,W,X,0,2*Math.PI,!0),++C;break;case ca.CLOSE_PATH:t.closePath(),++C;break;case ca.CUSTOM:S=M[1],s=M[2];var Y=M[3],j=M[4],q=6==M.length?M[5]:void 0;O.geometry=Y,O.feature=g,C in w||(w[C]=[]);var F=w[C];q?q(p,S,s,2,F):(F[0]=p[S],F[1]=p[S+1],F.length=2),j(F,O),++C;break;case ca.DRAW_IMAGE:S=M[1],s=M[2],m=M[3],l=M[4],h=M[5];var G=M[6],H=M[7],z=M[8],J=M[9],U=M[10],V=M[11],Q=M[12],tt=M[13],et=M[14],rt=M[15];if(!m&&M.length>=20){d=M[19],K=M[20],f=M[21],Z=M[22];var it=this.drawLabelWithPointPlacement_(d,K,f,Z);m=it.label,M[3]=m;var at=M[23];l=(it.anchorX-at)*this.pixelRatio,M[4]=l;var ot=M[24];h=(it.anchorY-ot)*this.pixelRatio,M[5]=h,G=m.height,M[6]=G,tt=m.width,M[13]=tt}var nt=void 0;M.length>25&&(nt=M[25]);var $t=void 0,pt=void 0,st=void 0;M.length>17?($t=M[16],pt=M[17],st=M[18]):($t=Ac,pt=!1,st=!1),U&&R?V+=A:U||R||(V-=A);for(var lt=0;S<s;S+=2)if(!(nt&&nt[lt++]<tt/this.pixelRatio)){var ht=[t,e,m,Wt=this.calculateImageOrLabelDimensions_(m.width,m.height,p[S],p[S+1],tt,G,l,h,z,J,V,Q,a,$t,pt||st,g),H,pt?k:null,st?L:null];if($){if("none"===et)continue;if("obstacle"===et){$.insert(Wt.declutterBox);continue}var ct=void 0,Et=void 0;if(rt){var ut=s-S;if(!rt[ut]){rt[ut]=ht;continue}if(ct=rt[ut],delete rt[ut],Et=Ok(ct),$.collides(Et))continue}if($.collides(Wt.declutterBox))continue;ct&&($.insert(Et),this.replayImageOrLabel_.apply(this,ct)),$.insert(Wt.declutterBox)}this.replayImageOrLabel_.apply(this,ht)}++C;break;case ca.DRAW_CHARS:var vt=M[1],mt=M[2],dt=M[3],Kt=M[4];Z=M[5];var ft=M[6],Zt=M[7],gt=M[8];f=M[9];var xt=M[10];d=M[11],K=M[12];var _t=[M[13],M[13]],Tt=this.textStates[K],Ct=Tt.font,yt=[Tt.scale[0]*Zt,Tt.scale[1]*Zt],St=void 0;Ct in this.widths_?St=this.widths_[Ct]:(St={},this.widths_[Ct]=St);var It=ok(p,vt,mt,2),bt=Math.abs(yt[0])*Bk(Ct,d,St);if(Kt||bt<=It){var kt=this.textStates[K].textAlign,Lt=(It-bt)*fd[kt],wt=lq(p,vt,mt,2,d,Lt,ft,Math.abs(yt[0]),Bk,Ct,St,R?0:this.viewRotation_);t:if(wt){var At=[],Rt=void 0,Ot=void 0,Dt=void 0,Mt=void 0,Bt=void 0;if(f)for(Rt=0,Ot=wt.length;Rt<Ot;++Rt){Dt=(Bt=wt[Rt])[4],Mt=this.createLabel(Dt,K,"",f),l=Bt[2]+(yt[0]<0?-xt:xt),h=dt*Mt.height+2*(.5-dt)*xt*yt[1]/yt[0]-gt;var Wt=this.calculateImageOrLabelDimensions_(Mt.width,Mt.height,Bt[0],Bt[1],Mt.width,Mt.height,l,h,0,0,Bt[3],_t,!1,Ac,!1,g);if($&&$.collides(Wt.declutterBox))break t;At.push([t,e,Mt,Wt,1,null,null])}if(Z)for(Rt=0,Ot=wt.length;Rt<Ot;++Rt){Dt=(Bt=wt[Rt])[4],Mt=this.createLabel(Dt,K,Z,""),l=Bt[2],h=dt*Mt.height-gt;Wt=this.calculateImageOrLabelDimensions_(Mt.width,Mt.height,Bt[0],Bt[1],Mt.width,Mt.height,l,h,0,0,Bt[3],_t,!1,Ac,!1,g);if($&&$.collides(Wt.declutterBox))break t;At.push([t,e,Mt,Wt,1,null,null])}$&&$.load(At.map(Ok));for(var Nt=0,Pt=At.length;Nt<Pt;++Nt)this.replayImageOrLabel_.apply(this,At[Nt])}}++C;break;case ca.END_GEOMETRY:if(void 0!==o){var Xt=o(g=M[1],T);if(Xt)return Xt}++C;break;case ca.FILL:D?I++:this.fill_(t),++C;break;case ca.MOVE_TO_LINE_TO:for(S=M[1],s=M[2],x=p[S],v=(_=p[S+1])+.5|0,(u=x+.5|0)===c&&v===E||(t.moveTo(x,_),c=u,E=v),S+=2;S<s;S+=2)u=(x=p[S])+.5|0,v=(_=p[S+1])+.5|0,S!=s-2&&u===c&&v===E||(t.lineTo(x,_),c=u,E=v);++C;break;case ca.SET_FILL_STYLE:k=M,this.alignFill_=M[2],I&&(this.fill_(t),I=0,b&&(t.stroke(),b=0)),t.fillStyle=M[1],++C;break;case ca.SET_STROKE_STYLE:L=M,b&&(t.stroke(),b=0),this.setStrokeStyle_(t,M),++C;break;case ca.STROKE:D?b++:t.stroke(),++C;break;default:++C;}}I&&this.fill_(t),b&&t.stroke()},t.prototype.execute=function(t,e,r,i,a,o){this.viewRotation_=i,this.execute_(t,e,r,this.instructions,a,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,e,r,i,a){return this.viewRotation_=r,this.execute_(t,1,e,this.hitDetectionInstructions,!0,i,a)},t}();var xh=["Polygon","Circle","LineString","Image","Text","Default"],Qk=function(){function e(e,r,t,n,i,o){this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=t,this.resolution_=r,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=kb(),this.createExecutors_(i)}return e.prototype.clip=function(e,r){var t=this.getClipCoords(r);e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[3]),e.lineTo(t[4],t[5]),e.lineTo(t[6],t[7]),e.clip()},e.prototype.createExecutors_=function(e){for(var r in e){var t=this.executorsByZIndex_[r];void 0===t&&(t={},this.executorsByZIndex_[r]=t);var n=e[r];for(var i in n){var o=n[i];t[i]=new oq(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},e.prototype.hasExecutors=function(e){for(var r in this.executorsByZIndex_)for(var t=this.executorsByZIndex_[r],n=0,i=e.length;n<i;++n)if(e[n]in t)return!0;return!1},e.prototype.forEachFeatureAtCoordinate=function(e,r,t,n,i,o){var a=2*(n=Math.round(n))+1,c=Ab(this.hitDetectionTransform_,n+.5,n+.5,1/r,-1/r,-t,-e[0],-e[1]),$=!this.hitDetectionContext_;$&&(this.hitDetectionContext_=Sa(a,a));var s,x=this.hitDetectionContext_;x.canvas.width!==a||x.canvas.height!==a?(x.canvas.width=a,x.canvas.height=a):$||x.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(s=Qa(),Ad(s,e),Le(s,r*(this.renderBuffer_+n),s));var u,h=pq(n);function p(e,r){for(var t=x.getImageData(0,0,a,a).data,c=0,$=h.length;c<$;c++)if(t[h[c]]>0){if(!o||"Image"!==u&&"Text"!==u||-1!==o.indexOf(e)){var s=(h[c]-3)/4,p=n-s%a,g=n-(s/a|0),f=i(e,r,p*p+g*g);if(f)return f}x.clearRect(0,0,a,a);break}}var g,f,l,E,v,d=Object.keys(this.executorsByZIndex_).map(Number);for(d.sort(kc),g=d.length-1;g>=0;--g){var m=d[g].toString();for(l=this.executorsByZIndex_[m],f=xh.length-1;f>=0;--f)if(void 0!==(E=l[u=xh[f]])&&(v=E.executeHitDetection(x,c,t,p,s)))return v}},e.prototype.getClipCoords=function(e){var r=this.maxExtent_;if(!r)return null;var t=r[0],n=r[1],i=r[2],o=r[3],a=[t,n,t,o,i,o,i,n];return uc(a,0,8,2,e,a),a},e.prototype.isEmpty=function(){return Sc(this.executorsByZIndex_)},e.prototype.execute=function(e,r,t,n,i,o,a){var c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(kc),this.maxExtent_&&(e.save(),this.clip(e,t));var $,s,x,u,h,p,g=o||xh;for(a&&c.reverse(),$=0,s=c.length;$<s;++$){var f=c[$].toString();for(h=this.executorsByZIndex_[f],x=0,u=g.length;x<u;++x){void 0!==(p=h[g[x]])&&p.execute(e,r,t,n,i,a)}}this.maxExtent_&&e.restore()},e}(),yh={};function pq(e){if(void 0!==yh[e])return yh[e];for(var r=2*e+1,t=e*e,n=new Array(t+1),i=0;i<=e;++i)for(var o=0;o<=e;++o){var a=i*i+o*o;if(a>t)break;var c=n[a];c||(c=[],n[a]=c),c.push(4*((e+i)*r+(e+o))+3),i>0&&c.push(4*((e-i)*r+(e+o))+3),o>0&&(c.push(4*((e+i)*r+(e-o))+3),i>0&&c.push(4*((e-i)*r+(e-o))+3))}for(var $=[],s=(i=0,n.length);i<s;++i)n[i]&&$.push.apply($,n[i]);return yh[e]=$,$}var Ha={ANIMATING:0,INTERACTING:1};var zh={};var qq=zh&&zh.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Rk=function(t){function e(e,i,o,a,s,r,n){var l=t.call(this)||this;return l.context_=e,l.pixelRatio_=i,l.extent_=o,l.transform_=a,l.viewRotation_=s,l.squaredTolerance_=r,l.userTransform_=n,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=[0,0],l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=[0,0],l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=kb(),l}return qq(e,t),e.prototype.drawImages_=function(t,e,i,o){if(this.image_){var a=uc(t,e,i,o,this.transform_,this.pixelCoordinates_),s=this.context_,r=this.tmpLocalTransform_,n=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=n*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var h=0,f=a.length;h<f;h+=2){var _=a[h]-this.imageAnchorX_,g=a[h+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var m=_+this.imageAnchorX_,x=g+this.imageAnchorY_;Ab(r,m,x,1,1,l,-m,-x),s.setTransform.apply(s,r),s.translate(m,x),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,_,g,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=n)}},e.prototype.drawText_=function(t,e,i,o){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var a=uc(t,e,i,o,this.transform_,this.pixelCoordinates_),s=this.context_,r=this.textRotation_;for(this.textRotateWithView_&&(r+=this.viewRotation_);e<i;e+=o){var n=a[e]+this.textOffsetX_,l=a[e+1]+this.textOffsetY_;if(0!==r||1!=this.textScale_[0]||1!=this.textScale_[1]){var h=Ab(this.tmpLocalTransform_,n,l,1,1,r,-n,-l);s.setTransform.apply(s,h),s.translate(n,l),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&s.strokeText(this.text_,n,l),this.textFillState_&&s.fillText(this.text_,n,l)}}},e.prototype.moveToLineTo_=function(t,e,i,o,a){var s=this.context_,r=uc(t,e,i,o,this.transform_,this.pixelCoordinates_);s.moveTo(r[0],r[1]);var n=r.length;a&&(n-=2);for(var l=2;l<n;l+=2)s.lineTo(r[l],r[l+1]);return a&&s.closePath(),i},e.prototype.drawRings_=function(t,e,i,o){for(var a=0,s=i.length;a<s;++a)e=this.moveToLineTo_(t,e,i[a],o,!0);return e},e.prototype.drawCircle=function(t){if(Ka(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=ak(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],o=e[3]-e[1],a=Math.sqrt(i*i+o*o),s=this.context_;s.beginPath(),s.arc(e[0],e[1],a,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&Ka(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,o=e.length;i<o;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ka(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var o=t.getFlatMidpoint();this.drawText_(o,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Ka(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=t.getFlatCoordinates(),a=0,s=t.getEnds(),r=t.getStride();i.beginPath();for(var n=0,l=s.length;n<l;++n)a=this.moveToLineTo_(o,a,s[n],r,!1);i.stroke()}if(""!==this.text_){var h=t.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ka(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ka(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),o=0,a=t.getEndss(),s=t.getStride();e.beginPath();for(var r=0,n=a.length;r<n;++r){var l=a[r];o=this.drawRings_(i,o,l,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var h=t.getFlatInteriorPoints();this.drawText_(h,0,h.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(Sb(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,o=t.textAlign?t.textAlign:Od;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=o&&(i.textAlign=o,e.textAlign=o),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=o,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){var i=this;if(t){var o=t.getColor();this.fillState_={fillStyle:ob(o||Fb)}}else this.fillState_=null;if(e){var a=e.getColor(),s=e.getLineCap(),r=e.getLineDash(),n=e.getLineDashOffset(),l=e.getLineJoin(),h=e.getWidth(),f=e.getMiterLimit(),_=r||Kd;this.strokeState_={lineCap:void 0!==s?s:bf,lineDash:1===this.pixelRatio_?_:_.map(function(t){return t*i.pixelRatio_}),lineDashOffset:(n||Ld)*this.pixelRatio_,lineJoin:void 0!==l?l:cd,lineWidth:(void 0!==h?h:Pd)*this.pixelRatio_,miterLimit:void 0!==f?f:Md,strokeStyle:ob(a||Nd)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var i=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*this.pixelRatio_,this.imageAnchorY_=i[1]*this.pixelRatio_,this.imageHeight_=e[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=e[0]*this.pixelRatio_}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:ob(i||Fb)}}else this.textFillState_=null;var o=t.getStroke();if(o){var a=o.getColor(),s=o.getLineCap(),r=o.getLineDash(),n=o.getLineDashOffset(),l=o.getLineJoin(),h=o.getWidth(),f=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==s?s:bf,lineDash:r||Kd,lineDashOffset:n||Ld,lineJoin:void 0!==l?l:cd,lineWidth:void 0!==h?h:Pd,miterLimit:void 0!==f?f:Md,strokeStyle:ob(a||Nd)}}else this.textStrokeState_=null;var _=t.getFont(),g=t.getOffsetX(),m=t.getOffsetY(),x=t.getRotateWithView(),p=t.getRotation(),S=t.getScaleArray(),c=t.getText(),$=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:void 0!==_?_:zk,textAlign:void 0!==$?$:Od,textBaseline:void 0!==d?d:cf},this.text_=void 0!==c?Array.isArray(c)?c.reduce(function(t,e,i){return t+(i%2?" ":e)},""):c:"",this.textOffsetX_=void 0!==g?this.pixelRatio_*g:0,this.textOffsetY_=void 0!==m?this.pixelRatio_*m:0,this.textRotateWithView_=void 0!==x&&x,this.textRotation_=void 0!==p?p:0,this.textScale_=[this.pixelRatio_*S[0],this.pixelRatio_*S[1]]}else this.text_=""},e}(Ik);zh.default=Rk;var _b={FRACTION:"fraction",PIXELS:"pixels"};var Ah={};var $a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};var nf={};var rq=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var r=this.cache_[t];0!=(3&e++)||r.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}},e.prototype.get=function(e,t,r){var i=Sk(e,t,r);return i in this.cache_?this.cache_[i]:null},e.prototype.set=function(e,t,r,i){var o=Sk(e,t,r);this.cache_[o]=i,++this.cacheSize_},e.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},e}();function Sk(e,t,r){return t+":"+e+":"+(r?rk(r):"null")}var of=new rq;var pf={};var Bh={};var sq=Bh&&Bh.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Tk=function(t){function e(e,r,o,n){var p=t.call(this)||this;return p.extent=e,p.pixelRatio_=o,p.resolution=r,p.state=n,p}return sq(e,t),e.prototype.changed=function(){this.dispatchEvent(ba.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return da()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){da()},e}(lc);Bh.default=Tk;var tq=pf&&pf.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uq=function(t){function e(e,i,n,r,o,s){var $=t.call(this,e,i,n,qa.IDLE)||this;return $.src_=r,$.image_=new Image,null!==o&&($.image_.crossOrigin=o),$.unlisten_=null,$.state=qa.IDLE,$.imageLoadFunction_=s,$}return tq(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=qa.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Ya(this.extent)/this.image_.height),this.state=qa.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=qa.IDLE&&this.state!=qa.ERROR||(this.state=qa.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=qf(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=Ya(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Tk);function qf(t,e,i){var n=t,r=!0,o=!1,s=!1,$=[vd(n,ba.LOAD,function(){s=!0,o||e()})];return n.src&&vo?(o=!0,n.decode().then(function(){r&&e()}).catch(function(t){r&&(s?e():i())})):$.push(vd(n,ba.ERROR,i)),function(){r=!1,$.forEach(la)}}pf.listenImage=qf,pf.default=uq;var vq=nf&&nf.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),Ch=null,Uk=function(t){function e(e,i,a,n,r,o){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==n&&(s.image_.crossOrigin=n),s.canvas_={},s.color_=o,s.unlisten_=null,s.imageState_=r,s.size_=a,s.src_=i,s.tainted_,s}return vq(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===qa.LOADED){Ch||(Ch=Sa(1,1)),Ch.drawImage(this.image_,0,0);try{Ch.getImageData(0,0,1,1),this.tainted_=!1}catch(t){Ch=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(ba.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=qa.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=qa.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=Sa(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==qa.IDLE){this.imageState_=qa.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=qf(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&this.imageState_===qa.LOADED){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.isTainted_())i.fillStyle=rk(this.color_),i.fillRect(0,0,e.width/t,e.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var a=i.getImageData(0,0,e.width,e.height),n=a.data,r=this.color_[0]/255,o=this.color_[1]/255,s=this.color_[2]/255,h=this.color_[3],$=0,c=n.length;$<c;$+=4)n[$]*=r,n[$+1]*=o,n[$+2]*=s,n[$+3]*=h;i.putImageData(a,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(lc);function Vk(t,e,i,a,n,r){var o=of.get(e,a,r);return o||(o=new Uk(t,e,i,a,n,r),of.set(e,a,r,o)),o}nf.get=Vk,nf.default=Uk;var wq=Ah&&Ah.__extends||function(){var i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Wk=function(i){function t(t){var o=this,r=t||{},e=void 0!==r.opacity?r.opacity:1,n=void 0!==r.rotation?r.rotation:0,s=void 0!==r.scale?r.scale:1,c=void 0!==r.rotateWithView&&r.rotateWithView;(o=i.call(this,{opacity:e,rotation:n,scale:s,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:c,declutterMode:r.declutterMode})||this).anchor_=void 0!==r.anchor?r.anchor:[.5,.5],o.normalizedAnchor_=null,o.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:$a.TOP_LEFT,o.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:_b.FRACTION,o.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:_b.FRACTION,o.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var a=void 0!==r.img?r.img:null;o.imgSize_=r.imgSize;var h=r.src;ha(!(void 0!==h&&a),4),ha(!a||a&&o.imgSize_,5),void 0!==h&&0!==h.length||!a||(h=a.src||ga(a)),ha(void 0!==h&&h.length>0,6);var $=void 0!==r.src?qa.IDLE:qa.LOADED;return o.color_=void 0!==r.color?Ye(r.color):null,o.iconImage_=Vk(a,h,void 0!==o.imgSize_?o.imgSize_:null,o.crossOrigin_,$,o.color_),o.offset_=void 0!==r.offset?r.offset:[0,0],o.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:$a.TOP_LEFT,o.origin_=null,o.size_=void 0!==r.size?r.size:null,o}return wq(t,i),t.prototype.clone=function(){var i=this.getScale();return new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(i)?i.slice():i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},t.prototype.getAnchor=function(){var i=this.normalizedAnchor_;if(!i){i=this.anchor_;var t=this.getSize();if(this.anchorXUnits_==_b.FRACTION||this.anchorYUnits_==_b.FRACTION){if(!t)return null;i=this.anchor_.slice(),this.anchorXUnits_==_b.FRACTION&&(i[0]*=t[0]),this.anchorYUnits_==_b.FRACTION&&(i[1]*=t[1])}if(this.anchorOrigin_!=$a.TOP_LEFT){if(!t)return null;i===this.anchor_&&(i=this.anchor_.slice()),this.anchorOrigin_!=$a.TOP_RIGHT&&this.anchorOrigin_!=$a.BOTTOM_RIGHT||(i[0]=-i[0]+t[0]),this.anchorOrigin_!=$a.BOTTOM_LEFT&&this.anchorOrigin_!=$a.BOTTOM_RIGHT||(i[1]=-i[1]+t[1])}this.normalizedAnchor_=i}var o=this.getDisplacement();return[i[0]-o[0],i[1]+o[1]]},t.prototype.setAnchor=function(i){this.anchor_=i,this.normalizedAnchor_=null},t.prototype.getColor=function(){return this.color_},t.prototype.getImage=function(i){return this.iconImage_.getImage(i)},t.prototype.getPixelRatio=function(i){return this.iconImage_.getPixelRatio(i)},t.prototype.getImageSize=function(){return this.iconImage_.getSize()},t.prototype.getImageState=function(){return this.iconImage_.getImageState()},t.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},t.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var i=this.offset_;if(this.offsetOrigin_!=$a.TOP_LEFT){var t=this.getSize(),o=this.iconImage_.getSize();if(!t||!o)return null;i=i.slice(),this.offsetOrigin_!=$a.TOP_RIGHT&&this.offsetOrigin_!=$a.BOTTOM_RIGHT||(i[0]=o[0]-t[0]-i[0]),this.offsetOrigin_!=$a.BOTTOM_LEFT&&this.offsetOrigin_!=$a.BOTTOM_RIGHT||(i[1]=o[1]-t[1]-i[1])}return this.origin_=i,this.origin_},t.prototype.getSrc=function(){return this.iconImage_.getSrc()},t.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},t.prototype.listenImageChange=function(i){this.iconImage_.addEventListener(ba.CHANGE,i)},t.prototype.load=function(){this.iconImage_.load()},t.prototype.unlistenImageChange=function(i){this.iconImage_.removeEventListener(ba.CHANGE,i)},t}(qk);Ah.default=Wk;var qb=.5;function xq(e,r,t,a,o,i,$){var n=e[0]*qb,c=e[1]*qb,C=Sa(n,c);C.imageSmoothingEnabled=!1;for(var l=C.canvas,p=new Rk(C,qb,o,null,$),s=t.length,g=Math.floor(16777215/s),h={},M=1;M<=s;++M){var m=t[M-1],T=m.getStyleFunction()||a;if(a){var I=T(m,i);if(I){Array.isArray(I)||(I=[I]);for(var v="#"+("000000"+(M*g).toString(16)).slice(-6),E=0,f=I.length;E<f;++E){var u=I[E],S=u.getGeometryFunction()(m);if(S&&Ka(o,S.getExtent())){var x=u.clone(),D=x.getFill();D&&D.setColor(v);var O=x.getStroke();O&&(O.setColor(v),O.setLineDash(null)),x.setText(void 0);var d=u.getImage();if(d&&0!==d.getOpacity()){var _=d.getImageSize();if(!_)continue;var y=Sa(_[0],_[1],void 0,{alpha:!1}),U=y.canvas;y.fillStyle=v,y.fillRect(0,0,U.width,U.height),x.setImage(new Wk({img:U,imgSize:_,anchor:d.getAnchor(),anchorXUnits:_b.PIXELS,anchorYUnits:_b.PIXELS,offset:d.getOrigin(),opacity:1,size:d.getSize(),scale:d.getScale(),rotation:d.getRotation(),rotateWithView:d.getRotateWithView()}))}var L=x.getZIndex()||0;(w=h[L])||(w={},h[L]=w,w.Polygon=[],w.Circle=[],w.LineString=[],w.Point=[]),w[S.getType().replace("Multi","")].push(S,x)}}}}}for(var R=Object.keys(h).map(Number).sort(kc),H=(M=0,R.length);M<H;++M){var w=h[R[M]];for(var N in w){var j=w[N];for(E=0,f=j.length;E<f;E+=2){p.setStyle(j[E+1]);for(var q=0,A=r.length;q<A;++q)p.setTransform(r[q]),p.drawGeometry(j[E])}}}return C.getImageData(0,0,l.width,l.height)}function yq(e,r,t){var a=[];if(t){var o=Math.floor(Math.round(e[0])*qb),i=Math.floor(Math.round(e[1])*qb),$=4*(va(o,0,t.width-1)+va(i,0,t.height-1)*t.width),n=t.data[$],c=t.data[$+1],C=t.data[$+2]+256*(c+256*n),l=Math.floor(16777215/r.length);C&&C%l==0&&a.push(r[C/l-1])}return a}var zq=.5,Xk={Point:Iq,LineString:Fq,Polygon:Kq,MultiPoint:Jq,MultiLineString:Gq,MultiPolygon:Hq,GeometryCollection:Eq,Circle:Cq};function Aq(e,t){return parseInt(ga(e),10)-parseInt(ga(t),10)}function Bq(e,t){var r=Dh(e,t);return r*r}function Dh(e,t){return zq*e/t}function Cq(e,t,r,a,n){var $=r.getFill(),i=r.getStroke();if($||i){var g=e.getBuilder(r.getZIndex(),"Circle");g.setFillStrokeStyle($,i),g.drawCircle(t,a)}var o=r.getText();if(o&&o.getText()){var l=(n||e).getBuilder(r.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,a)}}function Yk(e,t,r,a,n,$,i){var g=!1,o=r.getImage();if(o){var l=o.getImageState();l==qa.LOADED||l==qa.ERROR?o.unlistenImageChange(n):(l==qa.IDLE&&o.load(),o.listenImageChange(n),g=!0)}return Dq(e,t,r,a,$,i),g}function Dq(e,t,r,a,n,$){var i=r.getGeometryFunction()(t);if(i){var g=i.simplifyTransformed(a,n);if(r.getRenderer())Zk(e,g,r,t);else(0,Xk[g.getType()])(e,g,r,t,$)}}function Zk(e,t,r,a){if("GeometryCollection"!=t.getType())e.getBuilder(r.getZIndex(),"Default").drawCustom(t,a,r.getRenderer(),r.getHitDetectionRenderer());else for(var n=t.getGeometries(),$=0,i=n.length;$<i;++$)Zk(e,n[$],r,a)}function Eq(e,t,r,a,n){var $,i,g=t.getGeometriesArray();for($=0,i=g.length;$<i;++$){(0,Xk[g[$].getType()])(e,g[$],r,a,n)}}function Fq(e,t,r,a,n){var $=r.getStroke();if($){var i=e.getBuilder(r.getZIndex(),"LineString");i.setFillStrokeStyle(null,$),i.drawLineString(t,a)}var g=r.getText();if(g&&g.getText()){var o=(n||e).getBuilder(r.getZIndex(),"Text");o.setTextStyle(g),o.drawText(t,a)}}function Gq(e,t,r,a,n){var $=r.getStroke();if($){var i=e.getBuilder(r.getZIndex(),"LineString");i.setFillStrokeStyle(null,$),i.drawMultiLineString(t,a)}var g=r.getText();if(g&&g.getText()){var o=(n||e).getBuilder(r.getZIndex(),"Text");o.setTextStyle(g),o.drawText(t,a)}}function Hq(e,t,r,a,n){var $=r.getFill(),i=r.getStroke();if(i||$){var g=e.getBuilder(r.getZIndex(),"Polygon");g.setFillStrokeStyle($,i),g.drawMultiPolygon(t,a)}var o=r.getText();if(o&&o.getText()){var l=(n||e).getBuilder(r.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,a)}}function Iq(e,t,r,a,n){var $,i=r.getImage(),g=r.getText();if(i){if(i.getImageState()!=qa.LOADED)return;var o=e;if(n){var l=i.getDeclutterMode();if("none"!==l)if(o=n,"obstacle"===l){var d=e.getBuilder(r.getZIndex(),"Image");d.setImageStyle(i,$),d.drawPoint(t,a)}else g&&g.getText()&&($={})}var u=o.getBuilder(r.getZIndex(),"Image");u.setImageStyle(i,$),u.drawPoint(t,a)}if(g&&g.getText()){var v=e;n&&(v=n);var x=v.getBuilder(r.getZIndex(),"Text");x.setTextStyle(g,$),x.drawText(t,a)}}function Jq(e,t,r,a,n){var $,i=r.getImage(),g=r.getText();if(i){if(i.getImageState()!=qa.LOADED)return;var o=e;if(n){var l=i.getDeclutterMode();if("none"!==l)if(o=n,"obstacle"===l){var d=e.getBuilder(r.getZIndex(),"Image");d.setImageStyle(i,$),d.drawMultiPoint(t,a)}else g&&g.getText()&&($={})}var u=o.getBuilder(r.getZIndex(),"Image");u.setImageStyle(i,$),u.drawMultiPoint(t,a)}if(g&&g.getText()){var v=e;n&&(v=n);var x=v.getBuilder(r.getZIndex(),"Text");x.setTextStyle(g,$),x.drawText(t,a)}}function Kq(e,t,r,a,n){var $=r.getFill(),i=r.getStroke();if($||i){var g=e.getBuilder(r.getZIndex(),"Polygon");g.setFillStrokeStyle($,i),g.drawPolygon(t,a)}var o=r.getText();if(o&&o.getText()){var l=(n||e).getBuilder(r.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,a)}}var Lq=mh&&mh.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$k=function(e){function t(t){var r=e.call(this,t)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.animatingOrInteracting_,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=Qa(),r.wrappedRenderedExtent_=Qa(),r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r.declutterExecutorGroup=null,r.clipping=!0,r.compositionContext_=null,r.opacity_=1,r}return Lq(t,e),t.prototype.renderWorlds=function(e,t,r){var i=t.extent,n=t.viewState,o=n.center,a=n.resolution,s=n.projection,p=n.rotation,$=s.getExtent(),u=this.getLayer().getSource(),d=t.pixelRatio,c=t.viewHints,l=!(c[Ha.ANIMATING]||c[Ha.INTERACTING]),h=this.compositionContext_,m=Math.round(t.size[0]*d),_=Math.round(t.size[1]*d),g=u.getWrapX()&&s.canWrapX(),F=g?ra($):null,f=g?Math.ceil((i[2]-$[2])/F)+1:1,x=g?Math.floor((i[0]-$[0])/F):0;do{var v=this.getRenderTransform(o,a,p,d,m,_,x*F);e.execute(h,1,v,p,l,void 0,r)}while(++x<f)},t.prototype.setupCompositionContext_=function(){if(1!==this.opacity_){var e=Sa(this.context.canvas.width,this.context.canvas.height,vh);this.compositionContext_=e}else this.compositionContext_=this.context},t.prototype.releaseCompositionContext_=function(){if(1!==this.opacity_){var e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,uk(this.compositionContext_),vh.push(this.compositionContext_.canvas),this.compositionContext_=null}},t.prototype.renderDeclutter=function(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())},t.prototype.renderFrame=function(e,t){var r=e.pixelRatio,i=e.layerStatesArray[e.layerIndex];zo(this.pixelTransform,1/r,1/r),wg(this.inversePixelTransform,this.pixelTransform);var n=Ij(this.pixelTransform);this.useContainer(t,n,this.getBackground(e));var o=this.context,a=o.canvas,s=this.replayGroup_,p=this.declutterExecutorGroup;if((!s||s.isEmpty())&&(!p||p.isEmpty()))return null;var $=Math.round(e.size[0]*r),u=Math.round(e.size[1]*r);a.width!=$||a.height!=u?(a.width=$,a.height=u,a.style.transform!==n&&(a.style.transform=n)):this.containerReused||o.clearRect(0,0,$,u),this.preRender(o,e);var d=e.viewState,c=d.projection;this.opacity_=i.opacity,this.setupCompositionContext_();var l=!1,h=!0;if(i.extent&&this.clipping){var m=Vb(i.extent,c);(l=(h=Ka(m,e.extent))&&!Ub(m,e.extent))&&this.clipUnrotated(this.compositionContext_,e,m)}return h&&this.renderWorlds(s,e),l&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container},t.prototype.getFeatures=function(e){return new Promise(function(t){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];za(this.pixelTransform,r);var i=this.renderedCenter_,n=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,s=this.wrappedRenderedExtent_,p=this.getLayer(),$=[],u=r[0]*qb,d=r[1]*qb;$.push(this.getRenderTransform(i,n,o,qb,u,d,0).slice());var c=p.getSource(),l=a.getExtent();if(c.getWrapX()&&a.canWrapX()&&!Ub(l,s)){for(var h=s[0],m=ra(l),_=0,g=void 0;h<l[0];)g=m*--_,$.push(this.getRenderTransform(i,n,o,qb,u,d,g).slice()),h+=m;for(_=0,h=s[2];h>l[2];)g=m*++_,$.push(this.getRenderTransform(i,n,o,qb,u,d,g).slice()),h-=m}this.hitDetectionImageData_=xq(r,$,this.renderedFeatures_,p.getStyleFunction(),s,n,o)}t(yq(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},t.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,n){var o=this;if(this.replayGroup_){var a,s=t.viewState.resolution,p=t.viewState.rotation,$=this.getLayer(),u={},d=function(e,t,r){var o=ga(e),a=u[o];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return u[o]=!0,n.splice(n.lastIndexOf(a),1),i(e,$,t);a.geometry=t,a.distanceSq=r}}else{if(0===r)return u[o]=!0,i(e,$,t);n.push(u[o]={feature:e,layer:$,geometry:t,distanceSq:r,callback:i})}},c=[this.replayGroup_];return this.declutterExecutorGroup&&c.push(this.declutterExecutorGroup),c.some(function(i){return a=i.forEachFeatureAtCoordinate(e,s,p,r,d,i===o.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(function(e){return e.value}):null)}),a}},t.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.prepareFrame=function(e){var t=this.getLayer(),r=t.getSource();if(!r)return!1;var i=e.viewHints[Ha.ANIMATING],n=e.viewHints[Ha.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&i||!a&&n)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=e.extent,p=e.viewState,$=p.projection,u=p.resolution,d=e.pixelRatio,c=t.getRevision(),l=t.getRenderBuffer(),h=t.getRenderOrder();void 0===h&&(h=Aq);var m=p.center.slice(),_=Le(s,l*u),g=_.slice(),F=[_.slice()],f=$.getExtent();if(r.getWrapX()&&$.canWrapX()&&!Ub(f,e.extent)){var x=ra(f),v=Math.max(ra(_)/2,x);_[0]=f[0]-v,_[2]=f[2]+v,Xj(m,$);var y=Nj(F[0],$);y[0]<f[0]&&y[2]<f[2]?F.push([y[0]+x,y[1],y[2]+x,y[3]]):y[0]>f[0]&&y[2]>f[2]&&F.push([y[0]-x,y[1],y[2]-x,y[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==c&&this.renderedRenderOrder_==h&&Ub(this.wrappedRenderedExtent_,_))return Sb(this.renderedExtent_,g)||(this.hitDetectionImageData_=null,this.renderedExtent_=g),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var E,C=new Mk(Dh(u,d),_,u,d);this.getLayer().getDeclutter()&&(E=new Mk(Dh(u,d),_,u,d));var R,T=Ra();if(T){for(var I=0,w=F.length;I<w;++I){var S=F[I],G=Fd(S,$);r.loadFeatures(G,cp(u,$),T)}R=_c(T,$)}else for(I=0,w=F.length;I<w;++I)r.loadFeatures(F[I],u,$);var O=Bq(u,d),j=!0,D=function(e){var r,i=e.getStyleFunction()||t.getStyleFunction();if(i&&(r=i(e,u)),r){var n=this.renderFeature(e,O,r,C,R,E);j=j&&!n}}.bind(this),q=Fd(_,$),A=r.getFeaturesInExtent(q);h&&A.sort(h);for(I=0,w=A.length;I<w;++I)D(A[I]);this.renderedFeatures_=A,this.ready=j;var H=C.finish(),b=new Qk(_,u,d,r.getOverlaps(),H,t.getRenderBuffer());return E&&(this.declutterExecutorGroup=new Qk(_,u,d,r.getOverlaps(),E.finish(),t.getRenderBuffer())),this.renderedResolution_=u,this.renderedRevision_=c,this.renderedRenderOrder_=h,this.renderedExtent_=g,this.wrappedRenderedExtent_=_,this.renderedCenter_=m,this.renderedProjection_=$,this.replayGroup_=b,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},t.prototype.renderFeature=function(e,t,r,i,n,o){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var s=0,p=r.length;s<p;++s)a=Yk(i,e,r[s],t,this.boundHandleStyleImageChange_,n,o)||a;else a=Yk(i,e,r,t,this.boundHandleStyleImageChange_,n,o);return a},t}(wh);mh.default=$k;var Mq=hh&&hh.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),Cc=function(r){function e(e){return r.call(this,e)||this}return Mq(e,r),e.prototype.createRenderer=function(){return new $k(this)},e}(Gk);hh.default=Cc;var rf={};var sf=function(){function t(t){var $XGea$$interop$default=zj(hf);this.rbush_=new $XGea$$interop$default.d(t),this.items_={}}return t.prototype.insert=function(t,r){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:r};this.rbush_.insert(i),this.items_[ga(r)]=i},t.prototype.load=function(t,r){for(var i=new Array(r.length),e=0,n=r.length;e<n;e++){var o=t[e],s=r[e],u={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[e]=u,this.items_[ga(s)]=u}this.rbush_.load(i)},t.prototype.remove=function(t){var r=ga(t),i=this.items_[r];return delete this.items_[r],null!==this.rbush_.remove(i)},t.prototype.update=function(t,r){var i=this.items_[ga(r)],e=[i.minX,i.minY,i.maxX,i.maxY];Uc(e,t)||(this.remove(r),this.insert(t,r))},t.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},t.prototype.getInExtent=function(t){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(r).map(function(t){return t.value})},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,r){return this.forEach_(this.getInExtent(t),r)},t.prototype.forEach_=function(t,r){for(var i,e=0,n=t.length;e<n;e++)if(i=r(t[e]))return i;return i},t.prototype.isEmpty=function(){return Sc(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var r=this.rbush_.toJSON();return fb(r.minX,r.minY,r.maxX,r.maxY,t)},t.prototype.concat=function(t){for(var r in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[r]=t.items_[r]},t}();var Eh={};var Nq=Eh&&Eh.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),Fh=function(t){function r(r){var e=t.call(this)||this;e.projection=wa(r.projection),e.attributions_=_k(r.attributions),e.attributionsCollapsible_=void 0===r.attributionsCollapsible||r.attributionsCollapsible,e.loading=!1,e.state_=void 0!==r.state?r.state:"ready",e.wrapX_=void 0!==r.wrapX&&r.wrapX,e.interpolate_=!!r.interpolate,e.viewResolver=null,e.viewRejector=null;var o=e;return e.viewPromise_=new Promise(function(t,r){o.viewResolver=t,o.viewRejector=r}),e}return Nq(r,t),r.prototype.getAttributions=function(){return this.attributions_},r.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},r.prototype.getProjection=function(){return this.projection},r.prototype.getResolutions=function(){return da()},r.prototype.getView=function(){return this.viewPromise_},r.prototype.getState=function(){return this.state_},r.prototype.getWrapX=function(){return this.wrapX_},r.prototype.getInterpolate=function(){return this.interpolate_},r.prototype.refresh=function(){this.changed()},r.prototype.setAttributions=function(t){this.attributions_=_k(t),this.changed()},r.prototype.setState=function(t){this.state_=t,this.changed()},r}(Xa);function _k(t){return t?Array.isArray(t)?function(r){return t}:"function"==typeof t?t:function(r){return[t]}:null}Eh.default=Fh;var La={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Oq(t,r){return[[-1/0,-1/0,1/0,1/0]]}var Pq=!1;function Qq(e,r,t,s,a,o,$){var n=new XMLHttpRequest;n.open("GET","function"==typeof e?e(t,s,a):e,!0),"arraybuffer"==r.getType()&&(n.responseType="arraybuffer"),n.withCredentials=Pq,n.onload=function(e){if(!n.status||n.status>=200&&n.status<300){var s=r.getType(),i=void 0;"json"==s||"text"==s?i=n.responseText:"xml"==s?(i=n.responseXML)||(i=new DOMParser().parseFromString(n.responseText,"application/xml")):"arraybuffer"==s&&(i=n.response),i?o(r.readFeatures(i,{extent:t,featureProjection:a}),r.readProjection(i)):$()}else $()},n.onerror=$,n.send()}function al(e,r){return function(t,s,a,o,$){var n=this;Qq(e,r,t,s,a,function(e,r){n.addFeatures(e),void 0!==o&&o(e)},$||jc)}}var bl=rf&&rf.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jb=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.feature=r,o.features=n,o}return bl(t,e),t}(Ja);rf.VectorSourceEvent=Jb;var hd=function(e){function t(t){var r=this,n=t||{};(r=e.call(this,{attributions:n.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===n.wrapX||n.wrapX})||this).on,r.once,r.un,r.loader_=jc,r.format_=n.format,r.overlaps_=void 0===n.overlaps||n.overlaps,r.url_=n.url,void 0!==n.loader?r.loader_=n.loader:void 0!==r.url_&&(ha(r.format_,7),r.loader_=al(r.url_,r.format_)),r.strategy_=void 0!==n.strategy?n.strategy:Oq;var o,i,s=void 0===n.useSpatialIndex||n.useSpatialIndex;return r.featuresRtree_=s?new sf:null,r.loadedExtentsRtree_=new sf,r.loadingExtentsCount_=0,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(n.features)?i=n.features:n.features&&(i=(o=n.features).getArray()),s||void 0!==o||(o=new Aa(i)),void 0!==i&&r.addFeaturesInternal(i),void 0!==o&&r.bindFeaturesCollection_(o),r}return bl(t,e),t.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},t.prototype.addFeatureInternal=function(e){var t=ga(e);if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var r=e.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Jb(La.ADDFEATURE,e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)},t.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[ea(t,ba.CHANGE,this.handleFeatureChange_,this),ea(t,hc.PROPERTYCHANGE,this.handleFeatureChange_,this)]},t.prototype.addToIndex_=function(e,t){var r=!0,n=t.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=t),r&&(ha(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r},t.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},t.prototype.addFeaturesInternal=function(e){for(var t=[],r=[],n=[],o=0,i=e.length;o<i;o++){var s=e[o],a=ga(s);this.addToIndex_(a,s)&&r.push(s)}o=0;for(var u=r.length;o<u;o++){s=r[o],a=ga(s);this.setupChangeEvents_(a,s);var $=s.getGeometry();if($){var l=$.getExtent();t.push(l),n.push(s)}else this.nullGeometryFeatures_[a]=s}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(La.ADDFEATURE)){o=0;for(var p=r.length;o<p;o++)this.dispatchEvent(new Jb(La.ADDFEATURE,r[o]))}},t.prototype.bindFeaturesCollection_=function(e){var t=!1;this.addEventListener(La.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(La.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(ua.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)}.bind(this)),e.addEventListener(ua.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)}.bind(this)),this.featuresCollection_=e},t.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(la)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var r=function(e){this.removeFeatureInternal(e)}.bind(this);for(var n in this.featuresRtree_.forEach(r),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var o=new Jb(La.CLEAR);this.dispatchEvent(o),this.changed()},t.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},t.prototype.forEachFeatureAtCoordinateDirect=function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})},t.prototype.forEachFeatureInExtent=function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},t.prototype.forEachFeatureIntersectingExtent=function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var n=t(r);if(n)return n}})},t.prototype.getFeaturesCollection=function(){return this.featuresCollection_},t.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Sc(this.nullGeometryFeatures_)||Wa(e,sg(this.nullGeometryFeatures_))),e},t.prototype.getFeaturesAtCoordinate=function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t},t.prototype.getFeaturesInExtent=function(e,t){var r=this;if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);var n=Io(e,t);return[].concat.apply([],n.map(function(e){return r.featuresRtree_.getInExtent(e)}))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},t.prototype.getClosestFeatureToCoordinate=function(e,t){var r=e[0],n=e[1],o=null,i=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],u=t||Oa;return this.featuresRtree_.forEachInExtent(a,function(e){if(u(e)){var t=e.getGeometry(),$=s;if((s=t.closestPointXY(r,n,i,s))<$){o=e;var l=Math.sqrt(s);a[0]=r-l,a[1]=n-l,a[2]=r+l,a[3]=n+l}}}),o},t.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},t.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null},t.prototype.getFeatureByUid=function(e){var t=this.uidIndex_[e];return void 0!==t?t:null},t.prototype.getFormat=function(){return this.format_},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.getUrl=function(){return this.url_},t.prototype.handleFeatureChange_=function(e){var t=e.target,r=ga(t),n=t.getGeometry();if(n){var o=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);var i=t.getId();if(void 0!==i){var s=i.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new Jb(La.CHANGEFEATURE,t))},t.prototype.hasFeature=function(e){var t=e.getId();return void 0!==t?t in this.idIndex_:ga(e)in this.uidIndex_},t.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Sc(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()},t.prototype.loadFeatures=function(e,t,r){for(var n=this.loadedExtentsRtree_,o=this.strategy_(e,t,r),i=function(e,i){var a=o[e];n.forEachInExtent(a,function(e){return Ub(e.extent,a)})||(++s.loadingExtentsCount_,s.dispatchEvent(new Jb(La.FEATURESLOADSTART)),s.loader_.call(s,a,t,r,function(e){--this.loadingExtentsCount_,this.dispatchEvent(new Jb(La.FEATURESLOADEND,void 0,e))}.bind(s),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Jb(La.FEATURESLOADERROR))}.bind(s)),n.insert(a,{extent:a.slice()}))},s=this,a=0,u=o.length;a<u;++a)i(a);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},t.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),e.prototype.refresh.call(this)},t.prototype.removeLoadedExtent=function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if(Uc(r.extent,e))return t=r,!0}),t&&r.remove(t)},t.prototype.removeFeature=function(e){if(e){var t=ga(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}},t.prototype.removeFeatureInternal=function(e){var t=ga(e),r=this.featureChangeKeys_[t];if(r){r.forEach(la),delete this.featureChangeKeys_[t];var n=e.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[t],this.dispatchEvent(new Jb(La.REMOVEFEATURE,e)),e}},t.prototype.removeFromIdIndex_=function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t},t.prototype.setLoader=function(e){this.loader_=e},t.prototype.setUrl=function(e){ha(this.format_,7),this.url_=e,this.setLoader(al(e,this.format_))},t}(Fh);rf.default=hd;var Gh={};var Hh={};var fa={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function cl(e){return Math.pow(e,3)}function Dc(e){return 1-cl(1-e)}function Rq(e){return 3*e*e-2*e*e*e}function Sq(e){return e}var Tq=Hh&&Hh.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ih=function(t){function e(e,i,r){var n=t.call(this)||this,o=r||{};return n.tileCoord=e,n.state=i,n.interimTile=null,n.key="",n.transition_=void 0===o.transition?250:o.transition,n.transitionStarts_={},n.interpolate=!!o.interpolate,n}return Tq(e,t),e.prototype.changed=function(){this.dispatchEvent(ba.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==fa.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==fa.LOADED){t.interimTile=null;break}t.getState()==fa.LOADING?e=t:t.getState()==fa.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==fa.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){da()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var r=e-i+1e3/60;return r>=this.transition_?1:cl(r/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(lc);Hh.default=Ih;var Uq=Gh&&Gh.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Jh=function(t){function e(e,i,s,n,r,a){var o=t.call(this,e,i,a)||this;return o.crossOrigin_=n,o.src_=s,o.key=s,o.image_=new Image,null!==n&&(o.image_.crossOrigin=n),o.unlisten_=null,o.tileLoadFunction_=r,o}return Uq(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=fa.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=fa.ERROR,this.unlistenImage_(),this.image_=Vq(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=fa.LOADED:this.state=fa.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==fa.ERROR&&(this.state=fa.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==fa.IDLE&&(this.state=fa.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=qf(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Ih);function Vq(){var t=Sa(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}Gh.default=Jh;var Wq=function(){function t(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,i){this.points_.push(t,i,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var n=i-3;n>0&&this.points_[n+2]>t;)n-=3;var e=this.points_[i+2]-this.points_[n+2];if(e<1e3/60)return!1;var s=this.points_[i]-this.points_[n],o=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/e,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();var Kh={};var Lh={};var Mh={};var Xq=Mh&&Mh.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])})(r,t)};return function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),dl=function(e){function r(r){var t=e.call(this)||this;return t.map_=r,t}return Xq(r,e),r.prototype.dispatchRenderEvent=function(e,r){da()},r.prototype.calculateMatrices2D=function(e){var r=e.viewState,t=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;Ab(t,e.size[0]/2,e.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]),wg(o,t)},r.prototype.forEachFeatureAtCoordinate=function(e,r,t,o,n,a,i,c){var $,p=r.viewState;function u(e,r,t,o){return n.call(a,r,e?t:null,o)}var s=p.projection,h=Xj(e.slice(),s),l=[[0,0]];if(s.canWrapX()&&o){var f=s.getExtent(),I=ra(f);l.push([-I,0],[I,0])}for(var d=r.layerStatesArray,m=d.length,y=[],v=[],x=0;x<l.length;x++)for(var g=m-1;g>=0;--g){var _=d[g],C=_.layer;if(C.hasRenderer()&&Sd(_,p)&&i.call(c,C)){var j=C.getRenderer(),q=C.getSource();if(j&&q){var E=q.getWrapX()?h:e,b=u.bind(null,_.managed);v[0]=E[0]+l[x][0],v[1]=E[1]+l[x][1],$=j.forEachFeatureAtCoordinate(v,r,t,b,y)}if($)return $}}if(0!==y.length){var w=1/y.length;return y.forEach(function(e,r){return e.distanceSq+=r*w}),y.sort(function(e,r){return e.distanceSq-r.distanceSq}),y.some(function(e){return $=e.callback(e.feature,e.layer,e.geometry)}),$}},r.prototype.forEachLayerAtPixel=function(e,r,t,o,n){return da()},r.prototype.hasFeatureAtCoordinate=function(e,r,t,o,n,a){return void 0!==this.forEachFeatureAtCoordinate(e,r,t,o,Oa,this,n,a)},r.prototype.getMap=function(){return this.map_},r.prototype.renderFrame=function(e){da()},r.prototype.scheduleExpireIconCache=function(e){of.canExpireCache()&&e.postRenderFunctions.push(Yq)},r}(qg);function Yq(e,r){of.expire()}Mh.default=dl;var Zq=Lh&&Lh.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])})(r,t)};return function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nh=function(e){function r(r){var t=e.call(this,r)||this;t.fontChangeListenerKey_=ea(Gb,hc.PROPERTYCHANGE,r.redrawText.bind(r)),t.element_=document.createElement("div");var n=t.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",t.element_.className=pb+" ol-layers";var s=r.getViewport();return s.insertBefore(t.element_,s.firstChild||null),t.children_=[],t.renderedVisible_=!0,t}return Zq(r,e),r.prototype.dispatchRenderEvent=function(e,r){var t=this.getMap();if(t.hasListener(e)){var n=new uh(e,void 0,r);t.dispatchEvent(n)}},r.prototype.disposeInternal=function(){la(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},r.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(Xb.PRECOMPOSE,e);var r=e.layerStatesArray.sort(function(e,r){return e.zIndex-r.zIndex}),t=e.viewState;this.children_.length=0;for(var n=[],s=null,i=0,o=r.length;i<o;++i){var a=r[i];e.layerIndex=i;var l=a.layer,p=l.getSourceState();if(!Sd(a,t)||"ready"!=p&&"undefined"!=p)l.unrender();else{var $=l.render(e,s);$&&($!==s&&(this.children_.push($),s=$),"getDeclutter"in l&&n.push(l))}}for(i=n.length-1;i>=0;--i)n[i].renderDeclutter(e);Kp(this.element_,this.children_),this.dispatchRenderEvent(Xb.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},r.prototype.forEachLayerAtPixel=function(e,r,t,n,s){for(var i=r.viewState,o=r.layerStatesArray,a=o.length-1;a>=0;--a){var l=o[a],p=l.layer;if(p.hasRenderer()&&Sd(l,i)&&s(p)){var $=p.getRenderer().getDataAtPixel(e,r,t);if($){var d=n(p,$);if(d)return d}}}},r}(dl);Lh.default=Nh;var Oh={};var tf={};var el=tf&&tf.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kb=function(e){function t(t,r){var n=e.call(this,t)||this;return n.layer=r,n}return el(t,e),t}(Ja);tf.GroupEvent=Kb;var Ph={LAYERS:"layers"},Td=function(e){function t(t){var r=this,n=t||{},o=ya({},n);delete o.layers;var i=n.layers;return(r=e.call(this,o)||this).on,r.once,r.un,r.layersListenerKeys_=[],r.listenerKeys_={},r.addChangeListener(Ph.LAYERS,r.handleLayersChanged_),i?Array.isArray(i)?i=new Aa(i.slice(),{unique:!0}):ha("function"==typeof i.getArray,43):i=new Aa(void 0,{unique:!0}),r.setLayers(i),r}return el(t,e),t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(la),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var t in this.layersListenerKeys_.push(ea(e,ua.ADD,this.handleLayersAdd_,this),ea(e,ua.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[t].forEach(la);Rc(this.listenerKeys_);for(var r=e.getArray(),n=0,o=r.length;n<o;n++){var i=r[n];this.registerLayerListeners_(i),this.dispatchEvent(new Kb("addlayer",i))}this.changed()},t.prototype.registerLayerListeners_=function(e){var r=[ea(e,hc.PROPERTYCHANGE,this.handleLayerChange_,this),ea(e,ba.CHANGE,this.handleLayerChange_,this)];e instanceof t&&r.push(ea(e,"addlayer",this.handleLayerGroupAdd_,this),ea(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ga(e)]=r},t.prototype.handleLayerGroupAdd_=function(e){this.dispatchEvent(new Kb("addlayer",e.layer))},t.prototype.handleLayerGroupRemove_=function(e){this.dispatchEvent(new Kb("removelayer",e.layer))},t.prototype.handleLayersAdd_=function(e){var t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Kb("addlayer",t)),this.changed()},t.prototype.handleLayersRemove_=function(e){var t=e.element,r=ga(t);this.listenerKeys_[r].forEach(la),delete this.listenerKeys_[r],this.dispatchEvent(new Kb("removelayer",t)),this.changed()},t.prototype.getLayers=function(){return this.get(Ph.LAYERS)},t.prototype.setLayers=function(e){var t=this.getLayers();if(t)for(var r=t.getArray(),n=0,o=r.length;n<o;++n)this.dispatchEvent(new Kb("removelayer",r[n]));this.set(Ph.LAYERS,e)},t.prototype.getLayersArray=function(e){var t=void 0!==e?e:[];return this.getLayers().forEach(function(e){e.getLayersArray(t)}),t},t.prototype.getLayerStatesArray=function(e){var t=void 0!==e?e:[],r=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});var n=this.getLayerState(),o=n.zIndex;e||void 0!==n.zIndex||(o=0);for(var i=r,s=t.length;i<s;i++){var a=t[i];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=Bd(a.extent,n.extent):a.extent=n.extent),void 0===a.zIndex&&(a.zIndex=o)}return t},t.prototype.getSourceState=function(){return"ready"},t}(kh);tf.default=Td;var Qh={};var Rh={};var $q=Rh&&Rh.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ec=function(t){function r(r,e,n){var o=t.call(this,r)||this;return o.map=e,o.frameState=void 0!==n?n:null,o}return $q(r,t),r}(Ja);Rh.default=Ec;var _q=Qh&&Qh.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),rb=function(t){function e(e,o,n,r,i,p){var a=t.call(this,e,o,i)||this;return a.originalEvent=n,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==r&&r,a.activePointers=p,a}return _q(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(Ec);Qh.default=rb;var Sh={};var ia={SINGLECLICK:"singleclick",CLICK:ba.CLICK,DBLCLICK:ba.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var sb={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var ar=Sh&&Sh.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),fl=function(e){function t(t,o){var i=e.call(this,t)||this;i.map_=t,i.clickTimeoutId_,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=void 0===o?1:o,i.down_=null;var r=i.map_.getViewport();return i.activePointers_=[],i.trackedTouches_={},i.element_=r,i.pointerdownListenerKey_=ea(r,sb.POINTERDOWN,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=ea(r,sb.POINTERMOVE,i.relayMoveEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(ba.TOUCHMOVE,i.boundHandleTouchMove_,!!Hj&&{passive:!1}),i}return ar(t,e),t.prototype.emulateClick_=function(e){var t=new rb(ia.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new rb(ia.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var t=new rb(ia.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}.bind(this),250)},t.prototype.updateActivePointers_=function(e){var t=e,o=t.pointerId;if(t.type==ia.POINTERUP||t.type==ia.POINTERCANCEL){for(var i in delete this.trackedTouches_[o],this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else t.type!=ia.POINTERDOWN&&t.type!=ia.POINTERMOVE||(this.trackedTouches_[o]=t);this.activePointers_=sg(this.trackedTouches_)},t.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var t=new rb(ia.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(la),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(e){return 0===e.button},t.prototype.handlePointerDown_=function(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);var t=new rb(ia.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);for(var o in this.dispatchEvent(t),this.down_={},e){var i=e[o];this.down_[o]="function"==typeof i?jc:i}if(0===this.dragListenerKeys_.length){var r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ea(r,ia.POINTERMOVE,this.handlePointerMove_,this),ea(r,ia.POINTERUP,this.handlePointerUp_,this),ea(this.element_,ia.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(ea(this.element_.getRootNode(),ia.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;var t=new rb(ia.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}},t.prototype.relayMoveEvent_=function(e){this.originalPointerMoveEvent_=e;var t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new rb(ia.POINTERMOVE,this.map_,e,t))},t.prototype.handleTouchMove_=function(e){var t=this.originalPointerMoveEvent_;t&&!t.defaultPrevented||"boolean"==typeof e.cancelable&&!0!==e.cancelable||e.preventDefault()},t.prototype.isMoving_=function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(la(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ba.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(la(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(la),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},t}(lc);Sh.default=fl;var tb={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var xa={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var uf={};var vf=1/0;var br=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Rc(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},t.prototype.enqueue=function(t){ha(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=vf&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,r=e[t],s=i[t],o=t;t<n>>1;){var u=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),p=h<n&&i[h]<i[u]?h:u;e[t]=e[p],i[t]=i[p],t=p}e[t]=r,i[t]=s,this.siftDown_(o,t)},t.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,r=i[e],s=n[e];e>t;){var o=this.getParentIndex_(e);if(!(n[o]>s))break;i[e]=i[o],n[e]=n[o],e=o}i[e]=r,n[e]=s},t.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,r=this.elements_,s=this.priorities_,o=0,u=r.length;for(e=0;e<u;++e)(i=n(t=r[e]))==vf?delete this.queuedElements_[this.keyFunction_(t)]:(s[o]=i,r[o++]=t);r.length=o,s.length=o,this.heapify_()},t}();var cr=uf&&uf.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gl=function(t){function e(e,i){var r=t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=i,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return cr(e,t),e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);i&&e[0].addEventListener(ba.CHANGE,this.boundHandleTileChange_);return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===fa.LOADED||i===fa.ERROR||i===fa.EMPTY){e.removeEventListener(ba.CHANGE,this.boundHandleTileChange_);var r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,r,n=0;this.tilesLoading_<t&&n<e&&this.getCount()>0;)r=(i=this.dequeue()[0]).getKey(),i.getState()!==fa.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++n,i.load())},e}(br);function hl(t,e,i,r,n){if(!(t&&i in t.wantedTiles))return vf;if(!t.wantedTiles[i][e.getKey()])return vf;var o=t.viewState.center,l=r[0]-o[0],a=r[1]-o[1];return 65536*Math.log(n)+Math.sqrt(l*l+a*a)/n}uf.default=gl,uf.getTilePriority=hl;var Fc={};var Ta={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var dr=42;var Th=256;function il(t,r,e){return function($,a,c,n,o){if($){if(!a&&!r)return $;var x=r?0:c[0]*a,p=r?0:c[1]*a,z=o?o[0]:0,R=o?o[1]:0,h=t[0]+x/2+z,i=t[2]-x/2+z,m=t[1]+p/2+R,u=t[3]-p/2+R;h>i&&(i=h=(i+h)/2),m>u&&(u=m=(u+m)/2);var M=va($[0],h,i),l=va($[1],m,u);if(n&&e&&a){var f=30*a;M+=-f*Math.log(1+Math.max(0,h-$[0])/f)+f*Math.log(1+Math.max(0,$[0]-i)/f),l+=-f*Math.log(1+Math.max(0,m-$[1])/f)+f*Math.log(1+Math.max(0,$[1]-u)/f)}return[M,l]}}}function fr(t){return t}function Uh(o,t,e,n){var r=ra(t)/e[0],a=Ya(t)/e[1];return n?Math.min(o,Math.max(r,a)):Math.min(o,Math.min(r,a))}function Vh(o,t,e){var n=Math.min(o,t);return n*=Math.log(1+50*Math.max(0,o/t-1))/50+1,e&&(n=Math.max(n,e),n/=Math.log(1+50*Math.max(0,e/o-1))/50+1),va(n,e/2,2*t)}function gr(o,t,e,n){return function(r,a,$,l){if(void 0!==r){var i=o[0],p=o[o.length-1],m=e?Uh(i,e,$,n):i;if(l)return void 0===t||t?Vh(r,m,p):va(r,p,m);var u=Math.min(m,r),h=Math.floor(rg(o,u,a));return o[h]>m&&h<o.length-1?o[h+1]:o[h]}}}function hr(o,t,e,n,r,a){return function($,l,i,p){if(void 0!==$){var m=r?Uh(t,r,i,a):t,u=void 0!==e?e:0;if(p)return void 0===n||n?Vh($,m,u):va($,u,m);var h=Math.ceil(Math.log(t/m)/Math.log(o)-1e-9),M=-l*(.5-1e-9)+.5,c=Math.min(m,$),s=Math.floor(Math.log(t/c)/Math.log(o)+M),v=Math.max(h,s),g=t/Math.pow(o,v);return va(g,u,m)}}}function jl(o,t,e,n,r){return function(a,$,l,i){if(void 0!==a){var p=n?Uh(o,n,l,r):o;return(void 0===e||e)&&i?Vh(a,p,t):va(a,t,p)}}}function Wh(e){return void 0!==e?0:void 0}function kl(e){return void 0!==e?e:void 0}function ir(e){var o=2*Math.PI/e;return function(e,r){return r?e:void 0!==e?e=Math.floor(e/o+.5)*o:void 0}}function jr(e){var o=e||Cb(5);return function(e,r){return r?e:void 0!==e?Math.abs(e)<=o?0:e:void 0}}var kr=Fc&&Fc.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xh=0,ub=function(t){function o(o){var e=t.call(this)||this;e.on,e.once,e.un;var i=ya({},o);return e.hints_=[0,0],e.animations_=[],e.updateAnimationKey_,e.projection_=Og(i.projection,"EPSG:3857"),e.viewportSize_=[100,100],e.targetCenter_=null,e.targetResolution_,e.targetRotation_,e.nextCenter_=null,e.nextResolution_,e.nextRotation_,e.cancelAnchor_=void 0,i.projection&&$o(),i.center&&(i.center=pa(i.center,e.projection_)),i.extent&&(i.extent=Vb(i.extent,e.projection_)),e.applyOptions_(i),e}return kr(o,t),o.prototype.applyOptions_=function(t){var o=ya({},t);for(var e in Ta)delete o[e];this.setProperties(o,!0);var i=ml(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;var n=ll(t),r=i.constraint,a=nl(t);this.constraints_={center:n,resolution:r,rotation:a},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(o.prototype,"padding",{get:function(){return this.padding_},set:function(t){var o=this.padding_;this.padding_=t;var e=this.getCenter();if(e){var i=t||[0,0,0,0];o=o||[0,0,0,0];var n=this.getResolution(),r=n/2*(i[3]-o[3]+o[1]-i[1]),a=n/2*(i[0]-o[0]+o[2]-i[2]);this.setCenterInternal([e[0]+r,e[1]-a])}},enumerable:!1,configurable:!0}),o.prototype.getUpdatedOptions_=function(t){var o=this.getProperties();return void 0!==o.resolution?o.resolution=this.getResolution():o.zoom=this.getZoom(),o.center=this.getCenterInternal(),o.rotation=this.getRotation(),ya({},o,t)},o.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var o=new Array(arguments.length),e=0;e<o.length;++e){var i=arguments[e];i.center&&((i=ya({},i)).center=pa(i.center,this.getProjection())),i.anchor&&((i=ya({},i)).anchor=pa(i.anchor,this.getProjection())),o[e]=i}this.animateInternal.apply(this,o)},o.prototype.animateInternal=function(t){var o,e=arguments.length;e>1&&"function"==typeof arguments[e-1]&&(o=arguments[e-1],--e);for(var i=0;i<e&&!this.isDef();++i){var n=arguments[i];n.center&&this.setCenterInternal(n.center),void 0!==n.zoom?this.setZoom(n.zoom):n.resolution&&this.setResolution(n.resolution),void 0!==n.rotation&&this.setRotation(n.rotation)}if(i!==e){for(var r=Date.now(),a=this.targetCenter_.slice(),s=this.targetResolution_,h=this.targetRotation_,p=[];i<e;++i){var u=arguments[i],$={start:r,complete:!1,anchor:u.anchor,duration:void 0!==u.duration?u.duration:1e3,easing:u.easing||Rq,callback:o};if(u.center&&($.sourceCenter=a,$.targetCenter=u.center.slice(),a=$.targetCenter),void 0!==u.zoom?($.sourceResolution=s,$.targetResolution=this.getResolutionForZoom(u.zoom),s=$.targetResolution):u.resolution&&($.sourceResolution=s,$.targetResolution=u.resolution,s=$.targetResolution),void 0!==u.rotation){$.sourceRotation=h;var l=qc(u.rotation-h+Math.PI,2*Math.PI)-Math.PI;$.targetRotation=h+l,h=$.targetRotation}ol($)?$.complete=!0:r+=$.duration,p.push($)}this.animations_.push(p),this.setHint(Ha.ANIMATING,1),this.updateAnimations_()}else o&&wf(o,!0)},o.prototype.getAnimating=function(){return this.hints_[Ha.ANIMATING]>0},o.prototype.getInteracting=function(){return this.hints_[Ha.INTERACTING]>0},o.prototype.cancelAnimations=function(){var t;this.setHint(Ha.ANIMATING,-this.hints_[Ha.ANIMATING]);for(var o=0,e=this.animations_.length;o<e;++o){var i=this.animations_[o];if(i[0].callback&&wf(i[0].callback,!1),!t)for(var n=0,r=i.length;n<r;++n){var a=i[n];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},o.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),o=!1,e=this.animations_.length-1;e>=0;--e){for(var i=this.animations_[e],n=!0,r=0,a=i.length;r<a;++r){var s=i[r];if(!s.complete){var h=t-s.start,p=s.duration>0?h/s.duration:1;p>=1?(s.complete=!0,p=1):n=!1;var u=s.easing(p);if(s.sourceCenter){var $=s.sourceCenter[0],l=s.sourceCenter[1],c=s.targetCenter[0],g=s.targetCenter[1];this.nextCenter_=s.targetCenter;var m=$+u*(c-$),_=l+u*(g-l);this.targetCenter_=[m,_]}if(s.sourceResolution&&s.targetResolution){var E=1===u?s.targetResolution:s.sourceResolution+u*(s.targetResolution-s.sourceResolution);if(s.anchor){var N=this.getViewportSize_(this.getRotation()),R=this.constraints_.resolution(E,0,N,!0);this.targetCenter_=this.calculateCenterZoom(R,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=E,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var d=1===u?qc(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+u*(s.targetRotation-s.sourceRotation);if(s.anchor){var v=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(v,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),o=!0,!s.complete)break}}if(n){this.animations_[e]=null,this.setHint(Ha.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var f=i[0].callback;f&&wf(f,!0)}}this.animations_=this.animations_.filter(Boolean),o&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},o.prototype.calculateCenterRotate=function(t,o){var e,i=this.getCenterInternal();return void 0!==i&&(e=[i[0]-o[0],i[1]-o[1]],Hg(e,t-this.getRotation()),So(e,o)),e},o.prototype.calculateCenterZoom=function(t,o){var e,i=this.getCenterInternal(),n=this.getResolution();void 0!==i&&void 0!==n&&(e=[o[0]-t*(o[0]-i[0])/n,o[1]-t*(o[1]-i[1])/n]);return e},o.prototype.getViewportSize_=function(t){var o=this.viewportSize_;if(t){var e=o[0],i=o[1];return[Math.abs(e*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(e*Math.sin(t))+Math.abs(i*Math.cos(t))]}return o},o.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},o.prototype.getCenter=function(){var t=this.getCenterInternal();return t?ad(t,this.getProjection()):t},o.prototype.getCenterInternal=function(){return this.get(Ta.CENTER)},o.prototype.getConstraints=function(){return this.constraints_},o.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},o.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},o.prototype.calculateExtent=function(t){var o=this.calculateExtentInternal(t);return Fd(o,this.getProjection())},o.prototype.calculateExtentInternal=function(t){var o=t||this.getViewportSizeMinusPadding_(),e=this.getCenterInternal();ha(e,1);var i=this.getResolution();ha(void 0!==i,2);var n=this.getRotation();return ha(void 0!==n,3),Ag(e,i,n,o)},o.prototype.getMaxResolution=function(){return this.maxResolution_},o.prototype.getMinResolution=function(){return this.minResolution_},o.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},o.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},o.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},o.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},o.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},o.prototype.getProjection=function(){return this.projection_},o.prototype.getResolution=function(){return this.get(Ta.RESOLUTION)},o.prototype.getResolutions=function(){return this.resolutions_},o.prototype.getResolutionForExtent=function(t,o){return this.getResolutionForExtentInternal(Vb(t,this.getProjection()),o)},o.prototype.getResolutionForExtentInternal=function(t,o){var e=o||this.getViewportSizeMinusPadding_(),i=ra(t)/e[0],n=Ya(t)/e[1];return Math.max(i,n)},o.prototype.getResolutionForValueFunction=function(t){var o=t||2,e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(o);return function(t){return e/Math.pow(o,t*n)}},o.prototype.getRotation=function(){return this.get(Ta.ROTATION)},o.prototype.getValueForResolutionFunction=function(t){var o=Math.log(t||2),e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/o;return function(t){return Math.log(e/t)/o/n}},o.prototype.getViewportSizeMinusPadding_=function(t){var o=this.getViewportSize_(t),e=this.padding_;return e&&(o=[o[0]-e[1]-e[3],o[1]-e[0]-e[2]]),o},o.prototype.getState=function(){var t=this.getProjection(),o=this.getResolution(),e=this.getRotation(),i=this.getCenterInternal(),n=this.padding_;if(n){var r=this.getViewportSizeMinusPadding_();i=Yh(i,this.getViewportSize_(),[r[0]/2+n[3],r[1]/2+n[0]],o,e)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:o,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:e,zoom:this.getZoom()}},o.prototype.getZoom=function(){var t,o=this.getResolution();return void 0!==o&&(t=this.getZoomForResolution(o)),t},o.prototype.getZoomForResolution=function(t){var o,e,i=this.minZoom_||0;if(this.resolutions_){var n=rg(this.resolutions_,t,1);i=n,o=this.resolutions_[n],e=n==this.resolutions_.length-1?2:o/this.resolutions_[n+1]}else o=this.maxResolution_,e=this.zoomFactor_;return i+Math.log(o/t)/Math.log(e)},o.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var o=va(Math.floor(t),0,this.resolutions_.length-2),e=this.resolutions_[o]/this.resolutions_[o+1];return this.resolutions_[o]/Math.pow(e,va(t-o,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},o.prototype.fit=function(t,o){var e;if(ha(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){ha(!Cg(t),25);var i=Vb(t,this.getProjection());e=xc(i)}else if("Circle"===t.getType()){i=Vb(t.getExtent(),this.getProjection());(e=xc(i)).rotate(this.getRotation(),oc(i))}else{var n=Ra();e=n?t.clone().transform(n,this.getProjection()):t}this.fitInternal(e,o)},o.prototype.rotatedExtentForGeometry=function(t){for(var o=this.getRotation(),e=Math.cos(o),i=Math.sin(-o),n=t.getFlatCoordinates(),r=t.getStride(),a=1/0,s=1/0,h=-1/0,p=-1/0,u=0,$=n.length;u<$;u+=r){var l=n[u]*e-n[u+1]*i,c=n[u]*i+n[u+1]*e;a=Math.min(a,l),s=Math.min(s,c),h=Math.max(h,l),p=Math.max(p,c)}return[a,s,h,p]},o.prototype.fitInternal=function(t,o){var e=o||{},i=e.size;i||(i=this.getViewportSizeMinusPadding_());var n,r=void 0!==e.padding?e.padding:[0,0,0,0],a=void 0!==e.nearest&&e.nearest;n=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;var s=this.rotatedExtentForGeometry(t),h=this.getResolutionForExtentInternal(s,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);h=isNaN(h)?n:Math.max(h,n),h=this.getConstrainedResolution(h,a?0:1);var p=this.getRotation(),u=Math.sin(p),$=Math.cos(p),l=oc(s);l[0]+=(r[1]-r[3])/2*h,l[1]+=(r[0]-r[2])/2*h;var c=l[0]*$-l[1]*u,g=l[1]*$+l[0]*u,m=this.getConstrainedCenter([c,g],h),_=e.callback?e.callback:jc;void 0!==e.duration?this.animateInternal({resolution:h,center:m,duration:e.duration,easing:e.easing},_):(this.targetResolution_=h,this.targetCenter_=m,this.applyTargetState_(!1,!0),wf(_,!0))},o.prototype.centerOn=function(t,o,e){this.centerOnInternal(pa(t,this.getProjection()),o,e)},o.prototype.centerOnInternal=function(t,o,e){this.setCenterInternal(Yh(t,o,e,this.getResolution(),this.getRotation()))},o.prototype.calculateCenterShift=function(t,o,e,i){var n,r=this.padding_;if(r&&t){var a=this.getViewportSizeMinusPadding_(-e),s=Yh(t,i,[a[0]/2+r[3],a[1]/2+r[0]],o,e);n=[t[0]-s[0],t[1]-s[1]]}return n},o.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},o.prototype.adjustCenter=function(t){var o=ad(this.targetCenter_,this.getProjection());this.setCenter([o[0]+t[0],o[1]+t[1]])},o.prototype.adjustCenterInternal=function(t){var o=this.targetCenter_;this.setCenterInternal([o[0]+t[0],o[1]+t[1]])},o.prototype.adjustResolution=function(t,o){var e=o&&pa(o,this.getProjection());this.adjustResolutionInternal(t,e)},o.prototype.adjustResolutionInternal=function(t,o){var e=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(this.targetResolution_*t,0,i,e);o&&(this.targetCenter_=this.calculateCenterZoom(n,o)),this.targetResolution_*=t,this.applyTargetState_()},o.prototype.adjustZoom=function(t,o){this.adjustResolution(Math.pow(this.zoomFactor_,-t),o)},o.prototype.adjustRotation=function(t,o){o&&(o=pa(o,this.getProjection())),this.adjustRotationInternal(t,o)},o.prototype.adjustRotationInternal=function(t,o){var e=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,e);o&&(this.targetCenter_=this.calculateCenterRotate(i,o)),this.targetRotation_+=t,this.applyTargetState_()},o.prototype.setCenter=function(t){this.setCenterInternal(t?pa(t,this.getProjection()):t)},o.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},o.prototype.setHint=function(t,o){return this.hints_[t]+=o,this.changed(),this.hints_[t]},o.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},o.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},o.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},o.prototype.applyTargetState_=function(t,o){var e=this.getAnimating()||this.getInteracting()||o,i=this.constraints_.rotation(this.targetRotation_,e),n=this.getViewportSize_(i),r=this.constraints_.resolution(this.targetResolution_,0,n,e),a=this.constraints_.center(this.targetCenter_,r,n,e,this.calculateCenterShift(this.targetCenter_,r,i,n));this.get(Ta.ROTATION)!==i&&this.set(Ta.ROTATION,i),this.get(Ta.RESOLUTION)!==r&&(this.set(Ta.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),a&&this.get(Ta.CENTER)&&gb(this.get(Ta.CENTER),a)||this.set(Ta.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},o.prototype.resolveConstraints=function(t,o,e){var i=void 0!==t?t:200,n=o||0,r=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,n,a),h=this.constraints_.center(this.targetCenter_,s,a,!1,this.calculateCenterShift(this.targetCenter_,s,r,a));if(0===i&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=r,this.targetCenter_=h,void this.applyTargetState_();var p=e||(0===i?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===r&&this.getCenterInternal()&&gb(this.getCenterInternal(),h)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:h,resolution:s,duration:i,easing:Dc,anchor:p}))},o.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Ha.INTERACTING,1)},o.prototype.endInteraction=function(t,o,e){var i=e&&pa(e,this.getProjection());this.endInteractionInternal(t,o,i)},o.prototype.endInteractionInternal=function(t,o,e){this.setHint(Ha.INTERACTING,-1),this.resolveConstraints(t,o,e)},o.prototype.getConstrainedCenter=function(t,o){var e=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,o||this.getResolution(),e)},o.prototype.getConstrainedZoom=function(t,o){var e=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(e,o))},o.prototype.getConstrainedResolution=function(t,o){var e=o||0,i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)},o}(Xa);function wf(t,o){setTimeout(function(){t(o)},0)}function ll(t){if(void 0!==t.extent){var o=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return il(t.extent,t.constrainOnlyCenter,o)}var e=Og(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){var i=e.getExtent().slice();return i[0]=-1/0,i[2]=1/0,il(i,!1,!1)}return fr}function ml(t){var o,e,i,n=void 0!==t.minZoom?t.minZoom:Xh,r=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,p=void 0!==t.showFullExtent&&t.showFullExtent,u=Og(t.projection,"EPSG:3857"),$=u.getExtent(),l=t.constrainOnlyCenter,c=t.extent;if(s||c||!u.isGlobal()||(l=!1,c=$),void 0!==t.resolutions){var g=t.resolutions;e=g[n],i=void 0!==g[r]?g[r]:g[g.length-1],o=t.constrainResolution?gr(g,h,!l&&c,p):jl(e,i,h,!l&&c,p)}else{var m=($?Math.max(ra($),Ya($)):360*Pa[ta.DEGREES]/u.getMetersPerUnit())/Th/Math.pow(2,Xh),_=m/Math.pow(2,28-Xh);void 0!==(e=t.maxResolution)?n=0:e=m/Math.pow(a,n),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?e/Math.pow(a,r):m/Math.pow(a,r):_),r=n+Math.floor(Math.log(e/i)/Math.log(a)),i=e/Math.pow(a,r-n),o=t.constrainResolution?hr(a,e,i,h,!l&&c,p):jl(e,i,h,!l&&c,p)}return{constraint:o,maxResolution:e,minResolution:i,minZoom:n,zoomFactor:a}}function nl(t){if(void 0===t.enableRotation||t.enableRotation){var o=t.constrainRotation;return void 0===o||!0===o?jr():!1===o?kl:"number"==typeof o?ir(o):kl}return Wh}function ol(t){return!(t.sourceCenter&&t.targetCenter&&!gb(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function Yh(t,o,e,i,n){var r=Math.cos(-n),a=Math.sin(-n),s=t[0]*r-t[1]*a,h=t[1]*r+t[0]*a;return[(s+=(o[0]/2-e[0])*i)*r-(h+=(e[1]-o[1]/2)*i)*(a=-a),h*r+s*a]}Fc.createCenterConstraint=ll,Fc.createResolutionConstraint=ml,Fc.createRotationConstraint=nl,Fc.isNoopAnimation=ol,Fc.default=ub;var lr=Oh&&Oh.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function pl(e){e instanceof Rd?e.setMapInternal(null):e instanceof Td&&e.getLayers().forEach(pl)}function ql(e,t){if(e instanceof Rd)e.setMapInternal(t);else if(e instanceof Td)for(var r=e.getLayers().getArray(),i=0,n=r.length;i<n;++i)ql(r[i],t)}var Zh=function(e){function t(t){var r=e.call(this)||this;r.on,r.once,r.un;var i=mr(t);r.renderComplete_,r.loaded_=!0,r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(r),r.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,r.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:Gj,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(r),r.coordinateToPixelTransform_=kb(),r.pixelToCoordinateTransform_=kb(),r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.style.pointerEvents="none",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.style.pointerEvents="none",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=null,r.moveTolerance_=t.moveTolerance,r.keyboardEventTarget_=i.keyboardEventTarget,r.targetChangeHandlerKeys_=null,r.controls=i.controls||new Aa,r.interactions=i.interactions||new Aa,r.overlays_=i.overlays,r.overlayIdIndex_={},r.renderer_=null,r.postRenderFunctions_=[],r.tileQueue_=new gl(r.getTilePriority.bind(r),r.handleTileChange_.bind(r)),r.addChangeListener(xa.LAYERGROUP,r.handleLayerGroupChanged_),r.addChangeListener(xa.VIEW,r.handleViewChanged_),r.addChangeListener(xa.SIZE,r.handleSizeChanged_),r.addChangeListener(xa.TARGET,r.handleTargetChanged_),r.setProperties(i.values);var n=r;return!t.view||t.view instanceof ub||t.view.then(function(e){n.setView(new ub(e))}),r.controls.addEventListener(ua.ADD,function(e){e.element.setMap(this)}.bind(r)),r.controls.addEventListener(ua.REMOVE,function(e){e.element.setMap(null)}.bind(r)),r.interactions.addEventListener(ua.ADD,function(e){e.element.setMap(this)}.bind(r)),r.interactions.addEventListener(ua.REMOVE,function(e){e.element.setMap(null)}.bind(r)),r.overlays_.addEventListener(ua.ADD,function(e){this.addOverlayInternal_(e.element)}.bind(r)),r.overlays_.addEventListener(ua.REMOVE,function(e){var t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)}.bind(r)),r.controls.forEach(function(e){e.setMap(this)}.bind(r)),r.interactions.forEach(function(e){e.setMap(this)}.bind(r)),r.overlays_.forEach(r.addOverlayInternal_.bind(r)),r}return lr(t,e),t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(e){this.getControls().push(e)},t.prototype.addInteraction=function(e){this.getInteractions().push(e)},t.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)},t.prototype.handleLayerAdd_=function(e){ql(e.layer,this)},t.prototype.addOverlay=function(e){this.getOverlays().push(e)},t.prototype.addOverlayInternal_=function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)},t.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),e.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(e,t,r){if(this.frameState_&&this.renderer_){var i=this.getCoordinateFromPixelInternal(e),n=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,o=void 0!==r.layerFilter?r.layerFilter:Oa,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,n,a,t,null,o,null)}},t.prototype.getFeaturesAtPixel=function(e,t){var r=[];return this.forEachFeatureAtPixel(e,function(e){r.push(e)},t),r},t.prototype.getAllLayers=function(){var e=[];return function t(r){r.forEach(function(r){r instanceof Td?t(r.getLayers()):e.push(r)})}(this.getLayers()),e},t.prototype.forEachLayerAtPixel=function(e,t,r){if(this.frameState_&&this.renderer_){var i=r||{},n=void 0!==i.hitTolerance?i.hitTolerance:0,o=i.layerFilter||Oa;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,n,t,o)}},t.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_||!this.renderer_)return!1;var r=this.getCoordinateFromPixelInternal(e),i=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:Oa,n=void 0!==t.hitTolerance?t.hitTolerance:0,o=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,n,o,i,null)},t.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},t.prototype.getEventCoordinateInternal=function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))},t.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect(),r="changedTouches"in e?e.changedTouches[0]:e;return[r.clientX-t.left,r.clientY-t.top]},t.prototype.getTarget=function(){return this.get(xa.TARGET)},t.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},t.prototype.getCoordinateFromPixel=function(e){return ad(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(e){var t=this.frameState_;return t?za(t.pixelToCoordinateTransform,e.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(xa.LAYERGROUP)},t.prototype.setLayers=function(e){var t=this.getLayerGroup();if(e instanceof Aa)t.setLayers(e);else{var r=t.getLayers();r.clear(),r.extend(e)}},t.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},t.prototype.getLoadingOrNotReady=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var i=e[t];if(i.visible){var n=i.layer.getRenderer();if(n&&!n.ready)return!0;var o=i.layer.getSource();if(o&&o.loading)return!0}}return!1},t.prototype.getPixelFromCoordinate=function(e){var t=pa(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)},t.prototype.getPixelFromCoordinateInternal=function(e){var t=this.frameState_;return t?za(t.coordinateToPixelTransform,e.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(xa.SIZE)},t.prototype.getView=function(){return this.get(xa.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var e=this.getTargetElement();return e?e.ownerDocument:document},t.prototype.getTilePriority=function(e,t,r,i){return hl(this.frameState_,e,t,r,i)},t.prototype.handleBrowserEvent=function(e,t){var r=t||e.type,i=new rb(r,this,e);this.handleMapBrowserEvent(i)},t.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){var t=e.originalEvent,r=t.type;if(r===sb.POINTERDOWN||r===ba.WHEEL||r===ba.KEYDOWN){var i=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():i,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(n===i?i.documentElement:n).contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e))for(var a=this.getInteractions().getArray().slice(),s=a.length-1;s>=0;s--){var p=a[s];if(p.getMap()===this&&p.getActive()&&this.getTargetElement())if(!p.handleEvent(e)||e.propagationStopped)break}}},t.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var r=this.maxTilesLoading_,i=r;if(e){var n=e.viewHints;if(n[Ha.ANIMATING]||n[Ha.INTERACTING]){var o=Date.now()-e.time>8;r=o?0:8,i=o?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,i))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener(Xb.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Xb.RENDERCOMPLETE,e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Ec(tb.LOADEND,this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Ec(tb.LOADSTART,this,e))));for(var a=this.postRenderFunctions_,s=0,p=a.length;s<p;++s)a[s](this,e);a.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var e=0,t=this.targetChangeHandlerKeys_.length;e<t;++e)la(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ba.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ba.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Ze(this.viewport_)}var r=this.getTargetElement();if(r){for(var i in r.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new fl(this,this.moveTolerance_),ia)this.mapBrowserEventHandler_.addEventListener(ia[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ba.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ba.WHEEL,this.boundHandleBrowserEvent_,!!Hj&&{passive:!1});var n=this.getOwnerDocument().defaultView,o=this.keyboardEventTarget_?this.keyboardEventTarget_:r;this.targetChangeHandlerKeys_=[ea(o,ba.KEYDOWN,this.handleBrowserEvent,this),ea(o,ba.KEYPRESS,this.handleBrowserEvent,this),ea(n,ba.RESIZE,this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(la(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(la(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=ea(e,hc.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ea(e,ba.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(la),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Kb("addlayer",e)),this.layerGroupPropertyListenerKeys_=[ea(e,hc.PROPERTYCHANGE,this.render,this),ea(e,ba.CHANGE,this.render,this),ea(e,"addlayer",this.handleLayerAdd_,this),ea(e,"removelayer",this.handleLayerRemove_,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(e){return this.getControls().remove(e)},t.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},t.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)},t.prototype.handleLayerRemove_=function(e){pl(e.layer)},t.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},t.prototype.renderFrame_=function(e){var t=this,r=this.getSize(),i=this.getView(),n=this.frameState_,o=null;if(void 0!==r&&pk(r)&&i&&i.isDef()){var a=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Ag(s.center,s.resolution,s.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:s,viewHints:a,wantedTiles:{},mapId:ga(this),renderTargets:{}},s.nextCenter&&s.nextResolution){var p=isNaN(s.nextRotation)?s.rotation:s.nextRotation;o.nextExtent=Ag(s.nextCenter,s.nextResolution,p,r)}}if(this.frameState_=o,this.renderer_.renderFrame(o),o){if(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),n)(!this.previousExtent_||!Cg(this.previousExtent_)&&!Uc(o.extent,this.previousExtent_))&&(this.dispatchEvent(new Ec(tb.MOVESTART,this,n)),this.previousExtent_=zd(this.previousExtent_));this.previousExtent_&&!o.viewHints[Ha.ANIMATING]&&!o.viewHints[Ha.INTERACTING]&&!Uc(o.extent,this.previousExtent_)&&(this.dispatchEvent(new Ec(tb.MOVEEND,this,o)),Jj(o.extent,this.previousExtent_))}this.dispatchEvent(new Ec(tb.POSTRENDER,this,o)),this.renderComplete_=this.hasListener(tb.LOADSTART)||this.hasListener(tb.LOADEND)||this.hasListener(Xb.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){t.postRenderTimeoutHandle_=void 0,t.handlePostRender()},0))},t.prototype.setLayerGroup=function(e){var t=this.getLayerGroup();t&&this.handleLayerRemove_(new Kb("removelayer",t)),this.set(xa.LAYERGROUP,e)},t.prototype.setSize=function(e){this.set(xa.SIZE,e)},t.prototype.setTarget=function(e){this.set(xa.TARGET,e)},t.prototype.setView=function(e){if(!e||e instanceof ub)this.set(xa.VIEW,e);else{this.set(xa.VIEW,new ub);var t=this;e.then(function(e){t.setView(new ub(e))})}},t.prototype.updateSize=function(){var e=this.getTargetElement(),t=void 0;if(e){var r=getComputedStyle(e),i=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),n=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);isNaN(i)||isNaN(n)||(t=[i,n],!pk(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(t),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var e=this.getView();if(e){var t=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(t=[parseInt(r.width,10),parseInt(r.height,10)]),e.setViewportSize(t)}},t}(Xa);function mr(e){var t=null;void 0!==e.keyboardEventTarget&&(t="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r,i,n,o={},a=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new Td({layers:e.layers});return o[xa.LAYERGROUP]=a,o[xa.TARGET]=e.target,o[xa.VIEW]=e.view instanceof ub?e.view:new ub,void 0!==e.controls&&(Array.isArray(e.controls)?r=new Aa(e.controls.slice()):(ha("function"==typeof e.controls.getArray,47),r=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?i=new Aa(e.interactions.slice()):(ha("function"==typeof e.interactions.getArray,48),i=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?n=new Aa(e.overlays.slice()):(ha("function"==typeof e.overlays.getArray,49),n=e.overlays):n=new Aa,{controls:r,interactions:i,keyboardEventTarget:t,overlays:n,values:o}}Oh.default=Zh;function nr(o){var r=o||{},t=new Aa;return(void 0===r.zoom||r.zoom)&&t.push(new tl(r.zoomOptions)),(void 0===r.rotate||r.rotate)&&t.push(new sl(r.rotateOptions)),(void 0===r.attribution||r.attribution)&&t.push(new rl(r.attributionOptions)),t}var $h={};var _h={};var or=_h&&_h.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vb=function(e){function t(t){var r=e.call(this)||this,n=t.element;return!n||t.target||n.style.pointerEvents||(n.style.pointerEvents="auto"),r.element=n||null,r.target_=null,r.map_=null,r.listenerKeys=[],t.render&&(r.render=t.render),t.target&&r.setTarget(t.target),r}return or(t,e),t.prototype.disposeInternal=function(){Ze(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(e){this.map_&&Ze(this.element);for(var t=0,r=this.listenerKeys.length;t<r;++t)la(this.listenerKeys[t]);(this.listenerKeys.length=0,this.map_=e,e)&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==jc&&this.listenerKeys.push(ea(e,tb.POSTRENDER,this.render,this)),e.render())},t.prototype.render=function(e){},t.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},t}(Xa);_h.default=vb;var pr=$h&&$h.__extends||function(){var e=function(t,l){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])})(t,l)};return function(t,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function o(){this.constructor=t}e(t,l),t.prototype=null===l?Object.create(l):(o.prototype=l.prototype,new o)}}(),rl=function(e){function t(t){var l=this,o=t||{};(l=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this).ulElement_=document.createElement("ul"),l.collapsed_=void 0===o.collapsed||o.collapsed,l.userCollapsed_=l.collapsed_,l.overrideCollapsible_=void 0!==o.collapsible,l.collapsible_=void 0===o.collapsible||o.collapsible,l.collapsible_||(l.collapsed_=!1);var r=void 0!==o.className?o.className:"ol-attribution",a=void 0!==o.tipLabel?o.tipLabel:"Attributions",i=void 0!==o.expandClassName?o.expandClassName:r+"-expand",s=void 0!==o.collapseLabel?o.collapseLabel:"\u203A",n=void 0!==o.collapseClassName?o.collapseClassName:r+"-collapse";"string"==typeof s?(l.collapseLabel_=document.createElement("span"),l.collapseLabel_.textContent=s,l.collapseLabel_.className=n):l.collapseLabel_=s;var p=void 0!==o.label?o.label:"i";"string"==typeof p?(l.label_=document.createElement("span"),l.label_.textContent=p,l.label_.className=i):l.label_=p;var c=l.collapsible_&&!l.collapsed_?l.collapseLabel_:l.label_;l.toggleButton_=document.createElement("button"),l.toggleButton_.setAttribute("type","button"),l.toggleButton_.setAttribute("aria-expanded",String(!l.collapsed_)),l.toggleButton_.title=a,l.toggleButton_.appendChild(c),l.toggleButton_.addEventListener(ba.CLICK,l.handleClick_.bind(l),!1);var d=r+" "+pb+" "+zc+(l.collapsed_&&l.collapsible_?" "+af:"")+(l.collapsible_?"":" ol-uncollapsible"),_=l.element;return _.className=d,_.appendChild(l.toggleButton_),_.appendChild(l.ulElement_),l.renderedAttributions_=[],l.renderedVisible_=!0,l}return pr(t,e),t.prototype.collectSourceAttributions_=function(e){for(var t={},l=[],o=!0,r=e.layerStatesArray,a=0,i=r.length;a<i;++a){var s=r[a];if(Sd(s,e.viewState)){var n=s.layer.getSource();if(n){var p=n.getAttributions();if(p){var c=p(e);if(c)if(o=o&&!1!==n.getAttributionsCollapsible(),Array.isArray(c))for(var d=0,_=c.length;d<_;++d)c[d]in t||(l.push(c[d]),t[c[d]]=!0);else c in t||(l.push(c),t[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),l},t.prototype.updateElement_=function(e){if(e){var t=this.collectSourceAttributions_(e),l=t.length>0;if(this.renderedVisible_!=l&&(this.element.style.display=l?"":"none",this.renderedVisible_=l),!Sb(t,this.renderedAttributions_)){vk(this.ulElement_);for(var o=0,r=t.length;o<r;++o){var a=document.createElement("li");a.innerHTML=t[o],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(af),this.collapsed_?bd(this.collapseLabel_,this.label_):bd(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(e){this.updateElement_(e.frameState)},t}(vb);$h.default=rl;var ai={};var qr=ai&&ai.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),sl=function(t){function e(e){var r=this,o=e||{};r=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var a=void 0!==o.className?o.className:"ol-rotate",s=void 0!==o.label?o.label:"\u21E7",i=void 0!==o.compassClassName?o.compassClassName:"ol-compass";r.label_=null,"string"==typeof s?(r.label_=document.createElement("span"),r.label_.className=i,r.label_.textContent=s):(r.label_=s,r.label_.classList.add(i));var n=o.tipLabel?o.tipLabel:"Reset rotation",l=document.createElement("button");l.className=a+"-reset",l.setAttribute("type","button"),l.title=n,l.appendChild(r.label_),l.addEventListener(ba.CLICK,r.handleClick_.bind(r),!1);var p=a+" "+pb+" "+zc,$=r.element;return $.className=p,$.appendChild(l),r.callResetNorth_=o.resetNorth?o.resetNorth:void 0,r.duration_=void 0!==o.duration?o.duration:250,r.autoHide_=void 0===o.autoHide||o.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add(_e),r}return qr(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Dc}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var o="rotate("+r+"rad)";if(this.autoHide_){var a=this.element.classList.contains(_e);a||0!==r?a&&0!==r&&this.element.classList.remove(_e):this.element.classList.add(_e)}this.label_.style.transform=o}this.rotation_=r}},e}(vb);ai.default=sl;var bi={};var rr=bi&&bi.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),tl=function(t){function e(e){var o=this,n=e||{};o=t.call(this,{element:document.createElement("div"),target:n.target})||this;var r=void 0!==n.className?n.className:"ol-zoom",a=void 0!==n.delta?n.delta:1,i=void 0!==n.zoomInClassName?n.zoomInClassName:r+"-in",l=void 0!==n.zoomOutClassName?n.zoomOutClassName:r+"-out",s=void 0!==n.zoomInLabel?n.zoomInLabel:"+",p=void 0!==n.zoomOutLabel?n.zoomOutLabel:"\u2013",u=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",d=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=i,m.setAttribute("type","button"),m.title=u,m.appendChild("string"==typeof s?document.createTextNode(s):s),m.addEventListener(ba.CLICK,o.handleClick_.bind(o,a),!1);var c=document.createElement("button");c.className=l,c.setAttribute("type","button"),c.title=d,c.appendChild("string"==typeof p?document.createTextNode(p):p),c.addEventListener(ba.CLICK,o.handleClick_.bind(o,-a),!1);var $=r+" "+pb+" "+zc,C=o.element;return C.className=$,C.appendChild(m),C.appendChild(c),o.duration_=void 0!==n.duration?n.duration:250,o}return rr(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var o=e.getZoom();if(void 0!==o){var n=e.getConstrainedZoom(o+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:Dc})):e.setZoom(n)}}},e}(vb);bi.default=tl;var ci={};var sr=ci&&ci.__extends||function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(t,s)};return function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(l.prototype=s.prototype,new l)}}(),ul=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],vl={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},tr=function(e){function t(t){var s=this,l=t||{};(s=e.call(this,{element:document.createElement("div"),target:l.target})||this).on,s.once,s.un,s.keys_=void 0!==l.keys&&l.keys,s.source_=l.source,s.isInFullscreen_=!1,s.boundHandleMapTargetChange_=s.handleMapTargetChange_.bind(s),s.cssClassName_=void 0!==l.className?l.className:"ol-full-screen",s.documentListeners_=[],s.activeClassName_=void 0!==l.activeClassName?l.activeClassName.split(" "):[s.cssClassName_+"-true"],s.inactiveClassName_=void 0!==l.inactiveClassName?l.inactiveClassName.split(" "):[s.cssClassName_+"-false"];var n=void 0!==l.label?l.label:"\u2922";s.labelNode_="string"==typeof n?document.createTextNode(n):n;var r=void 0!==l.labelActive?l.labelActive:"\xD7";s.labelActiveNode_="string"==typeof r?document.createTextNode(r):r;var a=l.tipLabel?l.tipLabel:"Toggle full-screen";return s.button_=document.createElement("button"),s.button_.title=a,s.button_.setAttribute("type","button"),s.button_.appendChild(s.labelNode_),s.button_.addEventListener(ba.CLICK,s.handleClick_.bind(s),!1),s.setClassName_(s.button_,s.isInFullscreen_),s.element.className="".concat(s.cssClassName_," ").concat(pb," ").concat(zc),s.element.appendChild(s.button_),s}return sr(t,e),t.prototype.handleClick_=function(e){e.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){var e=this.getMap();if(e){var t=e.getOwnerDocument();if(wl(t))if(xl(t))vr(t);else{var s=void 0;s=this.source_?"string"==typeof this.source_?t.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?ur(s):yl(s)}}},t.prototype.handleFullScreenChange_=function(){var e=this.getMap();if(e){var t=this.isInFullscreen_;this.isInFullscreen_=xl(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(bd(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(vl.ENTERFULLSCREEN)):(bd(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(vl.LEAVEFULLSCREEN)),e.updateSize())}},t.prototype.setClassName_=function(e,t){var s,l,n,r;t?((s=e.classList).remove.apply(s,this.inactiveClassName_),(l=e.classList).add.apply(l,this.activeClassName_)):((n=e.classList).remove.apply(n,this.activeClassName_),(r=e.classList).add.apply(r,this.inactiveClassName_))},t.prototype.setMap=function(t){var s=this.getMap();s&&s.removeChangeListener(xa.TARGET,this.boundHandleMapTargetChange_),e.prototype.setMap.call(this,t),this.handleMapTargetChange_(),t&&t.addChangeListener(xa.TARGET,this.boundHandleMapTargetChange_)},t.prototype.handleMapTargetChange_=function(){for(var e=this.documentListeners_,t=0,s=e.length;t<s;++t)la(e[t]);e.length=0;var l=this.getMap();if(l){var n=l.getOwnerDocument();wl(n)?this.element.classList.remove(wk):this.element.classList.add(wk);for(t=0,s=ul.length;t<s;++t)e.push(ea(n,ul[t],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},t}(vb);function wl(e){var t=e.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&e.msFullscreenEnabled||t.requestFullscreen&&e.fullscreenEnabled)}function xl(e){return!!(e.webkitIsFullScreen||e.msFullscreenElement||e.fullscreenElement)}function yl(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function ur(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():yl(e)}function vr(e){e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}ci.default=tr;var di={};var wr=di&&di.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),ei="projection",zl="coordinateFormat",xr=function(t){function e(e){var r=this,o=e||{},n=document.createElement("div");n.className=void 0!==o.className?o.className:"ol-mouse-position",(r=t.call(this,{element:n,render:o.render,target:o.target})||this).on,r.once,r.un,r.addChangeListener(ei,r.handleProjectionChanged_),o.coordinateFormat&&r.setCoordinateFormat(o.coordinateFormat),o.projection&&r.setProjection(o.projection);var i=!0,a="&#160;";return"undefinedHTML"in o?(void 0!==o.undefinedHTML&&(a=o.undefinedHTML),i=!!a):"placeholder"in o&&(!1===o.placeholder?i=!1:a=String(o.placeholder)),r.placeholder_=a,r.renderOnMouseOut_=i,r.renderedHTML_=n.innerHTML,r.mapProjection_=null,r.transform_=null,r}return wr(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(zl)},e.prototype.getProjection=function(){return this.get(ei)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var r=e.getViewport();this.listenerKeys.push(ea(r,sb.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(ea(r,sb.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}},e.prototype.setCoordinateFormat=function(t){this.set(zl,t)},e.prototype.setProjection=function(t){this.set(ei,wa(t))},e.prototype.updateHTML_=function(t){var e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?_c(this.mapProjection_,r):Ng}var o=this.getMap().getCoordinateFromPixelInternal(t);if(o){var n=Ra();n&&(this.transform_=_c(this.mapProjection_,n)),this.transform_(o,o);var i=this.getCoordinateFormat();e=i?i(o):o.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e.prototype.render=function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},e}(vb);di.default=xr;var fi={};var gi={};var yr=gi&&gi.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ia={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},hi=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.options=e,n.id=e.id,n.insertFirst=void 0===e.insertFirst||e.insertFirst,n.stopEvent=void 0===e.stopEvent||e.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==e.className?e.className:"ol-overlay-container "+Lp,n.element.style.position="absolute",n.element.style.pointerEvents="auto";var o=e.autoPan;return o&&"object"!=typeof o&&(o={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=o||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addChangeListener(Ia.ELEMENT,n.handleElementChanged),n.addChangeListener(Ia.MAP,n.handleMapChanged),n.addChangeListener(Ia.OFFSET,n.handleOffsetChanged),n.addChangeListener(Ia.POSITION,n.handlePositionChanged),n.addChangeListener(Ia.POSITIONING,n.handlePositioningChanged),void 0!==e.element&&n.setElement(e.element),n.setOffset(void 0!==e.offset?e.offset:[0,0]),n.setPositioning(e.positioning||"top-left"),void 0!==e.position&&n.setPosition(e.position),n}return yr(e,t),e.prototype.getElement=function(){return this.get(Ia.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(Ia.MAP)||null},e.prototype.getOffset=function(){return this.get(Ia.OFFSET)},e.prototype.getPosition=function(){return this.get(Ia.POSITION)},e.prototype.getPositioning=function(){return this.get(Ia.POSITIONING)},e.prototype.handleElementChanged=function(){vk(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Ze(this.element),la(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=ea(t,tb.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(Ia.ELEMENT,t)},e.prototype.setMap=function(t){this.set(Ia.MAP,t)},e.prototype.setOffset=function(t){this.set(Ia.OFFSET,t)},e.prototype.setPosition=function(t){this.set(Ia.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(Ia.POSITION)){var n=this.getRect(e.getTargetElement(),e.getSize()),o=this.getElement(),r=this.getRect(o,[Ip(o),Jp(o)]),i=t||{},s=void 0===i.margin?20:i.margin;if(!Ub(n,r)){var a=r[0]-n[0],p=n[2]-r[2],c=r[1]-n[1],$=n[3]-r[3],l=[0,0];if(a<0?l[0]=a-s:p<0&&(l[0]=Math.abs(p)+s),c<0?l[1]=c-s:$<0&&(l[1]=Math.abs($)+s),0!==l[0]||0!==l[1]){var d=e.getView().getCenterInternal(),h=e.getPixelFromCoordinateInternal(d);if(!h)return;var u=[h[0]+l[0],h[1]+l[1]],f=i.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(u),duration:f.duration,easing:f.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),o=n.left+window.pageXOffset,r=n.top+window.pageYOffset;return[o,r,o+e[0],r+e[1]]},e.prototype.setPositioning=function(t){this.set(Ia.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),o=t.getSize();this.updateRenderedPosition(n,o)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,o=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var i=Math.round(t[0]+o[0])+"px",s=Math.round(t[1]+o[1])+"px",a="0%",p="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?a="-100%":"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(a="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?p="-100%":"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(p="-50%");var c="translate(".concat(a,", ").concat(p,") translate(").concat(i,", ").concat(s,")");this.rendered.transform_!=c&&(this.rendered.transform_=c,n.transform=c,n.msTransform=c)},e.prototype.getOptions=function(){return this.options},e}(Xa);gi.default=hi;var Al=fi&&fi.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),xf=.75,Ud=.1,zr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Al(t,e),t.prototype.createRenderer=function(){return new Nh(this)},t}(Zh),Ar=function(e){function t(t){var i=this,o=t||{};(i=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this).boundHandleRotationChanged_=i.handleRotationChanged_.bind(i),i.collapsed_=void 0===o.collapsed||o.collapsed,i.collapsible_=void 0===o.collapsible||o.collapsible,i.collapsible_||(i.collapsed_=!1),i.rotateWithView_=void 0!==o.rotateWithView&&o.rotateWithView,i.viewExtent_=void 0;var r=void 0!==o.className?o.className:"ol-overviewmap",a=void 0!==o.tipLabel?o.tipLabel:"Overview map",n=void 0!==o.collapseLabel?o.collapseLabel:"\u2039";"string"==typeof n?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=n):i.collapseLabel_=n;var l=void 0!==o.label?o.label:"\u203A";"string"==typeof l?(i.label_=document.createElement("span"),i.label_.textContent=l):i.label_=l;var p=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild(p),s.addEventListener(ba.CLICK,i.handleClick_.bind(i),!1),i.ovmapDiv_=document.createElement("div"),i.ovmapDiv_.className="ol-overviewmap-map",i.view_=o.view,i.ovmap_=new zr({view:o.view});var h=i.ovmap_;o.layers&&o.layers.forEach(function(e){h.addLayer(e)});var $=document.createElement("div");$.className="ol-overviewmap-box",$.style.boxSizing="border-box",i.boxOverlay_=new hi({position:[0,0],positioning:"center-center",element:$}),i.ovmap_.addOverlay(i.boxOverlay_);var d=r+" "+pb+" "+zc+(i.collapsed_&&i.collapsible_?" "+af:"")+(i.collapsible_?"":" ol-uncollapsible"),v=i.element;v.className=d,v.appendChild(i.ovmapDiv_),v.appendChild(s);var _=i,c=i.boxOverlay_,u=i.boxOverlay_.getElement(),m=function(e){var t,i={clientX:(t=e).clientX,clientY:t.clientY},o=h.getEventCoordinateInternal(i);c.setPosition(o)},M=function(e){var t=h.getEventCoordinateInternal(e);_.getMap().getView().setCenterInternal(t),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",M)};return u.addEventListener("mousedown",function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",M)}),i}return Al(t,e),t.prototype.setMap=function(t){var i=this.getMap();if(t!==i){if(i){var o=i.getView();o&&this.unbindView_(o),this.ovmap_.setTarget(null)}if(e.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(ea(t,hc.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var r=t.getView();r&&(this.bindView_(r),r.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}},t.prototype.handleMapPropertyChange_=function(e){if(e.key===xa.VIEW){var t=e.oldValue;t&&this.unbindView_(t);var i=this.getMap().getView();this.bindView_(i)}else this.ovmap_.isRendered()||e.key!==xa.TARGET&&e.key!==xa.SIZE||this.ovmap_.updateSize()},t.prototype.bindView_=function(e){if(!this.view_){var t=new ub({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(Ta.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()},t.prototype.unbindView_=function(e){e.removeChangeListener(Ta.ROTATION,this.boundHandleRotationChanged_)},t.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},t.prototype.validateExtent_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView().calculateExtentInternal(i);if(!this.viewExtent_||!Uc(o,this.viewExtent_)){this.viewExtent_=o;var r=t.getSize(),a=t.getView().calculateExtentInternal(r),n=t.getPixelFromCoordinateInternal(Bb(o)),l=t.getPixelFromCoordinateInternal(Wc(o)),p=Math.abs(n[0]-l[0]),s=Math.abs(n[1]-l[1]),h=r[0],$=r[1];p<h*Ud||s<$*Ud||p>h*xf||s>$*xf?this.resetExtent_():Ub(a,o)||this.recenter_()}}},t.prototype.resetExtent_=function(){if(0!==xf&&0!==Ud){var e=this.getMap(),t=this.ovmap_,i=e.getSize(),o=e.getView().calculateExtentInternal(i),r=t.getView(),a=Math.log(xf/Ud)/Math.LN2,n=1/(Math.pow(2,a/2)*Ud);Fo(o,n),r.fitInternal(xc(o))}},t.prototype.recenter_=function(){var e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())},t.prototype.updateBox_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView(),r=t.getView(),a=this.rotateWithView_?0:-o.getRotation(),n=this.boxOverlay_,l=this.boxOverlay_.getElement(),p=o.getCenterInternal(),s=o.getResolution(),h=r.getResolution(),$=i[0]*s/h,d=i[1]*s/h;if(n.setPosition(p),l){l.style.width=$+"px",l.style.height=d+"px";var v="rotate("+a+"rad)";l.style.transform=v}}},t.prototype.updateBoxAfterOvmapIsRendered_=function(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=vd(this.ovmap_,tb.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},t.prototype.handleToggle_=function(){this.element.classList.toggle(af),this.collapsed_?bd(this.collapseLabel_,this.label_):bd(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;if(!this.collapsed_){if(e.isRendered())return this.viewExtent_=void 0,void e.render();e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.setRotateWithView=function(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},t.prototype.getOverviewMap=function(){return this.ovmap_},t.prototype.render=function(e){this.validateExtent_(),this.updateBox_()},t}(vb);fi.default=Ar;var yf={};var Br=yf&&yf.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ii="units",ac={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};yf.Units=ac;var Cr=[1,2,5],Vd=25.4/.28,Dr=function(e){function t(t){var r=this,i=t||{},s=void 0!==i.className?i.className:i.bar?"ol-scale-bar":"ol-scale-line";return(r=e.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this).on,r.once,r.un,r.innerElement_=document.createElement("div"),r.innerElement_.className=s+"-inner",r.element.className=s+" "+pb,r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==i.minWidth?i.minWidth:64,r.maxWidth_=i.maxWidth,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",r.addChangeListener(ii,r.handleUnitsChanged_),r.setUnits(i.units||ac.METRIC),r.scaleBar_=i.bar||!1,r.scaleBarSteps_=i.steps||4,r.scaleBarText_=i.text||!1,r.dpi_=i.dpi||void 0,r}return Br(t,e),t.prototype.getUnits=function(){return this.get(ii)},t.prototype.handleUnitsChanged_=function(){this.updateElement_()},t.prototype.setUnits=function(e){this.set(ii,e)},t.prototype.setDpi=function(e){this.dpi_=e},t.prototype.updateElement_=function(){var e=this.viewState_;if(e){var t=e.center,r=e.projection,i=this.getUnits(),s=i==ac.DEGREES?ta.DEGREES:ta.METERS,n=Ue(r,e.resolution,t,s),a=this.minWidth_*(this.dpi_||Vd)/Vd,o=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||Vd)/Vd:void 0,d=a*n,l="";if(i==ac.DEGREES){var $=Pa[ta.DEGREES];(d*=$)<$/60?(l="\u2033",n*=3600):d<$?(l="\u2032",n*=60):l="\xB0"}else i==ac.IMPERIAL?d<.9144?(l="in",n/=.0254):d<1609.344?(l="ft",n/=.3048):(l="mi",n/=1609.344):i==ac.NAUTICAL?(n/=1852,l="NM"):i==ac.METRIC?d<.001?(l="\u03BCm",n*=1e6):d<1?(l="mm",n*=1e3):d<1e3?l="m":(l="km",n/=1e3):i==ac.US?d<.9144?(l="in",n*=39.37):d<1609.344?(l="ft",n/=.30480061):(l="mi",n/=1609.3472):ha(!1,33);for(var p,c,h,_,u,D,v,m=3*Math.floor(Math.log(a*n)/Math.log(10));;){h=Math.floor(m/3);var E=Math.pow(10,h);if(p=Cr[(m%3+3)%3]*E,c=Math.round(p/n),isNaN(c))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==o&&c>=o){p=_,c=u,h=D;break}if(c>=a)break;_=p,u=c,D=h,++m}v=this.scaleBar_?this.createScaleBar(c,p,l):p.toFixed(h<0?-h:0)+" "+l,this.renderedHTML_!=v&&(this.innerElement_.innerHTML=v,this.renderedHTML_=v),this.renderedWidth_!=c&&(this.innerElement_.style.width=c+"px",this.renderedWidth_=c),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.createScaleBar=function(e,t,r){for(var i="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),s=[],n=e/this.scaleBarSteps_,a="ol-scale-singlebar-odd",o=0;o<this.scaleBarSteps_;o++)0===o&&s.push(this.createMarker("absolute",o)),s.push("<div><div class=\"ol-scale-singlebar "+a+"\" style=\"width: "+n+"px;\"></div>"+this.createMarker("relative",o)+(o%2==0||2===this.scaleBarSteps_?this.createStepText(o,e,!1,t,r):"")+"</div>"),o===this.scaleBarSteps_-1&&s.push(this.createStepText(o+1,e,!0,t,r)),a="ol-scale-singlebar-odd"===a?"ol-scale-singlebar-even":"ol-scale-singlebar-odd";return"<div style=\"display: flex;\">"+(this.scaleBarText_?"<div class=\"ol-scale-text\" style=\"width: "+e+"px;\">"+i+"</div>":"")+s.join("")+"</div>"},t.prototype.createMarker=function(e,t){return"<div class=\"ol-scale-step-marker\" style=\"position: "+e+";top: "+("absolute"===e?3:-10)+"px;\"></div>"},t.prototype.createStepText=function(e,t,r,i,s){var n=(0===e?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+s);return"<div class=\"ol-scale-step-text\" style=\"margin-left: "+(0===e?-3:t/this.scaleBarSteps_*-1)+"px;text-align: "+(0===e?"left":"center")+"; min-width: "+(0===e?0:t/this.scaleBarSteps_*2)+"px;left: "+(r?t+"px":"unset")+";\">"+n+"</div>"},t.prototype.getScaleForResolution=function(){var e=Ue(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,ta.METERS),t=this.dpi_||Vd;return parseFloat(e.toString())*(1e3/25.4)*t},t.prototype.render=function(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()},t}(vb);yf.default=Dr;var ji={};var Er=ji&&ji.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wd={VERTICAL:0,HORIZONTAL:1},Fr=function(t){function e(e){var i=this,r=e||{};(i=t.call(this,{element:document.createElement("div"),render:r.render})||this).dragListenerKeys_=[],i.currentResolution_=void 0,i.direction_=Wd.VERTICAL,i.dragging_,i.heightLimit_=0,i.widthLimit_=0,i.startX_,i.startY_,i.thumbSize_=null,i.sliderInitialized_=!1,i.duration_=void 0!==r.duration?r.duration:200;var n=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=n+"-thumb "+pb;var s=i.element;return s.className=n+" "+pb+" "+zc,s.appendChild(o),s.addEventListener(sb.POINTERDOWN,i.handleDraggerStart_.bind(i),!1),s.addEventListener(sb.POINTERMOVE,i.handleDraggerDrag_.bind(i),!1),s.addEventListener(sb.POINTERUP,i.handleDraggerEnd_.bind(i),!1),s.addEventListener(ba.CLICK,i.handleContainerClick_.bind(i),!1),o.addEventListener(ba.CLICK,jo,!1),i}return Er(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight;if(0===e&&0===i)return this.sliderInitialized_=!1;var r=getComputedStyle(t);e-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);var n=t.firstElementChild,o=getComputedStyle(n),s=n.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),a=n.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[s,a],e>i?(this.direction_=Wd.HORIZONTAL,this.widthLimit_=e-s):(this.direction_=Wd.VERTICAL,this.heightLimit_=i-a),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(i),n=e.getConstrainedZoom(e.getZoomForResolution(r));e.animateInternal({zoom:n,duration:this.duration_,easing:Dc})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var i=this.handleDraggerDrag_,r=this.handleDraggerEnd_,n=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(ea(n,sb.POINTERMOVE,i,this),ea(n,sb.POINTERUP,r,this))}}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,i=t.clientY-this.startY_,r=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(r),this.getMap().getView().setResolution(this.currentResolution_)}},e.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(la),this.dragListenerKeys_.length=0)},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==Wd.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){var i;return i=this.direction_===Wd.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,va(i,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){var e=this.getMap().getView().getValueForResolutionFunction();return va(1-e(t),0,1)},e.prototype.render=function(t){if(t.frameState&&(this.sliderInitialized_||this.initSlider_())){var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}},e}(vb);ji.default=Fr;var ki={};var Gr=ki&&ki.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Hr=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,{element:document.createElement("div"),target:o.target})||this).extent=o.extent?o.extent:null;var r=void 0!==o.className?o.className:"ol-zoom-extent",i=void 0!==o.label?o.label:"E",a=void 0!==o.tipLabel?o.tipLabel:"Fit to extent",l=document.createElement("button");l.setAttribute("type","button"),l.title=a,l.appendChild("string"==typeof i?document.createTextNode(i):i),l.addEventListener(ba.CLICK,n.handleClick_.bind(n),!1);var p=r+" "+pb+" "+zc,$=n.element;return $.className=p,$.appendChild(l),n}return Gr(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(xc(e))},e}(vb);ki.default=Hr;function Ir(o){var a=o||{},r=new Aa,e=new Wq(-.005,.05,100);return(void 0===a.altShiftDragRotate||a.altShiftDragRotate)&&r.push(new Kl),(void 0===a.doubleClickZoom||a.doubleClickZoom)&&r.push(new Cl({delta:a.zoomDelta,duration:a.zoomDuration})),(void 0===a.dragPan||a.dragPan)&&r.push(new Jl({onFocusOnly:a.onFocusOnly,kinetic:e})),(void 0===a.pinchRotate||a.pinchRotate)&&r.push(new Sl),(void 0===a.pinchZoom||a.pinchZoom)&&r.push(new Tl({duration:a.zoomDuration})),(void 0===a.keyboard||a.keyboard)&&(r.push(new Pl),r.push(new Ql({delta:a.zoomDelta,duration:a.zoomDuration}))),(void 0===a.mouseWheelZoom||a.mouseWheelZoom)&&r.push(new Rl({onFocusOnly:a.onFocusOnly,duration:a.zoomDuration})),(void 0===a.shiftDragZoom||a.shiftDragZoom)&&r.push(new Ol({duration:a.zoomDuration})),r}var li={};var Xd={};var zf={ACTIVE:"active"};var Jr=Xd&&Xd.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bc=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return Jr(e,t),e.prototype.getActive=function(){return this.get(zf.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(zf.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(Xa);function Bl(t,e,n){var o=t.getCenterInternal();if(o){var r=[o[0]+e[0],o[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:Sq,center:t.getConstrainedCenter(r)})}}function Af(t,e,n,o){var r=t.getZoom();if(void 0!==r){var p=t.getConstrainedZoom(r+e),a=t.getResolutionForZoom(p);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==o?o:250,easing:Dc})}}Xd.pan=Bl,Xd.zoomByDelta=Af,Xd.default=bc;var Kr=li&&li.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Cl=function(t){function e(e){var r=t.call(this)||this,o=e||{};return r.delta_=o.delta?o.delta:1,r.duration_=void 0!==o.duration?o.duration:250,r}return Kr(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==ia.DBLCLICK){var r=t.originalEvent,o=t.map,n=t.coordinate,a=r.shiftKey?-this.delta_:this.delta_,i=o.getView();Af(i,a,n,this.duration_),r.preventDefault(),e=!0}return!e},e}(bc);li.default=Cl;var mi={};var Bf={};var Lr=Bf&&Bf.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_a=function(t){function e(e){var n=this,r=e||{};return n=t.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return Lr(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==ia.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==ia.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==ia.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==ia.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){t.activePointers&&(this.targetPointers=t.activePointers)},e}(bc);function Cf(t){for(var e=t.length,n=0,r=0,o=0;o<e;o++)n+=t[o].clientX,r+=t[o].clientY;return[n/e,r/e]}Bf.centroid=Cf,Bf.default=_a;function ni(e){var t=arguments;return function(e){for(var r=!0,$=0,o=t.length;$<o&&(r=r&&t[$](e));++$);return r}}var Mr=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var Nr=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};var Or=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)};var Dl=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||Or(e)};var Yd=Oa;var El=function(e){var t=e.originalEvent;return 0==t.button&&!(to&&uo&&t.ctrlKey)};var Fl=ic;var Gl=function(e){return e.type==ia.SINGLECLICK};var oi=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var Df=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};var Hl=function(e){var t=e.originalEvent,r=t.target.tagName;return"INPUT"!==r&&"SELECT"!==r&&"TEXTAREA"!==r&&!t.target.isContentEditable};var id=function(e){var t=e.originalEvent;return ha(void 0!==t,56),"mouse"==t.pointerType};var Il=function(e){var t=e.originalEvent;return ha(void 0!==t,56),t.isPrimary&&0===t.button};var Pr=mi&&mi.__extends||function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Jl=function(t){function n(n){var e=t.call(this,{stopDown:ic})||this,i=n||{};e.kinetic_=i.kinetic,e.lastCentroid=null,e.lastPointersCount_,e.panning_=!1;var r=i.condition?i.condition:ni(oi,Il);return e.condition_=i.onFocusOnly?ni(Dl,r):r,e.noKinetic_=!1,e}return Pr(n,t),n.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,e=Cf(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(e[0],e[1]),this.lastCentroid){var i=[this.lastCentroid[0]-e[0],e[1]-this.lastCentroid[1]],r=t.map.getView();Uo(i,r.getResolution()),Hg(i,r.getRotation()),r.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=e,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()},n.prototype.handleUpEvent=function(t){var n=t.map,e=n.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=e.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),s=n.getCoordinateFromPixelInternal([a[0]-i*Math.cos(r),a[1]-i*Math.sin(r)]);e.animateInternal({center:e.getConstrainedCenter(s),duration:500,easing:Dc})}return this.panning_&&(this.panning_=!1,e.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},n}(_a);mi.default=Jl;var pi={};var Qr=pi&&pi.__extends||function(){var t=function(n,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])})(n,o)};return function(n,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),Kl=function(t){function n(n){var o=this,e=n||{};return(o=t.call(this,{stopDown:ic})||this).condition_=e.condition?e.condition:Nr,o.lastAngle_=void 0,o.duration_=void 0!==e.duration?e.duration:250,o}return Qr(n,t),n.prototype.handleDragEvent=function(t){if(id(t)){var n=t.map,o=n.getView();if(o.getConstraints().rotation!==Wh){var e=n.getSize(),r=t.pixel,i=Math.atan2(e[1]/2-r[1],r[0]-e[0]/2);if(void 0!==this.lastAngle_){var a=i-this.lastAngle_;o.adjustRotationInternal(-a)}this.lastAngle_=i}}},n.prototype.handleUpEvent=function(t){return!id(t)||(t.map.getView().endInteraction(this.duration_),!1)},n.prototype.handleDownEvent=function(t){return!!id(t)&&!(!El(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)},n}(_a);pi.default=Kl;var qi={};var Ef={};var ri={};var Rr=ri&&ri.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ll=function(t){function e(e){var r=t.call(this)||this;return r.geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.style.pointerEvents="auto",r.element_.className="ol-box "+e,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}return Rr(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,r=this.element_.style;r.left=Math.min(t[0],e[0])+"px",r.top=Math.min(t[1],e[1])+"px",r.width=Math.abs(e[0]-t[0])+"px",r.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new nb([r])},e.prototype.getGeometry=function(){return this.geometry_},e}(qg);ri.default=Ll;var Ml=Ef&&Ef.__extends||function(){var t=function(o,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])})(o,n)};return function(o,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=o}t(o,n),o.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),Ff={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},Gf=function(t){function o(o,n,e){var r=t.call(this,o)||this;return r.coordinate=n,r.mapBrowserEvent=e,r}return Ml(o,t),o}(Ja);Ef.DragBoxEvent=Gf;var Nl=function(t){function o(o){var n=t.call(this)||this;n.on,n.once,n.un;var e=o||{};return n.box_=new Ll(e.className||"ol-dragbox"),n.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(n.onBoxEnd=e.onBoxEnd),n.startPixel_=null,n.condition_=e.condition?e.condition:El,n.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:n.defaultBoxEndCondition,n}return Ml(o,t),o.prototype.defaultBoxEndCondition=function(t,o,n){var e=n[0]-o[0],r=n[1]-o[1];return e*e+r*r>=this.minArea_},o.prototype.getGeometry=function(){return this.box_.getGeometry()},o.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Gf(Ff.BOXDRAG,t.coordinate,t))},o.prototype.handleUpEvent=function(t){this.box_.setMap(null);var o=this.boxEndCondition_(t,this.startPixel_,t.pixel);return o&&this.onBoxEnd(t),this.dispatchEvent(new Gf(o?Ff.BOXEND:Ff.BOXCANCEL,t.coordinate,t)),!1},o.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Gf(Ff.BOXSTART,t.coordinate,t)),!0)},o.prototype.onBoxEnd=function(t){},o}(_a);Ef.default=Nl;var Sr=qi&&qi.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ol=function(t){function o(o){var e=this,r=o||{},n=r.condition?r.condition:Df;return(e=t.call(this,{condition:n,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).duration_=void 0!==r.duration?r.duration:200,e.out_=void 0!==r.out&&r.out,e}return Sr(o,t),o.prototype.onBoxEnd=function(t){var o=this.getMap().getView(),e=this.getGeometry();if(this.out_){var r=o.rotatedExtentForGeometry(e),n=o.getResolutionForExtentInternal(r),i=o.getResolution()/n;(e=e.clone()).scale(i*i)}o.fitInternal(e,{duration:this.duration_,easing:Dc})},o}(Nl);qi.default=Ol;var si={};var Gc={LEFT:37,UP:38,RIGHT:39,DOWN:40};var Tr=si&&si.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pl=function(o){function t(t){var e=o.call(this)||this,r=t||{};return e.defaultCondition_=function(o){return oi(o)&&Hl(o)},e.condition_=void 0!==r.condition?r.condition:e.defaultCondition_,e.duration_=void 0!==r.duration?r.duration:100,e.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,e}return Tr(t,o),t.prototype.handleEvent=function(o){var t=!1;if(o.type==ba.KEYDOWN){var e=o.originalEvent,r=e.keyCode;if(this.condition_(o)&&(r==Gc.DOWN||r==Gc.LEFT||r==Gc.RIGHT||r==Gc.UP)){var n=o.map.getView(),i=n.getResolution()*this.pixelDelta_,$=0,a=0;r==Gc.DOWN?a=-i:r==Gc.LEFT?$=-i:r==Gc.RIGHT?$=i:a=i;var p=[$,a];Hg(p,n.getRotation()),Bl(n,p,this.duration_),e.preventDefault(),t=!0}}return!t},t}(bc);si.default=Pl;var ti={};var Ur=ti&&ti.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Ql=function(t){function e(e){var r=t.call(this)||this,o=e||{};return r.condition_=o.condition?o.condition:Hl,r.delta_=o.delta?o.delta:1,r.duration_=void 0!==o.duration?o.duration:100,r}return Ur(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==ba.KEYDOWN||t.type==ba.KEYPRESS){var r=t.originalEvent,o=r.charCode;if(this.condition_(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var n=t.map,i=o=="+".charCodeAt(0)?this.delta_:-this.delta_,a=n.getView();Af(a,i,void 0,this.duration_),r.preventDefault(),e=!0}}return!e},e}(bc);ti.default=Ql;var Hf={};var Vr=Hf&&Hf.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),If={TRACKPAD:"trackpad",WHEEL:"wheel"};Hf.Mode=If;var Rl=function(t){function e(e){var o=this,i=e||{};(o=t.call(this,i)||this).totalDelta_=0,o.lastDelta_=0,o.maxDelta_=void 0!==i.maxDelta?i.maxDelta:1,o.duration_=void 0!==i.duration?i.duration:250,o.timeout_=void 0!==i.timeout?i.timeout:80,o.useAnchor_=void 0===i.useAnchor||i.useAnchor,o.constrainResolution_=void 0!==i.constrainResolution&&i.constrainResolution;var r=i.condition?i.condition:Yd;return o.condition_=i.onFocusOnly?ni(Dl,r):r,o.lastAnchor_=null,o.startTime_=void 0,o.timeoutId_,o.mode_=void 0,o.trackpadEventGap_=400,o.trackpadTimeoutId_,o.deltaPerZoom_=300,o}return Vr(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==ba.WHEEL)return!0;var e,o=t.map,i=t.originalEvent;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==ba.WHEEL&&(e=i.deltaY,ro&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=Gj),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?If.TRACKPAD:If.WHEEL);var n=o.getView();if(this.mode_===If.TRACKPAD&&!n.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(n.getAnimating()&&n.cancelAnimations(),n.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),n.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var o=-va(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(o=o?o>0?1:-1:0),Af(e,o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(bc);Hf.default=Rl;var ui={};var Wr=ui&&ui.__extends||function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sl=function(t){function n(n){var e=this,r=n||{},o=r;return o.stopDown||(o.stopDown=ic),(e=t.call(this,o)||this).anchor_=null,e.lastAngle_=void 0,e.rotating_=!1,e.rotationDelta_=0,e.threshold_=void 0!==r.threshold?r.threshold:.3,e.duration_=void 0!==r.duration?r.duration:250,e}return Wr(n,t),n.prototype.handleDragEvent=function(t){var n=0,e=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-e.clientY,r.clientX-e.clientX);if(void 0!==this.lastAngle_){var i=o-this.lastAngle_;this.rotationDelta_+=i,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=i}this.lastAngle_=o;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==Wh){var h=a.getViewport().getBoundingClientRect(),l=Cf(this.targetPointers);l[0]-=h.left,l[1]-=h.top,this.anchor_=a.getCoordinateFromPixelInternal(l),this.rotating_&&(a.render(),s.adjustRotationInternal(n,this.anchor_))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(_a);ui.default=Sl;var vi={};var Xr=vi&&vi.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tl=function(t){function e(e){var r=this,n=e||{},o=n;return o.stopDown||(o.stopDown=ic),(r=t.call(this,o)||this).anchor_=null,r.duration_=void 0!==n.duration?n.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return Xr(e,t),e.prototype.handleDragEvent=function(t){var e=1,r=this.targetPointers[0],n=this.targetPointers[1],o=r.clientX-n.clientX,i=r.clientY-n.clientY,a=Math.sqrt(o*o+i*i);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,c=s.getView();1!=e&&(this.lastScaleDelta_=e);var l=s.getViewport().getBoundingClientRect(),u=Cf(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(u),s.render(),c.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(_a);vi.default=Tl;var Jf={};var Ul=Jf&&Jf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yr={ADD_FEATURES:"addfeatures"},Vl=function(t){function e(e,r,n,o){var s=t.call(this,e)||this;return s.features=n,s.file=r,s.projection=o,s}return Ul(e,t),e}(Ja);Jf.DragAndDropEvent=Vl;var Zr=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{handleEvent:Oa})||this).on,r.once,r.un,r.readAsBuffer_=!1,r.formats_=[];for(var o=n.formatConstructors?n.formatConstructors:[],s=0,i=o.length;s<i;++s){var a=o[s];"function"==typeof a&&(a=new a),r.formats_.push(a),r.readAsBuffer_=r.readAsBuffer_||"arraybuffer"===a.getType()}return r.projection_=n.projection?wa(n.projection):null,r.dropListenKeys_=null,r.source_=n.source||null,r.target=n.target?n.target:null,r}return Ul(e,t),e.prototype.handleResult_=function(t,e){var r,n=e.target.result,o=this.getMap(),s=this.projection_;s||(s=o.getView().getProjection());for(var i=this.formats_,a=0,p=i.length;a<p;++a){var $=i[a],u=n;this.readAsBuffer_&&"arraybuffer"!==$.getType()&&(void 0===r&&(r=new TextDecoder().decode(n)),u=r);var c=this.tryReadFeatures_($,u,{featureProjection:s});if(c&&c.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures(c)),this.dispatchEvent(new Vl(Yr.ADD_FEATURES,t,c,s));break}}},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[ea(e,ba.DROP,this.handleDrop,this),ea(e,ba.DRAGENTER,this.handleStop,this),ea(e,ba.DRAGOVER,this.handleStop,this),ea(e,ba.DROP,this.handleStop,this)]}},e.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(n){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(la),this.dropListenKeys_=null)},e.prototype.handleDrop=function(t){for(var e=t.dataTransfer.files,r=0,n=e.length;r<n;++r){var o=e.item(r),s=new FileReader;s.addEventListener(ba.LOAD,this.handleResult_.bind(this,o)),this.readAsBuffer_?s.readAsArrayBuffer(o):s.readAsText(o)}},e.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},e}(bc);Jf.default=Zr;var wi={};var $r=wi&&wi.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_r=function(t){function e(e){var n=this,o=e||{};return(n=t.call(this,o)||this).condition_=o.condition?o.condition:Df,n.lastAngle_=void 0,n.lastMagnitude_=void 0,n.lastScaleDelta_=0,n.duration_=void 0!==o.duration?o.duration:400,n}return $r(e,t),e.prototype.handleDragEvent=function(t){if(id(t)){var e=t.map,n=e.getSize(),o=t.pixel,i=o[0]-n[0]/2,r=n[1]/2-o[1],a=Math.atan2(r,i),s=Math.sqrt(i*i+r*r),l=e.getView();if(void 0!==this.lastAngle_){var u=this.lastAngle_-a;l.adjustRotationInternal(u)}this.lastAngle_=a,void 0!==this.lastMagnitude_&&l.adjustResolutionInternal(this.lastMagnitude_/s),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}},e.prototype.handleUpEvent=function(t){if(!id(t))return!0;var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!id(t)&&!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0)},e}(_a);wi.default=_r;var jd={};var xi={};var as=xi&&xi.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Kf=function(t){function e(e,r,o){var i=t.call(this)||this;if(void 0!==o&&void 0===r)i.setFlatCoordinates(o,e);else{var n=r||0;i.setCenterAndRadius(e,n,o)}return i}return as(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,o){var i=this.flatCoordinates,n=t-i[0],s=e-i[1],a=n*n+s*s;if(a<o){if(0===a)for(var p=0;p<this.stride;++p)r[p]=i[p];else{var u=this.getRadius()/Math.sqrt(a);r[0]=i[0]+u*n,r[1]=i[1]+u*s;for(p=2;p<this.stride;++p)r[p]=i[p]}return r.length=this.stride,a}return o},e.prototype.containsXY=function(t,e){var r=this.flatCoordinates,o=t-r[0],i=e-r[1];return o*o+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return fb(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return"Circle"},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Ka(t,e)){var r=this.getCenter();return t[0]<=r[0]&&t[2]>=r[0]||t[1]<=r[1]&&t[3]>=r[1]||zg(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],o=t.slice();o[e]=o[0]+r;for(var i=1;i<e;++i)o[e+i]=t[i];this.setFlatCoordinates(this.layout,o),this.changed()},e.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,i=ck(o,0,t,this.stride);o[i++]=o[0]+e;for(var n=1,s=this.stride;n<s;++n)o[i++]=o[n];o.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter(Qg(r,0,r.length,o,t,e,r)),this.changed()},e.prototype.translate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter($j(r,0,r.length,o,t,e,r)),this.changed()},e}(Eb);Kf.prototype.transform,xi.default=Kf;var yi={};var bs=yi&&yi.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),zi=function(t){function e(e,o,r){var i=t.call(this)||this;if(i.ends_=[],i.maxDelta_=-1,i.maxDeltaRevision_=-1,Array.isArray(e[0]))i.setCoordinates(e,o);else if(void 0!==o&&r)i.setFlatCoordinates(o,e),i.ends_=r;else{for(var n=i.getLayout(),s=e,a=[],l=[],f=0,$=s.length;f<$;++f){var p=s[f];0===f&&(n=p.getLayout()),Wa(a,p.getFlatCoordinates()),l.push(a.length)}i.setFlatCoordinates(n,a),i.ends_=l}return i}return bs(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Wa(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,o,r){return r<nc(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Tg(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vg(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,o,r))},e.prototype.getCoordinateAtM=function(t,e,o){if(this.layout!=sa.XYM&&this.layout!=sa.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,i=void 0!==o&&o;return Ap(this.flatCoordinates,0,this.ends_,this.stride,t,r,i)},e.prototype.getCoordinates=function(){return Hd(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new yc(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,o=this.layout,r=[],i=0,n=0,s=e.length;n<s;++n){var a=e[n],l=new yc(t.slice(i,a),o);r.push(l),i=a}return r},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,o=0,r=this.ends_,i=this.stride,n=0,s=r.length;n<s;++n){var a=r[n],l=nk(e,o,a,i,.5);Wa(t,l),o=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var o=[],r=[];return o.length=lp(this.flatCoordinates,0,this.ends_,this.stride,t,o,0,r),new e(o,sa.XY,r)},e.prototype.getType=function(){return"MultiLineString"},e.prototype.intersectsExtent=function(t){return up(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var o=Wg(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===o.length?0:o[o.length-1],this.changed()},e}(Eb);yi.default=zi;var Ai={};var cs=Ai&&Ai.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Lf=function(t){function e(e,r){var o=t.call(this)||this;return r&&!Array.isArray(e[0])?o.setFlatCoordinates(r,e):o.setCoordinates(e,r),o}return cs(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Wa(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,o){if(o<nc(this.getExtent(),t,e))return o;for(var i=this.flatCoordinates,n=this.stride,s=0,a=i.length;s<a;s+=n){var u=pc(t,e,i[s],i[s+1]);if(u<o){o=u;for(var d=0;d<n;++d)r[d]=i[s+d];r.length=n}}return o},e.prototype.getCoordinates=function(){return Wb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new mb(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,o=[],i=0,n=t.length;i<n;i+=r){var s=new mb(t.slice(i,i+r),e);o.push(s)}return o},e.prototype.getType=function(){return"MultiPoint"},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,o=0,i=e.length;o<i;o+=r){var n=e[o],s=e[o+1];if(xg(t,n,s))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ve(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Eb);Ai.default=Lf;var Bi={};function ds(r,e,t,$){for(var n=[],a=Qa(),i=0,o=t.length;i<o;++i){var s=t[i];a=Kj(r,e,s[0],$),n.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=s[s.length-1]}return n}var es=Bi&&Bi.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ci=function(t){function e(e,i,r){var o=t.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var s=o.getLayout(),n=e,a=[],l=[],h=0,u=n.length;h<u;++h){var $=n[h];0===h&&(s=$.getLayout());for(var d=a.length,p=$.getEnds(),f=0,c=p.length;f<c;++f)p[f]+=d;Wa(a,$.getFlatCoordinates()),l.push(p)}i=s,e=a,r=l}return void 0!==i&&r?(o.setFlatCoordinates(i,e),o.endss_=r):o.setCoordinates(e,i),o}return es(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;Wa(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,o=(e=t.getEnds().slice()).length;r<o;++r)e[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),r=0;r<t;++r)i[r]=this.endss_[r].slice();var o=new e(this.flatCoordinates.slice(),this.layout,i);return o.applyProperties(this),o},e.prototype.closestPointXY=function(t,e,i,r){return r<nc(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ip(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),jp(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))},e.prototype.containsXY=function(t,e){return tp(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return op(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),mk(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Yg(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=ds(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=rp(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new Lf(this.getFlatInteriorPoints().slice(),sa.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;wp(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=mk(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=np(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,r),new e(i,sa.XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var r=this.endss_[t].slice(),o=r[r.length-1];if(0!==e)for(var s=0,n=r.length;s<n;++s)r[s]-=e;return new nb(this.flatCoordinates.slice(e,o),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[],o=0,s=0,n=i.length;s<n;++s){var a=i[s].slice(),l=a[a.length-1];if(0!==o)for(var h=0,u=a.length;h<u;++h)a[h]-=o;var $=new nb(e.slice(o,l),t,a);r.push($),o=l}return r},e.prototype.getType=function(){return"MultiPolygon"},e.prototype.intersectsExtent=function(t){return vp(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=kp(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(Eb);Bi.default=Ci;var Wl=jd&&jd.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ja={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},Mf={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},Zd=function(e){function t(t,i){var r=e.call(this,t)||this;return r.feature=i,r}return Wl(t,e),t}(Ja);jd.DrawEvent=Zd;var fs=function(e){function t(t){var i=this,r=t;r.stopDown||(r.stopDown=ic),(i=e.call(this,r)||this).on,i.once,i.un,i.shouldHandle_=!1,i.downPx_=null,i.downTimeout_,i.lastDragTime_,i.pointerType_,i.freehand_=!1,i.source_=t.source?t.source:null,i.features_=t.features?t.features:null,i.snapTolerance_=t.snapTolerance?t.snapTolerance:12,i.type_=t.type,i.mode_=js(i.type_),i.stopClick_=!!t.stopClick,i.minPoints_=t.minPoints?t.minPoints:i.mode_===ja.POLYGON?3:2,i.maxPoints_=i.mode_===ja.CIRCLE?2:t.maxPoints?t.maxPoints:1/0,i.finishCondition_=t.finishCondition?t.finishCondition:Oa,i.geometryLayout_=t.geometryLayout?t.geometryLayout:sa.XY;var o=t.geometryFunction;if(!o){var n,s=i.mode_;if(s===ja.CIRCLE)o=function(e,t,i){var r=t||new Kf([NaN,NaN]),o=pa(e[0],i),n=Za(o,pa(e[e.length-1],i));r.setCenterAndRadius(o,Math.sqrt(n),this.geometryLayout_);var s=Ra();return s&&r.transform(i,s),r};else s===ja.POINT?n=mb:s===ja.LINE_STRING?n=yc:s===ja.POLYGON&&(n=nb),o=function(e,t,i){return t?s===ja.POLYGON?e[0].length?t.setCoordinates([e[0].concat([e[0][0]])],this.geometryLayout_):t.setCoordinates([],this.geometryLayout_):t.setCoordinates(e,this.geometryLayout_):t=new n(e,this.geometryLayout_),t}}return i.geometryFunction_=o,i.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,i.overlay_=new Cc({source:new hd({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:gs(),updateWhileInteracting:!0}),i.geometryName_=t.geometryName,i.condition_=t.condition?t.condition:oi,i.freehandCondition_,t.freehand?i.freehandCondition_=Yd:i.freehandCondition_=t.freehandCondition?t.freehandCondition:Df,i.addChangeListener(zf.ACTIVE,i.updateState_),i}return Wl(t,e),t.prototype.setMap=function(t){e.prototype.setMap.call(this,t),this.updateState_()},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleEvent=function(t){t.originalEvent.type===ba.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!==ja.POINT&&this.freehandCondition_(t);var i=t.type===ia.POINTERMOVE,r=!0;!this.freehand_&&this.lastDragTime_&&t.type===ia.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===ia.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),r=!1):this.freehand_&&t.type===ia.POINTERDOWN?r=!1:i&&this.getPointerCount()<2?(r=t.type===ia.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===ia.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===ia.DBLCLICK&&(r=!1),e.prototype.handleEvent.call(this,t)&&r},t.prototype.handleDownEvent=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new rb(ia.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)},t.prototype.handleUpEvent=function(e){var t=!0;if(0===this.getPointerCount())if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e),this.shouldHandle_){var i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():this.freehand_||i&&this.mode_!==ja.POINT||(this.atFinish_(e.pixel)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing();return!t&&this.stopClick_&&e.preventDefault(),t},t.prototype.handlePointerMove_=function(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,i=e.pixel,r=t[0]-i[0],o=t[1]-i[1],n=r*r+o*o;if(this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(e.coordinate):this.createOrUpdateSketchPoint_(e.coordinate.slice())},t.prototype.atFinish_=function(e){var t=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_],o=this.mode_;if(o===ja.POINT)t=!0;else if(o===ja.CIRCLE)t=2===this.sketchCoords_.length;else if(o===ja.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(o===ja.POLYGON){var n=this.sketchCoords_;i=n[0].length>this.minPoints_,r=[n[0][0],n[0][n[0].length-2]]}if(i)for(var s=this.getMap(),a=0,h=r.length;a<h;a++){var $=r[a],c=s.getPixelFromCoordinate($),d=e[0]-c[0],p=e[1]-c[1],_=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(d*d+p*p)<=_){this.finishCoordinate_=$;break}}}return t},t.prototype.createOrUpdateSketchPoint_=function(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new eb(new mb(e)),this.updateSketchFeatures_())},t.prototype.createOrUpdateCustomSketchLine_=function(e){this.sketchLine_||(this.sketchLine_=new eb);var t=e.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new yc(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))},t.prototype.startDrawing_=function(e){for(var t=this.getMap().getView().getProjection(),i=Gd(this.geometryLayout_);e.length<i;)e.push(0);this.finishCoordinate_=e,this.mode_===ja.POINT?this.sketchCoords_=e.slice():this.mode_===ja.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new eb(new yc(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new eb,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new Zd(Mf.DRAWSTART,this.sketchFeature_))},t.prototype.modifyDrawing_=function(e){for(var t,i,r=this.getMap(),o=this.sketchFeature_.getGeometry(),n=r.getView().getProjection(),s=Gd(this.geometryLayout_);e.length<s;)e.push(0);(this.mode_===ja.POINT?i=this.sketchCoords_:this.mode_===ja.POLYGON?(i=(t=this.sketchCoords_[0])[t.length-1],this.atFinish_(r.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):i=(t=this.sketchCoords_)[t.length-1],i[0]=e[0],i[1]=e[1],this.geometryFunction_(this.sketchCoords_,o,n),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(e);if("Polygon"===o.getType()&&this.mode_!==ja.POLYGON)this.createOrUpdateCustomSketchLine_(o);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},t.prototype.addToDrawing_=function(e){var t,i,r=this.sketchFeature_.getGeometry(),o=this.getMap().getView().getProjection(),n=this.mode_;n===ja.LINE_STRING||n===ja.CIRCLE?(this.finishCoordinate_=e.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(e.slice()),this.geometryFunction_(i,r,o)):n===ja.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(e.slice()),t&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,r,o)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),t&&this.finishDrawing()},t.prototype.removeLastPoint=function(){if(this.sketchFeature_){var e,t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r=this.mode_;if(r===ja.LINE_STRING||r===ja.CIRCLE){if((e=this.sketchCoords_).splice(-2,1),e.length>=2){this.finishCoordinate_=e[e.length-2].slice();var o=this.finishCoordinate_.slice();e[e.length-1]=o,this.createOrUpdateSketchPoint_(o)}this.geometryFunction_(e,t,i),"Polygon"===t.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(r===ja.POLYGON){(e=this.sketchCoords_[0]).splice(-2,1);var n=this.sketchLine_.getGeometry();if(e.length>=2){o=e[e.length-2].slice();e[e.length-1]=o,this.createOrUpdateSketchPoint_(o)}n.setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t,i)}1===e.length&&this.abortDrawing(),this.updateSketchFeatures_()}},t.prototype.finishDrawing=function(){var e=this.abortDrawing_();if(e){var t=this.sketchCoords_,i=e.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===ja.LINE_STRING?(t.pop(),this.geometryFunction_(t,i,r)):this.mode_===ja.POLYGON&&(t[0].pop(),this.geometryFunction_(t,i,r),t=i.getCoordinates()),"MultiPoint"===this.type_?e.setGeometry(new Lf([t])):"MultiLineString"===this.type_?e.setGeometry(new zi([t])):"MultiPolygon"===this.type_&&e.setGeometry(new Ci([t])),this.dispatchEvent(new Zd(Mf.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}},t.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),e},t.prototype.abortDrawing=function(){var e=this.abortDrawing_();e&&this.dispatchEvent(new Zd(Mf.DRAWABORT,e))},t.prototype.appendCoordinates=function(e){var t,i=this.mode_,r=!this.sketchFeature_;if(r&&this.startDrawing_(e[0]),i===ja.LINE_STRING||i===ja.CIRCLE)t=this.sketchCoords_;else{if(i!==ja.POLYGON)return;t=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}r&&t.shift(),t.pop();for(var o=0;o<e.length;o++)this.addToDrawing_(e[o]);var n=e[e.length-1];this.addToDrawing_(n),this.modifyDrawing_(n)},t.prototype.extend=function(e){var t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new eb(new mb(i)),this.updateSketchFeatures_(),this.dispatchEvent(new Zd(Mf.DRAWSTART,this.sketchFeature_))},t.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)},t.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing(),this.overlay_.setMap(t?e:null)},t}(_a);function gs(){var e=Qd();return function(t,i){return e[t.getGeometry().getType()]}}function hs(e,t){return function(i,r,o){var n=pa(i[0],o),s=pa(i[i.length-1],o),a=Math.sqrt(Za(n,s)),h=r||Id(new Kf(n),e),$=t;if(!t&&0!==t){var c=s[0]-n[0],d=s[1]-n[1];$=Math.atan2(d,c)}bh(h,n,a,$);var p=Ra();return p&&h.transform(o,p),h}}function is(){return function(e,t,i){var r=Ba([e[0],e[e.length-1]].map(function(e){return pa(e,i)})),o=[[Vc(r),Wc(r),Cd(r),Bb(r),Vc(r)]],n=t;n?n.setCoordinates(o):n=new nb(o);var s=Ra();return s&&n.transform(i,s),n}}function js(e){switch(e){case"Point":case"MultiPoint":return ja.POINT;case"LineString":case"MultiLineString":return ja.LINE_STRING;case"Polygon":case"MultiPolygon":return ja.POLYGON;case"Circle":return ja.CIRCLE;default:throw new Error("Invalid type: "+e);}}jd.createRegularPolygon=hs,jd.createBox=is,jd.default=fs;var Nf={};var Xl=Nf&&Nf.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ks={EXTENTCHANGED:"extentchanged"},Yl=function(e){function t(t){var r=e.call(this,ks.EXTENTCHANGED)||this;return r.extent=t,r}return Xl(t,e),t}(Ja);Nf.ExtentEvent=Yl;var ls=function(e){function t(t){var r=this,n=t||{};return(r=e.call(this,n)||this).on,r.once,r.un,r.condition_=n.condition?n.condition:Yd,r.extent_=null,r.pointerHandler_=null,r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.snappedToVertex_=!1,r.extentFeature_=null,r.vertexFeature_=null,t||(t={}),r.extentOverlay_=new Cc({source:new hd({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:ms(),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.vertexOverlay_=new Cc({source:new hd({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:ns(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&r.setExtent(t.extent),r}return Xl(t,e),t.prototype.snapToVertex_=function(e,t){var r=t.getCoordinateFromPixelInternal(e),n=this.getExtentInternal();if(n){var o=os(n);o.sort(function(e,t){return Jg(r,e)-Jg(r,t)});var i=o[0],a=Re(r,i),$=t.getPixelFromCoordinateInternal(a);if(Ig(e,$)<=this.pixelTolerance_){var l=t.getPixelFromCoordinateInternal(i[0]),p=t.getPixelFromCoordinateInternal(i[1]),u=Za($,l),s=Za($,p),c=Math.sqrt(Math.min(u,s));return this.snappedToVertex_=c<=this.pixelTolerance_,this.snappedToVertex_&&(a=u>s?i[1]:i[0]),a}}return null},t.prototype.handlePointerMove_=function(e){var t=e.pixel,r=e.map,n=this.snapToVertex_(t,r);n||(n=r.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(n)},t.prototype.createOrUpdateExtentFeature_=function(e){var t=this.extentFeature_;return t?e?t.setGeometry(xc(e)):t.setGeometry(void 0):(t=e?new eb(xc(e)):new eb({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t},t.prototype.createOrUpdatePointerFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new eb(new mb(e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t));return t},t.prototype.handleEvent=function(t){return!t.originalEvent||!this.condition_(t)||(t.type!=ia.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),e.prototype.handleEvent.call(this,t),!1)},t.prototype.handleDownEvent=function(e){var t=e.pixel,r=e.map,n=this.getExtentInternal(),o=this.snapToVertex_(t,r),i=function(e){var t=null,r=null;return e[0]==n[0]?t=n[2]:e[0]==n[2]&&(t=n[0]),e[1]==n[1]?r=n[3]:e[1]==n[3]&&(r=n[1]),null!==t&&null!==r?[t,r]:null};if(o&&n){var a=o[0]==n[0]||o[0]==n[2]?o[0]:null,$=o[1]==n[1]||o[1]==n[3]?o[1]:null;null!==a&&null!==$?this.pointerHandler_=Zl(i(o)):null!==a?this.pointerHandler_=$l(i([a,n[1]]),i([a,n[3]])):null!==$&&(this.pointerHandler_=$l(i([n[0],$]),i([n[2],$])))}else o=r.getCoordinateFromPixelInternal(t),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=Zl(o);return!0},t.prototype.handleDragEvent=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}},t.prototype.handleUpEvent=function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return t&&0!==Ne(t)||this.setExtent(null),!1},t.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getExtent=function(){return Fd(this.getExtentInternal(),this.getMap().getView().getProjection())},t.prototype.getExtentInternal=function(){return this.extent_},t.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new Yl(this.extent_))},t}(_a);function ms(){var e=Qd();return function(t,r){return e.Polygon}}function ns(){var e=Qd();return function(t,r){return e.Point}}function Zl(e){return function(t){return Ba([e,t])}}function $l(e,t){return e[0]==t[0]?function(r){return Ba([e,[r[0],t[1]]])}:e[1]==t[1]?function(r){return Ba([e,[t[0],r[1]]])}:null}function os(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}Nf.default=ls;var Of={};var _l=Of&&Of.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),am=0,$d=1,bm=[0,0,0,0],kd=[],Di={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},Pf=function(e){function t(t,r,o){var i=e.call(this,t)||this;return i.features=r,i.mapBrowserEvent=o,i}return _l(t,e),t}(Ja);Of.ModifyEvent=Pf;var ps=function(e){function t(t){var r,o=e.call(this,t)||this;if(o.on,o.once,o.un,o.boundHandleFeatureChange_=o.handleFeatureChange_.bind(o),o.condition_=t.condition?t.condition:Il,o.defaultDeleteCondition_=function(e){return Mr(e)&&Gl(e)},o.deleteCondition_=t.deleteCondition?t.deleteCondition:o.defaultDeleteCondition_,o.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:Yd,o.vertexFeature_=null,o.vertexSegments_=null,o.lastPixel_=[0,0],o.ignoreNextSingleClick_=!1,o.featuresBeingModified_=null,o.rBush_=new sf,o.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,o.snappedToVertex_=!1,o.changingFeature_=!1,o.dragSegments_=[],o.overlay_=new Cc({source:new hd({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:rs(),updateWhileAnimating:!0,updateWhileInteracting:!0}),o.SEGMENT_WRITERS_={Point:o.writePointGeometry_.bind(o),LineString:o.writeLineStringGeometry_.bind(o),LinearRing:o.writeLineStringGeometry_.bind(o),Polygon:o.writePolygonGeometry_.bind(o),MultiPoint:o.writeMultiPointGeometry_.bind(o),MultiLineString:o.writeMultiLineStringGeometry_.bind(o),MultiPolygon:o.writeMultiPolygonGeometry_.bind(o),Circle:o.writeCircleGeometry_.bind(o),GeometryCollection:o.writeGeometryCollectionGeometry_.bind(o)},o.source_=null,o.hitDetection_=null,t.features?r=t.features:t.source&&(o.source_=t.source,r=new Aa(o.source_.getFeatures()),o.source_.addEventListener(La.ADDFEATURE,o.handleSourceAdd_.bind(o)),o.source_.addEventListener(La.REMOVEFEATURE,o.handleSourceRemove_.bind(o))),!r)throw new Error("The modify interaction requires features, a source or a layer");return t.hitDetection&&(o.hitDetection_=t.hitDetection),o.features_=r,o.features_.forEach(o.addFeature_.bind(o)),o.features_.addEventListener(ua.ADD,o.handleFeatureAdd_.bind(o)),o.features_.addEventListener(ua.REMOVE,o.handleFeatureRemove_.bind(o)),o.lastPointerEvent_=null,o.delta_=[0,0],o.snapToPointer_=void 0===t.snapToPointer?!o.hitDetection_:t.snapToPointer,o}return _l(t,e),t.prototype.addFeature_=function(e){var t=e.getGeometry();if(t){var r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),e.addEventListener(ba.CHANGE,this.boundHandleFeatureChange_)},t.prototype.willModifyFeatures_=function(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Aa;for(var r=this.featuresBeingModified_.getArray(),o=0,i=t.length;o<i;++o)for(var n=t[o],a=0,s=n.length;a<s;++a){var $=n[a].feature;$&&-1===r.indexOf($)&&this.featuresBeingModified_.push($)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new Pf(Di.MODIFYSTART,this.featuresBeingModified_,e))}},t.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(ba.CHANGE,this.boundHandleFeatureChange_)},t.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(var o=r.length-1;o>=0;--o){for(var i=r[o],n=this.dragSegments_.length-1;n>=0;--n)this.dragSegments_[n][0]===i&&this.dragSegments_.splice(n,1);t.remove(i)}},t.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.prototype.setActive.call(this,t)},t.prototype.setMap=function(t){this.overlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},t.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},t.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},t.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},t.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},t.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),o={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),o)},t.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o){var n=r[o],a={feature:e,geometry:t,depth:[o],index:o,segment:[n,n]};this.rBush_.insert(t.getExtent(),a)}},t.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length-1;o<i;++o){var n=r.slice(o,o+2),a={feature:e,geometry:t,index:o,segment:n};this.rBush_.insert(Ba(n),a)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length-1;a<s;++a){var $=n.slice(a,a+2),u={feature:e,geometry:t,depth:[o],index:a,segment:$};this.rBush_.insert(Ba($),u)}},t.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length-1;a<s;++a){var $=n.slice(a,a+2),u={feature:e,geometry:t,depth:[o],index:a,segment:$};this.rBush_.insert(Ba($),u)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length;a<s;++a)for(var $=n[a],u=0,d=$.length-1;u<d;++u){var g=$.slice(u,u+2),p={feature:e,geometry:t,depth:[a,o],index:u,segment:g};this.rBush_.insert(Ba(g),p)}},t.prototype.writeCircleGeometry_=function(e,t){var r=t.getCenter(),o={feature:e,geometry:t,index:am,segment:[r,r]},i={feature:e,geometry:t,index:$d,segment:[r,r]},n=[o,i];o.featureSegments=n,i.featureSegments=n,this.rBush_.insert(Me(r),o);var a=t,s=Ra();if(s&&this.getMap()){var $=this.getMap().getView().getProjection();a=a.clone().transform(s,$),a=Id(a).transform($,s)}this.rBush_.insert(a.getExtent(),i)},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),o=0;o<r.length;++o){var i=r[o];(0,this.SEGMENT_WRITERS_[i.getType()])(e,i)}},t.prototype.createOrUpdateVertexFeature_=function(e,t,r){var o=this.vertexFeature_;o?o.getGeometry().setCoordinates(e):(o=new eb(new mb(e)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o));return o.set("features",t),o.set("geometries",r),o},t.prototype.handleEvent=function(t){return!t.originalEvent||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=ia.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(r=!(t.type!=ia.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==ia.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),e.prototype.handleEvent.call(this,t)&&!r);var r},t.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);for(var t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],o=[],i=0,n=this.dragSegments_.length;i<n;++i){var a=this.dragSegments_[i],s=a[0],$=s.feature;-1===r.indexOf($)&&r.push($);var u=s.geometry;-1===o.indexOf(u)&&o.push(u);for(var d=s.depth,g=void 0,p=s.segment,l=a[1];t.length<u.getStride();)t.push(p[l][t.length]);switch(u.getType()){case"Point":g=t,p[0]=t,p[1]=t;break;case"MultiPoint":(g=u.getCoordinates())[s.index]=t,p[0]=t,p[1]=t;break;case"LineString":(g=u.getCoordinates())[s.index+l]=t,p[l]=t;break;case"MultiLineString":case"Polygon":(g=u.getCoordinates())[d[0]][s.index+l]=t,p[l]=t;break;case"MultiPolygon":(g=u.getCoordinates())[d[1]][d[0]][s.index+l]=t,p[l]=t;break;case"Circle":if(p[0]=t,p[1]=t,s.index===am)this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;var h=e.map.getView().getProjection(),x=Ig(pa(u.getCenter(),h),pa(t,h)),m=Ra();if(m){var c=u.clone().transform(m,h);c.setRadius(x),x=c.transform(h,m).getRadius()}u.setRadius(x),this.changingFeature_=!1}}g&&this.setGeometryCoordinates_(u,g)}this.createOrUpdateVertexFeature_(t,r,o)},t.prototype.handleDownEvent=function(e){if(!this.condition_(e))return!1;var t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;var r=this.vertexFeature_;if(r){var o=e.map.getView().getProjection(),i=[],n=r.getGeometry().getCoordinates(),a=Ba([n]),s=this.rBush_.getInExtent(a),$={};s.sort(qs);for(var u=0,d=s.length;u<d;++u){var g=s[u],p=g.segment,l=ga(g.geometry),h=g.depth;if(h&&(l+="-"+h.join("-")),$[l]||($[l]=new Array(2)),"Circle"!==g.geometry.getType()||g.index!==$d){if(!gb(p[0],n)||$[l][0]){if(!gb(p[1],n)||$[l][1])ga(p)in this.vertexSegments_&&!$[l][0]&&!$[l][1]&&this.insertVertexCondition_(e)&&i.push(g);else{if($[l][0]&&0===$[l][0].index){var x=g.geometry.getCoordinates();switch(g.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":x=x[h[1]];case"Polygon":if(g.index!==x[h[0]].length-2)continue;}}this.dragSegments_.push([g,1]),$[l][1]=g}}else this.dragSegments_.push([g,0]),$[l][0]=g;}else{var m=dm(t,g,o);gb(m,n)&&!$[l][0]&&(this.dragSegments_.push([g,0]),$[l][0]=g)}}i.length&&this.willModifyFeatures_(e,[i]);for(var c=i.length-1;c>=0;--c)this.insertVertex_(i[c],n)}return!!this.vertexFeature_},t.prototype.handleUpEvent=function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],o=r.geometry;if("Circle"===o.getType()){var i=o.getCenter(),n=r.featureSegments[0],a=r.featureSegments[1];n.segment[0]=i,n.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.rBush_.update(Me(i),n);var s=o,$=Ra();if($){var u=e.map.getView().getProjection();s=s.clone().transform($,u),s=Id(s).transform(u,$)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update(Ba(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new Pf(Di.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1},t.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)},t.prototype.handlePointerAtPixel_=function(e,t,r){var o,i,n=this,a=r||t.getCoordinateFromPixel(e),s=t.getView().getProjection();if(this.hitDetection_){var $="object"==typeof this.hitDetection_?function(e){return e===n.hitDetection_}:void 0;t.forEachFeatureAtPixel(e,function(e,t,r){if("Point"===(r=r||e.getGeometry()).getType()&&Qc(n.features_.getArray(),e)){i=r;var a=r.getFlatCoordinates().slice(0,2);o=[{feature:e,geometry:r,segment:[a,a]}]}return!0},{layerFilter:$})}if(!o){var u=Vb(Me(a,bm),s),d=t.getView().getResolution()*this.pixelTolerance_,g=Fd(Le(u,d,bm),s);o=this.rBush_.getInExtent(g)}if(o&&o.length>0){var p=o.sort(function(e,t){return cm(a,e,s)-cm(a,t,s)})[0],l=p.segment,h=dm(a,p,s),x=t.getPixelFromCoordinate(h),m=Ig(e,x);if(i||m<=this.pixelTolerance_){var c={};if(c[ga(l)]=!0,this.snapToPointer_||(this.delta_[0]=h[0]-a[0],this.delta_[1]=h[1]-a[1]),"Circle"===p.geometry.getType()&&p.index===$d)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h,[p.feature],[p.geometry]);else{var _=t.getPixelFromCoordinate(l[0]),v=t.getPixelFromCoordinate(l[1]),f=Za(x,_),y=Za(x,v);m=Math.sqrt(Math.min(f,y)),this.snappedToVertex_=m<=this.pixelTolerance_,this.snappedToVertex_&&(h=f>y?l[1]:l[0]),this.createOrUpdateVertexFeature_(h,[p.feature],[p.geometry]);var q={};q[ga(p.geometry)]=!0;for(var E=1,C=o.length;E<C;++E){var S=o[E].segment;if(!(gb(l[0],S[0])&&gb(l[1],S[1])||gb(l[0],S[1])&&gb(l[1],S[0])))break;var F=ga(o[E].geometry);F in q||(q[F]=!0,c[ga(S)]=!0)}}return void(this.vertexSegments_=c)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},t.prototype.insertVertex_=function(e,t){for(var r,o=e.segment,i=e.feature,n=e.geometry,a=e.depth,s=e.index;t.length<n.getStride();)t.push(0);switch(n.getType()){case"MultiLineString":case"Polygon":(r=n.getCoordinates())[a[0]].splice(s+1,0,t);break;case"MultiPolygon":(r=n.getCoordinates())[a[1]][a[0]].splice(s+1,0,t);break;case"LineString":(r=n.getCoordinates()).splice(s+1,0,t);break;default:return;}this.setGeometryCoordinates_(n,r);var $=this.rBush_;$.remove(e),this.updateSegmentIndices_(n,s,a,1);var u={segment:[o[0],t],feature:i,geometry:n,depth:a,index:s};$.insert(Ba(u.segment),u),this.dragSegments_.push([u,1]);var d={segment:[t,o[1]],feature:i,geometry:n,depth:a,index:s+1};$.insert(Ba(d.segment),d),this.dragSegments_.push([d,0]),this.ignoreNextSingleClick_=!0},t.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=ia.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);var t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new Pf(Di.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1},t.prototype.removeVertex_=function(){var e,t,r,o,i,n,a,s,$,u,d,g=this.dragSegments_,p={},l=!1;for(i=g.length-1;i>=0;--i)u=(r=g[i])[0],d=ga(u.feature),u.depth&&(d+="-"+u.depth.join("-")),d in p||(p[d]={}),0===r[1]?(p[d].right=u,p[d].index=u.index):1==r[1]&&(p[d].left=u,p[d].index=u.index+1);for(d in p){switch($=p[d].right,a=p[d].left,(s=(n=p[d].index)-1)<0&&(s=0),e=t=(o=(u=void 0!==a?a:$).geometry).getCoordinates(),l=!1,o.getType()){case"MultiLineString":t[u.depth[0]].length>2&&(t[u.depth[0]].splice(n,1),l=!0);break;case"LineString":t.length>2&&(t.splice(n,1),l=!0);break;case"MultiPolygon":e=e[u.depth[1]];case"Polygon":(e=e[u.depth[0]]).length>4&&(n==e.length-1&&(n=0),e.splice(n,1),l=!0,0===n&&(e.pop(),e.push(e[0]),s=e.length-1));}if(l){this.setGeometryCoordinates_(o,t);var h=[];if(void 0!==a&&(this.rBush_.remove(a),h.push(a.segment[0])),void 0!==$&&(this.rBush_.remove($),h.push($.segment[1])),void 0!==a&&void 0!==$){var x={depth:u.depth,feature:u.feature,geometry:u.geometry,index:s,segment:h};this.rBush_.insert(Ba(x.segment),x)}this.updateSegmentIndices_(o,n,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),g.length=0}}return l},t.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},t.prototype.updateSegmentIndices_=function(e,t,r,o){this.rBush_.forEachInExtent(e.getExtent(),function(i){i.geometry===e&&(void 0===r||void 0===i.depth||Sb(i.depth,r))&&i.index>t&&(i.index+=o)})},t}(_a);function qs(e,t){return e.index-t.index}function cm(e,t,r){var o=t.geometry;if("Circle"===o.getType()){var i=o;if(t.index===$d){var n=Ra();n&&(i=i.clone().transform(n,r));var a=Za(i.getCenter(),pa(e,r)),s=Math.sqrt(a)-i.getRadius();return s*s}}var $=pa(e,r);return kd[0]=pa(t.segment[0],r),kd[1]=pa(t.segment[1],r),Jg($,kd)}function dm(e,t,r){var o=t.geometry;if("Circle"===o.getType()&&t.index===$d){var i=o,n=Ra();return n&&(i=i.clone().transform(n,r)),ad(i.getClosestPoint(pa(e,r)),r)}var a=pa(e,r);return kd[0]=pa(t.segment[0],r),kd[1]=pa(t.segment[1],r),ad(Re(a,kd),r)}function rs(){var e=Qd();return function(t,r){return e.Point}}Of.default=ps;var Qf={};var em=Qf&&Qf.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ss={SELECT:"select"},fm=function(e){function t(t,r,i,o){var n=e.call(this,t)||this;return n.selected=r,n.deselected=i,n.mapBrowserEvent=o,n}return em(t,e),t}(Ja);Qf.SelectEvent=fm;var Rf={},ts=function(e){function t(t){var r=e.call(this)||this;r.on,r.once,r.un;var i,o=t||{};if(r.boundAddFeature_=r.addFeature_.bind(r),r.boundRemoveFeature_=r.removeFeature_.bind(r),r.condition_=o.condition?o.condition:Gl,r.addCondition_=o.addCondition?o.addCondition:Fl,r.removeCondition_=o.removeCondition?o.removeCondition:Fl,r.toggleCondition_=o.toggleCondition?o.toggleCondition:Df,r.multi_=!!o.multi&&o.multi,r.filter_=o.filter?o.filter:Oa,r.hitTolerance_=o.hitTolerance?o.hitTolerance:0,r.style_=void 0!==o.style?o.style:us(),r.features_=o.features||new Aa,o.layers){if("function"==typeof o.layers)i=o.layers;else{var n=o.layers;i=function(e){return Qc(n,e)}}}else i=Oa;return r.layerFilter_=i,r.featureLayerAssociation_={},r}return em(t,e),t.prototype.addFeatureLayerAssociation_=function(e,t){this.featureLayerAssociation_[ga(e)]=t},t.prototype.getFeatures=function(){return this.features_},t.prototype.getHitTolerance=function(){return this.hitTolerance_},t.prototype.getLayer=function(e){return this.featureLayerAssociation_[ga(e)]},t.prototype.setHitTolerance=function(e){this.hitTolerance_=e},t.prototype.setMap=function(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),e.prototype.setMap.call(this,t),t?(this.features_.addEventListener(ua.ADD,this.boundAddFeature_),this.features_.addEventListener(ua.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(ua.ADD,this.boundAddFeature_),this.features_.removeEventListener(ua.REMOVE,this.boundRemoveFeature_))},t.prototype.addFeature_=function(e){var t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){var r=this.getMap().getAllLayers().find(function(e){if(e instanceof Cc&&e.getSource()&&e.getSource().hasFeature(t))return e});r&&this.addFeatureLayerAssociation_(t,r)}},t.prototype.removeFeature_=function(e){var t=e.element;this.style_&&this.restorePreviousStyle_(t)},t.prototype.getStyle=function(){return this.style_},t.prototype.applySelectedStyle_=function(e){var t=ga(e);t in Rf||(Rf[t]=e.getStyle()),e.setStyle(this.style_)},t.prototype.restorePreviousStyle_=function(e){for(var r=this.getMap().getInteractions().getArray(),i=r.length-1;i>=0;--i){var o=r[i];if(o!==this&&o instanceof t&&o.getStyle()&&-1!==o.getFeatures().getArray().lastIndexOf(e))return void e.setStyle(o.getStyle())}var n=ga(e);e.setStyle(Rf[n]),delete Rf[n]},t.prototype.removeFeatureLayerAssociation_=function(e){delete this.featureLayerAssociation_[ga(e)]},t.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;var t=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),o=!t&&!r&&!i,n=e.map,a=this.getFeatures(),s=[],l=[];if(o){Rc(this.featureLayerAssociation_),n.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return this.addFeatureLayerAssociation_(e,t),l.push(e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var $=a.getLength()-1;$>=0;--$){var u=a.item($),c=l.indexOf(u);c>-1?l.splice(c,1):(a.remove(u),s.push(u))}0!==l.length&&a.extend(l)}else{n.forEachFeatureAtPixel(e.pixel,function(e,o){if(this.filter_(e,o))return!t&&!i||Qc(a.getArray(),e)?(r||i)&&Qc(a.getArray(),e)&&(s.push(e),this.removeFeatureLayerAssociation_(e)):(this.addFeatureLayerAssociation_(e,o),l.push(e)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=s.length-1;p>=0;--p)a.remove(s[p]);a.extend(l)}return(l.length>0||s.length>0)&&this.dispatchEvent(new fm(ss.SELECT,l,s,e)),!0},t}(bc);function us(){var e=Qd();return Wa(e.Polygon,e.LineString),Wa(e.GeometryCollection,e.LineString),function(t){return t.getGeometry()?e[t.getGeometry().getType()]:null}}Qf.default=ts;var Ei={};var vs=Ei&&Ei.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function gm(e){return e.feature?e.feature:e.element?e.element:void 0}var Fi=[],ws=function(e){function t(t){var r=this,n=t||{},o=n;return o.handleDownEvent||(o.handleDownEvent=Oa),o.stopDown||(o.stopDown=ic),(r=e.call(this,o)||this).source_=n.source?n.source:null,r.vertex_=void 0===n.vertex||n.vertex,r.edge_=void 0===n.edge||n.edge,r.features_=n.features?n.features:null,r.featuresListenerKeys_=[],r.featureChangeListenerKeys_={},r.indexedFeaturesExtents_={},r.pendingFeatures_={},r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.rBush_=new sf,r.GEOMETRY_SEGMENTERS_={Point:r.segmentPointGeometry_.bind(r),LineString:r.segmentLineStringGeometry_.bind(r),LinearRing:r.segmentLineStringGeometry_.bind(r),Polygon:r.segmentPolygonGeometry_.bind(r),MultiPoint:r.segmentMultiPointGeometry_.bind(r),MultiLineString:r.segmentMultiLineStringGeometry_.bind(r),MultiPolygon:r.segmentMultiPolygonGeometry_.bind(r),GeometryCollection:r.segmentGeometryCollectionGeometry_.bind(r),Circle:r.segmentCircleGeometry_.bind(r)},r}return vs(t,e),t.prototype.addFeature=function(e,t){var r=void 0===t||t,n=ga(e),o=e.getGeometry();if(o){var i=this.GEOMETRY_SEGMENTERS_[o.getType()];if(i){this.indexedFeaturesExtents_[n]=o.getExtent(Qa());var s=[];if(i(s,o),1===s.length)this.rBush_.insert(Ba(s[0]),{feature:e,segment:s[0]});else if(s.length>1){var a=s.map(function(e){return Ba(e)}),u=s.map(function(t){return{feature:e,segment:t}});this.rBush_.load(a,u)}}}r&&(this.featureChangeListenerKeys_[n]=ea(e,ba.CHANGE,this.handleFeatureChange_,this))},t.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},t.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},t.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},t.prototype.handleEvent=function(t){var r=this.snapTo(t.pixel,t.coordinate,t.map);return r&&(t.coordinate=r.vertex.slice(0,2),t.pixel=r.vertexPixel),e.prototype.handleEvent.call(this,t)},t.prototype.handleFeatureAdd_=function(e){var t=gm(e);this.addFeature(t)},t.prototype.handleFeatureRemove_=function(e){var t=gm(e);this.removeFeature(t)},t.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var r=ga(t);r in this.pendingFeatures_||(this.pendingFeatures_[r]=t)}else this.updateFeature_(t)},t.prototype.handleUpEvent=function(e){var t=sg(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},t.prototype.removeFeature=function(e,t){var r=void 0===t||t,n=ga(e),o=this.indexedFeaturesExtents_[n];if(o){var i=this.rBush_,s=[];i.forEachInExtent(o,function(t){e===t.feature&&s.push(t)});for(var a=s.length-1;a>=0;--a)i.remove(s[a])}r&&(la(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},t.prototype.setMap=function(t){var r=this.getMap(),n=this.featuresListenerKeys_,o=this.getFeatures_();r&&(n.forEach(la),n.length=0,o.forEach(this.forEachFeatureRemove_.bind(this))),e.prototype.setMap.call(this,t),t&&(this.features_?n.push(ea(this.features_,ua.ADD,this.handleFeatureAdd_,this),ea(this.features_,ua.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(ea(this.source_,La.ADDFEATURE,this.handleFeatureAdd_,this),ea(this.source_,La.REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_.bind(this)))},t.prototype.snapTo=function(e,t,r){var n=r.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=r.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),i=Ba([n,o]),s=this.rBush_.getInExtent(i),a=s.length;if(0===a)return null;var u,$=r.getView().getProjection(),p=pa(t,$),l=1/0,h=this.pixelTolerance_*this.pixelTolerance_,c=function(){if(u){var t=r.getPixelFromCoordinate(u);if(Za(e,t)<=h)return{vertex:u,vertexPixel:[Math.round(t[0]),Math.round(t[1])]}}return null};if(this.vertex_){for(var m=0;m<a;++m){"Circle"!==(g=s[m]).feature.getGeometry().getType()&&g.segment.forEach(function(e){var t=pa(e,$),r=Za(p,t);r<l&&(u=e,l=r)})}if(W=c())return W}if(this.edge_){for(m=0;m<a;++m){var g,f=null;if("Circle"===(g=s[m]).feature.getGeometry().getType()){var d=g.feature.getGeometry(),G=Ra();G&&(d=d.clone().transform(G,$)),f=ad(To(p,d),$)}else{var v=g.segment,_=v[0],y=v[1];y&&(Fi[0]=pa(_,$),Fi[1]=pa(y,$),f=Re(p,Fi))}if(f){var N=Za(p,f);N<l&&(u=f,l=N)}}var W;if(W=c())return W}return null},t.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},t.prototype.segmentCircleGeometry_=function(e,t){var r=this.getMap().getView().getProjection(),n=t,o=Ra();o&&(n=n.clone().transform(o,r));var i=Id(n);o&&i.transform(r,o);for(var s=i.getCoordinates()[0],a=0,u=s.length-1;a<u;++a)e.push(s.slice(a,a+2))},t.prototype.segmentGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var o=this.GEOMETRY_SEGMENTERS_[r[n].getType()];o&&o(e,r[n])}},t.prototype.segmentLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length-1;n<o;++n)e.push(r.slice(n,n+2))},t.prototype.segmentMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],s=0,a=i.length-1;s<a;++s)e.push(i.slice(s,s+2))},t.prototype.segmentMultiPointGeometry_=function(e,t){t.getCoordinates().forEach(function(t){e.push([t])})},t.prototype.segmentMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],s=0,a=i.length;s<a;++s)for(var u=i[s],$=0,p=u.length-1;$<p;++$)e.push(u.slice($,$+2))},t.prototype.segmentPointGeometry_=function(e,t){e.push([t.getCoordinates()])},t.prototype.segmentPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],s=0,a=i.length-1;s<a;++s)e.push(i.slice(s,s+2))},t}(_a);Ei.default=ws;var Sf={};var hm=Sf&&Sf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gi={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},Tf=function(t){function e(e,r,n,a,o){var i=t.call(this,e)||this;return i.features=r,i.coordinate=n,i.startCoordinate=a,i.mapBrowserEvent=o,i}return hm(e,t),e}(Ja);Sf.TranslateEvent=Tf;var xs=function(t){function e(e){var r,n=this,a=e||{};if((n=t.call(this,a)||this).on,n.once,n.un,n.lastCoordinate_=null,n.startCoordinate_=null,n.features_=void 0!==a.features?a.features:null,a.layers&&!n.features_){if("function"==typeof a.layers)r=a.layers;else{var o=a.layers;r=function(t){return Qc(o,t)}}}else r=Oa;return n.layerFilter_=r,n.filter_=a.filter&&!n.features_?a.filter:Oa,n.hitTolerance_=a.hitTolerance?a.hitTolerance:0,n.condition_=a.condition?a.condition:Yd,n.lastFeature_=null,n.addChangeListener(zf.ACTIVE,n.handleActiveChanged_),n}return hm(e,t),e.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.condition_(t))return!1;if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new Aa([this.lastFeature_]);return this.dispatchEvent(new Tf(Gi.TRANSLATESTART,e,t.coordinate,this.startCoordinate_,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new Aa([this.lastFeature_]);return this.dispatchEvent(new Tf(Gi.TRANSLATEEND,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,r=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],a=this.features_||new Aa([this.lastFeature_]);a.forEach(function(t){var e=t.getGeometry();e.translate(r,n),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new Tf(Gi.TRANSLATING,a,e,this.startCoordinate_,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||Qc(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(r)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(_a);Sf.default=xs;var ys=Kh&&Kh.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),im=function(t){function r(r){return(r=ya({},r)).controls||(r.controls=nr()),r.interactions||(r.interactions=Ir({onFocusOnly:!0})),t.call(this,r)||this}return ys(r,t),r.prototype.createRenderer=function(){return new Nh(this)},r}(Zh);Kh.default=im;var Hi={};var zs=function(){function e(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.expireCache=function(e){for(;this.canExpireCache();)this.pop()},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},e.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},e.prototype.get=function(e,t){var r=this.entries_[e];return ha(void 0!==r,15),r===this.newest_?r.value_:(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r,r.value_)},e.prototype.remove=function(e){var t=this.entries_[e];return ha(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var e,t=new Array(this.count_),r=0;for(e=this.newest_;e;e=e.older)t[r++]=e.key_;return t},e.prototype.getValues=function(){var e,t=new Array(this.count_),r=0;for(e=this.newest_;e;e=e.older)t[r++]=e.value_;return t},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.peek=function(e){if(this.containsKey(e))return this.entries_[e].value_},e.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},e.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},e.prototype.set=function(e,t){ha(!(e in this.entries_),16);var r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_},e.prototype.setSize=function(e){this.highWaterMark=e},e}();function jm(e,r,t,$){return void 0!==$?($[0]=e,$[1]=r,$[2]=t,$):[e,r,t]}function Uf(e,r,t){return e+"/"+r+"/"+t}function km(e){return Uf(e[0],e[1],e[2])}function As(e){return e.split("/").map(Number)}function Bs(e){return(e[1]<<e[0])+e[2]}function Cs(e,r){var t=e[0],$=e[1],a=e[2];if(r.getMinZoom()>t||t>r.getMaxZoom())return!1;var o=r.getFullTileRange(t);return!o||o.containsXY($,a)}var Ds=Hi&&Hi.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Ii=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ds(t,e),t.prototype.expireCache=function(e){for(;this.canExpireCache();){if(this.peekLast().getKey()in e)break;this.pop().release()}},t.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var e=this.peekFirstKey(),t=As(e)[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(km(e.tileCoord)),e.release())}.bind(this))}},t}(zs);Hi.default=Ii;var Ji=function(){function t(t,i,n,e){this.minX=t,this.maxX=i,this.minY=n,this.maxY=e}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function ld(t,i,n,e,m){return void 0!==m?(m.minX=t,m.maxX=i,m.minY=n,m.maxY=e,m):new Ji(t,i,n,e)}var Ki={};var Li={};var Vf={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var Es=Li&&Li.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),lm=function(t){function r(r){var e=this,o=r||{},n=ya({},o);return delete n.preload,delete n.useInterimTilesOnError,(e=t.call(this,n)||this).on,e.once,e.un,e.setPreload(void 0!==o.preload?o.preload:0),e.setUseInterimTilesOnError(void 0===o.useInterimTilesOnError||o.useInterimTilesOnError),e}return Es(r,t),r.prototype.getPreload=function(){return this.get(Vf.PRELOAD)},r.prototype.setPreload=function(t){this.set(Vf.PRELOAD,t)},r.prototype.getUseInterimTilesOnError=function(){return this.get(Vf.USE_INTERIM_TILES_ON_ERROR)},r.prototype.setUseInterimTilesOnError=function(t){this.set(Vf.USE_INTERIM_TILES_ON_ERROR,t)},r.prototype.getData=function(r){return t.prototype.getData.call(this,r)},r}(Rd);Li.default=lm;var Mi={};var Ni={};var Fs=.5;var Lb=!0;var Gs=10,mm=.25,Hs=function(){function t(t,i,r,e,o,s){this.sourceProj_=t,this.targetProj_=i;var a={},n=Ed(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var i=t[0]+"/"+t[1];return a[i]||(a[i]=n(t)),a[i]},this.maxSourceExtent_=e,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!e&&!!this.sourceProj_.getExtent()&&ra(e)==ra(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ra(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ra(this.targetProj_.getExtent()):null;var h=Bb(r),$=Cd(r),u=Wc(r),d=Vc(r),_=this.transformInv_(h),c=this.transformInv_($),l=this.transformInv_(u),p=this.transformInv_(d),m=Gs+(s?Math.max(0,Math.ceil(Ko(Ne(r)/(s*s*256*256)))):0);if(this.addQuad_(h,$,u,d,_,c,l,p,m),this.wrapsXInSource_){var g=1/0;this.triangles_.forEach(function(t,i,r){g=Math.min(g,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-g>this.sourceWorldWidth_/2){var i=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];i[0][0]-g>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-g>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-g>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);var r=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-r<this.sourceWorldWidth_/2&&(t.source=i)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,i,r,e,o,s){this.triangles_.push({source:[e,o,s],target:[t,i,r]})},t.prototype.addQuad_=function(t,i,r,e,o,s,a,n,h){var $=Ba([o,s,a,n]),u=this.sourceWorldWidth_?ra($)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,_=this.sourceProj_.canWrapX()&&u>.5&&u<1,c=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var l=Ba([t,i,r,e]);c=ra(l)/this.targetWorldWidth_>mm||c}!_&&this.sourceProj_.isGlobal()&&u&&(c=u>mm||c)}if(!(!c&&this.maxSourceExtent_&&isFinite($[0])&&isFinite($[1])&&isFinite($[2])&&isFinite($[3]))||Ka($,this.maxSourceExtent_)){var p=0;if(!(c||isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(n[0])&&isFinite(n[1])))if(h>0)c=!0;else if(1!=(p=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(n[0])&&isFinite(n[1])?0:1))&&2!=p&&4!=p&&8!=p)return;if(h>0){if(!c){var m=[(t[0]+r[0])/2,(t[1]+r[1])/2],g=this.transformInv_(m),f=void 0;if(_)f=(qc(o[0],d)+qc(a[0],d))/2-qc(g[0],d);else f=(o[0]+a[0])/2-g[0];var W=(o[1]+a[1])/2-g[1];c=f*f+W*W>this.errorThresholdSquared_}if(c){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var R=[(i[0]+r[0])/2,(i[1]+r[1])/2],B=this.transformInv_(R),Y=[(e[0]+t[0])/2,(e[1]+t[1])/2],v=this.transformInv_(Y);this.addQuad_(t,i,R,Y,o,s,B,v,h-1),this.addQuad_(Y,R,r,e,v,B,a,n,h-1)}else{var I=[(t[0]+i[0])/2,(t[1]+i[1])/2],x=this.transformInv_(I),F=[(r[0]+e[0])/2,(r[1]+e[1])/2],E=this.transformInv_(F);this.addQuad_(t,I,F,e,o,x,E,n,h-1),this.addQuad_(I,i,r,F,x,s,a,E,h-1)}return}}if(_){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&p)&&this.addTriangle_(t,r,e,o,a,n),0==(14&p)&&this.addTriangle_(t,r,i,o,a,s),p&&(0==(13&p)&&this.addTriangle_(i,e,t,s,n,o),0==(7&p)&&this.addTriangle_(i,e,r,s,n,a))}},t.prototype.calculateSourceExtent=function(){var t=Qa();return this.triangles_.forEach(function(i,r,e){var o=i.source;Ad(t,o[0]),Ad(t,o[1]),Ad(t,o[2])}),t},t.prototype.getTriangles=function(){return this.triangles_},t}();var nm;var Oi={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};var Is={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};var om=[];function pm(e,r,t,o,a){e.beginPath(),e.moveTo(0,0),e.lineTo(r,t),e.lineTo(o,a),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(r,o)+1,Math.max(t,a)),e.restore()}function Pi(e,r){return Math.abs(e[4*r]-210)>2||Math.abs(e[4*r+3]-191.25)>2}function Js(){if(void 0===nm){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",pm(e,4,5,4,0),pm(e,4,5,0,5);var r=e.getImageData(0,0,3,3).data;nm=Pi(r,0)||Pi(r,4)||Pi(r,8)}return nm}function qm(e,r,t,o){var a=Pg(t,r,e),n=Ue(r,o,t),$=r.getMetersPerUnit();void 0!==$&&(n*=$);var i=e.getMetersPerUnit();void 0!==i&&(n/=i);var l=e.getExtent();if(!l||yd(l,a)){var s=Ue(e,n,a)/n;isFinite(s)&&s>0&&(n/=s)}return n}function Ks(e,r,t,o){var a=oc(t),n=qm(e,r,a,o);return(!isFinite(n)||n<=0)&&zg(t,function(t){return n=qm(e,r,t,o),isFinite(n)&&n>0}),n}function Ls(e,r,t,o,a,n,$,i,l,s,c,g){var u=Sa(Math.round(t*e),Math.round(t*r),om);if(g||ya(u,Oi),0===l.length)return u.canvas;function v(e){return Math.round(e*t)/t}u.scale(t,t),u.globalCompositeOperation="lighter";var U=Qa();l.forEach(function(e,r,t){Lj(U,e.extent)});var p=ra(U),m=Ya(U),d=Sa(Math.round(t*p/o),Math.round(t*m/o));g||ya(d,Oi);var h=t/o;l.forEach(function(e,r,t){var o=e.extent[0]-U[0],a=-(e.extent[3]-U[3]),n=ra(e.extent),$=Ya(e.extent);e.image.width>0&&e.image.height>0&&d.drawImage(e.image,s,s,e.image.width-2*s,e.image.height-2*s,o*h,a*h,n*h,$*h)});var f=Bb($);return i.getTriangles().forEach(function(e,r,a){var $=e.source,i=e.target,l=$[0][0],s=$[0][1],c=$[1][0],p=$[1][1],m=$[2][0],h=$[2][1],x=v((i[0][0]-f[0])/n),T=v(-(i[0][1]-f[1])/n),R=v((i[1][0]-f[0])/n),D=v(-(i[1][1]-f[1])/n),b=v((i[2][0]-f[0])/n),E=v(-(i[2][1]-f[1])/n),M=l,S=s;l=0,s=0,c-=M,p-=S,m-=M,h-=S;var k=Mo([[c,p,0,0,R-x],[m,h,0,0,b-x],[0,0,c,p,D-T],[0,0,m,h,E-T]]);if(k){if(u.save(),u.beginPath(),Js()||!g){u.moveTo(R,D);for(var P=x-R,C=T-D,I=0;I<4;I++)u.lineTo(R+v((I+1)*P/4),D+v(I*C/3)),3!=I&&u.lineTo(R+v((I+1)*P/4),D+v((I+1)*C/3));u.lineTo(b,E)}else u.moveTo(R,D),u.lineTo(x,T),u.lineTo(b,E);u.clip(),u.transform(k[0],k[2],k[1],k[3],x,T),u.translate(U[0]-M,U[3]-S),u.scale(o/t,-o/t),u.drawImage(d.canvas,0,0),u.restore()}}),c&&(u.save(),u.globalCompositeOperation="source-over",u.strokeStyle="black",u.lineWidth=1,i.getTriangles().forEach(function(e,r,t){var o=e.target,a=(o[0][0]-f[0])/n,$=-(o[0][1]-f[1])/n,i=(o[1][0]-f[0])/n,l=-(o[1][1]-f[1])/n,s=(o[2][0]-f[0])/n,c=-(o[2][1]-f[1])/n;u.beginPath(),u.moveTo(i,l),u.lineTo(a,$),u.lineTo(s,c),u.closePath(),u.stroke()}),u.restore()),u.canvas}var Ms=Ni&&Ni.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Qi=function(t){function e(e,r,i,o,l,s,n,a,$,p,d,u){var c=t.call(this,l,fa.IDLE,{interpolate:!!u})||this;c.renderEdges_=void 0!==d&&d,c.pixelRatio_=n,c.gutter_=a,c.canvas_=null,c.sourceTileGrid_=r,c.targetTileGrid_=o,c.wrappedTileCoord_=s||l,c.sourceTiles_=[],c.sourcesListenerKeys_=null,c.sourceZ_=0;var _=o.getTileCoordExtent(c.wrappedTileCoord_),O=c.targetTileGrid_.getExtent(),h=c.sourceTileGrid_.getExtent(),T=O?Bd(_,O):_;if(0===Ne(T))return c.state=fa.EMPTY,c;var W=e.getExtent();W&&(h=h?Bd(h,W):W);var g=o.getResolution(c.wrappedTileCoord_[0]),m=Ks(e,i,T,g);if(!isFinite(m)||m<=0)return c.state=fa.EMPTY,c;var f=void 0!==p?p:Fs;if(c.triangulation_=new Hs(e,i,T,h,m*f,g),0===c.triangulation_.getTriangles().length)return c.state=fa.EMPTY,c;c.sourceZ_=r.getZForResolution(m);var v=c.triangulation_.calculateSourceExtent();if(h&&(e.canWrapX()?(v[1]=va(v[1],h[1],h[3]),v[3]=va(v[3],h[1],h[3])):v=Bd(v,h)),Ne(v)){for(var E=r.getTileRangeForExtentAndZ(v,c.sourceZ_),S=E.minX;S<=E.maxX;S++)for(var y=E.minY;y<=E.maxY;y++){var x=$(c.sourceZ_,S,y,n);x&&c.sourceTiles_.push(x)}0===c.sourceTiles_.length&&(c.state=fa.EMPTY)}else c.state=fa.EMPTY;return c}return Ms(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,i){e&&e.getState()==fa.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=fa.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),i="number"==typeof r?r:r[0],o="number"==typeof r?r:r[1],l=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),n=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Ls(i,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),l,n,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=fa.LOADED}this.changed()},e.prototype.load=function(){if(this.state==fa.IDLE){this.state=fa.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,i){var o=e.getState();if(o==fa.IDLE||o==fa.LOADING){t++;var l=ea(e,ba.CHANGE,function(r){var i=e.getState();i!=fa.LOADED&&i!=fa.ERROR&&i!=fa.EMPTY||(la(l),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(l)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,e,r){t.getState()==fa.IDLE&&t.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(la),this.sourcesListenerKeys_=null},e.prototype.release=function(){this.canvas_&&(uk(this.canvas_.getContext("2d")),om.push(this.canvas_),this.canvas_=null),t.prototype.release.call(this)},e}(Ih);Ni.default=Qi;var Ns=Mi&&Mi.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),rm=function(e){function t(t){var r=e.call(this,t)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=Qa(),r.tmpTileRange_=new Ji(0,0,0,0),r}return Ns(t,e),t.prototype.isDrawableTile=function(e){var t=this.getLayer(),r=e.getState(),i=t.getUseInterimTilesOnError();return r==fa.LOADED||r==fa.EMPTY||r==fa.ERROR&&!i},t.prototype.getTile=function(e,t,r,i){var o=i.pixelRatio,n=i.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(e,t,r,o,n);return s.getState()==fa.ERROR&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(fa.LOADED)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},t.prototype.getData=function(e){var t=this.frameState;if(!t)return null;var r=this.getLayer(),i=za(t.pixelToCoordinateTransform,e.slice()),o=r.getExtent();if(o&&!yd(o,i))return null;for(var n=t.pixelRatio,a=t.viewState.projection,s=t.viewState,l=r.getRenderSource(),h=l.getTileGridForProjection(s.projection),$=l.getTilePixelRatio(t.pixelRatio),p=h.getZForResolution(s.resolution);p>=h.getMinZoom();--p){var d=h.getTileCoordForCoordAndZ(i,p),u=l.getTile(p,d[1],d[2],n,a);if(!(u instanceof Jh||u instanceof Qi))return null;if(u.getState()===fa.LOADED){var c=h.getOrigin(p),g=ib(h.getTileSize(p)),m=h.getResolution(p),T=Math.floor($*((i[0]-c[0])/m-d[1]*g[0])),f=Math.floor($*((c[1]-i[1])/m-d[2]*g[1])),M=Math.round($*l.getGutterForProjection(s.projection));return this.getImageData(u.getImage(),T+M,f+M)}}return null},t.prototype.loadedTileCallback=function(t,r,i){return!!this.isDrawableTile(i)&&e.prototype.loadedTileCallback.call(this,t,r,i)},t.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},t.prototype.renderFrame=function(e,t){var r=e.layerStatesArray[e.layerIndex],i=e.viewState,o=i.projection,n=i.resolution,a=i.center,s=i.rotation,l=e.pixelRatio,h=this.getLayer(),$=h.getSource(),p=$.getRevision(),d=$.getTileGridForProjection(o),u=d.getZForResolution(n,$.zDirection),c=d.getResolution(u),g=e.extent,m=e.viewState.resolution,T=$.getTilePixelRatio(l),f=Math.round(ra(g)/m*l),M=Math.round(Ya(g)/m*l),k=r.extent&&Vb(r.extent,o);k&&(g=Bd(g,Vb(r.extent,o)));var v=c*f/2/T,V=c*M/2/T,x=[a[0]-v,a[1]-V,a[0]+v,a[1]+V],y=d.getTileRangeForExtentAndZ(g,u),R={};R[u]={};var S=this.createLoadedTileFinder($,o,R),w=this.tmpExtent,j=this.tmpTileRange_;this.newTiles_=!1;for(var E=s?Bg(i.center,m,s,e.size):void 0,C=y.minX;C<=y.maxX;++C)for(var _=y.minY;_<=y.maxY;++_)if(!s||d.tileCoordIntersectsViewport([u,C,_],E)){var I=this.getTile(u,C,_,e);if(this.isDrawableTile(I)){var O=ga(this);if(I.getState()==fa.LOADED)R[u][I.tileCoord.toString()]=I,(re=I.inTransition(O))&&1!==r.opacity&&(I.endTransition(O),re=!1),this.newTiles_||!re&&-1!==this.renderedTiles.indexOf(I)||(this.newTiles_=!0);if(1===I.getAlpha(O,e.time))continue}var P=d.getTileCoordChildTileRange(I.tileCoord,j,w),A=!1;P&&(A=S(u+1,P)),A||d.forEachTileCoordParentTileRange(I.tileCoord,S,j,w)}var D=c/n*l/T;Ab(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,s,-f/2,-M/2);var b=Ij(this.pixelTransform);this.useContainer(t,b,this.getBackground(e));var q=this.context,L=q.canvas;wg(this.inversePixelTransform,this.pixelTransform),Ab(this.tempTransform,f/2,M/2,D,D,0,-f/2,-M/2),L.width!=f||L.height!=M?(L.width=f,L.height=M):this.containerReused||q.clearRect(0,0,f,M),k&&this.clipUnrotated(q,e,k),$.getInterpolate()||ya(q,Oi),this.preRender(q,e),this.renderedTiles.length=0;var F,U,z,G=Object.keys(R).map(Number);G.sort(kc),1!==r.opacity||this.containerReused&&!$.getOpaque(e.viewState.projection)?(F=[],U=[]):G=G.reverse();for(var Z=G.length-1;Z>=0;--Z){var Y=G[Z],K=$.getTilePixelSize(Y,l,o),N=d.getResolution(Y)/c,X=K[0]*N*D,B=K[1]*N*D,H=d.getTileCoordForCoordAndZ(Bb(x),Y),Q=d.getTileCoordExtent(H),W=za(this.tempTransform,[T*(Q[0]-x[0])/c,T*(x[3]-Q[3])/c]),J=T*$.getGutterForProjection(o),ee=R[Y];for(var te in ee){var re,ie=(I=ee[te]).tileCoord,oe=H[1]-ie[1],ne=Math.round(W[0]-(oe-1)*X),ae=H[2]-ie[2],se=Math.round(W[1]-(ae-1)*B),le=ne-(C=Math.round(W[0]-oe*X)),he=se-(_=Math.round(W[1]-ae*B)),$e=u===Y,pe=!1;if(!(re=$e&&1!==I.getAlpha(ga(this),e.time)))if(F){z=[C,_,C+le,_,C+le,_+he,C,_+he];for(var de=0,ue=F.length;de<ue;++de)if(u!==Y&&Y<U[de]){var ce=F[de];Ka([C,_,C+le,_+he],[ce[0],ce[3],ce[4],ce[7]])&&(pe||(q.save(),pe=!0),q.beginPath(),q.moveTo(z[0],z[1]),q.lineTo(z[2],z[3]),q.lineTo(z[4],z[5]),q.lineTo(z[6],z[7]),q.moveTo(ce[6],ce[7]),q.lineTo(ce[4],ce[5]),q.lineTo(ce[2],ce[3]),q.lineTo(ce[0],ce[1]),q.clip())}F.push(z),U.push(Y)}else q.clearRect(C,_,le,he);this.drawTileImage(I,e,C,_,le,he,J,$e),F&&!re?(pe&&q.restore(),this.renderedTiles.unshift(I)):this.renderedTiles.push(I),this.updateUsedTiles(e.usedTiles,$,I)}}return this.renderedRevision=p,this.renderedResolution=c,this.extentChanged=!this.renderedExtent_||!Uc(this.renderedExtent_,x),this.renderedExtent_=x,this.renderedPixelRatio=l,this.renderedProjection=o,this.manageTilePyramid(e,$,d,l,o,g,u,h.getPreload()),this.scheduleExpireCache(e,$),this.postRender(q,e),r.extent&&q.restore(),ya(q,Is),b!==L.style.transform&&(L.style.transform=b),this.container},t.prototype.drawTileImage=function(e,t,r,i,o,n,a,s){var l=this.getTileImage(e);if(l){var h=ga(this),$=t.layerStatesArray[t.layerIndex],p=$.opacity*(s?e.getAlpha(h,t.time):1),d=p!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,r,i,o,n),d&&this.context.restore(),p!==$.opacity?t.animate=!0:s&&e.endTransition(h)}},t.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},t.prototype.getTileImage=function(e){return e.getImage()},t.prototype.scheduleExpireCache=function(e,t){if(t.canExpireCache()){var r=function(e,t,r){var i=ga(e);i in r.usedTiles&&e.expireCache(r.viewState.projection,r.usedTiles[i])}.bind(null,t);e.postRenderFunctions.push(r)}},t.prototype.updateUsedTiles=function(e,t,r){var i=ga(t);i in e||(e[i]={}),e[i][r.getKey()]=!0},t.prototype.manageTilePyramid=function(e,t,r,i,o,n,a,s,l){var h=ga(t);h in e.wantedTiles||(e.wantedTiles[h]={});var $,p,d,u,c,g,m=e.wantedTiles[h],T=e.tileQueue,f=r.getMinZoom(),M=e.viewState.rotation,k=M?Bg(e.viewState.center,e.viewState.resolution,M,e.size):void 0,v=0;for(g=f;g<=a;++g)for(p=r.getTileRangeForExtentAndZ(n,g,p),d=r.getResolution(g),u=p.minX;u<=p.maxX;++u)for(c=p.minY;c<=p.maxY;++c)M&&!r.tileCoordIntersectsViewport([g,u,c],k)||(a-g<=s?(++v,($=t.getTile(g,u,c,i,o)).getState()==fa.IDLE&&(m[$.getKey()]=!0,T.isKeyQueued($.getKey())||T.enqueue([$,h,r.getTileCoordCenter($.tileCoord),d])),void 0!==l&&l($)):t.useTile(g,u,c,o));t.updateCacheSize(v,o)},t}(wh);Mi.default=rm;var Os=Ki&&Ki.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])})(r,t)};return function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),sm=function(e){function r(r){return e.call(this,r)||this}return Os(r,e),r.prototype.createRenderer=function(){return new rm(this)},r}(lm);Ki.default=sm;var Ri={};var Si={};var Ti={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var Wf={};function tm(e){var t=e.getDefaultTileGrid();return t||(t=Ss(e),e.setDefaultTileGrid(t)),t}function Ps(e,t,r){var x=t[0],o=e.getTileCoordCenter(t),$=Ui(r);if(yd($,o))return t;var i=ra($),n=Math.ceil(($[0]-o[0])/i);return o[0]+=i*n,e.getTileCoordForCoordAndZ(o,x)}function Qs(e,t,r,x){var o=void 0!==x?x:"top-left",$=um(e,t,r);return new vm({extent:e,origin:Do(e,o),resolutions:$,tileSize:r})}function Rs(e){var t=e||{},r=t.extent||wa("EPSG:3857").getExtent(),x={extent:r,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:um(r,t.maxZoom,t.tileSize,t.maxResolution)};return new vm(x)}function um(e,t,r,x){for(var o=void 0!==t?t:dr,$=Ya(e),i=ra(e),n=ib(void 0!==r?r:Th),E=x>0?x:Math.max(i/n[0],$/n[1]),p=o+1,R=new Array(p),a=0;a<p;++a)R[a]=E/Math.pow(2,a);return R}function Ss(e,t,r,x){return Qs(Ui(e),t,r,x)}function Ui(e){var t=(e=wa(e)).getExtent();if(!t){var r=180*Pa[ta.DEGREES]/e.getMetersPerUnit();t=fb(-r,-r,r,r)}return t}var Ts=[0,0,0],cc=5,vm=function(){function t(t){var i;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,ha(no(this.resolutions_,function(t,i){return i-t},!0),17),!t.origins)for(var e=0,o=this.resolutions_.length-1;e<o;++e)if(i){if(this.resolutions_[e]/this.resolutions_[e+1]!==i){i=void 0;break}}else i=this.resolutions_[e]/this.resolutions_[e+1];this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,ha(this.origins_.length==this.resolutions_.length,20));var r=t.extent;void 0===r||this.origin_||this.origins_||(this.origin_=Bb(r)),ha(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,ha(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:Th,ha(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==r?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,i){var e=new Ji(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(r){var o=this.getTileRangeForExtentAndZ(r,i);e.minX=Math.max(o.minX,e.minX),e.maxX=Math.min(o.maxX,e.maxX),e.minY=Math.max(o.minY,e.minY),e.maxY=Math.min(o.maxY,e.maxY)}return e},this):r&&this.calculateTileRanges_(r)}return t.prototype.forEachTileCoord=function(t,i,e){for(var o=this.getTileRangeForExtentAndZ(t,i),r=o.minX,n=o.maxX;r<=n;++r)for(var s=o.minY,p=o.maxY;s<=p;++s)e([i,r,s])},t.prototype.forEachTileCoordParentTileRange=function(t,i,e,o){var r,n,s,p=null,l=t[0]-1;for(2===this.zoomFactor_?(n=t[1],s=t[2]):p=this.getTileCoordExtent(t,o);l>=this.minZoom;){if(2===this.zoomFactor_?(n=Math.floor(n/2),s=Math.floor(s/2),r=ld(n,n,s,s,e)):r=this.getTileRangeForExtentAndZ(p,l,e),i(l,r))return!0;--l}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,i,e){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var o=2*t[1],r=2*t[2];return ld(o,o+1,r,r+1,i)}var n=this.getTileCoordExtent(t,e||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,i)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,i,e){if(i>this.maxZoom||i<this.minZoom)return null;var o=t[0],r=t[1],n=t[2];if(i===o)return ld(r,n,r,n,e);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,i-o),p=Math.floor(r*s),l=Math.floor(n*s);if(i<o)return ld(p,p,l,l,e);var $=Math.floor(s*(r+1))-1,a=Math.floor(s*(n+1))-1;return ld(p,$,l,a,e)}var h=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,i,e)},t.prototype.getTileRangeExtent=function(t,i,e){var o=this.getOrigin(t),r=this.getResolution(t),n=ib(this.getTileSize(t),this.tmpSize_),s=o[0]+i.minX*n[0]*r,p=o[0]+(i.maxX+1)*n[0]*r,l=o[1]+i.minY*n[1]*r,$=o[1]+(i.maxY+1)*n[1]*r;return fb(s,l,p,$,e)},t.prototype.getTileRangeForExtentAndZ=function(t,i,e){var o=Ts;this.getTileCoordForXYAndZ_(t[0],t[3],i,!1,o);var r=o[1],n=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],i,!0,o),ld(r,o[1],n,o[2],e)},t.prototype.getTileCoordCenter=function(t){var i=this.getOrigin(t[0]),e=this.getResolution(t[0]),o=ib(this.getTileSize(t[0]),this.tmpSize_);return[i[0]+(t[1]+.5)*o[0]*e,i[1]-(t[2]+.5)*o[1]*e]},t.prototype.getTileCoordExtent=function(t,i){var e=this.getOrigin(t[0]),o=this.getResolution(t[0]),r=ib(this.getTileSize(t[0]),this.tmpSize_),n=e[0]+t[1]*r[0]*o,s=e[1]-(t[2]+1)*r[1]*o,p=n+r[0]*o,l=s+r[1]*o;return fb(n,s,p,l,i)},t.prototype.getTileCoordForCoordAndResolution=function(t,i,e){return this.getTileCoordForXYAndResolution_(t[0],t[1],i,!1,e)},t.prototype.getTileCoordForXYAndResolution_=function(t,i,e,o,r){var n=this.getZForResolution(e),s=e/this.getResolution(n),p=this.getOrigin(n),l=ib(this.getTileSize(n),this.tmpSize_),$=s*(t-p[0])/e/l[0],a=s*(p[1]-i)/e/l[1];return o?($=Pe($,cc)-1,a=Pe(a,cc)-1):($=Oe($,cc),a=Oe(a,cc)),jm(n,$,a,r)},t.prototype.getTileCoordForXYAndZ_=function(t,i,e,o,r){var n=this.getOrigin(e),s=this.getResolution(e),p=ib(this.getTileSize(e),this.tmpSize_),l=(t-n[0])/s/p[0],$=(n[1]-i)/s/p[1];return o?(l=Pe(l,cc)-1,$=Pe($,cc)-1):(l=Oe(l,cc),$=Oe($,cc)),jm(e,l,$,r)},t.prototype.getTileCoordForCoordAndZ=function(t,i,e){return this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,e)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,i){var e=rg(this.resolutions_,t,i||0);return va(e,this.minZoom,this.maxZoom)},t.prototype.tileCoordIntersectsViewport=function(t,i){return hk(i,0,i.length,2,this.getTileCoordExtent(t))},t.prototype.calculateTileRanges_=function(t){for(var i=this.resolutions_.length,e=new Array(i),o=this.minZoom;o<i;++o)e[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=e},t}();var wm=Wf&&Wf.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xm=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})||this;i.on,i.once,i.un,i.opaque_=void 0!==e.opaque&&e.opaque,i.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,i.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;return i.tileGrid&&ib(i.tileGrid.getTileSize(i.tileGrid.getMinZoom()),[256,256]),i.tileCache=new Ii(e.cacheSize||0),i.tmpSize=[0,0],i.key_=e.key||"",i.tileOptions={transition:e.transition,interpolate:e.interpolate},i.zDirection=e.zDirection?e.zDirection:0,i}return wm(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,r){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var n,l,p,a=!0,c=i.minX;c<=i.maxX;++c)for(var u=i.minY;u<=i.maxY;++u)l=Uf(e,c,u),p=!1,o.containsKey(l)&&(p=(n=o.get(l)).getState()===fa.LOADED)&&(p=!1!==r(n)),p||(a=!1);return a},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},e.prototype.getTile=function(t,e,i,r,o){return da()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:tm(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return ha(null===e||tc(e,t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),n=ib(r.getTileSize(t),this.tmpSize);return 1==o?n:Cp(n,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=Ps(r,t,i)),Cs(t,r)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)},e.prototype.useTile=function(t,e,i,r){},e}(Fh),ym=function(t){function e(e,i){var r=t.call(this,e)||this;return r.tile=i,r}return wm(e,t),e}(Ja);Wf.TileSourceEvent=ym,Wf.default=xm;function Us(e,r){var t=/\{z\}/g,p=/\{x\}/g,o=/\{y\}/g,$=/\{-y\}/g;return function(n,a,l){return n?e.replace(t,n[0].toString()).replace(p,n[1].toString()).replace(o,n[2].toString()).replace($,function(){var e=n[0],t=r.getFullTileRange(e);return ha(t,55),(t.getHeight()-n[2]-1).toString()}):void 0}}function Vs(e,r){for(var t=e.length,p=new Array(t),o=0;o<t;++o)p[o]=Us(e[o],r);return Ws(p)}function Ws(e){return 1===e.length?e[0]:function(r,t,p){if(r){var o=Bs(r),$=qc(o,e.length);return e[$](r,t,p)}}}function Xs(e){var r=[],t=/\{([a-z])-([a-z])\}/.exec(e);if(t){var p=t[1].charCodeAt(0),o=t[2].charCodeAt(0),$=void 0;for($=p;$<=o;++$)r.push(e.replace(t[0],String.fromCharCode($)));return r}if(t=/\{(\d+)-(\d+)\}/.exec(e)){for(var n=parseInt(t[2],10),a=parseInt(t[1],10);a<=n;a++)r.push(e.replace(t[0],a.toString()));return r}return r.push(e),r}var Ys=Si&&Si.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),zm=function(t){function e(i){var r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,interpolate:i.interpolate,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this;return r.generateTileUrlFunction_=r.tileUrlFunction===e.prototype.tileUrlFunction,r.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(r.tileUrlFunction=i.tileUrlFunction),r.urls=null,i.urls?r.setUrls(i.urls):i.url&&r.setUrl(i.url),r.tileLoadingKeys_={},r}return Ys(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,r=ga(i),n=i.getState();n==fa.LOADING?(this.tileLoadingKeys_[r]=!0,e=Ti.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],e=n==fa.ERROR?Ti.TILELOADERROR:n==fa.LOADED?Ti.TILELOADEND:void 0),null!=e&&this.dispatchEvent(new ym(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=Xs(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Vs(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,i){},e.prototype.useTile=function(t,e,i){var r=Uf(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(xm);Si.default=zm;var Zs=Ri&&Ri.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Am=function(e){function t(t){var i=this,r=void 0===t.imageSmoothing||t.imageSmoothing;return void 0!==t.interpolate&&(r=t.interpolate),(i=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:$s,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:r,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this).crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,i.tileClass=void 0!==t.tileClass?t.tileClass:Jh,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,i.renderReprojectionEdges_=!1,i}return Zs(t,e),t.prototype.canExpireCache=function(){if(!Lb)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},t.prototype.expireCache=function(t,i){if(Lb){var r=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==r?i:{}),this.tileCacheForProjection){var n=this.tileCacheForProjection[o];n.expireCache(n==r?i:{})}}else e.prototype.expireCache.call(this,t,i)},t.prototype.getGutterForProjection=function(e){return Lb&&this.getProjection()&&e&&!tc(this.getProjection(),e)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){var t=e.prototype.getKey.call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t},t.prototype.getOpaque=function(t){return!(Lb&&this.getProjection()&&t&&!tc(this.getProjection(),t))&&e.prototype.getOpaque.call(this,t)},t.prototype.getTileGridForProjection=function(t){if(!Lb)return e.prototype.getTileGridForProjection.call(this,t);var i=this.getProjection();if(!this.tileGrid||i&&!tc(i,t)){var r=ga(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=tm(t)),this.tileGridForProjection[r]}return this.tileGrid},t.prototype.getTileCacheForProjection=function(t){if(!Lb)return e.prototype.getTileCacheForProjection.call(this,t);var i=this.getProjection();if(!i||tc(i,t))return this.tileCache;var r=ga(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new Ii(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},t.prototype.createTile_=function(e,t,i,r,o,n){var l=[e,t,i],a=this.getTileCoordForTileUrlFunction(l,o),c=a?this.tileUrlFunction(a,r,o):void 0,u=new this.tileClass(l,void 0!==c?fa.IDLE:fa.EMPTY,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=n,u.addEventListener(ba.CHANGE,this.handleTileChange.bind(this)),u},t.prototype.getTile=function(e,t,i,r,o){var n=this.getProjection();if(Lb&&n&&o&&!tc(n,o)){var l=this.getTileCacheForProjection(o),a=[e,t,i],c=void 0,u=km(a);l.containsKey(u)&&(c=l.get(u));var s=this.getKey();if(c&&c.key==s)return c;var p=this.getTileGridForProjection(n),$=this.getTileGridForProjection(o),h=this.getTileCoordForTileUrlFunction(a,o),d=new Qi(n,p,o,$,a,h,this.getTilePixelRatio(r),this.getGutter(),function(e,t,i,r){return this.getTileInternal(e,t,i,r,n)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return d.key=s,c?(d.interimTile=c,d.refreshInterimChain(),l.replace(u,d)):l.set(u,d),d}return this.getTileInternal(e,t,i,r,n||o)},t.prototype.getTileInternal=function(e,t,i,r,o){var n=null,l=Uf(e,t,i),a=this.getKey();if(this.tileCache.containsKey(l)){if((n=this.tileCache.get(l)).key!=a){var c=n;n=this.createTile_(e,t,i,r,o,a),c.getState()==fa.IDLE?n.interimTile=c.interimTile:n.interimTile=c,n.refreshInterimChain(),this.tileCache.replace(l,n)}}else n=this.createTile_(e,t,i,r,o,a),this.tileCache.set(l,n);return n},t.prototype.setRenderReprojectionEdges=function(e){if(Lb&&this.renderReprojectionEdges_!=e){for(var t in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}},t.prototype.setTileGridForProjection=function(e,t){if(Lb){var i=wa(e);if(i){var r=ga(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}},t}(zm);function $s(e,t){e.getImage().src=t}Ri.default=Am;var Vi={};var _s=Vi&&Vi.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bm=function(t){function o(o){var e=this,r=o||{},i=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(i=r.interpolate);var n=void 0!==r.projection?r.projection:"EPSG:3857",l=void 0!==r.tileGrid?r.tileGrid:Rs({extent:Ui(n),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return(e=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:i,opaque:r.opaque,projection:n,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:l,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this).gutter_=void 0!==r.gutter?r.gutter:0,e}return _s(o,t),o.prototype.getGutter=function(){return this.gutter_},o}(Am);Vi.default=Bm;function Cm(t,e,o){const c=o&&o.debug||!1;c&&console.log("getting "+e+" in "+t);const $="object"==typeof t?t.outer:t,n=`${e}\\="([^"]*)"`;c&&console.log("pattern:",n);const r=new RegExp(n).exec($);if(c&&console.log("match:",r),r)return r[1]}Cm.default=Cm;var jt={};function Dm(e,$,n){const t=new RegExp($).exec(e.slice(n));return t?n+t.index:-1}(jt=Dm).default=Dm;var Wi={};function Em(e,n,$){const t=new RegExp(n).exec(e.slice($));return t?$+t.index+t[0].length-1:-1}(Wi=Em).default=Em;var Fm={};function Gm(t,$){const n=new RegExp($,"g"),r=t.match(n);return r?r.length:0}(Fm=Gm).default=Gm;var qt={};function Hm(n,e,t){const $=t&&t.debug||!1,r=!(t&&!1===typeof t.nested),a=t&&t.startIndex||0;$&&console.log("[xml-utils] starting findTagByName with",e," and ",t);const s=jt(n,`<${e}[ >/]`,a);if($&&console.log("[xml-utils] start:",s),-1===s)return;const i=n.slice(s+e.length);let l=Wi(i,"^[^<]*[ /]>",0);const o=-1!==l&&"/"===i[l-1];if($&&console.log("[xml-utils] selfClosing:",o),!1===o)if(r){let n=0,t=1,$=0;for(;-1!==(l=Wi(i,"[ /]"+e+">",n));){const r=i.substring(n,l+1);if(t+=Fm(r,"<"+e),($+=Fm(r,"/"+e+">"))>=t)break;n=l}}else l=Wi(i,"[ /]"+e+">",0);const c=s+e.length+l+1;if($&&console.log("[xml-utils] end:",c),-1===c)return;const d=n.slice(s,c);let f;return{inner:f=o?null:d.slice(d.indexOf(">")+1,d.lastIndexOf("<")),outer:d,start:s,end:c}}(qt=Hm).default=Hm;function Im(e,a,r){const n=[],t=r&&r.debug||!1,$=!r||"boolean"!=typeof r.nested||r.nested;let s,d=r&&r.startIndex||0;for(;s=qt(e,a,{debug:t,startIndex:d});)d=$?s.start+1+a.length:s.end,n.push(s);return t&&console.log("findTagsByName found",n.length,"tags"),n}Im.default=Im;var e,f,g,h;var i,j,k,l,m,n;var zt,Ft=false;function Gt(){if(Ft)return;Ft=true;zt={};zt=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}}var Ht={};function ka(t){var e=this;if(e instanceof ka||(e=new ka),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(arguments.length>0)for(var l=0,i=arguments.length;l<i;l++)e.push(arguments[l]);return e}function Jt(t,e,l){var i=e===t.head?new Hc(l,null,e,t):new Hc(l,e,e.next,t);return null===i.next&&(t.tail=i),null===i.prev&&(t.head=i),t.length++,i}function Qt(t,e){t.tail=new Hc(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Ut(t,e){t.head=new Hc(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Hc(t,e,l,i){if(!(this instanceof Hc))return new Hc(t,e,l,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,l?(l.prev=this,this.next=l):this.next=null}Ht=ka,ka.Node=Hc,ka.create=ka,ka.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,l=t.prev;return e&&(e.prev=l),l&&(l.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=l),t.list.length--,t.next=null,t.prev=null,t.list=null,e},ka.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},ka.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},ka.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Qt(this,arguments[t]);return this.length},ka.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Ut(this,arguments[t]);return this.length},ka.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},ka.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},ka.prototype.forEach=function(t,e){e=e||this;for(var l=this.head,i=0;null!==l;i++)t.call(e,l.value,i,this),l=l.next},ka.prototype.forEachReverse=function(t,e){e=e||this;for(var l=this.tail,i=this.length-1;null!==l;i--)t.call(e,l.value,i,this),l=l.prev},ka.prototype.get=function(t){for(var e=0,l=this.head;null!==l&&e<t;e++)l=l.next;if(e===t&&null!==l)return l.value},ka.prototype.getReverse=function(t){for(var e=0,l=this.tail;null!==l&&e<t;e++)l=l.prev;if(e===t&&null!==l)return l.value},ka.prototype.map=function(t,e){e=e||this;for(var l=new ka,i=this.head;null!==i;)l.push(t.call(e,i.value,this)),i=i.next;return l},ka.prototype.mapReverse=function(t,e){e=e||this;for(var l=new ka,i=this.tail;null!==i;)l.push(t.call(e,i.value,this)),i=i.prev;return l},ka.prototype.reduce=function(t,e){var l,i=this.head;if(arguments.length>1)l=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,l=this.head.value}for(var r=0;null!==i;r++)l=t(l,i.value,r),i=i.next;return l},ka.prototype.reduceReverse=function(t,e){var l,i=this.tail;if(arguments.length>1)l=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,l=this.tail.value}for(var r=this.length-1;null!==i;r--)l=t(l,i.value,r),i=i.prev;return l},ka.prototype.toArray=function(){for(var t=new Array(this.length),e=0,l=this.head;null!==l;e++)t[e]=l.value,l=l.next;return t},ka.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,l=this.tail;null!==l;e++)t[e]=l.value,l=l.prev;return t},ka.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var l=new ka;if(e<t||e<0)return l;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,r=this.head;null!==r&&i<t;i++)r=r.next;for(;null!==r&&i<e;i++,r=r.next)l.push(r.value);return l},ka.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var l=new ka;if(e<t||e<0)return l;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,r=this.tail;null!==r&&i>e;i--)r=r.prev;for(;null!==r&&i>t;i--,r=r.prev)l.push(r.value);return l},ka.prototype.splice=function(t,e,...l){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,r=this.head;null!==r&&i<t;i++)r=r.next;var a=[];for(i=0;r&&i<e;i++)a.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(i=0;i<l.length;i++)r=Jt(this,r,l[i]);return a},ka.prototype.reverse=function(){for(var t=this.head,e=this.tail,l=t;null!==l;l=l.prev){var i=l.prev;l.prev=l.next,l.next=i}return this.head=e,this.tail=t,this};try{(Gt(),zt)(ka)}catch(er){}function Xi($){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function($){return typeof $}:function($){return $&&"function"==typeof Symbol&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $})($)}function Jm($,r){if(!($ instanceof r))throw new TypeError("Cannot call a class as a function")}function Km($,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty($,Vt(e.key),e)}}function Lm($,r,t){return r&&Km($.prototype,r),t&&Km($,t),Object.defineProperty($,"prototype",{writable:!1}),$}function Vt($){var r=Yt($,"string");return"symbol"===Xi(r)?r:String(r)}function Yt($,r){if("object"!==Xi($)||null===$)return $;var t=$[Symbol.toPrimitive];if(void 0!==t){var e=t.call($,r||"default");if("object"!==Xi(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)($)}var Ic=Symbol("max"),Mb=Symbol("length"),md=Symbol("lengthCalculator"),_d=Symbol("allowStale"),Jc=Symbol("maxAge"),Nb=Symbol("dispose"),Mm=Symbol("noDisposeOnSet"),Da=Symbol("lruList"),jb=Symbol("cache"),Nm=Symbol("updateAgeOnGet"),Yi=function(){return 1},o=function(){function $(r){if(Jm(this,$),"number"==typeof r&&(r={max:r}),r||(r={}),r.max&&("number"!=typeof r.max||r.max<0))throw new TypeError("max must be a non-negative number");this[Ic]=r.max||1/0;var t=r.length||Yi;if(this[md]="function"!=typeof t?Yi:t,this[_d]=r.stale||!1,r.maxAge&&"number"!=typeof r.maxAge)throw new TypeError("maxAge must be a number");this[Jc]=r.maxAge||0,this[Nb]=r.dispose,this[Mm]=r.noDisposeOnSet||!1,this[Nm]=r.updateAgeOnGet||!1,this.reset()}return Lm($,[{key:"max",get:function(){return this[Ic]},set:function($){if("number"!=typeof $||$<0)throw new TypeError("max must be a non-negative number");this[Ic]=$||1/0,be(this)}},{key:"allowStale",get:function(){return this[_d]},set:function($){this[_d]=!!$}},{key:"maxAge",get:function(){return this[Jc]},set:function($){if("number"!=typeof $)throw new TypeError("maxAge must be a non-negative number");this[Jc]=$,be(this)}},{key:"lengthCalculator",get:function(){return this[md]},set:function($){var r=this;"function"!=typeof $&&($=Yi),$!==this[md]&&(this[md]=$,this[Mb]=0,this[Da].forEach(function($){$.length=r[md]($.value,$.key),r[Mb]+=$.length})),be(this)}},{key:"length",get:function(){return this[Mb]}},{key:"itemCount",get:function(){return this[Da].length}},{key:"rforEach",value:function($,r){r=r||this;for(var t=this[Da].tail;null!==t;){var e=t.prev;Om(this,$,t,r),t=e}}},{key:"forEach",value:function($,r){r=r||this;for(var t=this[Da].head;null!==t;){var e=t.next;Om(this,$,t,r),t=e}}},{key:"keys",value:function(){return this[Da].toArray().map(function($){return $.key})}},{key:"values",value:function(){return this[Da].toArray().map(function($){return $.value})}},{key:"reset",value:function(){var $=this;this[Nb]&&this[Da]&&this[Da].length&&this[Da].forEach(function(r){return $[Nb](r.key,r.value)}),this[jb]=new Map,this[Da]=new Ht,this[Mb]=0}},{key:"dump",value:function(){var $=this;return this[Da].map(function(r){return!Xf($,r)&&{k:r.key,v:r.value,e:r.now+(r.maxAge||0)}}).toArray().filter(function($){return $})}},{key:"dumpLru",value:function(){return this[Da]}},{key:"set",value:function($,r,t){if((t=t||this[Jc])&&"number"!=typeof t)throw new TypeError("maxAge must be a number");var e=t?Date.now():0,a=this[md](r,$);if(this[jb].has($)){if(a>this[Ic])return nd(this,this[jb].get($)),!1;var n=this[jb].get($).value;return this[Nb]&&(this[Mm]||this[Nb]($,n.value)),n.now=e,n.maxAge=t,n.value=r,this[Mb]+=a-n.length,n.length=a,this.get($),be(this),!0}var i=new au($,r,a,e,t);return i.length>this[Ic]?(this[Nb]&&this[Nb]($,r),!1):(this[Mb]+=i.length,this[Da].unshift(i),this[jb].set($,this[Da].head),be(this),!0)}},{key:"has",value:function($){if(!this[jb].has($))return!1;var r=this[jb].get($).value;return!Xf(this,r)}},{key:"get",value:function($){return Zi(this,$,!0)}},{key:"peek",value:function($){return Zi(this,$,!1)}},{key:"pop",value:function(){var $=this[Da].tail;return $?(nd(this,$),$.value):null}},{key:"del",value:function($){nd(this,this[jb].get($))}},{key:"load",value:function($){this.reset();for(var r=Date.now(),t=$.length-1;t>=0;t--){var e=$[t],a=e.e||0;if(0===a)this.set(e.k,e.v);else{var n=a-r;n>0&&this.set(e.k,e.v,n)}}}},{key:"prune",value:function(){var $=this;this[jb].forEach(function(r,t){return Zi($,t,!1)})}}]),$}(),Zi=function($,r,t){var e=$[jb].get(r);if(e){var a=e.value;if(Xf($,a)){if(nd($,e),!$[_d])return}else t&&($[Nm]&&(e.value.now=Date.now()),$[Da].unshiftNode(e));return a.value}},Xf=function($,r){if(!r||!r.maxAge&&!$[Jc])return!1;var t=Date.now()-r.now;return r.maxAge?t>r.maxAge:$[Jc]&&t>$[Jc]},be=function($){if($[Mb]>$[Ic])for(var r=$[Da].tail;$[Mb]>$[Ic]&&null!==r;){var t=r.prev;nd($,r),r=t}},nd=function($,r){if(r){var t=r.value;$[Nb]&&$[Nb](t.key,t.value),$[Mb]-=t.length,$[jb].delete(t.key),$[Da].removeNode(r)}},au=Lm(function $(r,t,e,a,n){Jm(this,$),this.key=r,this.value=t,this.length=e,this.now=a,this.maxAge=n||0}),Om=function($,r,t,e){var a=t.value;Xf($,a)&&(nd($,t),$[_d]||(a=void 0)),a&&r.call(e,a.value,a.key,$)};var bu=gu;var Pm=ju;for(var wb=[],ab=[],cu="undefined"!=typeof Uint8Array?Uint8Array:Array,$i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",od=0,du=$i.length;od<du;++od)wb[od]=$i[od],ab[$i.charCodeAt(od)]=od;function eu($){var r=$.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=$.indexOf("=");return-1===o&&(o=r),[o,o===r?0:4-o%4]}function fu($,r,o){return 3*(r+o)/4-o}function gu($){var r,o,e=eu($),y=e[0],a=e[1],l=new cu(fu($,y,a)),t=0,v=a>0?y-4:y;for(o=0;o<v;o+=4)r=ab[$.charCodeAt(o)]<<18|ab[$.charCodeAt(o+1)]<<12|ab[$.charCodeAt(o+2)]<<6|ab[$.charCodeAt(o+3)],l[t++]=r>>16&255,l[t++]=r>>8&255,l[t++]=255&r;return 2===a&&(r=ab[$.charCodeAt(o)]<<2|ab[$.charCodeAt(o+1)]>>4,l[t++]=255&r),1===a&&(r=ab[$.charCodeAt(o)]<<10|ab[$.charCodeAt(o+1)]<<4|ab[$.charCodeAt(o+2)]>>2,l[t++]=r>>8&255,l[t++]=255&r),l}function hu($){return wb[$>>18&63]+wb[$>>12&63]+wb[$>>6&63]+wb[63&$]}function iu($,r,o){for(var e,y=[],a=r;a<o;a+=3)e=($[a]<<16&16711680)+($[a+1]<<8&65280)+(255&$[a+2]),y.push(hu(e));return y.join("")}function ju($){for(var r,o=$.length,e=o%3,y=[],a=0,l=o-e;a<l;a+=16383)y.push(iu($,a,a+16383>l?l:a+16383));return 1===e?(r=$[o-1],y.push(wb[r>>2]+wb[r<<4&63]+"==")):2===e&&(r=($[o-2]<<8)+$[o-1],y.push(wb[r>>10]+wb[r>>4&63]+wb[r<<2&63]+"=")),y.join("")}ab["-".charCodeAt(0)]=62,ab["_".charCodeAt(0)]=63;var pd=function(t,r,o,a,$){var e,p,h=8*$-a-1,M=(1<<h)-1,w=M>>1,u=-7,f=o?$-1:0,i=o?-1:1,j=t[r+f];for(f+=i,e=j&(1<<-u)-1,j>>=-u,u+=h;u>0;e=256*e+t[r+f],f+=i,u-=8);for(p=e&(1<<-u)-1,e>>=-u,u+=a;u>0;p=256*p+t[r+f],f+=i,u-=8);if(0===e)e=1-w;else{if(e===M)return p?NaN:1/0*(j?-1:1);p+=Math.pow(2,a),e-=w}return(j?-1:1)*p*Math.pow(2,e-a)};var Yf=function(t,r,o,a,$,e){var p,h,M,w=8*e-$-1,u=(1<<w)-1,f=u>>1,i=23===$?Math.pow(2,-24)-Math.pow(2,-77):0,j=a?0:e-1,s=a?1:-1,x=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(h=isNaN(r)?1:0,p=u):(p=Math.floor(Math.log(r)/Math.LN2),r*(M=Math.pow(2,-p))<1&&(p--,M*=2),(r+=p+f>=1?i/M:i*Math.pow(2,1-f))*M>=2&&(p++,M/=2),p+f>=u?(h=0,p=u):p+f>=1?(h=(r*M-1)*Math.pow(2,$),p+=f):(h=r*Math.pow(2,f-1)*Math.pow(2,$),p=0));$>=8;t[o+j]=255&h,j+=s,h/=256,$-=8);for(p=p<<$|h,w+=$;w>0;t[o+j]=255&p,j+=s,p/=256,w-=8);t[o+j-s]|=128*x};var Qm={},ku={}.toString;Qm=Array.isArray||function(r){return"[object Array]"==ku.call(r)};var fe={},lu=aa;fe.Buffer=lu;var mu=tu;fe.SlowBuffer=mu;var Rm=50;fe.INSPECT_MAX_BYTES=Rm,aa.TYPED_ARRAY_SUPPORT=void 0!==Aj.TYPED_ARRAY_SUPPORT?Aj.TYPED_ARRAY_SUPPORT:ou();var nu=Zf();function ou(){try{var r=new Uint8Array(1);return r.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===r.foo()&&"function"==typeof r.subarray&&0===r.subarray(1,1).byteLength}catch(e){return!1}}function Zf(){return aa.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ob(r,e){if(Zf()<e)throw new RangeError("Invalid typed array length");return aa.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e)).__proto__=aa.prototype:(null===r&&(r=new aa(e)),r.length=e),r}function aa(r,e,t){if(!(aa.TYPED_ARRAY_SUPPORT||this instanceof aa))return new aa(r,e,t);if("number"==typeof r){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return _i(this,r)}return Sm(this,r,e,t)}function Sm(r,e,t,a){if("number"==typeof e)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?ru(r,e,t,a):"string"==typeof e?qu(r,e,t):su(r,e)}function Tm(r){if("number"!=typeof r)throw new TypeError("\"size\" argument must be a number");if(r<0)throw new RangeError("\"size\" argument must not be negative")}function pu(r,e,t,a){return Tm(e),e<=0?Ob(r,e):void 0!==t?"string"==typeof a?Ob(r,e).fill(t,a):Ob(r,e).fill(t):Ob(r,e)}function _i(r,e){if(Tm(e),r=Ob(r,e<0?0:0|bj(e)),!aa.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}function qu(r,e,t){if("string"==typeof t&&""!==t||(t="utf8"),!aa.isEncoding(t))throw new TypeError("\"encoding\" must be a valid string encoding");var a=0|Um(e,t),$=(r=Ob(r,a)).write(e,t);return $!==a&&(r=r.slice(0,$)),r}function aj(r,e){var t=e.length<0?0:0|bj(e.length);r=Ob(r,t);for(var a=0;a<t;a+=1)r[a]=255&e[a];return r}function ru(r,e,t,a){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(a||0))throw new RangeError("'length' is out of bounds");return e=void 0===t&&void 0===a?new Uint8Array(e):void 0===a?new Uint8Array(e,t):new Uint8Array(e,t,a),aa.TYPED_ARRAY_SUPPORT?(r=e).__proto__=aa.prototype:r=aj(r,e),r}function su(r,e){if(aa.isBuffer(e)){var t=0|bj(e.length);return 0===(r=Ob(r,t)).length?r:(e.copy(r,0,0,t),r)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Mu(e.length)?Ob(r,0):aj(r,e);if("Buffer"===e.type&&Qm(e.data))return aj(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function bj(r){if(r>=Zf())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Zf().toString(16)+" bytes");return 0|r}function tu(r){return+r!=r&&(r=0),aa.alloc(+r)}function Um(r,e){if(aa.isBuffer(r))return r.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;"string"!=typeof r&&(r=""+r);var t=r.length;if(0===t)return 0;for(var a=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return ag(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return bn(r).length;default:if(a)return ag(r).length;e=(""+e).toLowerCase(),a=!0;}}function uu(r,e,t){var a=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===t||t>this.length)&&(t=this.length),t<=0)return"";if((t>>>=0)<=(e>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return Eu(this,e,t);case"utf8":case"utf-8":return Ym(this,e,t);case"ascii":return Cu(this,e,t);case"latin1":case"binary":return Du(this,e,t);case"base64":return Au(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fu(this,e,t);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),a=!0;}}function Kc(r,e,t){var a=r[e];r[e]=r[t],r[t]=a}function Vm(r,e,t,a,$){if(0===r.length)return-1;if("string"==typeof t?(a=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=$?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if($)return-1;t=r.length-1}else if(t<0){if(!$)return-1;t=0}if("string"==typeof e&&(e=aa.from(e,a)),aa.isBuffer(e))return 0===e.length?-1:Wm(r,e,t,a,$);if("number"==typeof e)return e&=255,aa.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?$?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Wm(r,[e],t,a,$);throw new TypeError("val must be string, number or Buffer")}function Wm(r,e,t,a,$){var n,f=1,i=r.length,o=e.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(r.length<2||e.length<2)return-1;f=2,i/=2,o/=2,t/=2}function u(r,e){return 1===f?r[e]:r.readUInt16BE(e*f)}if($){var B=-1;for(n=t;n<i;n++)if(u(r,n)===u(e,-1===B?0:n-B)){if(-1===B&&(B=n),n-B+1===o)return B*f}else-1!==B&&(n-=n-B),B=-1}else for(t+o>i&&(t=i-o),n=t;n>=0;n--){for(var s=!0,h=0;h<o;h++)if(u(r,n+h)!==u(e,h)){s=!1;break}if(s)return n}return-1}function vu(r,e,t,a){t=Number(t)||0;var $=r.length-t;a?(a=Number(a))>$&&(a=$):a=$;var n=e.length;if(n%2!=0)throw new TypeError("Invalid hex string");a>n/2&&(a=n/2);for(var f=0;f<a;++f){var i=parseInt(e.substr(2*f,2),16);if(isNaN(i))return f;r[t+f]=i}return f}function wu(r,e,t,a){return bg(ag(e,r.length-t),r,t,a)}function Xm(r,e,t,a){return bg(Ku(e),r,t,a)}function xu(r,e,t,a){return Xm(r,e,t,a)}function yu(r,e,t,a){return bg(bn(e),r,t,a)}function zu(r,e,t,a){return bg(Lu(e,r.length-t),r,t,a)}function Au(r,e,t){return 0===e&&t===r.length?Pm(r):Pm(r.slice(e,t))}function Ym(r,e,t){t=Math.min(r.length,t);for(var a=[],$=e;$<t;){var n,f,i,o,u=r[$],B=null,s=u>239?4:u>223?3:u>191?2:1;if($+s<=t)switch(s){case 1:u<128&&(B=u);break;case 2:128==(192&(n=r[$+1]))&&(o=(31&u)<<6|63&n)>127&&(B=o);break;case 3:n=r[$+1],f=r[$+2],128==(192&n)&&128==(192&f)&&(o=(15&u)<<12|(63&n)<<6|63&f)>2047&&(o<55296||o>57343)&&(B=o);break;case 4:n=r[$+1],f=r[$+2],i=r[$+3],128==(192&n)&&128==(192&f)&&128==(192&i)&&(o=(15&u)<<18|(63&n)<<12|(63&f)<<6|63&i)>65535&&o<1114112&&(B=o);}null===B?(B=65533,s=1):B>65535&&(B-=65536,a.push(B>>>10&1023|55296),B=56320|1023&B),a.push(B),$+=s}return Bu(a)}fe.kMaxLength=nu,aa.poolSize=8192,aa._augment=function(r){return r.__proto__=aa.prototype,r},aa.from=function(r,e,t){return Sm(null,r,e,t)},aa.TYPED_ARRAY_SUPPORT&&(aa.prototype.__proto__=Uint8Array.prototype,aa.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&aa[Symbol.species]===aa&&Object.defineProperty(aa,Symbol.species,{value:null,configurable:!0})),aa.alloc=function(r,e,t){return pu(null,r,e,t)},aa.allocUnsafe=function(r){return _i(null,r)},aa.allocUnsafeSlow=function(r){return _i(null,r)},aa.isBuffer=function(r){return!(null==r||!r._isBuffer)},aa.compare=function(r,e){if(!aa.isBuffer(r)||!aa.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(r===e)return 0;for(var t=r.length,a=e.length,$=0,n=Math.min(t,a);$<n;++$)if(r[$]!==e[$]){t=r[$],a=e[$];break}return t<a?-1:a<t?1:0},aa.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},aa.concat=function(r,e){if(!Qm(r))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===r.length)return aa.alloc(0);var t;if(void 0===e)for(e=0,t=0;t<r.length;++t)e+=r[t].length;var a=aa.allocUnsafe(e),$=0;for(t=0;t<r.length;++t){var n=r[t];if(!aa.isBuffer(n))throw new TypeError("\"list\" argument must be an Array of Buffers");n.copy(a,$),$+=n.length}return a},aa.byteLength=Um,aa.prototype._isBuffer=!0,aa.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<r;e+=2)Kc(this,e,e+1);return this},aa.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<r;e+=4)Kc(this,e,e+3),Kc(this,e+1,e+2);return this},aa.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<r;e+=8)Kc(this,e,e+7),Kc(this,e+1,e+6),Kc(this,e+2,e+5),Kc(this,e+3,e+4);return this},aa.prototype.toString=function(){var r=0|this.length;return 0===r?"":0===arguments.length?Ym(this,0,r):uu.apply(this,arguments)},aa.prototype.equals=function(r){if(!aa.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||0===aa.compare(this,r)},aa.prototype.inspect=function(){var r="",e=Rm;return this.length>0&&(r=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(r+=" ... ")),"<Buffer "+r+">"},aa.prototype.compare=function(r,e,t,a,$){if(!aa.isBuffer(r))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===t&&(t=r?r.length:0),void 0===a&&(a=0),void 0===$&&($=this.length),e<0||t>r.length||a<0||$>this.length)throw new RangeError("out of range index");if(a>=$&&e>=t)return 0;if(a>=$)return-1;if(e>=t)return 1;if(this===r)return 0;for(var n=($>>>=0)-(a>>>=0),f=(t>>>=0)-(e>>>=0),i=Math.min(n,f),o=this.slice(a,$),u=r.slice(e,t),B=0;B<i;++B)if(o[B]!==u[B]){n=o[B],f=u[B];break}return n<f?-1:f<n?1:0},aa.prototype.includes=function(r,e,t){return-1!==this.indexOf(r,e,t)},aa.prototype.indexOf=function(r,e,t){return Vm(this,r,e,t,!0)},aa.prototype.lastIndexOf=function(r,e,t){return Vm(this,r,e,t,!1)},aa.prototype.write=function(r,e,t,a){if(void 0===e)a="utf8",t=this.length,e=0;else if(void 0===t&&"string"==typeof e)a=e,t=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(t)?(t|=0,void 0===a&&(a="utf8")):(a=t,t=void 0)}var $=this.length-e;if((void 0===t||t>$)&&(t=$),r.length>0&&(t<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var n=!1;;)switch(a){case"hex":return vu(this,r,e,t);case"utf8":case"utf-8":return wu(this,r,e,t);case"ascii":return Xm(this,r,e,t);case"latin1":case"binary":return xu(this,r,e,t);case"base64":return yu(this,r,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zu(this,r,e,t);default:if(n)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),n=!0;}},aa.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Zm=4096;function Bu(r){var e=r.length;if(e<=Zm)return String.fromCharCode.apply(String,r);for(var t="",a=0;a<e;)t+=String.fromCharCode.apply(String,r.slice(a,a+=Zm));return t}function Cu(r,e,t){var a="";t=Math.min(r.length,t);for(var $=e;$<t;++$)a+=String.fromCharCode(127&r[$]);return a}function Du(r,e,t){var a="";t=Math.min(r.length,t);for(var $=e;$<t;++$)a+=String.fromCharCode(r[$]);return a}function Eu(r,e,t){var a=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>a)&&(t=a);for(var $="",n=e;n<t;++n)$+=Ju(r[n]);return $}function Fu(r,e,t){for(var a=r.slice(e,t),$="",n=0;n<a.length;n+=2)$+=String.fromCharCode(a[n]+256*a[n+1]);return $}function Ea(r,e,t){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}function Ma(r,e,t,a,$,n){if(!aa.isBuffer(r))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(e>$||e<n)throw new RangeError("\"value\" argument is out of bounds");if(t+a>r.length)throw new RangeError("Index out of range")}function $f(r,e,t,a){e<0&&(e=65535+e+1);for(var $=0,n=Math.min(r.length-t,2);$<n;++$)r[t+$]=(e&255<<8*(a?$:1-$))>>>8*(a?$:1-$)}function _f(r,e,t,a){e<0&&(e=4294967295+e+1);for(var $=0,n=Math.min(r.length-t,4);$<n;++$)r[t+$]=e>>>8*(a?$:3-$)&255}function $m(r,e,t,a,$,n){if(t+a>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function _m(r,e,t,a,$){return $||$m(r,e,t,4,3.4028234663852886e38,-3.4028234663852886e38),Yf(r,e,t,a,23,4),t+4}function an(r,e,t,a,$){return $||$m(r,e,t,8,1.7976931348623157e308,-1.7976931348623157e308),Yf(r,e,t,a,52,8),t+8}aa.prototype.slice=function(r,e){var t,a=this.length;if((r=~~r)<0?(r+=a)<0&&(r=0):r>a&&(r=a),(e=void 0===e?a:~~e)<0?(e+=a)<0&&(e=0):e>a&&(e=a),e<r&&(e=r),aa.TYPED_ARRAY_SUPPORT)(t=this.subarray(r,e)).__proto__=aa.prototype;else{var $=e-r;t=new aa($,void 0);for(var n=0;n<$;++n)t[n]=this[n+r]}return t},aa.prototype.readUIntLE=function(r,e,t){r|=0,e|=0,t||Ea(r,e,this.length);for(var a=this[r],$=1,n=0;++n<e&&($*=256);)a+=this[r+n]*$;return a},aa.prototype.readUIntBE=function(r,e,t){r|=0,e|=0,t||Ea(r,e,this.length);for(var a=this[r+--e],$=1;e>0&&($*=256);)a+=this[r+--e]*$;return a},aa.prototype.readUInt8=function(r,e){return e||Ea(r,1,this.length),this[r]},aa.prototype.readUInt16LE=function(r,e){return e||Ea(r,2,this.length),this[r]|this[r+1]<<8},aa.prototype.readUInt16BE=function(r,e){return e||Ea(r,2,this.length),this[r]<<8|this[r+1]},aa.prototype.readUInt32LE=function(r,e){return e||Ea(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},aa.prototype.readUInt32BE=function(r,e){return e||Ea(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},aa.prototype.readIntLE=function(r,e,t){r|=0,e|=0,t||Ea(r,e,this.length);for(var a=this[r],$=1,n=0;++n<e&&($*=256);)a+=this[r+n]*$;return a>=($*=128)&&(a-=Math.pow(2,8*e)),a},aa.prototype.readIntBE=function(r,e,t){r|=0,e|=0,t||Ea(r,e,this.length);for(var a=e,$=1,n=this[r+--a];a>0&&($*=256);)n+=this[r+--a]*$;return n>=($*=128)&&(n-=Math.pow(2,8*e)),n},aa.prototype.readInt8=function(r,e){return e||Ea(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},aa.prototype.readInt16LE=function(r,e){e||Ea(r,2,this.length);var t=this[r]|this[r+1]<<8;return 32768&t?4294901760|t:t},aa.prototype.readInt16BE=function(r,e){e||Ea(r,2,this.length);var t=this[r+1]|this[r]<<8;return 32768&t?4294901760|t:t},aa.prototype.readInt32LE=function(r,e){return e||Ea(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},aa.prototype.readInt32BE=function(r,e){return e||Ea(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},aa.prototype.readFloatLE=function(r,e){return e||Ea(r,4,this.length),pd(this,r,!0,23,4)},aa.prototype.readFloatBE=function(r,e){return e||Ea(r,4,this.length),pd(this,r,!1,23,4)},aa.prototype.readDoubleLE=function(r,e){return e||Ea(r,8,this.length),pd(this,r,!0,52,8)},aa.prototype.readDoubleBE=function(r,e){return e||Ea(r,8,this.length),pd(this,r,!1,52,8)},aa.prototype.writeUIntLE=function(r,e,t,a){(r=+r,e|=0,t|=0,a)||Ma(this,r,e,t,Math.pow(2,8*t)-1,0);var $=1,n=0;for(this[e]=255&r;++n<t&&($*=256);)this[e+n]=r/$&255;return e+t},aa.prototype.writeUIntBE=function(r,e,t,a){(r=+r,e|=0,t|=0,a)||Ma(this,r,e,t,Math.pow(2,8*t)-1,0);var $=t-1,n=1;for(this[e+$]=255&r;--$>=0&&(n*=256);)this[e+$]=r/n&255;return e+t},aa.prototype.writeUInt8=function(r,e,t){return r=+r,e|=0,t||Ma(this,r,e,1,255,0),aa.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),this[e]=255&r,e+1},aa.prototype.writeUInt16LE=function(r,e,t){return r=+r,e|=0,t||Ma(this,r,e,2,65535,0),aa.TYPED_ARRAY_SUPPORT?(this[e]=255&r,this[e+1]=r>>>8):$f(this,r,e,!0),e+2},aa.prototype.writeUInt16BE=function(r,e,t){return r=+r,e|=0,t||Ma(this,r,e,2,65535,0),aa.TYPED_ARRAY_SUPPORT?(this[e]=r>>>8,this[e+1]=255&r):$f(this,r,e,!1),e+2},aa.prototype.writeUInt32LE=function(r,e,t){return r=+r,e|=0,t||Ma(this,r,e,4,4294967295,0),aa.TYPED_ARRAY_SUPPORT?(this[e+3]=r>>>24,this[e+2]=r>>>16,this[e+1]=r>>>8,this[e]=255&r):_f(this,r,e,!0),e+4},aa.prototype.writeUInt32BE=function(r,e,t){return r=+r,e|=0,t||Ma(this,r,e,4,4294967295,0),aa.TYPED_ARRAY_SUPPORT?(this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r):_f(this,r,e,!1),e+4},aa.prototype.writeIntLE=function(r,e,t,a){if(r=+r,e|=0,!a){var $=Math.pow(2,8*t-1);Ma(this,r,e,t,$-1,-$)}var n=0,f=1,i=0;for(this[e]=255&r;++n<t&&(f*=256);)r<0&&0===i&&0!==this[e+n-1]&&(i=1),this[e+n]=(r/f>>0)-i&255;return e+t},aa.prototype.writeIntBE=function(r,e,t,a){if(r=+r,e|=0,!a){var $=Math.pow(2,8*t-1);Ma(this,r,e,t,$-1,-$)}var n=t-1,f=1,i=0;for(this[e+n]=255&r;--n>=0&&(f*=256);)r<0&&0===i&&0!==this[e+n+1]&&(i=1),this[e+n]=(r/f>>0)-i&255;return e+t},aa.prototype.writeInt8=function(r,e,t){return r=+r,e|=0,t||Ma(this,r,e,1,127,-128),aa.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),r<0&&(r=255+r+1),this[e]=255&r,e+1},aa.prototype.writeInt16LE=function(r,e,t){return r=+r,e|=0,t||Ma(this,r,e,2,32767,-32768),aa.TYPED_ARRAY_SUPPORT?(this[e]=255&r,this[e+1]=r>>>8):$f(this,r,e,!0),e+2},aa.prototype.writeInt16BE=function(r,e,t){return r=+r,e|=0,t||Ma(this,r,e,2,32767,-32768),aa.TYPED_ARRAY_SUPPORT?(this[e]=r>>>8,this[e+1]=255&r):$f(this,r,e,!1),e+2},aa.prototype.writeInt32LE=function(r,e,t){return r=+r,e|=0,t||Ma(this,r,e,4,2147483647,-2147483648),aa.TYPED_ARRAY_SUPPORT?(this[e]=255&r,this[e+1]=r>>>8,this[e+2]=r>>>16,this[e+3]=r>>>24):_f(this,r,e,!0),e+4},aa.prototype.writeInt32BE=function(r,e,t){return r=+r,e|=0,t||Ma(this,r,e,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),aa.TYPED_ARRAY_SUPPORT?(this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r):_f(this,r,e,!1),e+4},aa.prototype.writeFloatLE=function(r,e,t){return _m(this,r,e,!0,t)},aa.prototype.writeFloatBE=function(r,e,t){return _m(this,r,e,!1,t)},aa.prototype.writeDoubleLE=function(r,e,t){return an(this,r,e,!0,t)},aa.prototype.writeDoubleBE=function(r,e,t){return an(this,r,e,!1,t)},aa.prototype.copy=function(r,e,t,a){if(t||(t=0),a||0===a||(a=this.length),e>=r.length&&(e=r.length),e||(e=0),a>0&&a<t&&(a=t),a===t)return 0;if(0===r.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),r.length-e<a-t&&(a=r.length-e+t);var $,n=a-t;if(this===r&&t<e&&e<a)for($=n-1;$>=0;--$)r[$+e]=this[$+t];else if(n<1e3||!aa.TYPED_ARRAY_SUPPORT)for($=0;$<n;++$)r[$+e]=this[$+t];else Uint8Array.prototype.set.call(r,this.subarray(t,t+n),e);return n},aa.prototype.fill=function(r,e,t,a){if("string"==typeof r){if("string"==typeof e?(a=e,e=0,t=this.length):"string"==typeof t&&(a=t,t=this.length),1===r.length){var $=r.charCodeAt(0);$<256&&(r=$)}if(void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!aa.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof r&&(r&=255);if(e<0||this.length<e||this.length<t)throw new RangeError("Out of range index");if(t<=e)return this;var n;if(e>>>=0,t=void 0===t?this.length:t>>>0,r||(r=0),"number"==typeof r)for(n=e;n<t;++n)this[n]=r;else{var f=aa.isBuffer(r)?r:ag(new aa(r,a).toString()),i=f.length;for(n=0;n<t-e;++n)this[n+e]=f[n%i]}return this};var Gu=/[^+\/0-9A-Za-z-_]/g;function Hu(r){if((r=Iu(r).replace(Gu,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}function Iu(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Ju(r){return r<16?"0"+r.toString(16):r.toString(16)}function ag(r,e){var t;e=e||1/0;for(var a=r.length,$=null,n=[],f=0;f<a;++f){if((t=r.charCodeAt(f))>55295&&t<57344){if(!$){if(t>56319){(e-=3)>-1&&n.push(239,191,189);continue}if(f+1===a){(e-=3)>-1&&n.push(239,191,189);continue}$=t;continue}if(t<56320){(e-=3)>-1&&n.push(239,191,189),$=t;continue}t=65536+($-55296<<10|t-56320)}else $&&(e-=3)>-1&&n.push(239,191,189);if($=null,t<128){if((e-=1)<0)break;n.push(t)}else if(t<2048){if((e-=2)<0)break;n.push(t>>6|192,63&t|128)}else if(t<65536){if((e-=3)<0)break;n.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;n.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return n}function Ku(r){for(var e=[],t=0;t<r.length;++t)e.push(255&r.charCodeAt(t));return e}function Lu(r,e){for(var t,a,$,n=[],f=0;f<r.length&&!((e-=2)<0);++f)a=(t=r.charCodeAt(f))>>8,$=t%256,n.push($),n.push(a);return n}function bn(r){return bu(Hu(r))}function bg(r,e,t,a){for(var $=0;$<a&&!($+t>=e.length||$>=r.length);++$)e[$+t]=r[$];return $}function Mu(r){return r!=r}var cg={};var Nu=cg&&cg.__extends||function(){var o=function(t,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(o[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}o(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),cn="&#169; <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">OpenStreetMap</a> contributors.";cg.ATTRIBUTION=cn;var dn=function(o){function t(t){var r,e=t||{},n=void 0===e.imageSmoothing||e.imageSmoothing;void 0!==e.interpolate&&(n=e.interpolate),r=void 0!==e.attributions?e.attributions:[cn];var i=void 0!==e.crossOrigin?e.crossOrigin:"anonymous",a=void 0!==e.url?e.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return o.call(this,{attributions:r,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:n,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,opaque:void 0===e.opaque||e.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:a,wrapX:e.wrapX,zDirection:e.zDirection})||this}return Nu(t,o),t}(Bm);cg.default=dn;var cj={};var Ou=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,r){var o;if(r){var e=r.dataProjection?wa(r.dataProjection):this.readProjection(t);r.extent&&e&&e.getUnits()===ta.TILE_PIXELS&&(e=wa(e)).setWorldExtent(r.extent),o={dataProjection:e,featureProjection:r.featureProjection}}return this.adaptOptions(o)},t.prototype.adaptOptions=function(t){return ya({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return da()},t.prototype.readFeature=function(t,r){return da()},t.prototype.readFeatures=function(t,r){return da()},t.prototype.readGeometry=function(t,r){return da()},t.prototype.readProjection=function(t){return da()},t.prototype.writeFeature=function(t,r){return da()},t.prototype.writeFeatures=function(t,r){return da()},t.prototype.writeGeometry=function(t,r){return da()},t}();function en(t,r,o){var e,n=o?wa(o.featureProjection):null,i=o?wa(o.dataProjection):null;if(e=n&&i&&!tc(n,i)?(r?t.clone():t).transform(r?n:i,r?i:n):t,r&&o&&void 0!==o.decimals){var u=Math.pow(10,o.decimals);e===t&&(e=t.clone()),e.applyTransform(function(t){for(var r=0,o=t.length;r<o;++r)t[r]=Math.round(t[r]*u)/u;return t})}return e}var Pu=cj&&cj.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),fn=function(t){function r(){return t.call(this)||this}return Pu(r,t),r.prototype.getType=function(){return"json"},r.prototype.readFeature=function(t,r){return this.readFeatureFromObject(dg(t),this.getReadOptions(t,r))},r.prototype.readFeatures=function(t,r){return this.readFeaturesFromObject(dg(t),this.getReadOptions(t,r))},r.prototype.readFeatureFromObject=function(t,r){return da()},r.prototype.readFeaturesFromObject=function(t,r){return da()},r.prototype.readGeometry=function(t,r){return this.readGeometryFromObject(dg(t),this.getReadOptions(t,r))},r.prototype.readGeometryFromObject=function(t,r){return da()},r.prototype.readProjection=function(t){return this.readProjectionFromObject(dg(t))},r.prototype.readProjectionFromObject=function(t){return da()},r.prototype.writeFeature=function(t,r){return JSON.stringify(this.writeFeatureObject(t,r))},r.prototype.writeFeatureObject=function(t,r){return da()},r.prototype.writeFeatures=function(t,r){return JSON.stringify(this.writeFeaturesObject(t,r))},r.prototype.writeFeaturesObject=function(t,r){return da()},r.prototype.writeGeometry=function(t,r){return JSON.stringify(this.writeGeometryObject(t,r))},r.prototype.writeGeometryObject=function(t,r){return da()},r}(Ou);function dg(t){if("string"==typeof t){var r=JSON.parse(t);return r||null}return null!==t?t:null}cj.default=fn;var dj={};var ej={};var Qu=ej&&ej.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),gn=function(e){function t(t){var r=e.call(this)||this;return r.geometries_=t||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}return Qu(t,e),t.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(la),this.changeEventsKeys_.length=0},t.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(ea(this.geometries_[e],ba.CHANGE,this.changed,this))},t.prototype.clone=function(){var e=new t(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e},t.prototype.closestPointXY=function(e,t,r,o){if(o<nc(this.getExtent(),e,t))return o;for(var i=this.geometries_,n=0,s=i.length;n<s;++n)o=i[n].closestPointXY(e,t,r,o);return o},t.prototype.containsXY=function(e,t){for(var r=this.geometries_,o=0,i=r.length;o<i;++o)if(r[o].containsXY(e,t))return!0;return!1},t.prototype.computeExtent=function(e){zd(e);for(var t=this.geometries_,r=0,o=t.length;r<o;++r)Lj(e,t[r].getExtent());return e},t.prototype.getGeometries=function(){return hn(this.geometries_)},t.prototype.getGeometriesArray=function(){return this.geometries_},t.prototype.getGeometriesArrayRecursive=function(){for(var e=[],t=this.geometries_,r=0,o=t.length;r<o;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e},t.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var r=[],o=this.geometries_,i=!1,n=0,s=o.length;n<s;++n){var p=o[n],a=p.getSimplifiedGeometry(e);r.push(a),a!==p&&(i=!0)}if(i){var h=new t(null);return h.setGeometriesArray(r),h}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},t.prototype.getType=function(){return"GeometryCollection"},t.prototype.intersectsExtent=function(e){for(var t=this.geometries_,r=0,o=t.length;r<o;++r)if(t[r].intersectsExtent(e))return!0;return!1},t.prototype.isEmpty=function(){return 0===this.geometries_.length},t.prototype.rotate=function(e,t){for(var r=this.geometries_,o=0,i=r.length;o<i;++o)r[o].rotate(e,t);this.changed()},t.prototype.scale=function(e,t,r){var o=r;o||(o=oc(this.getExtent()));for(var i=this.geometries_,n=0,s=i.length;n<s;++n)i[n].scale(e,t,o);this.changed()},t.prototype.setGeometries=function(e){this.setGeometriesArray(hn(e))},t.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},t.prototype.applyTransform=function(e){for(var t=this.geometries_,r=0,o=t.length;r<o;++r)t[r].applyTransform(e);this.changed()},t.prototype.translate=function(e,t){for(var r=this.geometries_,o=0,i=r.length;o<i;++o)r[o].translate(e,t);this.changed()},t.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),e.prototype.disposeInternal.call(this)},t}(Rg);function hn(e){for(var t=[],r=0,o=e.length;r<o;++r)t.push(e[r].clone());return t}ej.default=gn;var Ru=dj&&dj.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),jn=function(e){function t(t){var r=this,o=t||{};return(r=e.call(this)||this).dataProjection=wa(o.dataProjection?o.dataProjection:"EPSG:4326"),o.featureProjection&&(r.defaultFeatureProjection=wa(o.featureProjection)),r.geometryName_=o.geometryName,r.extractGeometryName_=o.extractGeometryName,r.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],r}return Ru(t,e),t.prototype.readFeatureFromObject=function(e,t){var r=null,o=fj((r="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null}).geometry,t),i=new eb;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&i.setGeometryName(r.geometry_name),i.setGeometry(o),"id"in r&&i.setId(r.id),r.properties&&i.setProperties(r.properties,!0),i},t.prototype.readFeaturesFromObject=function(e,t){var r=null;if("FeatureCollection"===e.type){r=[];for(var o=e.features,i=0,n=o.length;i<n;++i)r.push(this.readFeatureFromObject(o[i],t))}else r=[this.readFeatureFromObject(e,t)];return r},t.prototype.readGeometryFromObject=function(e,t){return fj(e,t)},t.prototype.readProjectionFromObject=function(e){var t,r=e.crs;return r?"name"==r.type?t=wa(r.properties.name):"EPSG"===r.type?t=wa("EPSG:"+r.properties.code):ha(!1,36):t=this.dataProjection,t},t.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var r={type:"Feature",geometry:null,properties:null},o=e.getId();if(void 0!==o&&(r.id=o),!e.hasProperties())return r;var i=e.getProperties(),n=e.getGeometry();return n&&(r.geometry=gj(n,t),delete i[e.getGeometryName()]),Sc(i)||(r.properties=i),r},t.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);for(var r=[],o=0,i=e.length;o<i;++o)r.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:r}},t.prototype.writeGeometryObject=function(e,t){return gj(e,this.adaptOptions(t))},t}(fn);function fj(e,t){if(!e)return null;var r;switch(e.type){case"Point":r=Tu(e);break;case"LineString":r=Uu(e);break;case"Polygon":r=Yu(e);break;case"MultiPoint":r=Wu(e);break;case"MultiLineString":r=Vu(e);break;case"MultiPolygon":r=Xu(e);break;case"GeometryCollection":r=Su(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type);}return en(r,!1,t)}function Su(e,t){var r=e.geometries.map(function(e){return fj(e,t)});return new gn(r)}function Tu(e){return new mb(e.coordinates)}function Uu(e){return new yc(e.coordinates)}function Vu(e){return new zi(e.coordinates)}function Wu(e){return new Lf(e.coordinates)}function Xu(e){return new Ci(e.coordinates)}function Yu(e){return new nb(e.coordinates)}function gj(e,t){var r,o=(e=en(e,!0,t)).getType();switch(o){case"Point":r=cv(e,t);break;case"LineString":r=$u(e,t);break;case"Polygon":r=dv(e,t);break;case"MultiPoint":r=av(e,t);break;case"MultiLineString":r=_u(e,t);break;case"MultiPolygon":r=bv(e,t);break;case"GeometryCollection":r=Zu(e,t);break;case"Circle":r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+o);}return r}function Zu(e,t){return{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(e){var r=ya({},t);return delete r.featureProjection,gj(e,r)})}}function $u(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function _u(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function av(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function bv(e,t){var r;return t&&(r=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}function cv(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function dv(e,t){var r;return t&&(r=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(r)}}dj.default=jn;function na(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}na.Varint=0,na.Fixed64=1,na.Bytes=2,na.Fixed32=5;var hj=4294967296,kn=1/hj,ev=12,ln="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function fv(t,r,i){var e,a,s=i.buf;if(e=(112&(a=s[i.pos++]))>>4,a<128)return qd(t,e,r);if(e|=(127&(a=s[i.pos++]))<<3,a<128)return qd(t,e,r);if(e|=(127&(a=s[i.pos++]))<<10,a<128)return qd(t,e,r);if(e|=(127&(a=s[i.pos++]))<<17,a<128)return qd(t,e,r);if(e|=(127&(a=s[i.pos++]))<<24,a<128)return qd(t,e,r);if(e|=(1&(a=s[i.pos++]))<<31,a<128)return qd(t,e,r);throw new Error("Expected varint not more than 10 bytes")}function Pb(t){return t.type===na.Bytes?t.readVarint()+t.pos:t.pos+1}function qd(t,r,i){return i?4294967296*r+(t>>>0):4294967296*(r>>>0)+(t>>>0)}function gv(t,r){var i,e;if(t>=0?(i=t%4294967296|0,e=t/4294967296|0):(e=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,e=e+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),hv(i,e,r),iv(e,r)}function hv(t,r,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}function iv(t,r){var i=(7&t)<<4;r.buf[r.pos++]|=i|((t>>>=3)?128:0),t&&(r.buf[r.pos++]=127&t|((t>>>=7)?128:0),t&&(r.buf[r.pos++]=127&t|((t>>>=7)?128:0),t&&(r.buf[r.pos++]=127&t|((t>>>=7)?128:0),t&&(r.buf[r.pos++]=127&t|((t>>>=7)?128:0),t&&(r.buf[r.pos++]=127&t)))))}function mn(t,r,i){var e=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));i.realloc(e);for(var a=i.pos-1;a>=t;a--)i.buf[a+e]=i.buf[a]}function jv(t,r){for(var i=0;i<t.length;i++)r.writeVarint(t[i])}function kv(t,r){for(var i=0;i<t.length;i++)r.writeSVarint(t[i])}function lv(t,r){for(var i=0;i<t.length;i++)r.writeFloat(t[i])}function mv(t,r){for(var i=0;i<t.length;i++)r.writeDouble(t[i])}function nv(t,r){for(var i=0;i<t.length;i++)r.writeBoolean(t[i])}function ov(t,r){for(var i=0;i<t.length;i++)r.writeFixed32(t[i])}function pv(t,r){for(var i=0;i<t.length;i++)r.writeSFixed32(t[i])}function qv(t,r){for(var i=0;i<t.length;i++)r.writeFixed64(t[i])}function rv(t,r){for(var i=0;i<t.length;i++)r.writeSFixed64(t[i])}function eg(t,r){return(t[r]|t[r+1]<<8|t[r+2]<<16)+16777216*t[r+3]}function rd(t,r,i){t[i]=r,t[i+1]=r>>>8,t[i+2]=r>>>16,t[i+3]=r>>>24}function nn(t,r){return(t[r]|t[r+1]<<8|t[r+2]<<16)+(t[r+3]<<24)}function sv(t,r,i){for(var e="",a=r;a<i;){var s,n,$,o=t[a],h=null,f=o>239?4:o>223?3:o>191?2:1;if(a+f>i)break;1===f?o<128&&(h=o):2===f?128==(192&(s=t[a+1]))&&(h=(31&o)<<6|63&s)<=127&&(h=null):3===f?(s=t[a+1],n=t[a+2],128==(192&s)&&128==(192&n)&&((h=(15&o)<<12|(63&s)<<6|63&n)<=2047||h>=55296&&h<=57343)&&(h=null)):4===f&&(s=t[a+1],n=t[a+2],$=t[a+3],128==(192&s)&&128==(192&n)&&128==(192&$)&&((h=(15&o)<<18|(63&s)<<12|(63&n)<<6|63&$)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,f=1):h>65535&&(h-=65536,e+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),e+=String.fromCharCode(h),a+=f}return e}function tv(t,r,i){return ln.decode(t.subarray(r,i))}function uv(t,r,i){for(var e,a,s=0;s<r.length;s++){if((e=r.charCodeAt(s))>55295&&e<57344){if(!a){e>56319||s+1===r.length?(t[i++]=239,t[i++]=191,t[i++]=189):a=e;continue}if(e<56320){t[i++]=239,t[i++]=191,t[i++]=189,a=e;continue}e=a-55296<<10|e-56320|65536,a=null}else a&&(t[i++]=239,t[i++]=191,t[i++]=189,a=null);e<128?t[i++]=e:(e<2048?t[i++]=e>>6|192:(e<65536?t[i++]=e>>12|224:(t[i++]=e>>18|240,t[i++]=e>>12&63|128),t[i++]=e>>6&63|128),t[i++]=63&e|128)}return i}na.prototype={destroy:function(){this.buf=null},readFields:function(t,r,i){for(i=i||this.length;this.pos<i;){var e=this.readVarint(),a=e>>3,s=this.pos;this.type=7&e,t(a,r,this),this.pos===s&&this.skip(e)}return r},readMessage:function(t,r){return this.readFields(t,r,this.readVarint()+this.pos)},readFixed32:function(){var t=eg(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=nn(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=eg(this.buf,this.pos)+eg(this.buf,this.pos+4)*hj;return this.pos+=8,t},readSFixed64:function(){var t=eg(this.buf,this.pos)+nn(this.buf,this.pos+4)*hj;return this.pos+=8,t},readFloat:function(){var t=pd(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=pd(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var r,i,e=this.buf;return r=127&(i=e[this.pos++]),i<128?r:(r|=(127&(i=e[this.pos++]))<<7,i<128?r:(r|=(127&(i=e[this.pos++]))<<14,i<128?r:(r|=(127&(i=e[this.pos++]))<<21,i<128?r:fv(r|=(15&(i=e[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,r=this.pos;return this.pos=t,t-r>=ev&&ln?tv(this.buf,r,t):sv(this.buf,r,t)},readBytes:function(){var t=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,t);return this.pos=t,r},readPackedVarint:function(t,r){if(this.type!==na.Bytes)return t.push(this.readVarint(r));var i=Pb(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(r));return t},readPackedSVarint:function(t){if(this.type!==na.Bytes)return t.push(this.readSVarint());var r=Pb(this);for(t=t||[];this.pos<r;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==na.Bytes)return t.push(this.readBoolean());var r=Pb(this);for(t=t||[];this.pos<r;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==na.Bytes)return t.push(this.readFloat());var r=Pb(this);for(t=t||[];this.pos<r;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==na.Bytes)return t.push(this.readDouble());var r=Pb(this);for(t=t||[];this.pos<r;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==na.Bytes)return t.push(this.readFixed32());var r=Pb(this);for(t=t||[];this.pos<r;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==na.Bytes)return t.push(this.readSFixed32());var r=Pb(this);for(t=t||[];this.pos<r;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==na.Bytes)return t.push(this.readFixed64());var r=Pb(this);for(t=t||[];this.pos<r;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==na.Bytes)return t.push(this.readSFixed64());var r=Pb(this);for(t=t||[];this.pos<r;)t.push(this.readSFixed64());return t},skip:function(t){var r=7&t;if(r===na.Varint)for(;this.buf[this.pos++]>127;);else if(r===na.Bytes)this.pos=this.readVarint()+this.pos;else if(r===na.Fixed32)this.pos+=4;else{if(r!==na.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(t,r){this.writeVarint(t<<3|r)},realloc:function(t){for(var r=this.length||16;r<this.pos+t;)r*=2;if(r!==this.length){var i=new Uint8Array(r);i.set(this.buf),this.buf=i,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),rd(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),rd(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),rd(this.buf,-1&t,this.pos),rd(this.buf,Math.floor(t*kn),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),rd(this.buf,-1&t,this.pos),rd(this.buf,Math.floor(t*kn),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?gv(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var r=this.pos;this.pos=uv(this.buf,t,this.pos);var i=this.pos-r;i>=128&&mn(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Yf(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Yf(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var r=t.length;this.writeVarint(r),this.realloc(r);for(var i=0;i<r;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,r){this.pos++;var i=this.pos;t(r,this);var e=this.pos-i;e>=128&&mn(i,e,this),this.pos=i-1,this.writeVarint(e),this.pos+=e},writeMessage:function(t,r,i){this.writeTag(t,na.Bytes),this.writeRawMessage(r,i)},writePackedVarint:function(t,r){r.length&&this.writeMessage(t,jv,r)},writePackedSVarint:function(t,r){r.length&&this.writeMessage(t,kv,r)},writePackedBoolean:function(t,r){r.length&&this.writeMessage(t,nv,r)},writePackedFloat:function(t,r){r.length&&this.writeMessage(t,lv,r)},writePackedDouble:function(t,r){r.length&&this.writeMessage(t,mv,r)},writePackedFixed32:function(t,r){r.length&&this.writeMessage(t,ov,r)},writePackedSFixed32:function(t,r){r.length&&this.writeMessage(t,pv,r)},writePackedFixed64:function(t,r){r.length&&this.writeMessage(t,qv,r)},writePackedSFixed64:function(t,r){r.length&&this.writeMessage(t,rv,r)},writeBytesField:function(t,r){this.writeTag(t,na.Bytes),this.writeBytes(r)},writeFixed32Field:function(t,r){this.writeTag(t,na.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(t,r){this.writeTag(t,na.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(t,r){this.writeTag(t,na.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(t,r){this.writeTag(t,na.Fixed64),this.writeSFixed64(r)},writeVarintField:function(t,r){this.writeTag(t,na.Varint),this.writeVarint(r)},writeSVarintField:function(t,r){this.writeTag(t,na.Varint),this.writeSVarint(r)},writeStringField:function(t,r){this.writeTag(t,na.Bytes),this.writeString(r)},writeFloatField:function(t,r){this.writeTag(t,na.Fixed32),this.writeFloat(r)},writeDoubleField:function(t,r){this.writeTag(t,na.Fixed64),this.writeDouble(r)},writeBooleanField:function(t,r){this.writeVarintField(t,Boolean(r))}};var vv=["#FF0000","#FFA500","#FFFF00","#00FF00","#008000","#00BFFF"],wv=["#A52A2A","#D3D3D3","#BDB76B","#32CD32","#0000FF","#FFA500"];function on(e){return e[Math.floor(Math.random()*e.length)]}document.addEventListener("DOMContentLoaded",function(e){setTimeout(function(){},0)});var xv=document.getElementById("popup"),yv=document.getElementById("popup-content"),p=document.getElementById("popup-closer"),ij=new hi({element:xv}),ge=new im({target:"map",layers:[new sm({source:new dn})],view:new ub({center:[0,0],zoom:2}),overlays:[ij]}),pn=new hd({url:"data.json",format:new jn}),zv=function(e){return new dd({image:new ff({radius:8,fill:new Xe({color:on(wv)}),stroke:new Jd({color:on(vv),width:2})})})},jj=new Cc({source:pn,style:zv});ge.addLayer(jj),pn.on("change",function(e){ge.getView().fit(jj.getSource().getExtent(),ge.getSize())}),ge.on("pointermove",function(e){var $=ge.forEachFeatureAtPixel(e.pixel,function(e,$){if($==jj)return e});if($){var r="<h3>".concat($.get("company"),"</h3><p>").concat($.get("date"),"</p><p>").concat($.get("address"),"</p><p>").concat($.get("phone"),"</p>");yv.innerHTML=r;var p=e.coordinate;ij.setPosition(p)}else ij.setPosition(void 0)});var bb={};function sd($){let t=$.length;for(;--t>=0;)$[t]=0}const kj=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),fg=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Av=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),qn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qb=new Array(576);sd(Qb);const je=new Array(60);sd(je);const ke=new Array(512);sd(ke);const me=new Array(256);sd(me);const lj=new Array(29);sd(lj);const gg=new Array(30);function mj($,t,e,a,r){this.static_tree=$,this.extra_bits=t,this.extra_base=e,this.elems=a,this.max_length=r,this.has_stree=$&&$.length}let Bv,Cv,Dv;function nj($,t){this.dyn_tree=$,this.max_code=0,this.stat_desc=t}sd(gg);const rn=$=>$<256?ke[$]:ke[256+($>>>7)],qe=($,t)=>{$.pending_buf[$.pending++]=255&t,$.pending_buf[$.pending++]=t>>>8&255},Na=($,t,e)=>{$.bi_valid>16-e?($.bi_buf|=t<<$.bi_valid&65535,qe($,$.bi_buf),$.bi_buf=t>>16-$.bi_valid,$.bi_valid+=e-16):($.bi_buf|=t<<$.bi_valid&65535,$.bi_valid+=e)},xb=($,t,e)=>{Na($,e[2*t],e[2*t+1])},sn=($,t)=>{let e=0;do{e|=1&$,$>>>=1,e<<=1}while(--t>0);return e>>>1},Ev=$=>{16===$.bi_valid?(qe($,$.bi_buf),$.bi_buf=0,$.bi_valid=0):$.bi_valid>=8&&($.pending_buf[$.pending++]=255&$.bi_buf,$.bi_buf>>=8,$.bi_valid-=8)},Fv=($,t)=>{const e=t.dyn_tree,a=t.max_code,r=t.stat_desc.static_tree,v=t.stat_desc.has_stree,n=t.stat_desc.extra_bits,i=t.stat_desc.extra_base,s=t.stat_desc.max_length;let _,l,S,o,z,d,K=0;for(o=0;o<=15;o++)$.bl_count[o]=0;for(e[2*$.heap[$.heap_max]+1]=0,_=$.heap_max+1;_<573;_++)(o=e[2*e[2*(l=$.heap[_])+1]+1]+1)>s&&(o=s,K++),e[2*l+1]=o,l>a||($.bl_count[o]++,z=0,l>=i&&(z=n[l-i]),d=e[2*l],$.opt_len+=d*(o+z),v&&($.static_len+=d*(r[2*l+1]+z)));if(0!==K){do{for(o=s-1;0===$.bl_count[o];)o--;$.bl_count[o]--,$.bl_count[o+1]+=2,$.bl_count[s]--,K-=2}while(K>0);for(o=s;0!==o;o--)for(l=$.bl_count[o];0!==l;)(S=$.heap[--_])>a||(e[2*S+1]!==o&&($.opt_len+=(o-e[2*S+1])*e[2*S],e[2*S+1]=o),l--)}},tn=($,t,e)=>{const a=new Array(16);let r,v,n=0;for(r=1;r<=15;r++)n=n+e[r-1]<<1,a[r]=n;for(v=0;v<=t;v++){let t=$[2*v+1];0!==t&&($[2*v]=sn(a[t]++,t))}},Gv=()=>{let $,t,e,a,r;const v=new Array(16);for(e=0,a=0;a<28;a++)for(lj[a]=e,$=0;$<1<<kj[a];$++)me[e++]=a;for(me[e-1]=a,r=0,a=0;a<16;a++)for(gg[a]=r,$=0;$<1<<fg[a];$++)ke[r++]=a;for(r>>=7;a<30;a++)for(gg[a]=r<<7,$=0;$<1<<fg[a]-7;$++)ke[256+r++]=a;for(t=0;t<=15;t++)v[t]=0;for($=0;$<=143;)Qb[2*$+1]=8,$++,v[8]++;for(;$<=255;)Qb[2*$+1]=9,$++,v[9]++;for(;$<=279;)Qb[2*$+1]=7,$++,v[7]++;for(;$<=287;)Qb[2*$+1]=8,$++,v[8]++;for(tn(Qb,287,v),$=0;$<30;$++)je[2*$+1]=5,je[2*$]=sn($,5);Bv=new mj(Qb,kj,257,286,15),Cv=new mj(je,fg,0,30,15),Dv=new mj(new Array(0),Av,0,19,7)},un=$=>{let t;for(t=0;t<286;t++)$.dyn_ltree[2*t]=0;for(t=0;t<30;t++)$.dyn_dtree[2*t]=0;for(t=0;t<19;t++)$.bl_tree[2*t]=0;$.dyn_ltree[512]=1,$.opt_len=$.static_len=0,$.sym_next=$.matches=0},vn=$=>{$.bi_valid>8?qe($,$.bi_buf):$.bi_valid>0&&($.pending_buf[$.pending++]=$.bi_buf),$.bi_buf=0,$.bi_valid=0},wn=($,t,e,a)=>{const r=2*t,v=2*e;return $[r]<$[v]||$[r]===$[v]&&a[t]<=a[e]},oj=($,t,e)=>{const a=$.heap[e];let r=e<<1;for(;r<=$.heap_len&&(r<$.heap_len&&wn(t,$.heap[r+1],$.heap[r],$.depth)&&r++,!wn(t,a,$.heap[r],$.depth));)$.heap[e]=$.heap[r],e=r,r<<=1;$.heap[e]=a},xn=($,t,e)=>{let a,r,v,n,i=0;if(0!==$.sym_next)do{a=255&$.pending_buf[$.sym_buf+i++],a+=(255&$.pending_buf[$.sym_buf+i++])<<8,r=$.pending_buf[$.sym_buf+i++],0===a?xb($,r,t):(v=me[r],xb($,v+256+1,t),0!==(n=kj[v])&&(r-=lj[v],Na($,r,n)),v=rn(--a),xb($,v,e),0!==(n=fg[v])&&(a-=gg[v],Na($,a,n)))}while(i<$.sym_next);xb($,256,t)},pj=($,t)=>{const e=t.dyn_tree,a=t.stat_desc.static_tree,r=t.stat_desc.has_stree,v=t.stat_desc.elems;let n,i,s,_=-1;for($.heap_len=0,$.heap_max=573,n=0;n<v;n++)0!==e[2*n]?($.heap[++$.heap_len]=_=n,$.depth[n]=0):e[2*n+1]=0;for(;$.heap_len<2;)e[2*(s=$.heap[++$.heap_len]=_<2?++_:0)]=1,$.depth[s]=0,$.opt_len--,r&&($.static_len-=a[2*s+1]);for(t.max_code=_,n=$.heap_len>>1;n>=1;n--)oj($,e,n);s=v;do{n=$.heap[1],$.heap[1]=$.heap[$.heap_len--],oj($,e,1),i=$.heap[1],$.heap[--$.heap_max]=n,$.heap[--$.heap_max]=i,e[2*s]=e[2*n]+e[2*i],$.depth[s]=($.depth[n]>=$.depth[i]?$.depth[n]:$.depth[i])+1,e[2*n+1]=e[2*i+1]=s,$.heap[1]=s++,oj($,e,1)}while($.heap_len>=2);$.heap[--$.heap_max]=$.heap[1],Fv($,t),tn(e,_,$.bl_count)},yn=($,t,e)=>{let a,r,v=-1,n=t[1],i=0,s=7,_=4;for(0===n&&(s=138,_=3),t[2*(e+1)+1]=65535,a=0;a<=e;a++)r=n,n=t[2*(a+1)+1],++i<s&&r===n||(i<_?$.bl_tree[2*r]+=i:0!==r?(r!==v&&$.bl_tree[2*r]++,$.bl_tree[32]++):i<=10?$.bl_tree[34]++:$.bl_tree[36]++,i=0,v=r,0===n?(s=138,_=3):r===n?(s=6,_=3):(s=7,_=4))},zn=($,t,e)=>{let a,r,v=-1,n=t[1],i=0,s=7,_=4;for(0===n&&(s=138,_=3),a=0;a<=e;a++)if(r=n,n=t[2*(a+1)+1],!(++i<s&&r===n)){if(i<_)do{xb($,r,$.bl_tree)}while(0!=--i);else 0!==r?(r!==v&&(xb($,r,$.bl_tree),i--),xb($,16,$.bl_tree),Na($,i-3,2)):i<=10?(xb($,17,$.bl_tree),Na($,i-3,3)):(xb($,18,$.bl_tree),Na($,i-11,7));i=0,v=r,0===n?(s=138,_=3):r===n?(s=6,_=3):(s=7,_=4)}},Hv=$=>{let t;for(yn($,$.dyn_ltree,$.l_desc.max_code),yn($,$.dyn_dtree,$.d_desc.max_code),pj($,$.bl_desc),t=18;t>=3&&0===$.bl_tree[2*qn[t]+1];t--);return $.opt_len+=3*(t+1)+5+5+4,t},Iv=($,t,e,a)=>{let r;for(Na($,t-257,5),Na($,e-1,5),Na($,a-4,4),r=0;r<a;r++)Na($,$.bl_tree[2*qn[r]+1],3);zn($,$.dyn_ltree,t-1),zn($,$.dyn_dtree,e-1)},Jv=$=>{let t,e=4093624447;for(t=0;t<=31;t++,e>>>=1)if(1&e&&0!==$.dyn_ltree[2*t])return 0;if(0!==$.dyn_ltree[18]||0!==$.dyn_ltree[20]||0!==$.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==$.dyn_ltree[2*t])return 1;return 0};let Kv=!1;const Lv=$=>{Kv||(Gv(),Kv=!0),$.l_desc=new nj($.dyn_ltree,Bv),$.d_desc=new nj($.dyn_dtree,Cv),$.bl_desc=new nj($.bl_tree,Dv),$.bi_buf=0,$.bi_valid=0,un($)},An=($,t,e,a)=>{Na($,0+(a?1:0),3),vn($),qe($,e),qe($,~e),e&&$.pending_buf.set($.window.subarray(t,t+e),$.pending),$.pending+=e},Mv=$=>{Na($,2,3),xb($,256,Qb),Ev($)},Nv=($,t,e,a)=>{let r,v,n=0;$.level>0?(2===$.strm.data_type&&($.strm.data_type=Jv($)),pj($,$.l_desc),pj($,$.d_desc),n=Hv($),r=$.opt_len+3+7>>>3,(v=$.static_len+3+7>>>3)<=r&&(r=v)):r=v=e+5,e+4<=r&&-1!==t?An($,t,e,a):4===$.strategy||v===r?(Na($,2+(a?1:0),3),xn($,Qb,je)):(Na($,4+(a?1:0),3),Iv($,$.l_desc.max_code+1,$.d_desc.max_code+1,n+1),xn($,$.dyn_ltree,$.dyn_dtree)),un($),a&&vn($)},Ov=($,t,e)=>($.pending_buf[$.sym_buf+$.sym_next++]=t,$.pending_buf[$.sym_buf+$.sym_next++]=t>>8,$.pending_buf[$.sym_buf+$.sym_next++]=e,0===t?$.dyn_ltree[2*e]++:($.matches++,t--,$.dyn_ltree[2*(me[e]+256+1)]++,$.dyn_dtree[2*rn(t)]++),$.sym_next===$.sym_end);var Pv=Lv,Qv=An,Rv=Nv,Sv=Ov,Tv=Mv,Uv={_tr_init:Pv,_tr_stored_block:Qv,_tr_flush_block:Rv,_tr_tally:Sv,_tr_align:Tv};const Vv=($,t,e,a)=>{let r=65535&$|0,v=$>>>16&65535|0,n=0;for(;0!==e;){e-=n=e>2e3?2e3:e;do{v=v+(r=r+t[a++]|0)|0}while(--n);r%=65521,v%=65521}return r|v<<16|0};var ve=Vv;const Wv=()=>{let $,t=[];for(var e=0;e<256;e++){$=e;for(var a=0;a<8;a++)$=1&$?3988292384^$>>>1:$>>>1;t[e]=$}return t},Xv=new Uint32Array(Wv()),Yv=($,t,e,a)=>{const r=Xv,v=a+e;$^=-1;for(let n=a;n<v;n++)$=$>>>8^r[255&($^t[n])];return-1^$};var Fa=Yv,Lc={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Mc={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Zv,_tr_stored_block:qj,_tr_flush_block:$v,_tr_tally:dc,_tr_align:_v}=Uv,{Z_NO_FLUSH:ec,Z_PARTIAL_FLUSH:aw,Z_FULL_FLUSH:bw,Z_FINISH:cb,Z_BLOCK:Bn,Z_OK:Ga,Z_STREAM_END:Cn,Z_STREAM_ERROR:yb,Z_DATA_ERROR:cw,Z_BUF_ERROR:rj,Z_DEFAULT_COMPRESSION:dw,Z_FILTERED:ew,Z_HUFFMAN_ONLY:hg,Z_RLE:fw,Z_FIXED:gw,Z_DEFAULT_STRATEGY:hw,Z_UNKNOWN:iw,Z_DEFLATED:ig}=Mc,sj=286,jw=30,kw=19,lw=2*sj+1,mw=15,Nc=($,t)=>($.msg=Lc[t],t),Dn=$=>2*$-($>4?9:0),fc=$=>{let t=$.length;for(;--t>=0;)$[t]=0},nw=$=>{let t,e,a,r=$.w_size;a=t=$.hash_size;do{e=$.head[--a],$.head[a]=e>=r?e-r:0}while(--t);a=t=r;do{e=$.prev[--a],$.prev[a]=e>=r?e-r:0}while(--t)};let ow=($,t,e)=>(t<<$.hash_shift^e)&$.hash_mask,gc=ow;const Ua=$=>{const t=$.state;let e=t.pending;e>$.avail_out&&(e=$.avail_out),0!==e&&($.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),$.next_out),$.next_out+=e,t.pending_out+=e,$.total_out+=e,$.avail_out-=e,t.pending-=e,0===t.pending&&(t.pending_out=0))},Va=($,t)=>{$v($,$.block_start>=0?$.block_start:-1,$.strstart-$.block_start,t),$.block_start=$.strstart,Ua($.strm)},ma=($,t)=>{$.pending_buf[$.pending++]=t},we=($,t)=>{$.pending_buf[$.pending++]=t>>>8&255,$.pending_buf[$.pending++]=255&t},tj=($,t,e,a)=>{let r=$.avail_in;return r>a&&(r=a),0===r?0:($.avail_in-=r,t.set($.input.subarray($.next_in,$.next_in+r),e),1===$.state.wrap?$.adler=ve($.adler,t,r,e):2===$.state.wrap&&($.adler=Fa($.adler,t,r,e)),$.next_in+=r,$.total_in+=r,r)},En=($,t)=>{let e,a,r=$.max_chain_length,v=$.strstart,n=$.prev_length,i=$.nice_match;const s=$.strstart>$.w_size-262?$.strstart-($.w_size-262):0,_=$.window,l=$.w_mask,S=$.prev,o=$.strstart+258;let z=_[v+n-1],d=_[v+n];$.prev_length>=$.good_match&&(r>>=2),i>$.lookahead&&(i=$.lookahead);do{if(_[(e=t)+n]===d&&_[e+n-1]===z&&_[e]===_[v]&&_[++e]===_[v+1]){v+=2,e++;do{}while(_[++v]===_[++e]&&_[++v]===_[++e]&&_[++v]===_[++e]&&_[++v]===_[++e]&&_[++v]===_[++e]&&_[++v]===_[++e]&&_[++v]===_[++e]&&_[++v]===_[++e]&&v<o);if(a=258-(o-v),v=o-258,a>n){if($.match_start=t,n=a,a>=i)break;z=_[v+n-1],d=_[v+n]}}}while((t=S[t&l])>s&&0!=--r);return n<=$.lookahead?n:$.lookahead},td=$=>{const t=$.w_size;let e,a,r;do{if(a=$.window_size-$.lookahead-$.strstart,$.strstart>=t+(t-262)&&($.window.set($.window.subarray(t,t+t-a),0),$.match_start-=t,$.strstart-=t,$.block_start-=t,$.insert>$.strstart&&($.insert=$.strstart),nw($),a+=t),0===$.strm.avail_in)break;if(e=tj($.strm,$.window,$.strstart+$.lookahead,a),$.lookahead+=e,$.lookahead+$.insert>=3)for(r=$.strstart-$.insert,$.ins_h=$.window[r],$.ins_h=gc($,$.ins_h,$.window[r+1]);$.insert&&($.ins_h=gc($,$.ins_h,$.window[r+3-1]),$.prev[r&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=r,r++,$.insert--,!($.lookahead+$.insert<3)););}while($.lookahead<262&&0!==$.strm.avail_in)},Fn=($,t)=>{let e,a,r,v=$.pending_buf_size-5>$.w_size?$.w_size:$.pending_buf_size-5,n=0,i=$.strm.avail_in;do{if(e=65535,r=$.bi_valid+42>>3,$.strm.avail_out<r)break;if(r=$.strm.avail_out-r,e>(a=$.strstart-$.block_start)+$.strm.avail_in&&(e=a+$.strm.avail_in),e>r&&(e=r),e<v&&(0===e&&t!==cb||t===ec||e!==a+$.strm.avail_in))break;n=t===cb&&e===a+$.strm.avail_in?1:0,qj($,0,0,n),$.pending_buf[$.pending-4]=e,$.pending_buf[$.pending-3]=e>>8,$.pending_buf[$.pending-2]=~e,$.pending_buf[$.pending-1]=~e>>8,Ua($.strm),a&&(a>e&&(a=e),$.strm.output.set($.window.subarray($.block_start,$.block_start+a),$.strm.next_out),$.strm.next_out+=a,$.strm.avail_out-=a,$.strm.total_out+=a,$.block_start+=a,e-=a),e&&(tj($.strm,$.strm.output,$.strm.next_out,e),$.strm.next_out+=e,$.strm.avail_out-=e,$.strm.total_out+=e)}while(0===n);return(i-=$.strm.avail_in)&&(i>=$.w_size?($.matches=2,$.window.set($.strm.input.subarray($.strm.next_in-$.w_size,$.strm.next_in),0),$.strstart=$.w_size,$.insert=$.strstart):($.window_size-$.strstart<=i&&($.strstart-=$.w_size,$.window.set($.window.subarray($.w_size,$.w_size+$.strstart),0),$.matches<2&&$.matches++,$.insert>$.strstart&&($.insert=$.strstart)),$.window.set($.strm.input.subarray($.strm.next_in-i,$.strm.next_in),$.strstart),$.strstart+=i,$.insert+=i>$.w_size-$.insert?$.w_size-$.insert:i),$.block_start=$.strstart),$.high_water<$.strstart&&($.high_water=$.strstart),n?4:t!==ec&&t!==cb&&0===$.strm.avail_in&&$.strstart===$.block_start?2:(r=$.window_size-$.strstart,$.strm.avail_in>r&&$.block_start>=$.w_size&&($.block_start-=$.w_size,$.strstart-=$.w_size,$.window.set($.window.subarray($.w_size,$.w_size+$.strstart),0),$.matches<2&&$.matches++,r+=$.w_size,$.insert>$.strstart&&($.insert=$.strstart)),r>$.strm.avail_in&&(r=$.strm.avail_in),r&&(tj($.strm,$.window,$.strstart,r),$.strstart+=r,$.insert+=r>$.w_size-$.insert?$.w_size-$.insert:r),$.high_water<$.strstart&&($.high_water=$.strstart),r=$.bi_valid+42>>3,v=(r=$.pending_buf_size-r>65535?65535:$.pending_buf_size-r)>$.w_size?$.w_size:r,((a=$.strstart-$.block_start)>=v||(a||t===cb)&&t!==ec&&0===$.strm.avail_in&&a<=r)&&(e=a>r?r:a,n=t===cb&&0===$.strm.avail_in&&e===a?1:0,qj($,$.block_start,e,n),$.block_start+=e,Ua($.strm)),n?3:1)},uj=($,t)=>{let e,a;for(;;){if($.lookahead<262){if(td($),$.lookahead<262&&t===ec)return 1;if(0===$.lookahead)break}if(e=0,$.lookahead>=3&&($.ins_h=gc($,$.ins_h,$.window[$.strstart+3-1]),e=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),0!==e&&$.strstart-e<=$.w_size-262&&($.match_length=En($,e)),$.match_length>=3){if(a=dc($,$.strstart-$.match_start,$.match_length-3),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=3){$.match_length--;do{$.strstart++,$.ins_h=gc($,$.ins_h,$.window[$.strstart+3-1]),e=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart}while(0!=--$.match_length);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=gc($,$.ins_h,$.window[$.strstart+1]);}else a=dc($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(a&&(Va($,!1),0===$.strm.avail_out))return 1}return $.insert=$.strstart<2?$.strstart:2,t===cb?(Va($,!0),0===$.strm.avail_out?3:4):$.sym_next&&(Va($,!1),0===$.strm.avail_out)?1:2},ud=($,t)=>{let e,a,r;for(;;){if($.lookahead<262){if(td($),$.lookahead<262&&t===ec)return 1;if(0===$.lookahead)break}if(e=0,$.lookahead>=3&&($.ins_h=gc($,$.ins_h,$.window[$.strstart+3-1]),e=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=2,0!==e&&$.prev_length<$.max_lazy_match&&$.strstart-e<=$.w_size-262&&($.match_length=En($,e),$.match_length<=5&&($.strategy===ew||3===$.match_length&&$.strstart-$.match_start>4096)&&($.match_length=2)),$.prev_length>=3&&$.match_length<=$.prev_length){r=$.strstart+$.lookahead-3,a=dc($,$.strstart-1-$.prev_match,$.prev_length-3),$.lookahead-=$.prev_length-1,$.prev_length-=2;do{++$.strstart<=r&&($.ins_h=gc($,$.ins_h,$.window[$.strstart+3-1]),e=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart)}while(0!=--$.prev_length);if($.match_available=0,$.match_length=2,$.strstart++,a&&(Va($,!1),0===$.strm.avail_out))return 1}else if($.match_available){if((a=dc($,0,$.window[$.strstart-1]))&&Va($,!1),$.strstart++,$.lookahead--,0===$.strm.avail_out)return 1}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(a=dc($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<2?$.strstart:2,t===cb?(Va($,!0),0===$.strm.avail_out?3:4):$.sym_next&&(Va($,!1),0===$.strm.avail_out)?1:2},pw=($,t)=>{let e,a,r,v;const n=$.window;for(;;){if($.lookahead<=258){if(td($),$.lookahead<=258&&t===ec)return 1;if(0===$.lookahead)break}if($.match_length=0,$.lookahead>=3&&$.strstart>0&&(a=n[r=$.strstart-1])===n[++r]&&a===n[++r]&&a===n[++r]){v=$.strstart+258;do{}while(a===n[++r]&&a===n[++r]&&a===n[++r]&&a===n[++r]&&a===n[++r]&&a===n[++r]&&a===n[++r]&&a===n[++r]&&r<v);$.match_length=258-(v-r),$.match_length>$.lookahead&&($.match_length=$.lookahead)}if($.match_length>=3?(e=dc($,1,$.match_length-3),$.lookahead-=$.match_length,$.strstart+=$.match_length,$.match_length=0):(e=dc($,0,$.window[$.strstart]),$.lookahead--,$.strstart++),e&&(Va($,!1),0===$.strm.avail_out))return 1}return $.insert=0,t===cb?(Va($,!0),0===$.strm.avail_out?3:4):$.sym_next&&(Va($,!1),0===$.strm.avail_out)?1:2},qw=($,t)=>{let e;for(;;){if(0===$.lookahead&&(td($),0===$.lookahead)){if(t===ec)return 1;break}if($.match_length=0,e=dc($,0,$.window[$.strstart]),$.lookahead--,$.strstart++,e&&(Va($,!1),0===$.strm.avail_out))return 1}return $.insert=0,t===cb?(Va($,!0),0===$.strm.avail_out?3:4):$.sym_next&&(Va($,!1),0===$.strm.avail_out)?1:2};function zb($,t,e,a,r){this.good_length=$,this.max_lazy=t,this.nice_length=e,this.max_chain=a,this.func=r}const xe=[new zb(0,0,0,0,Fn),new zb(4,4,8,4,uj),new zb(4,5,16,8,uj),new zb(4,6,32,32,uj),new zb(4,4,16,16,ud),new zb(8,16,32,32,ud),new zb(8,16,128,128,ud),new zb(8,32,128,256,ud),new zb(32,128,258,1024,ud),new zb(32,258,258,4096,ud)],rw=$=>{$.window_size=2*$.w_size,fc($.head),$.max_lazy_match=xe[$.level].max_lazy,$.good_match=xe[$.level].good_length,$.nice_match=xe[$.level].nice_length,$.max_chain_length=xe[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=2,$.match_available=0,$.ins_h=0};function sw(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ig,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*lw),this.dyn_dtree=new Uint16Array(2*(2*jw+1)),this.bl_tree=new Uint16Array(2*(2*kw+1)),fc(this.dyn_ltree),fc(this.dyn_dtree),fc(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(mw+1),this.heap=new Uint16Array(2*sj+1),fc(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*sj+1),fc(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ye=$=>{if(!$)return 1;const t=$.state;return!t||t.strm!==$||42!==t.status&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&113!==t.status&&666!==t.status?1:0},Gn=$=>{if(ye($))return Nc($,yb);$.total_in=$.total_out=0,$.data_type=iw;const t=$.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,$.adler=2===t.wrap?0:1,t.last_flush=-2,Zv(t),Ga},Hn=$=>{const t=Gn($);return t===Ga&&rw($.state),t},tw=($,t)=>ye($)||2!==$.state.wrap?yb:($.state.gzhead=t,Ga),In=($,t,e,a,r,v)=>{if(!$)return yb;let n=1;if(t===dw&&(t=6),a<0?(n=0,a=-a):a>15&&(n=2,a-=16),r<1||r>9||e!==ig||a<8||a>15||t<0||t>9||v<0||v>gw||8===a&&1!==n)return Nc($,yb);8===a&&(a=9);const i=new sw;return $.state=i,i.strm=$,i.status=42,i.wrap=n,i.gzhead=null,i.w_bits=a,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=r+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+3-1)/3),i.window=new Uint8Array(2*i.w_size),i.head=new Uint16Array(i.hash_size),i.prev=new Uint16Array(i.w_size),i.lit_bufsize=1<<r+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new Uint8Array(i.pending_buf_size),i.sym_buf=i.lit_bufsize,i.sym_end=3*(i.lit_bufsize-1),i.level=t,i.strategy=v,i.method=e,Hn($)},uw=($,t)=>In($,t,ig,15,8,hw),vw=($,t)=>{if(ye($)||t>Bn||t<0)return $?Nc($,yb):yb;const e=$.state;if(!$.output||0!==$.avail_in&&!$.input||666===e.status&&t!==cb)return Nc($,0===$.avail_out?rj:yb);const a=e.last_flush;if(e.last_flush=t,0!==e.pending){if(Ua($),0===$.avail_out)return e.last_flush=-1,Ga}else if(0===$.avail_in&&Dn(t)<=Dn(a)&&t!==cb)return Nc($,rj);if(666===e.status&&0!==$.avail_in)return Nc($,rj);if(42===e.status&&0===e.wrap&&(e.status=113),42===e.status){let t=ig+(e.w_bits-8<<4)<<8,a=-1;if(t|=(a=e.strategy>=hg||e.level<2?0:e.level<6?1:6===e.level?2:3)<<6,0!==e.strstart&&(t|=32),we(e,t+=31-t%31),0!==e.strstart&&(we(e,$.adler>>>16),we(e,65535&$.adler)),$.adler=1,e.status=113,Ua($),0!==e.pending)return e.last_flush=-1,Ga}if(57===e.status)if($.adler=0,ma(e,31),ma(e,139),ma(e,8),e.gzhead)ma(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),ma(e,255&e.gzhead.time),ma(e,e.gzhead.time>>8&255),ma(e,e.gzhead.time>>16&255),ma(e,e.gzhead.time>>24&255),ma(e,9===e.level?2:e.strategy>=hg||e.level<2?4:0),ma(e,255&e.gzhead.os),e.gzhead.extra&&e.gzhead.extra.length&&(ma(e,255&e.gzhead.extra.length),ma(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&($.adler=Fa($.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=69;else if(ma(e,0),ma(e,0),ma(e,0),ma(e,0),ma(e,0),ma(e,9===e.level?2:e.strategy>=hg||e.level<2?4:0),ma(e,3),e.status=113,Ua($),0!==e.pending)return e.last_flush=-1,Ga;if(69===e.status){if(e.gzhead.extra){let t=e.pending,a=(65535&e.gzhead.extra.length)-e.gzindex;for(;e.pending+a>e.pending_buf_size;){let r=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+r),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>t&&($.adler=Fa($.adler,e.pending_buf,e.pending-t,t)),e.gzindex+=r,Ua($),0!==e.pending)return e.last_flush=-1,Ga;t=0,a-=r}let r=new Uint8Array(e.gzhead.extra);e.pending_buf.set(r.subarray(e.gzindex,e.gzindex+a),e.pending),e.pending+=a,e.gzhead.hcrc&&e.pending>t&&($.adler=Fa($.adler,e.pending_buf,e.pending-t,t)),e.gzindex=0}e.status=73}if(73===e.status){if(e.gzhead.name){let t,a=e.pending;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>a&&($.adler=Fa($.adler,e.pending_buf,e.pending-a,a)),Ua($),0!==e.pending)return e.last_flush=-1,Ga;a=0}t=e.gzindex<e.gzhead.name.length?255&e.gzhead.name.charCodeAt(e.gzindex++):0,ma(e,t)}while(0!==t);e.gzhead.hcrc&&e.pending>a&&($.adler=Fa($.adler,e.pending_buf,e.pending-a,a)),e.gzindex=0}e.status=91}if(91===e.status){if(e.gzhead.comment){let t,a=e.pending;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>a&&($.adler=Fa($.adler,e.pending_buf,e.pending-a,a)),Ua($),0!==e.pending)return e.last_flush=-1,Ga;a=0}t=e.gzindex<e.gzhead.comment.length?255&e.gzhead.comment.charCodeAt(e.gzindex++):0,ma(e,t)}while(0!==t);e.gzhead.hcrc&&e.pending>a&&($.adler=Fa($.adler,e.pending_buf,e.pending-a,a))}e.status=103}if(103===e.status){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(Ua($),0!==e.pending))return e.last_flush=-1,Ga;ma(e,255&$.adler),ma(e,$.adler>>8&255),$.adler=0}if(e.status=113,Ua($),0!==e.pending)return e.last_flush=-1,Ga}if(0!==$.avail_in||0!==e.lookahead||t!==ec&&666!==e.status){let a=0===e.level?Fn(e,t):e.strategy===hg?qw(e,t):e.strategy===fw?pw(e,t):xe[e.level].func(e,t);if(3!==a&&4!==a||(e.status=666),1===a||3===a)return 0===$.avail_out&&(e.last_flush=-1),Ga;if(2===a&&(t===aw?_v(e):t!==Bn&&(qj(e,0,0,!1),t===bw&&(fc(e.head),0===e.lookahead&&(e.strstart=0,e.block_start=0,e.insert=0))),Ua($),0===$.avail_out))return e.last_flush=-1,Ga}return t!==cb?Ga:e.wrap<=0?Cn:(2===e.wrap?(ma(e,255&$.adler),ma(e,$.adler>>8&255),ma(e,$.adler>>16&255),ma(e,$.adler>>24&255),ma(e,255&$.total_in),ma(e,$.total_in>>8&255),ma(e,$.total_in>>16&255),ma(e,$.total_in>>24&255)):(we(e,$.adler>>>16),we(e,65535&$.adler)),Ua($),e.wrap>0&&(e.wrap=-e.wrap),0!==e.pending?Ga:Cn)},ww=$=>{if(ye($))return yb;const t=$.state.status;return $.state=null,113===t?Nc($,cw):Ga},xw=($,t)=>{let e=t.length;if(ye($))return yb;const a=$.state,r=a.wrap;if(2===r||1===r&&42!==a.status||a.lookahead)return yb;if(1===r&&($.adler=ve($.adler,t,e,0)),a.wrap=0,e>=a.w_size){0===r&&(fc(a.head),a.strstart=0,a.block_start=0,a.insert=0);let $=new Uint8Array(a.w_size);$.set(t.subarray(e-a.w_size,e),0),t=$,e=a.w_size}const v=$.avail_in,n=$.next_in,i=$.input;for($.avail_in=e,$.next_in=0,$.input=t,td(a);a.lookahead>=3;){let $=a.strstart,t=a.lookahead-2;do{a.ins_h=gc(a,a.ins_h,a.window[$+3-1]),a.prev[$&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=$,$++}while(--t);a.strstart=$,a.lookahead=2,td(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,$.next_in=n,$.input=i,$.avail_in=v,a.wrap=r,Ga};var yw=uw,zw=In,Aw=Hn,Bw=Gn,Cw=tw,Dw=vw,Ew=ww,Fw=xw,Gw="pako deflate (from Nodeca project)",ze={deflateInit:yw,deflateInit2:zw,deflateReset:Aw,deflateResetKeep:Bw,deflateSetHeader:Cw,deflate:Dw,deflateEnd:Ew,deflateSetDictionary:Fw,deflateInfo:Gw};const Hw=($,t)=>Object.prototype.hasOwnProperty.call($,t);var Iw=function($){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(const t in e)Hw(e,t)&&($[t]=e[t])}}return $},Jw=$=>{let t=0;for(let a=0,r=$.length;a<r;a++)t+=$[a].length;const e=new Uint8Array(t);for(let a=0,r=0,v=$.length;a<v;a++){let t=$[a];e.set(t,r),r+=t.length}return e},jg={assign:Iw,flattenChunks:Jw};let Kw=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(__){Kw=!1}const Ae=new Uint8Array(256);for(let $=0;$<256;$++)Ae[$]=$>=252?6:$>=248?5:$>=240?4:$>=224?3:$>=192?2:1;Ae[254]=Ae[254]=1;var Lw=$=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode($);let t,e,a,r,v,n=$.length,i=0;for(r=0;r<n;r++)55296==(64512&(e=$.charCodeAt(r)))&&r+1<n&&56320==(64512&(a=$.charCodeAt(r+1)))&&(e=65536+(e-55296<<10)+(a-56320),r++),i+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(i),v=0,r=0;v<i;r++)55296==(64512&(e=$.charCodeAt(r)))&&r+1<n&&56320==(64512&(a=$.charCodeAt(r+1)))&&(e=65536+(e-55296<<10)+(a-56320),r++),e<128?t[v++]=e:e<2048?(t[v++]=192|e>>>6,t[v++]=128|63&e):e<65536?(t[v++]=224|e>>>12,t[v++]=128|e>>>6&63,t[v++]=128|63&e):(t[v++]=240|e>>>18,t[v++]=128|e>>>12&63,t[v++]=128|e>>>6&63,t[v++]=128|63&e);return t};const Mw=($,t)=>{if(t<65534&&$.subarray&&Kw)return String.fromCharCode.apply(null,$.length===t?$:$.subarray(0,t));let e="";for(let a=0;a<t;a++)e+=String.fromCharCode($[a]);return e};var Nw=($,t)=>{const e=t||$.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode($.subarray(0,t));let a,r;const v=new Array(2*e);for(r=0,a=0;a<e;){let t=$[a++];if(t<128){v[r++]=t;continue}let n=Ae[t];if(n>4)v[r++]=65533,a+=n-1;else{for(t&=2===n?31:3===n?15:7;n>1&&a<e;)t=t<<6|63&$[a++],n--;n>1?v[r++]=65533:t<65536?v[r++]=t:(t-=65536,v[r++]=55296|t>>10&1023,v[r++]=56320|1023&t)}}return Mw(v,r)},Ow=($,t)=>{(t=t||$.length)>$.length&&(t=$.length);let e=t-1;for(;e>=0&&128==(192&$[e]);)e--;return e<0?t:0===e?t:e+Ae[$[e]]>t?e:t},Be={string2buf:Lw,buf2string:Nw,utf8border:Ow};function Pw(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Jn=Pw;const Kn=Object.prototype.toString,{Z_NO_FLUSH:Qw,Z_SYNC_FLUSH:Rw,Z_FULL_FLUSH:Sw,Z_FINISH:Tw,Z_OK:kg,Z_STREAM_END:Uw,Z_DEFAULT_COMPRESSION:Vw,Z_DEFAULT_STRATEGY:Ww,Z_DEFLATED:Xw}=Mc;function Ce($){this.options=jg.assign({level:Vw,method:Xw,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ww},$||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jn,this.strm.avail_out=0;let e=ze.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==kg)throw new Error(Lc[e]);if(t.header&&ze.deflateSetHeader(this.strm,t.header),t.dictionary){let $;if($="string"==typeof t.dictionary?Be.string2buf(t.dictionary):"[object ArrayBuffer]"===Kn.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=ze.deflateSetDictionary(this.strm,$))!==kg)throw new Error(Lc[e]);this._dict_set=!0}}function vj($,t){const e=new Ce(t);if(e.push($,!0),e.err)throw e.msg||Lc[e.err];return e.result}function Yw($,t){return(t=t||{}).raw=!0,vj($,t)}function Zw($,t){return(t=t||{}).gzip=!0,vj($,t)}Ce.prototype.push=function($,t){const e=this.strm,a=this.options.chunkSize;let r,v;if(this.ended)return!1;for(v=t===~~t?t:!0===t?Tw:Qw,"string"==typeof $?e.input=Be.string2buf($):"[object ArrayBuffer]"===Kn.call($)?e.input=new Uint8Array($):e.input=$,e.next_in=0,e.avail_in=e.input.length;;)if(0===e.avail_out&&(e.output=new Uint8Array(a),e.next_out=0,e.avail_out=a),(v===Rw||v===Sw)&&e.avail_out<=6)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else{if((r=ze.deflate(e,v))===Uw)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),r=ze.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===kg;if(0!==e.avail_out){if(v>0&&e.next_out>0)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else if(0===e.avail_in)break}else this.onData(e.output)}return!0},Ce.prototype.onData=function($){this.chunks.push($)},Ce.prototype.onEnd=function($){$===kg&&(this.result=jg.flattenChunks(this.chunks)),this.chunks=[],this.err=$,this.msg=this.strm.msg};var $w=Ce,_w=vj,ax=Yw,bx=Zw,cx=Mc,dx={Deflate:$w,deflate:_w,deflateRaw:ax,gzip:bx,constants:cx};var ex=function($,t){let e,a,r,v,n,i,s,_,l,S,o,z,d,K,h,f,c,u,b,p,w,g,m,E;const R=$.state;e=$.next_in,m=$.input,a=e+($.avail_in-5),r=$.next_out,E=$.output,v=r-(t-$.avail_out),n=r+($.avail_out-257),i=R.dmax,s=R.wsize,_=R.whave,l=R.wnext,S=R.window,o=R.hold,z=R.bits,d=R.lencode,K=R.distcode,h=(1<<R.lenbits)-1,f=(1<<R.distbits)-1;$:do{z<15&&(o+=m[e++]<<z,z+=8,o+=m[e++]<<z,z+=8),c=d[o&h];t:for(;;){if(o>>>=u=c>>>24,z-=u,0===(u=c>>>16&255))E[r++]=65535&c;else{if(!(16&u)){if(0==(64&u)){c=d[(65535&c)+(o&(1<<u)-1)];continue t}if(32&u){R.mode=16191;break $}$.msg="invalid literal/length code",R.mode=16209;break $}b=65535&c,(u&=15)&&(z<u&&(o+=m[e++]<<z,z+=8),b+=o&(1<<u)-1,o>>>=u,z-=u),z<15&&(o+=m[e++]<<z,z+=8,o+=m[e++]<<z,z+=8),c=K[o&f];e:for(;;){if(o>>>=u=c>>>24,z-=u,!(16&(u=c>>>16&255))){if(0==(64&u)){c=K[(65535&c)+(o&(1<<u)-1)];continue e}$.msg="invalid distance code",R.mode=16209;break $}if(p=65535&c,z<(u&=15)&&(o+=m[e++]<<z,(z+=8)<u&&(o+=m[e++]<<z,z+=8)),(p+=o&(1<<u)-1)>i){$.msg="invalid distance too far back",R.mode=16209;break $}if(o>>>=u,z-=u,p>(u=r-v)){if((u=p-u)>_&&R.sane){$.msg="invalid distance too far back",R.mode=16209;break $}if(w=0,g=S,0===l){if(w+=s-u,u<b){b-=u;do{E[r++]=S[w++]}while(--u);w=r-p,g=E}}else if(l<u){if(w+=s+l-u,(u-=l)<b){b-=u;do{E[r++]=S[w++]}while(--u);if(w=0,l<b){b-=u=l;do{E[r++]=S[w++]}while(--u);w=r-p,g=E}}}else if(w+=l-u,u<b){b-=u;do{E[r++]=S[w++]}while(--u);w=r-p,g=E}for(;b>2;)E[r++]=g[w++],E[r++]=g[w++],E[r++]=g[w++],b-=3;b&&(E[r++]=g[w++],b>1&&(E[r++]=g[w++]))}else{w=r-p;do{E[r++]=E[w++],E[r++]=E[w++],E[r++]=E[w++],b-=3}while(b>2);b&&(E[r++]=E[w++],b>1&&(E[r++]=E[w++]))}break}}break}}while(e<a&&r<n);e-=b=z>>3,o&=(1<<(z-=b<<3))-1,$.next_in=e,$.next_out=r,$.avail_in=e<a?a-e+5:5-(e-a),$.avail_out=r<n?n-r+257:257-(r-n),R.hold=o,R.bits=z};const fx=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gx=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),hx=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ix=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),jx=($,t,e,a,r,v,n,i)=>{const s=i.bits;let _,l,S,o,z,d,K=0,h=0,f=0,c=0,u=0,b=0,p=0,w=0,g=0,m=0,E=null;const R=new Uint16Array(16),k=new Uint16Array(16);let y,Z,A,x=null;for(K=0;K<=15;K++)R[K]=0;for(h=0;h<a;h++)R[t[e+h]]++;for(u=s,c=15;c>=1&&0===R[c];c--);if(u>c&&(u=c),0===c)return r[v++]=20971520,r[v++]=20971520,i.bits=1,0;for(f=1;f<c&&0===R[f];f++);for(u<f&&(u=f),w=1,K=1;K<=15;K++)if(w<<=1,(w-=R[K])<0)return-1;if(w>0&&(0===$||1!==c))return-1;for(k[1]=0,K=1;K<15;K++)k[K+1]=k[K]+R[K];for(h=0;h<a;h++)0!==t[e+h]&&(n[k[t[e+h]]++]=h);if(0===$?(E=x=n,d=20):1===$?(E=fx,x=gx,d=257):(E=hx,x=ix,d=0),m=0,h=0,K=f,z=v,b=u,p=0,S=-1,o=(g=1<<u)-1,1===$&&g>852||2===$&&g>592)return 1;for(;;){y=K-p,n[h]+1<d?(Z=0,A=n[h]):n[h]>=d?(Z=x[n[h]-d],A=E[n[h]-d]):(Z=96,A=0),_=1<<K-p,f=l=1<<b;do{r[z+(m>>p)+(l-=_)]=y<<24|Z<<16|A|0}while(0!==l);for(_=1<<K-1;m&_;)_>>=1;if(0!==_?(m&=_-1,m+=_):m=0,h++,0==--R[K]){if(K===c)break;K=t[e+n[h]]}if(K>u&&(m&o)!==S){for(0===p&&(p=u),z+=f,w=1<<(b=K-p);b+p<c&&!((w-=R[b+p])<=0);)b++,w<<=1;if(g+=1<<b,1===$&&g>852||2===$&&g>592)return 1;r[S=m&o]=u<<24|b<<16|z-v|0}}return 0!==m&&(r[z+m]=K-p<<24|64<<16|0),i.bits=u,0};var De=jx;const{Z_FINISH:Ln,Z_BLOCK:kx,Z_TREES:lg,Z_OK:Oc,Z_STREAM_END:lx,Z_NEED_DICT:mx,Z_STREAM_ERROR:db,Z_DATA_ERROR:Mn,Z_MEM_ERROR:Nn,Z_BUF_ERROR:nx,Z_DEFLATED:On}=Mc,Pn=$=>($>>>24&255)+($>>>8&65280)+((65280&$)<<8)+((255&$)<<24);function ox(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Pc=$=>{if(!$)return 1;const t=$.state;return!t||t.strm!==$||t.mode<16180||t.mode>16211?1:0},Qn=$=>{if(Pc($))return db;const t=$.state;return $.total_in=$.total_out=t.total=0,$.msg="",t.wrap&&($.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Oc},Rn=$=>{if(Pc($))return db;const t=$.state;return t.wsize=0,t.whave=0,t.wnext=0,Qn($)},Sn=($,t)=>{let e;if(Pc($))return db;const a=$.state;return t<0?(e=0,t=-t):(e=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?db:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=e,a.wbits=t,Rn($))},Tn=($,t)=>{if(!$)return db;const e=new ox;$.state=e,e.strm=$,e.window=null,e.mode=16180;const a=Sn($,t);return a!==Oc&&($.state=null),a},px=$=>Tn($,15);let Un,Vn,qx=!0;const rx=$=>{if(qx){Un=new Int32Array(512),Vn=new Int32Array(32);let t=0;for(;t<144;)$.lens[t++]=8;for(;t<256;)$.lens[t++]=9;for(;t<280;)$.lens[t++]=7;for(;t<288;)$.lens[t++]=8;for(De(1,$.lens,0,288,Un,0,$.work,{bits:9}),t=0;t<32;)$.lens[t++]=5;De(2,$.lens,0,32,Vn,0,$.work,{bits:5}),qx=!1}$.lencode=Un,$.lenbits=9,$.distcode=Vn,$.distbits=5},Wn=($,t,e,a)=>{let r;const v=$.state;return null===v.window&&(v.wsize=1<<v.wbits,v.wnext=0,v.whave=0,v.window=new Uint8Array(v.wsize)),a>=v.wsize?(v.window.set(t.subarray(e-v.wsize,e),0),v.wnext=0,v.whave=v.wsize):((r=v.wsize-v.wnext)>a&&(r=a),v.window.set(t.subarray(e-a,e-a+r),v.wnext),(a-=r)?(v.window.set(t.subarray(e-a,e),0),v.wnext=a,v.whave=v.wsize):(v.wnext+=r,v.wnext===v.wsize&&(v.wnext=0),v.whave<v.wsize&&(v.whave+=r))),0},sx=($,t)=>{let e,a,r,v,n,i,s,_,l,S,o,z,d,K,h,f,c,u,b,p,w,g,m=0;const E=new Uint8Array(4);let R,k;const y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Pc($)||!$.output||!$.input&&0!==$.avail_in)return db;16191===(e=$.state).mode&&(e.mode=16192),n=$.next_out,r=$.output,s=$.avail_out,v=$.next_in,a=$.input,i=$.avail_in,_=e.hold,l=e.bits,S=i,o=s,g=Oc;$:for(;;)switch(e.mode){case 16180:if(0===e.wrap){e.mode=16192;break}for(;l<16;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}if(2&e.wrap&&35615===_){0===e.wbits&&(e.wbits=15),e.check=0,E[0]=255&_,E[1]=_>>>8&255,e.check=Fa(e.check,E,2,0),_=0,l=0,e.mode=16181;break}if(e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&_)<<8)+(_>>8))%31){$.msg="incorrect header check",e.mode=16209;break}if((15&_)!==On){$.msg="unknown compression method",e.mode=16209;break}if(l-=4,w=8+(15&(_>>>=4)),0===e.wbits&&(e.wbits=w),w>15||w>e.wbits){$.msg="invalid window size",e.mode=16209;break}e.dmax=1<<e.wbits,e.flags=0,$.adler=e.check=1,e.mode=512&_?16189:16191,_=0,l=0;break;case 16181:for(;l<16;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}if(e.flags=_,(255&e.flags)!==On){$.msg="unknown compression method",e.mode=16209;break}if(57344&e.flags){$.msg="unknown header flags set",e.mode=16209;break}e.head&&(e.head.text=_>>8&1),512&e.flags&&4&e.wrap&&(E[0]=255&_,E[1]=_>>>8&255,e.check=Fa(e.check,E,2,0)),_=0,l=0,e.mode=16182;case 16182:for(;l<32;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}e.head&&(e.head.time=_),512&e.flags&&4&e.wrap&&(E[0]=255&_,E[1]=_>>>8&255,E[2]=_>>>16&255,E[3]=_>>>24&255,e.check=Fa(e.check,E,4,0)),_=0,l=0,e.mode=16183;case 16183:for(;l<16;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}e.head&&(e.head.xflags=255&_,e.head.os=_>>8),512&e.flags&&4&e.wrap&&(E[0]=255&_,E[1]=_>>>8&255,e.check=Fa(e.check,E,2,0)),_=0,l=0,e.mode=16184;case 16184:if(1024&e.flags){for(;l<16;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}e.length=_,e.head&&(e.head.extra_len=_),512&e.flags&&4&e.wrap&&(E[0]=255&_,E[1]=_>>>8&255,e.check=Fa(e.check,E,2,0)),_=0,l=0}else e.head&&(e.head.extra=null);e.mode=16185;case 16185:if(1024&e.flags&&((z=e.length)>i&&(z=i),z&&(e.head&&(w=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(a.subarray(v,v+z),w)),512&e.flags&&4&e.wrap&&(e.check=Fa(e.check,a,z,v)),i-=z,v+=z,e.length-=z),e.length))break $;e.length=0,e.mode=16186;case 16186:if(2048&e.flags){if(0===i)break $;z=0;do{w=a[v+z++],e.head&&w&&e.length<65536&&(e.head.name+=String.fromCharCode(w))}while(w&&z<i);if(512&e.flags&&4&e.wrap&&(e.check=Fa(e.check,a,z,v)),i-=z,v+=z,w)break $}else e.head&&(e.head.name=null);e.length=0,e.mode=16187;case 16187:if(4096&e.flags){if(0===i)break $;z=0;do{w=a[v+z++],e.head&&w&&e.length<65536&&(e.head.comment+=String.fromCharCode(w))}while(w&&z<i);if(512&e.flags&&4&e.wrap&&(e.check=Fa(e.check,a,z,v)),i-=z,v+=z,w)break $}else e.head&&(e.head.comment=null);e.mode=16188;case 16188:if(512&e.flags){for(;l<16;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}if(4&e.wrap&&_!==(65535&e.check)){$.msg="header crc mismatch",e.mode=16209;break}_=0,l=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),$.adler=e.check=0,e.mode=16191;break;case 16189:for(;l<32;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}$.adler=e.check=Pn(_),_=0,l=0,e.mode=16190;case 16190:if(0===e.havedict)return $.next_out=n,$.avail_out=s,$.next_in=v,$.avail_in=i,e.hold=_,e.bits=l,mx;$.adler=e.check=1,e.mode=16191;case 16191:if(t===kx||t===lg)break $;case 16192:if(e.last){_>>>=7&l,l-=7&l,e.mode=16206;break}for(;l<3;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}switch(e.last=1&_,l-=1,3&(_>>>=1)){case 0:e.mode=16193;break;case 1:if(rx(e),e.mode=16199,t===lg){_>>>=2,l-=2;break $}break;case 2:e.mode=16196;break;case 3:$.msg="invalid block type",e.mode=16209;}_>>>=2,l-=2;break;case 16193:for(_>>>=7&l,l-=7&l;l<32;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}if((65535&_)!=(_>>>16^65535)){$.msg="invalid stored block lengths",e.mode=16209;break}if(e.length=65535&_,_=0,l=0,e.mode=16194,t===lg)break $;case 16194:e.mode=16195;case 16195:if(z=e.length){if(z>i&&(z=i),z>s&&(z=s),0===z)break $;r.set(a.subarray(v,v+z),n),i-=z,v+=z,s-=z,n+=z,e.length-=z;break}e.mode=16191;break;case 16196:for(;l<14;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}if(e.nlen=257+(31&_),_>>>=5,l-=5,e.ndist=1+(31&_),_>>>=5,l-=5,e.ncode=4+(15&_),_>>>=4,l-=4,e.nlen>286||e.ndist>30){$.msg="too many length or distance symbols",e.mode=16209;break}e.have=0,e.mode=16197;case 16197:for(;e.have<e.ncode;){for(;l<3;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}e.lens[y[e.have++]]=7&_,_>>>=3,l-=3}for(;e.have<19;)e.lens[y[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,R={bits:e.lenbits},g=De(0,e.lens,0,19,e.lencode,0,e.work,R),e.lenbits=R.bits,g){$.msg="invalid code lengths set",e.mode=16209;break}e.have=0,e.mode=16198;case 16198:for(;e.have<e.nlen+e.ndist;){for(;f=(m=e.lencode[_&(1<<e.lenbits)-1])>>>16&255,c=65535&m,!((h=m>>>24)<=l);){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}if(c<16)_>>>=h,l-=h,e.lens[e.have++]=c;else{if(16===c){for(k=h+2;l<k;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}if(_>>>=h,l-=h,0===e.have){$.msg="invalid bit length repeat",e.mode=16209;break}w=e.lens[e.have-1],z=3+(3&_),_>>>=2,l-=2}else if(17===c){for(k=h+3;l<k;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}l-=h,w=0,z=3+(7&(_>>>=h)),_>>>=3,l-=3}else{for(k=h+7;l<k;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}l-=h,w=0,z=11+(127&(_>>>=h)),_>>>=7,l-=7}if(e.have+z>e.nlen+e.ndist){$.msg="invalid bit length repeat",e.mode=16209;break}for(;z--;)e.lens[e.have++]=w}}if(16209===e.mode)break;if(0===e.lens[256]){$.msg="invalid code -- missing end-of-block",e.mode=16209;break}if(e.lenbits=9,R={bits:e.lenbits},g=De(1,e.lens,0,e.nlen,e.lencode,0,e.work,R),e.lenbits=R.bits,g){$.msg="invalid literal/lengths set",e.mode=16209;break}if(e.distbits=6,e.distcode=e.distdyn,R={bits:e.distbits},g=De(2,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,R),e.distbits=R.bits,g){$.msg="invalid distances set",e.mode=16209;break}if(e.mode=16199,t===lg)break $;case 16199:e.mode=16200;case 16200:if(i>=6&&s>=258){$.next_out=n,$.avail_out=s,$.next_in=v,$.avail_in=i,e.hold=_,e.bits=l,ex($,o),n=$.next_out,r=$.output,s=$.avail_out,v=$.next_in,a=$.input,i=$.avail_in,_=e.hold,l=e.bits,16191===e.mode&&(e.back=-1);break}for(e.back=0;f=(m=e.lencode[_&(1<<e.lenbits)-1])>>>16&255,c=65535&m,!((h=m>>>24)<=l);){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}if(f&&0==(240&f)){for(u=h,b=f,p=c;f=(m=e.lencode[p+((_&(1<<u+b)-1)>>u)])>>>16&255,c=65535&m,!(u+(h=m>>>24)<=l);){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}_>>>=u,l-=u,e.back+=u}if(_>>>=h,l-=h,e.back+=h,e.length=c,0===f){e.mode=16205;break}if(32&f){e.back=-1,e.mode=16191;break}if(64&f){$.msg="invalid literal/length code",e.mode=16209;break}e.extra=15&f,e.mode=16201;case 16201:if(e.extra){for(k=e.extra;l<k;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}e.length+=_&(1<<e.extra)-1,_>>>=e.extra,l-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=16202;case 16202:for(;f=(m=e.distcode[_&(1<<e.distbits)-1])>>>16&255,c=65535&m,!((h=m>>>24)<=l);){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}if(0==(240&f)){for(u=h,b=f,p=c;f=(m=e.distcode[p+((_&(1<<u+b)-1)>>u)])>>>16&255,c=65535&m,!(u+(h=m>>>24)<=l);){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}_>>>=u,l-=u,e.back+=u}if(_>>>=h,l-=h,e.back+=h,64&f){$.msg="invalid distance code",e.mode=16209;break}e.offset=c,e.extra=15&f,e.mode=16203;case 16203:if(e.extra){for(k=e.extra;l<k;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}e.offset+=_&(1<<e.extra)-1,_>>>=e.extra,l-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){$.msg="invalid distance too far back",e.mode=16209;break}e.mode=16204;case 16204:if(0===s)break $;if(z=o-s,e.offset>z){if((z=e.offset-z)>e.whave&&e.sane){$.msg="invalid distance too far back",e.mode=16209;break}z>e.wnext?(z-=e.wnext,d=e.wsize-z):d=e.wnext-z,z>e.length&&(z=e.length),K=e.window}else K=r,d=n-e.offset,z=e.length;z>s&&(z=s),s-=z,e.length-=z;do{r[n++]=K[d++]}while(--z);0===e.length&&(e.mode=16200);break;case 16205:if(0===s)break $;r[n++]=e.length,s--,e.mode=16200;break;case 16206:if(e.wrap){for(;l<32;){if(0===i)break $;i--,_|=a[v++]<<l,l+=8}if(o-=s,$.total_out+=o,e.total+=o,4&e.wrap&&o&&($.adler=e.check=e.flags?Fa(e.check,r,o,n-o):ve(e.check,r,o,n-o)),o=s,4&e.wrap&&(e.flags?_:Pn(_))!==e.check){$.msg="incorrect data check",e.mode=16209;break}_=0,l=0}e.mode=16207;case 16207:if(e.wrap&&e.flags){for(;l<32;){if(0===i)break $;i--,_+=a[v++]<<l,l+=8}if(4&e.wrap&&_!==(4294967295&e.total)){$.msg="incorrect length check",e.mode=16209;break}_=0,l=0}e.mode=16208;case 16208:g=lx;break $;case 16209:g=Mn;break $;case 16210:return Nn;case 16211:default:return db;}return $.next_out=n,$.avail_out=s,$.next_in=v,$.avail_in=i,e.hold=_,e.bits=l,(e.wsize||o!==$.avail_out&&e.mode<16209&&(e.mode<16206||t!==Ln))&&Wn($,$.output,$.next_out,o-$.avail_out),S-=$.avail_in,o-=$.avail_out,$.total_in+=S,$.total_out+=o,e.total+=o,4&e.wrap&&o&&($.adler=e.check=e.flags?Fa(e.check,r,o,$.next_out-o):ve(e.check,r,o,$.next_out-o)),$.data_type=e.bits+(e.last?64:0)+(16191===e.mode?128:0)+(16199===e.mode||16194===e.mode?256:0),(0===S&&0===o||t===Ln)&&g===Oc&&(g=nx),g},tx=$=>{if(Pc($))return db;let t=$.state;return t.window&&(t.window=null),$.state=null,Oc},ux=($,t)=>{if(Pc($))return db;const e=$.state;return 0==(2&e.wrap)?db:(e.head=t,t.done=!1,Oc)},vx=($,t)=>{const e=t.length;let a,r,v;return Pc($)?db:0!==(a=$.state).wrap&&16190!==a.mode?db:16190===a.mode&&(r=ve(r=1,t,e,0))!==a.check?Mn:(v=Wn($,t,e,e))?(a.mode=16210,Nn):(a.havedict=1,Oc)};var wx=Rn,xx=Sn,yx=Qn,zx=px,Ax=Tn,Bx=sx,Cx=tx,Dx=ux,Ex=vx,Fx="pako inflate (from Nodeca project)",Rb={inflateReset:wx,inflateReset2:xx,inflateResetKeep:yx,inflateInit:zx,inflateInit2:Ax,inflate:Bx,inflateEnd:Cx,inflateGetHeader:Dx,inflateSetDictionary:Ex,inflateInfo:Fx};function Gx(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Hx=Gx;const Xn=Object.prototype.toString,{Z_NO_FLUSH:Ix,Z_FINISH:Jx,Z_OK:Ee,Z_STREAM_END:wj,Z_NEED_DICT:xj,Z_STREAM_ERROR:Kx,Z_DATA_ERROR:Yn,Z_MEM_ERROR:Lx}=Mc;function Fe($){this.options=jg.assign({chunkSize:65536,windowBits:15,to:""},$||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||$&&$.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jn,this.strm.avail_out=0;let e=Rb.inflateInit2(this.strm,t.windowBits);if(e!==Ee)throw new Error(Lc[e]);if(this.header=new Hx,Rb.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Be.string2buf(t.dictionary):"[object ArrayBuffer]"===Xn.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=Rb.inflateSetDictionary(this.strm,t.dictionary))!==Ee))throw new Error(Lc[e])}function yj($,t){const e=new Fe(t);if(e.push($),e.err)throw e.msg||Lc[e.err];return e.result}function Mx($,t){return(t=t||{}).raw=!0,yj($,t)}Fe.prototype.push=function($,t){const e=this.strm,a=this.options.chunkSize,r=this.options.dictionary;let v,n,i;if(this.ended)return!1;for(n=t===~~t?t:!0===t?Jx:Ix,"[object ArrayBuffer]"===Xn.call($)?e.input=new Uint8Array($):e.input=$,e.next_in=0,e.avail_in=e.input.length;;){for(0===e.avail_out&&(e.output=new Uint8Array(a),e.next_out=0,e.avail_out=a),(v=Rb.inflate(e,n))===xj&&r&&((v=Rb.inflateSetDictionary(e,r))===Ee?v=Rb.inflate(e,n):v===Yn&&(v=xj));e.avail_in>0&&v===wj&&e.state.wrap>0&&0!==$[e.next_in];)Rb.inflateReset(e),v=Rb.inflate(e,n);switch(v){case Kx:case Yn:case xj:case Lx:return this.onEnd(v),this.ended=!0,!1;}if(i=e.avail_out,e.next_out&&(0===e.avail_out||v===wj))if("string"===this.options.to){let $=Be.utf8border(e.output,e.next_out),t=e.next_out-$,r=Be.buf2string(e.output,$);e.next_out=t,e.avail_out=a-t,t&&e.output.set(e.output.subarray($,$+t),0),this.onData(r)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(v!==Ee||0!==i){if(v===wj)return v=Rb.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,!0;if(0===e.avail_in)break}}return!0},Fe.prototype.onData=function($){this.chunks.push($)},Fe.prototype.onEnd=function($){$===Ee&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=jg.flattenChunks(this.chunks)),this.chunks=[],this.err=$,this.msg=this.strm.msg};var Nx=Fe,Ox=yj,Px=Mx,Qx=yj,Rx=Mc,Sx={Inflate:Nx,inflate:Ox,inflateRaw:Px,ungzip:Qx,constants:Rx};const{Deflate:Tx,deflate:Ux,deflateRaw:Vx,gzip:Wx}=dx,{Inflate:Xx,inflate:Yx,inflateRaw:Zx,ungzip:$x}=Sx;var Zn=Tx,$n=Ux,_n=Vx,ao=Wx,bo=Xx,co=Yx,eo=Zx,fo=$x,go=Mc,_x={Deflate:Zn,deflate:$n,deflateRaw:_n,gzip:ao,Inflate:bo,inflate:co,inflateRaw:eo,ungzip:fo,constants:go};bb.ungzip=fo,bb.inflateRaw=eo,bb.inflate=co,bb.gzip=ao,bb.deflateRaw=_n,bb.deflate=$n,bb.default=_x,bb.constants=go,bb.Inflate=bo,bb.Deflate=Zn;({}).__esModule=true;({}).__esModule=true;bb.__esModule=true;return{"RRPV":{},"a3cU":{},"KzSv":bb,"aMB2":fe,"epB2":{}};});