{"id":"e7i2","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/ol/package.json","includedInParent":true,"mtime":1679700665093},{"name":"../geom/Circle.js","loc":{"line":19,"column":19,"index":821},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/Circle.js"},{"name":"../events/Event.js","loc":{"line":20,"column":18,"index":860},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/Event.js"},{"name":"../events/EventType.js","loc":{"line":21,"column":22,"index":904},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/EventType.js"},{"name":"../Feature.js","loc":{"line":22,"column":20,"index":950},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/Feature.js"},{"name":"../geom/GeometryLayout.js","loc":{"line":23,"column":27,"index":994},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/GeometryLayout.js"},{"name":"./Property.js","loc":{"line":24,"column":32,"index":1055},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Property.js"},{"name":"../geom/LineString.js","loc":{"line":25,"column":23,"index":1095},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/LineString.js"},{"name":"../MapBrowserEvent.js","loc":{"line":26,"column":28,"index":1148},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/MapBrowserEvent.js"},{"name":"../MapBrowserEventType.js","loc":{"line":27,"column":32,"index":1205},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/MapBrowserEventType.js"},{"name":"../geom/MultiLineString.js","loc":{"line":28,"column":28,"index":1262},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/MultiLineString.js"},{"name":"../geom/MultiPoint.js","loc":{"line":29,"column":23,"index":1315},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/MultiPoint.js"},{"name":"../geom/MultiPolygon.js","loc":{"line":30,"column":25,"index":1365},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/MultiPolygon.js"},{"name":"../geom/Point.js","loc":{"line":31,"column":18,"index":1410},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/Point.js"},{"name":"./Pointer.js","loc":{"line":32,"column":31,"index":1461},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Pointer.js"},{"name":"../geom/Polygon.js","loc":{"line":33,"column":49,"index":1526},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/Polygon.js"},{"name":"../layer/Vector.js","loc":{"line":34,"column":24,"index":1572},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/layer/Vector.js"},{"name":"../source/Vector.js","loc":{"line":35,"column":25,"index":1619},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Vector.js"},{"name":"../functions.js","loc":{"line":36,"column":28,"index":1670},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/functions.js"},{"name":"../events/condition.js","loc":{"line":37,"column":53,"index":1742},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/condition.js"},{"name":"../extent.js","loc":{"line":38,"column":88,"index":1856},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/extent.js"},{"name":"../style/Style.js","loc":{"line":39,"column":35,"index":1907},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/style/Style.js"},{"name":"../proj.js","loc":{"line":40,"column":54,"index":1982},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/proj.js"},{"name":"../geom/SimpleGeometry.js","loc":{"line":41,"column":35,"index":2031},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/SimpleGeometry.js"},{"name":"../coordinate.js","loc":{"line":42,"column":61,"index":2121},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Draw.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/coordinate.js"}],"generated":{"js":"var $e7i2$exports={};$parcel$require(\"e7i2\",\"../geom/Circle.js\"),$parcel$require(\"e7i2\",\"../events/Event.js\"),$parcel$require(\"e7i2\",\"../events/EventType.js\"),$parcel$require(\"e7i2\",\"../Feature.js\"),$parcel$require(\"e7i2\",\"../geom/GeometryLayout.js\"),$parcel$require(\"e7i2\",\"./Property.js\"),$parcel$require(\"e7i2\",\"../geom/LineString.js\"),$parcel$require(\"e7i2\",\"../MapBrowserEvent.js\"),$parcel$require(\"e7i2\",\"../MapBrowserEventType.js\"),$parcel$require(\"e7i2\",\"../geom/MultiLineString.js\"),$parcel$require(\"e7i2\",\"../geom/MultiPoint.js\"),$parcel$require(\"e7i2\",\"../geom/MultiPolygon.js\"),$parcel$require(\"e7i2\",\"../geom/Point.js\"),$parcel$require(\"e7i2\",\"./Pointer.js\"),$parcel$require(\"e7i2\",\"../geom/Polygon.js\"),$parcel$require(\"e7i2\",\"../layer/Vector.js\"),$parcel$require(\"e7i2\",\"../source/Vector.js\"),$parcel$require(\"e7i2\",\"../functions.js\"),$parcel$require(\"e7i2\",\"../events/condition.js\"),$parcel$require(\"e7i2\",\"../extent.js\"),$parcel$require(\"e7i2\",\"../style/Style.js\"),$parcel$require(\"e7i2\",\"../proj.js\"),$parcel$require(\"e7i2\",\"../geom/SimpleGeometry.js\"),$parcel$require(\"e7i2\",\"../coordinate.js\");var $e7i2$var$__extends=$e7i2$exports&&$e7i2$exports.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if(\"function\"!=typeof i&&null!==i)throw new TypeError(\"Class extends value \"+String(i)+\" is not a constructor or null\");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$e7i2$var$Mode={POINT:\"Point\",LINE_STRING:\"LineString\",POLYGON:\"Polygon\",CIRCLE:\"Circle\"},$e7i2$var$DrawEventType={DRAWSTART:\"drawstart\",DRAWEND:\"drawend\",DRAWABORT:\"drawabort\"},$e7i2$export$DrawEvent=function(e){function t(t,i){var r=e.call(this,t)||this;return r.feature=i,r}return $e7i2$var$__extends(t,e),t}($e7i2$import$Event);$e7i2$exports.DrawEvent=$e7i2$export$DrawEvent;var $e7i2$export$default=function(e){function t(t){var i=this,r=t;r.stopDown||(r.stopDown=$e7i2$import$FALSE),(i=e.call(this,r)||this).on,i.once,i.un,i.shouldHandle_=!1,i.downPx_=null,i.downTimeout_,i.lastDragTime_,i.pointerType_,i.freehand_=!1,i.source_=t.source?t.source:null,i.features_=t.features?t.features:null,i.snapTolerance_=t.snapTolerance?t.snapTolerance:12,i.type_=t.type,i.mode_=$e7i2$var$getMode(i.type_),i.stopClick_=!!t.stopClick,i.minPoints_=t.minPoints?t.minPoints:i.mode_===$e7i2$var$Mode.POLYGON?3:2,i.maxPoints_=i.mode_===$e7i2$var$Mode.CIRCLE?2:t.maxPoints?t.maxPoints:1/0,i.finishCondition_=t.finishCondition?t.finishCondition:$e7i2$import$TRUE,i.geometryLayout_=t.geometryLayout?t.geometryLayout:$e7i2$import$GeometryLayout.XY;var o=t.geometryFunction;if(!o){var n,s=i.mode_;if(s===$e7i2$var$Mode.CIRCLE)o=function(e,t,i){var r=t||new $e7i2$import$Circle([NaN,NaN]),o=$e7i2$import$fromUserCoordinate(e[0],i),n=$e7i2$import$squaredCoordinateDistance(o,$e7i2$import$fromUserCoordinate(e[e.length-1],i));r.setCenterAndRadius(o,Math.sqrt(n),this.geometryLayout_);var s=$e7i2$import$getUserProjection();return s&&r.transform(i,s),r};else s===$e7i2$var$Mode.POINT?n=$e7i2$import$Point:s===$e7i2$var$Mode.LINE_STRING?n=$e7i2$import$LineString:s===$e7i2$var$Mode.POLYGON&&(n=$e7i2$import$Polygon),o=function(e,t,i){return t?s===$e7i2$var$Mode.POLYGON?e[0].length?t.setCoordinates([e[0].concat([e[0][0]])],this.geometryLayout_):t.setCoordinates([],this.geometryLayout_):t.setCoordinates(e,this.geometryLayout_):t=new n(e,this.geometryLayout_),t}}return i.geometryFunction_=o,i.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,i.overlay_=new $e7i2$import$VectorLayer({source:new $e7i2$import$VectorSource({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:$e7i2$var$getDefaultStyleFunction(),updateWhileInteracting:!0}),i.geometryName_=t.geometryName,i.condition_=t.condition?t.condition:$e7i2$import$noModifierKeys,i.freehandCondition_,t.freehand?i.freehandCondition_=$e7i2$import$always:i.freehandCondition_=t.freehandCondition?t.freehandCondition:$e7i2$import$shiftKeyOnly,i.addChangeListener($e7i2$import$InteractionProperty.ACTIVE,i.updateState_),i}return $e7i2$var$__extends(t,e),t.prototype.setMap=function(t){e.prototype.setMap.call(this,t),this.updateState_()},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleEvent=function(t){t.originalEvent.type===$e7i2$import$EventType.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!==$e7i2$var$Mode.POINT&&this.freehandCondition_(t);var i=t.type===$e7i2$import$MapBrowserEventType.POINTERMOVE,r=!0;!this.freehand_&&this.lastDragTime_&&t.type===$e7i2$import$MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===$e7i2$import$MapBrowserEventType.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),r=!1):this.freehand_&&t.type===$e7i2$import$MapBrowserEventType.POINTERDOWN?r=!1:i&&this.getPointerCount()<2?(r=t.type===$e7i2$import$MapBrowserEventType.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(\"mouse\"===t.originalEvent.pointerType||t.type===$e7i2$import$MapBrowserEventType.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===$e7i2$import$MapBrowserEventType.DBLCLICK&&(r=!1),e.prototype.handleEvent.call(this,t)&&r},t.prototype.handleDownEvent=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new $e7i2$import$MapBrowserEvent($e7i2$import$MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)},t.prototype.handleUpEvent=function(e){var t=!0;if(0===this.getPointerCount())if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e),this.shouldHandle_){var i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():this.freehand_||i&&this.mode_!==$e7i2$var$Mode.POINT||(this.atFinish_(e.pixel)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing();return!t&&this.stopClick_&&e.preventDefault(),t},t.prototype.handlePointerMove_=function(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,i=e.pixel,r=t[0]-i[0],o=t[1]-i[1],n=r*r+o*o;if(this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(e.coordinate):this.createOrUpdateSketchPoint_(e.coordinate.slice())},t.prototype.atFinish_=function(e){var t=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_],o=this.mode_;if(o===$e7i2$var$Mode.POINT)t=!0;else if(o===$e7i2$var$Mode.CIRCLE)t=2===this.sketchCoords_.length;else if(o===$e7i2$var$Mode.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(o===$e7i2$var$Mode.POLYGON){var n=this.sketchCoords_;i=n[0].length>this.minPoints_,r=[n[0][0],n[0][n[0].length-2]]}if(i)for(var s=this.getMap(),a=0,h=r.length;a<h;a++){var $=r[a],c=s.getPixelFromCoordinate($),d=e[0]-c[0],p=e[1]-c[1],_=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(d*d+p*p)<=_){this.finishCoordinate_=$;break}}}return t},t.prototype.createOrUpdateSketchPoint_=function(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new $e7i2$import$Feature(new $e7i2$import$Point(e)),this.updateSketchFeatures_())},t.prototype.createOrUpdateCustomSketchLine_=function(e){this.sketchLine_||(this.sketchLine_=new $e7i2$import$Feature);var t=e.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new $e7i2$import$LineString(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))},t.prototype.startDrawing_=function(e){for(var t=this.getMap().getView().getProjection(),i=$e7i2$import$getStrideForLayout(this.geometryLayout_);e.length<i;)e.push(0);this.finishCoordinate_=e,this.mode_===$e7i2$var$Mode.POINT?this.sketchCoords_=e.slice():this.mode_===$e7i2$var$Mode.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new $e7i2$import$Feature(new $e7i2$import$LineString(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new $e7i2$import$Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new $e7i2$export$DrawEvent($e7i2$var$DrawEventType.DRAWSTART,this.sketchFeature_))},t.prototype.modifyDrawing_=function(e){for(var t,i,r=this.getMap(),o=this.sketchFeature_.getGeometry(),n=r.getView().getProjection(),s=$e7i2$import$getStrideForLayout(this.geometryLayout_);e.length<s;)e.push(0);(this.mode_===$e7i2$var$Mode.POINT?i=this.sketchCoords_:this.mode_===$e7i2$var$Mode.POLYGON?(i=(t=this.sketchCoords_[0])[t.length-1],this.atFinish_(r.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):i=(t=this.sketchCoords_)[t.length-1],i[0]=e[0],i[1]=e[1],this.geometryFunction_(this.sketchCoords_,o,n),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(e);if(\"Polygon\"===o.getType()&&this.mode_!==$e7i2$var$Mode.POLYGON)this.createOrUpdateCustomSketchLine_(o);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},t.prototype.addToDrawing_=function(e){var t,i,r=this.sketchFeature_.getGeometry(),o=this.getMap().getView().getProjection(),n=this.mode_;n===$e7i2$var$Mode.LINE_STRING||n===$e7i2$var$Mode.CIRCLE?(this.finishCoordinate_=e.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(e.slice()),this.geometryFunction_(i,r,o)):n===$e7i2$var$Mode.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(e.slice()),t&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,r,o)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),t&&this.finishDrawing()},t.prototype.removeLastPoint=function(){if(this.sketchFeature_){var e,t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r=this.mode_;if(r===$e7i2$var$Mode.LINE_STRING||r===$e7i2$var$Mode.CIRCLE){if((e=this.sketchCoords_).splice(-2,1),e.length>=2){this.finishCoordinate_=e[e.length-2].slice();var o=this.finishCoordinate_.slice();e[e.length-1]=o,this.createOrUpdateSketchPoint_(o)}this.geometryFunction_(e,t,i),\"Polygon\"===t.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(r===$e7i2$var$Mode.POLYGON){(e=this.sketchCoords_[0]).splice(-2,1);var n=this.sketchLine_.getGeometry();if(e.length>=2){o=e[e.length-2].slice();e[e.length-1]=o,this.createOrUpdateSketchPoint_(o)}n.setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t,i)}1===e.length&&this.abortDrawing(),this.updateSketchFeatures_()}},t.prototype.finishDrawing=function(){var e=this.abortDrawing_();if(e){var t=this.sketchCoords_,i=e.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===$e7i2$var$Mode.LINE_STRING?(t.pop(),this.geometryFunction_(t,i,r)):this.mode_===$e7i2$var$Mode.POLYGON&&(t[0].pop(),this.geometryFunction_(t,i,r),t=i.getCoordinates()),\"MultiPoint\"===this.type_?e.setGeometry(new $e7i2$import$MultiPoint([t])):\"MultiLineString\"===this.type_?e.setGeometry(new $e7i2$import$MultiLineString([t])):\"MultiPolygon\"===this.type_&&e.setGeometry(new $e7i2$import$MultiPolygon([t])),this.dispatchEvent(new $e7i2$export$DrawEvent($e7i2$var$DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}},t.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),e},t.prototype.abortDrawing=function(){var e=this.abortDrawing_();e&&this.dispatchEvent(new $e7i2$export$DrawEvent($e7i2$var$DrawEventType.DRAWABORT,e))},t.prototype.appendCoordinates=function(e){var t,i=this.mode_,r=!this.sketchFeature_;if(r&&this.startDrawing_(e[0]),i===$e7i2$var$Mode.LINE_STRING||i===$e7i2$var$Mode.CIRCLE)t=this.sketchCoords_;else{if(i!==$e7i2$var$Mode.POLYGON)return;t=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}r&&t.shift(),t.pop();for(var o=0;o<e.length;o++)this.addToDrawing_(e[o]);var n=e[e.length-1];this.addToDrawing_(n),this.modifyDrawing_(n)},t.prototype.extend=function(e){var t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new $e7i2$import$Feature(new $e7i2$import$Point(i)),this.updateSketchFeatures_(),this.dispatchEvent(new $e7i2$export$DrawEvent($e7i2$var$DrawEventType.DRAWSTART,this.sketchFeature_))},t.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)},t.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing(),this.overlay_.setMap(t?e:null)},t}($e7i2$import$PointerInteraction);function $e7i2$var$getDefaultStyleFunction(){var e=$e7i2$import$createEditingStyle();return function(t,i){return e[t.getGeometry().getType()]}}function $e7i2$export$createRegularPolygon(e,t){return function(i,r,o){var n=$e7i2$import$fromUserCoordinate(i[0],o),s=$e7i2$import$fromUserCoordinate(i[i.length-1],o),a=Math.sqrt($e7i2$import$squaredCoordinateDistance(n,s)),h=r||$e7i2$import$fromCircle(new $e7i2$import$Circle(n),e),$=t;if(!t&&0!==t){var c=s[0]-n[0],d=s[1]-n[1];$=Math.atan2(d,c)}$e7i2$import$makeRegular(h,n,a,$);var p=$e7i2$import$getUserProjection();return p&&h.transform(o,p),h}}function $e7i2$export$createBox(){return function(e,t,i){var r=$e7i2$import$boundingExtent([e[0],e[e.length-1]].map(function(e){return $e7i2$import$fromUserCoordinate(e,i)})),o=[[$e7i2$import$getBottomLeft(r),$e7i2$import$getBottomRight(r),$e7i2$import$getTopRight(r),$e7i2$import$getTopLeft(r),$e7i2$import$getBottomLeft(r)]],n=t;n?n.setCoordinates(o):n=new $e7i2$import$Polygon(o);var s=$e7i2$import$getUserProjection();return s&&n.transform(i,s),n}}function $e7i2$var$getMode(e){switch(e){case\"Point\":case\"MultiPoint\":return $e7i2$var$Mode.POINT;case\"LineString\":case\"MultiLineString\":return $e7i2$var$Mode.LINE_STRING;case\"Polygon\":case\"MultiPolygon\":return $e7i2$var$Mode.POLYGON;case\"Circle\":return $e7i2$var$Mode.CIRCLE;default:throw new Error(\"Invalid type: \"+e)}}$e7i2$exports.createRegularPolygon=$e7i2$export$createRegularPolygon,$e7i2$exports.createBox=$e7i2$export$createBox,$e7i2$exports.default=$e7i2$export$default;"},"sourceMaps":null,"error":null,"hash":"2aec58dd0421768d4b3c71564ef58661","cacheData":{"env":{},"imports":{"$e7i2$import$Circle":["../geom/Circle.js","default"],"$e7i2$import$Event":["../events/Event.js","default"],"$e7i2$import$EventType":["../events/EventType.js","default"],"$e7i2$import$Feature":["../Feature.js","default"],"$e7i2$import$GeometryLayout":["../geom/GeometryLayout.js","default"],"$e7i2$import$InteractionProperty":["./Property.js","default"],"$e7i2$import$LineString":["../geom/LineString.js","default"],"$e7i2$import$MapBrowserEvent":["../MapBrowserEvent.js","default"],"$e7i2$import$MapBrowserEventType":["../MapBrowserEventType.js","default"],"$e7i2$import$MultiLineString":["../geom/MultiLineString.js","default"],"$e7i2$import$MultiPoint":["../geom/MultiPoint.js","default"],"$e7i2$import$MultiPolygon":["../geom/MultiPolygon.js","default"],"$e7i2$import$Point":["../geom/Point.js","default"],"$e7i2$import$PointerInteraction":["./Pointer.js","default"],"$e7i2$import$Polygon":["../geom/Polygon.js","default"],"$e7i2$import$fromCircle":["../geom/Polygon.js","fromCircle"],"$e7i2$import$makeRegular":["../geom/Polygon.js","makeRegular"],"$e7i2$import$VectorLayer":["../layer/Vector.js","default"],"$e7i2$import$VectorSource":["../source/Vector.js","default"],"$e7i2$import$FALSE":["../functions.js","FALSE"],"$e7i2$import$TRUE":["../functions.js","TRUE"],"$e7i2$import$always":["../events/condition.js","always"],"$e7i2$import$noModifierKeys":["../events/condition.js","noModifierKeys"],"$e7i2$import$shiftKeyOnly":["../events/condition.js","shiftKeyOnly"],"$e7i2$import$boundingExtent":["../extent.js","boundingExtent"],"$e7i2$import$getBottomLeft":["../extent.js","getBottomLeft"],"$e7i2$import$getBottomRight":["../extent.js","getBottomRight"],"$e7i2$import$getTopLeft":["../extent.js","getTopLeft"],"$e7i2$import$getTopRight":["../extent.js","getTopRight"],"$e7i2$import$createEditingStyle":["../style/Style.js","createEditingStyle"],"$e7i2$import$fromUserCoordinate":["../proj.js","fromUserCoordinate"],"$e7i2$import$getUserProjection":["../proj.js","getUserProjection"],"$e7i2$import$getStrideForLayout":["../geom/SimpleGeometry.js","getStrideForLayout"],"$e7i2$import$squaredCoordinateDistance":["../coordinate.js","squaredDistance"]},"exports":{"DrawEvent":"$e7i2$export$DrawEvent","createRegularPolygon":"$e7i2$export$createRegularPolygon","createBox":"$e7i2$export$createBox","default":"$e7i2$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}