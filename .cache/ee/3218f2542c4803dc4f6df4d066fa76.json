{"id":"jtH1","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/ol/package.json","includedInParent":true,"mtime":1679700665093},{"name":"./DataTile.js","loc":{"line":19,"column":21,"index":821},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/GeoTIFF.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/DataTile.js"},{"name":"../tilegrid/TileGrid.js","loc":{"line":20,"column":21,"index":859},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/GeoTIFF.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/tilegrid/TileGrid.js"},{"name":"geotiff","loc":{"line":21,"column":98,"index":984},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/GeoTIFF.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/geotiff.js"},{"name":"../proj.js","loc":{"line":22,"column":88,"index":1083},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/GeoTIFF.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/proj.js"},{"name":"../math.js","loc":{"line":23,"column":22,"index":1119},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/GeoTIFF.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/math.js"},{"name":"../extent.js","loc":{"line":24,"column":43,"index":1176},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/GeoTIFF.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/extent.js"},{"name":"../proj/Units.js","loc":{"line":25,"column":42,"index":1234},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/GeoTIFF.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/proj/Units.js"}],"generated":{"js":"var $jtH1$exports={};$parcel$require(\"jtH1\",\"./DataTile.js\"),$parcel$require(\"jtH1\",\"../tilegrid/TileGrid.js\"),$parcel$require(\"jtH1\",\"geotiff\"),$parcel$require(\"jtH1\",\"../proj.js\"),$parcel$require(\"jtH1\",\"../math.js\"),$parcel$require(\"jtH1\",\"../extent.js\"),$parcel$require(\"jtH1\",\"../proj/Units.js\");var $jtH1$var$workerPool,$jtH1$var$__extends=$jtH1$exports&&$jtH1$exports.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Class extends value \"+String(e)+\" is not a constructor or null\");function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),$jtH1$var$STATISTICS_MAXIMUM=\"STATISTICS_MAXIMUM\",$jtH1$var$STATISTICS_MINIMUM=\"STATISTICS_MINIMUM\";function $jtH1$var$getWorkerPool(){return $jtH1$var$workerPool||($jtH1$var$workerPool=new $jtH1$import$Pool),$jtH1$var$workerPool}function $jtH1$var$getBoundingBox(t){try{return t.getBoundingBox()}catch(e){var r=t.fileDirectory;return[0,0,r.ImageWidth,r.ImageLength]}}function $jtH1$var$getOrigin(t){try{return t.getOrigin().slice(0,2)}catch(r){return[0,t.fileDirectory.ImageLength]}}function $jtH1$var$getResolutions(t,r){try{return t.getResolution(r)}catch(e){return[r.fileDirectory.ImageWidth/t.fileDirectory.ImageWidth,r.fileDirectory.ImageHeight/t.fileDirectory.ImageHeight]}}function $jtH1$var$getProjection(t){var r=t.geoKeys;if(!r)return null;if(r.ProjectedCSTypeGeoKey){var e=\"EPSG:\"+r.ProjectedCSTypeGeoKey;if(!(o=$jtH1$import$getCachedProjection(e)))(a=$jtH1$import$unitsFromCode(r.ProjLinearUnitsGeoKey))&&(o=new $jtH1$import$Projection({code:e,units:a}));return o}if(r.GeographicTypeGeoKey){var o,a;e=\"EPSG:\"+r.GeographicTypeGeoKey;if(!(o=$jtH1$import$getCachedProjection(e)))(a=$jtH1$import$unitsFromCode(r.GeogAngularUnitsGeoKey))&&(o=new $jtH1$import$Projection({code:e,units:a}));return o}return null}function $jtH1$var$getImagesForTIFF(t){return t.getImageCount().then(function(r){for(var e=new Array(r),o=0;o<r;++o)e[o]=t.getImage(o);return Promise.all(e)})}function $jtH1$var$getImagesForSource(t,r){return(t.blob?$jtH1$import$tiffFromBlob(t.blob):t.overviews?$jtH1$import$tiffFromUrls(t.url,t.overviews,r):$jtH1$import$tiffFromUrl(t.url,r)).then($jtH1$var$getImagesForTIFF)}function $jtH1$var$assertEqual(t,r,e,o,a){if(Array.isArray(t)){var n=t.length;if(!Array.isArray(r)||n!=r.length){var i=new Error(o);throw a(i),i}for(var s=0;s<n;++s)$jtH1$var$assertEqual(t[s],r[s],e,o,a)}else if(r=r,Math.abs(t-r)>e*t)throw new Error(o)}function $jtH1$var$getMinForDataType(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?1.2e-38:0}function $jtH1$var$getMaxForDataType(t){return t instanceof Int8Array?127:t instanceof Uint8Array?255:t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?3.4e38:255}var $jtH1$export$default=function(t){function r(r){var e=t.call(this,{state:\"loading\",tileGrid:null,projection:null,opaque:r.opaque,transition:r.transition,interpolate:!1!==r.interpolate,wrapX:r.wrapX})||this;e.sourceInfo_=r.sources;var o=e.sourceInfo_.length;e.sourceOptions_=r.sourceOptions,e.sourceImagery_=new Array(o),e.resolutionFactors_=new Array(o),e.samplesPerPixel_,e.nodataValues_,e.metadata_,e.normalize_=!1!==r.normalize,e.addAlpha_=!1,e.error_=null,e.readMethod_=r.convertToRGB?\"readRGB\":\"readRasters\",e.setKey(e.sourceInfo_.map(function(t){return t.url}).join(\",\"));for(var a=e,n=new Array(o),i=0;i<o;++i)n[i]=$jtH1$var$getImagesForSource(e.sourceInfo_[i],e.sourceOptions_);return Promise.all(n).then(function(t){a.configure_(t)}).catch(function(t){console.error(t),a.error_=t,a.setState(\"error\")}),e}return $jtH1$var$__extends(r,t),r.prototype.getError=function(){return this.error_},r.prototype.configure_=function(t){for(var r,e,o,a,n,i=new Array(t.length),s=new Array(t.length),$=new Array(t.length),l=0,c=t.length,u=function(c){var u=t[c],h=u.length,v=void 0,g=void 0,p=new Array(h),j=new Array(h),d=new Array(h);s[c]=new Array(h),$[c]=new Array(h);for(var y=0;y<h;++y){var m=u[y],H=m.getGDALNoData();$[c][y]=m.getGDALMetadata(0),s[c][y]=H;var _=f.sourceInfo_[c].bands;i[c]=_?_.length:m.getSamplesPerPixel();var I=h-(y+1);v||(v=$jtH1$var$getBoundingBox(m)),g||(g=$jtH1$var$getOrigin(m));var A=$jtH1$var$getResolutions(m,u[0]);d[I]=A[0];var T=[m.getTileWidth(),m.getTileHeight()];p[I]=T;var w=A[0]/Math.abs(A[1]);j[I]=[T[0],T[1]/w]}if(r?$jtH1$import$getIntersection(r,v,r):r=v,e){var M=\"Origin mismatch for source \".concat(c,\", got [\").concat(g,\"] but expected [\").concat(e,\"]\");$jtH1$var$assertEqual(e,g,0,M,f.viewRejector)}else e=g;if(n){n.length-l>d.length&&(l=n.length-d.length);var S=n[n.length-1]/d[d.length-1];f.resolutionFactors_[c]=S;var P=d.map(function(t){return t*S});M=\"Resolution mismatch for source \".concat(c,\", got [\").concat(P,\"] but expected [\").concat(n,\"]\");$jtH1$var$assertEqual(n.slice(l,n.length),P,.02,M,f.viewRejector)}else n=d,f.resolutionFactors_[c]=1;o?$jtH1$var$assertEqual(o.slice(l,o.length),j,.01,\"Tile size mismatch for source \".concat(c),f.viewRejector):o=j,a?$jtH1$var$assertEqual(a.slice(l,a.length),p,0,\"Tile size mismatch for source \".concat(c),f.viewRejector):a=p,f.sourceImagery_[c]=u.reverse()},f=this,h=0;h<c;++h)u(h);for(var v=0,g=this.sourceImagery_.length;v<g;++v)for(var p=this.sourceImagery_[v];p.length<n.length;)p.unshift(void 0);if(!this.getProjection()){var j=t[0];for(v=j.length-1;v>=0;--v){var d=$jtH1$var$getProjection(j[v]);if(d){this.projection=d;break}}}this.samplesPerPixel_=i,this.nodataValues_=s,this.metadata_=$;t:for(h=0;h<c;++h){if(void 0!==this.sourceInfo_[h].nodata){this.addAlpha_=!0;break}var y=s[h],m=this.sourceInfo_[h].bands;if(m){for(v=0;v<m.length;++v)if(null!==y[m[v]-1]){this.addAlpha_=!0;break t}}else for(var H=0;H<y.length;++H)if(null!==y[H]){this.addAlpha_=!0;break t}}var _=this.addAlpha_?1:0;this.bandCount=i.reduce(function(t,r){return t+=r},0)+_;var I=new $jtH1$import$TileGrid({extent:r,minZoom:l,origin:e,resolutions:n,tileSizes:o});this.tileGrid=I,this.setTileSizes(a),this.setLoader(this.loadTile_.bind(this)),this.setState(\"ready\"),this.viewResolver({projection:this.projection,resolutions:n,center:$jtH1$import$toUserCoordinate($jtH1$import$getCenter(r),this.projection),extent:$jtH1$import$toUserExtent(r,this.projection),zoom:0})},r.prototype.loadTile_=function(t,r,e){for(var o=this.getTileSize(t),a=this.sourceImagery_.length,n=new Array(a),i=this.addAlpha_,s=this.bandCount,$=this.samplesPerPixel_,l=this.nodataValues_,c=this.sourceInfo_,u=function(a){var i=c[a],s=f.resolutionFactors_[a],$=[Math.round(r*(o[0]*s)),Math.round(e*(o[1]*s)),Math.round((r+1)*(o[0]*s)),Math.round((e+1)*(o[1]*s))],u=f.sourceImagery_[a][t],h=void 0;i.bands&&(h=i.bands.map(function(t){return t-1}));var v=void 0;v=\"nodata\"in i&&null!==i.nodata?i.nodata:h?h.map(function(t){return l[a][t]}):l[a],n[a]=u[f.readMethod_]({window:$,width:o[0],height:o[1],samples:h,fillValue:v,pool:$jtH1$var$getWorkerPool(),interleave:!1})},f=this,h=0;h<a;++h)u(h);var v=o[0]*o[1],g=v*s,p=this.normalize_,j=this.metadata_;return Promise.all(n).then(function(t){var r;r=p?new Uint8Array(g):new Float32Array(g);for(var e=0,o=0;o<v;++o){for(var n=i,s=0;s<a;++s){var u=c[s],f=u.min,h=u.max,d=void 0,y=void 0;if(p){var m=j[s][0];void 0===f&&(f=m&&$jtH1$var$STATISTICS_MINIMUM in m?parseFloat(m[$jtH1$var$STATISTICS_MINIMUM]):$jtH1$var$getMinForDataType(t[s][0])),void 0===h&&(h=m&&$jtH1$var$STATISTICS_MAXIMUM in m?parseFloat(m[$jtH1$var$STATISTICS_MAXIMUM]):$jtH1$var$getMaxForDataType(t[s][0])),y=-f*(d=255/(h-f))}for(var H=0;H<$[s];++H){var _=t[s][H][o],I=void 0;if(I=p?$jtH1$import$clamp(d*_+y,0,255):_,i){var A=u.nodata;if(void 0===A){var T=void 0;T=u.bands?u.bands[H]-1:H,A=l[s][T]}var w=isNaN(A);(!w&&_!==A||w&&!isNaN(_))&&(n=!1,r[e]=I)}else r[e]=I;e++}}i&&(n||(r[e]=255),e++)}return r}).catch(function(t){throw console.error(t),t})},r}($jtH1$import$DataTile);$jtH1$export$default.prototype.getView,$jtH1$exports.default=$jtH1$export$default;"},"sourceMaps":null,"error":null,"hash":"1697aab4bc81dfb38b27d9fde22747b5","cacheData":{"env":{},"imports":{"$jtH1$import$DataTile":["./DataTile.js","default"],"$jtH1$import$TileGrid":["../tilegrid/TileGrid.js","default"],"$jtH1$import$Pool":["geotiff","Pool"],"$jtH1$import$tiffFromBlob":["geotiff","fromBlob"],"$jtH1$import$tiffFromUrl":["geotiff","fromUrl"],"$jtH1$import$tiffFromUrls":["geotiff","fromUrls"],"$jtH1$import$Projection":["../proj.js","Projection"],"$jtH1$import$getCachedProjection":["../proj.js","get"],"$jtH1$import$toUserCoordinate":["../proj.js","toUserCoordinate"],"$jtH1$import$toUserExtent":["../proj.js","toUserExtent"],"$jtH1$import$clamp":["../math.js","clamp"],"$jtH1$import$getCenter":["../extent.js","getCenter"],"$jtH1$import$getIntersection":["../extent.js","getIntersection"],"$jtH1$import$unitsFromCode":["../proj/Units.js","fromCode"]},"exports":{"default":"$jtH1$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}