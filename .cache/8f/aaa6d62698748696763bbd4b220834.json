{"id":"XCOy","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/ol/package.json","includedInParent":true,"mtime":1679700665093},{"name":"../events/Target.js","loc":{"line":19,"column":24,"index":825},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/style/IconImage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/Target.js"},{"name":"../events/EventType.js","loc":{"line":20,"column":22,"index":870},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/style/IconImage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/EventType.js"},{"name":"../ImageState.js","loc":{"line":21,"column":23,"index":919},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/style/IconImage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/ImageState.js"},{"name":"../color.js","loc":{"line":22,"column":25,"index":964},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/style/IconImage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/color.js"},{"name":"../dom.js","loc":{"line":23,"column":38,"index":1017},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/style/IconImage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/dom.js"},{"name":"./IconImageCache.js","loc":{"line":24,"column":41,"index":1071},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/style/IconImage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/style/IconImageCache.js"},{"name":"../Image.js","loc":{"line":25,"column":28,"index":1122},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/style/IconImage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/Image.js"}],"generated":{"js":"var $XCOy$exports={};$parcel$require(\"XCOy\",\"../events/Target.js\"),$parcel$require(\"XCOy\",\"../events/EventType.js\"),$parcel$require(\"XCOy\",\"../ImageState.js\"),$parcel$require(\"XCOy\",\"../color.js\"),$parcel$require(\"XCOy\",\"../dom.js\"),$parcel$require(\"XCOy\",\"./IconImageCache.js\"),$parcel$require(\"XCOy\",\"../Image.js\");var $XCOy$var$__extends=$XCOy$exports&&$XCOy$exports.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if(\"function\"!=typeof i&&null!==i)throw new TypeError(\"Class extends value \"+String(i)+\" is not a constructor or null\");function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),$XCOy$var$taintedTestContext=null,$XCOy$export$default=function(t){function e(e,i,a,n,r,o){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==n&&(s.image_.crossOrigin=n),s.canvas_={},s.color_=o,s.unlisten_=null,s.imageState_=r,s.size_=a,s.src_=i,s.tainted_,s}return $XCOy$var$__extends(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===$XCOy$import$ImageState.LOADED){$XCOy$var$taintedTestContext||($XCOy$var$taintedTestContext=$XCOy$import$createCanvasContext2D(1,1)),$XCOy$var$taintedTestContext.drawImage(this.image_,0,0);try{$XCOy$var$taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch(t){$XCOy$var$taintedTestContext=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent($XCOy$import$EventType.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=$XCOy$import$ImageState.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=$XCOy$import$ImageState.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=$XCOy$import$createCanvasContext2D(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==$XCOy$import$ImageState.IDLE){this.imageState_=$XCOy$import$ImageState.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=$XCOy$import$listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&this.imageState_===$XCOy$import$ImageState.LOADED){var e=document.createElement(\"canvas\");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext(\"2d\");if(i.scale(t,t),i.drawImage(this.image_,0,0),i.globalCompositeOperation=\"multiply\",\"multiply\"===i.globalCompositeOperation||this.isTainted_())i.fillStyle=$XCOy$import$asString(this.color_),i.fillRect(0,0,e.width/t,e.height/t),i.globalCompositeOperation=\"destination-in\",i.drawImage(this.image_,0,0);else{for(var a=i.getImageData(0,0,e.width,e.height),n=a.data,r=this.color_[0]/255,o=this.color_[1]/255,s=this.color_[2]/255,h=this.color_[3],$=0,c=n.length;$<c;$+=4)n[$]*=r,n[$+1]*=o,n[$+2]*=s,n[$+3]*=h;i.putImageData(a,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}($XCOy$import$EventTarget);function $XCOy$export$get(t,e,i,a,n,r){var o=$XCOy$import$iconImageCache.get(e,a,r);return o||(o=new $XCOy$export$default(t,e,i,a,n,r),$XCOy$import$iconImageCache.set(e,a,r,o)),o}$XCOy$exports.get=$XCOy$export$get,$XCOy$exports.default=$XCOy$export$default;"},"sourceMaps":null,"error":null,"hash":"705c02611f897b85b1befc249e0d7520","cacheData":{"env":{},"imports":{"$XCOy$import$EventTarget":["../events/Target.js","default"],"$XCOy$import$EventType":["../events/EventType.js","default"],"$XCOy$import$ImageState":["../ImageState.js","default"],"$XCOy$import$asString":["../color.js","asString"],"$XCOy$import$createCanvasContext2D":["../dom.js","createCanvasContext2D"],"$XCOy$import$iconImageCache":["./IconImageCache.js","shared"],"$XCOy$import$listenImage":["../Image.js","listenImage"]},"exports":{"get":"$XCOy$export$get","default":"$XCOy$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}