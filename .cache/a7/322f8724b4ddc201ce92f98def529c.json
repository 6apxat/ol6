{"id":"pZKE","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/ol/package.json","includedInParent":true,"mtime":1679700665093},{"name":"./Instruction.js","loc":{"line":4,"column":30,"index":75},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas/Executor.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas/Instruction.js"},{"name":"./TextBuilder.js","loc":{"line":5,"column":27,"index":122},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas/Executor.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas/TextBuilder.js"},{"name":"../../has.js","loc":{"line":6,"column":40,"index":182},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas/Executor.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/has.js"},{"name":"../../transform.js","loc":{"line":7,"column":136,"index":334},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas/Executor.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/transform.js"},{"name":"../../extent.js","loc":{"line":8,"column":56,"index":412},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas/Executor.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/extent.js"},{"name":"../canvas.js","loc":{"line":9,"column":134,"index":565},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas/Executor.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas.js"},{"name":"../../geom/flat/textpath.js","loc":{"line":10,"column":31,"index":612},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas/Executor.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/flat/textpath.js"},{"name":"../../array.js","loc":{"line":11,"column":23,"index":666},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas/Executor.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/array.js"},{"name":"../../geom/flat/length.js","loc":{"line":12,"column":33,"index":717},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas/Executor.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/flat/length.js"},{"name":"../../geom/flat/transform.js","loc":{"line":13,"column":28,"index":774},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/render/canvas/Executor.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/flat/transform.js"}],"generated":{"js":"var $pZKE$exports={};$parcel$require(\"pZKE\",\"./Instruction.js\"),$parcel$require(\"pZKE\",\"./TextBuilder.js\"),$parcel$require(\"pZKE\",\"../../has.js\"),$parcel$require(\"pZKE\",\"../../transform.js\"),$parcel$require(\"pZKE\",\"../../extent.js\"),$parcel$require(\"pZKE\",\"../canvas.js\"),$parcel$require(\"pZKE\",\"../../geom/flat/textpath.js\"),$parcel$require(\"pZKE\",\"../../array.js\"),$parcel$require(\"pZKE\",\"../../geom/flat/length.js\"),$parcel$require(\"pZKE\",\"../../geom/flat/transform.js\");var $pZKE$var$tmpExtent=$pZKE$import$createEmpty(),$pZKE$var$p1=[],$pZKE$var$p2=[],$pZKE$var$p3=[],$pZKE$var$p4=[];function $pZKE$var$getDeclutterBox(t){return t[3].declutterBox}var $pZKE$var$rtlRegEx=new RegExp(\"[\"+String.fromCharCode(1425)+\"-\"+String.fromCharCode(2303)+String.fromCharCode(64285)+\"-\"+String.fromCharCode(65023)+String.fromCharCode(65136)+\"-\"+String.fromCharCode(65276)+String.fromCharCode(67584)+\"-\"+String.fromCharCode(69631)+String.fromCharCode(124928)+\"-\"+String.fromCharCode(126975)+\"]\");function $pZKE$var$horizontalTextAlign(t,e){return\"start\"!==e&&\"end\"!==e||$pZKE$var$rtlRegEx.test(t)||(e=\"start\"===e?\"left\":\"right\"),$pZKE$import$TEXT_ALIGN[e]}function $pZKE$var$createTextChunks(t,e,r){return r>0&&t.push(\"\\n\",\"\"),t.push(e,\"\"),t}var $pZKE$export$default=function(){function t(t,e,r,i){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=$pZKE$import$createTransform(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,r,i){var a=t+e+r+i;if(this.labels_[a])return this.labels_[a];var o=i?this.strokeStates[i]:null,n=r?this.fillStates[r]:null,$=this.textStates[e],p=this.pixelRatio,s=[$.scale[0]*p,$.scale[1]*p],l=Array.isArray(t),h=$.justify?$pZKE$import$TEXT_ALIGN[$.justify]:$pZKE$var$horizontalTextAlign(Array.isArray(t)?t[0]:t,$.textAlign||$pZKE$import$defaultTextAlign),c=i&&o.lineWidth?o.lineWidth:0,E=l?t:t.split(\"\\n\").reduce($pZKE$var$createTextChunks,[]),u=$pZKE$import$getTextDimensions($,E),v=u.width,m=u.height,d=u.widths,K=u.heights,f=u.lineWidths,Z=v+c,g=[],x=(Z+2)*s[0],_=(m+c)*s[1],T={width:x<0?Math.floor(x):Math.ceil(x),height:_<0?Math.floor(_):Math.ceil(_),contextInstructions:g};(1==s[0]&&1==s[1]||g.push(\"scale\",s),i)&&(g.push(\"strokeStyle\",o.strokeStyle),g.push(\"lineWidth\",c),g.push(\"lineCap\",o.lineCap),g.push(\"lineJoin\",o.lineJoin),g.push(\"miterLimit\",o.miterLimit),($pZKE$import$WORKER_OFFSCREEN_CANVAS?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(g.push(\"setLineDash\",[o.lineDash]),g.push(\"lineDashOffset\",o.lineDashOffset)));r&&g.push(\"fillStyle\",n.fillStyle),g.push(\"textBaseline\",\"middle\"),g.push(\"textAlign\",\"center\");for(var C,y=.5-h,S=h*Z+y*c,I=[],b=[],k=0,L=0,w=0,A=0,R=0,O=E.length;R<O;R+=2){var D=E[R];if(\"\\n\"!==D){var M=E[R+1]||$.font;M!==C&&(i&&I.push(\"font\",M),r&&b.push(\"font\",M),C=M),k=Math.max(k,K[w]);var B=[D,S+y*d[w]+h*(d[w]-f[A]),.5*(c+k)+L];S+=d[w],i&&I.push(\"strokeText\",B),r&&b.push(\"fillText\",B),++w}else L+=k,k=0,S=h*Z+y*c,++A}return Array.prototype.push.apply(g,I),Array.prototype.push.apply(g,b),this.labels_[a]=T,T},t.prototype.replayTextBackground_=function(t,e,r,i,a,o,n){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),n&&(this.setStrokeStyle_(t,n),t.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(t,e,r,i,a,o,n,$,p,s,l,h,c,E,u,v){var m,d=r-(n*=h[0]),K=i-($*=h[1]),f=a+p>t?t-p:a,Z=o+s>e?e-s:o,g=E[3]+f*h[0]+E[1],x=E[0]+Z*h[1]+E[2],_=d-E[3],T=K-E[0];return(u||0!==l)&&($pZKE$var$p1[0]=_,$pZKE$var$p4[0]=_,$pZKE$var$p1[1]=T,$pZKE$var$p2[1]=T,$pZKE$var$p2[0]=_+g,$pZKE$var$p3[0]=$pZKE$var$p2[0],$pZKE$var$p3[1]=T+x,$pZKE$var$p4[1]=$pZKE$var$p3[1]),0!==l?(m=$pZKE$import$composeTransform($pZKE$import$createTransform(),r,i,1,1,l,-r,-i),$pZKE$import$applyTransform(m,$pZKE$var$p1),$pZKE$import$applyTransform(m,$pZKE$var$p2),$pZKE$import$applyTransform(m,$pZKE$var$p3),$pZKE$import$applyTransform(m,$pZKE$var$p4),$pZKE$import$createOrUpdate(Math.min($pZKE$var$p1[0],$pZKE$var$p2[0],$pZKE$var$p3[0],$pZKE$var$p4[0]),Math.min($pZKE$var$p1[1],$pZKE$var$p2[1],$pZKE$var$p3[1],$pZKE$var$p4[1]),Math.max($pZKE$var$p1[0],$pZKE$var$p2[0],$pZKE$var$p3[0],$pZKE$var$p4[0]),Math.max($pZKE$var$p1[1],$pZKE$var$p2[1],$pZKE$var$p3[1],$pZKE$var$p4[1]),$pZKE$var$tmpExtent)):$pZKE$import$createOrUpdate(Math.min(_,_+g),Math.min(T,T+x),Math.max(_,_+g),Math.max(T,T+x),$pZKE$var$tmpExtent),c&&(d=Math.round(d),K=Math.round(K)),{drawImageX:d,drawImageY:K,drawImageW:f,drawImageH:Z,originX:p,originY:s,declutterBox:{minX:$pZKE$var$tmpExtent[0],minY:$pZKE$var$tmpExtent[1],maxX:$pZKE$var$tmpExtent[2],maxY:$pZKE$var$tmpExtent[3],value:v},canvasTransform:m,scale:h}},t.prototype.replayImageOrLabel_=function(t,e,r,i,a,o,n){var $=!(!o&&!n),p=i.declutterBox,s=t.canvas,l=n?n[2]*i.scale[0]/2:0;return p.minX-l<=s.width/e&&p.maxX+l>=0&&p.minY-l<=s.height/e&&p.maxY+l>=0&&($&&this.replayTextBackground_(t,$pZKE$var$p1,$pZKE$var$p2,$pZKE$var$p3,$pZKE$var$p4,o,n),$pZKE$import$drawImageOrLabel(t,i.canvasTransform,a,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=$pZKE$import$applyTransform(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.drawLabelWithPointPlacement_=function(t,e,r,i){var a=this.textStates[e],o=this.createLabel(t,e,i,r),n=this.strokeStates[r],$=this.pixelRatio,p=$pZKE$var$horizontalTextAlign(Array.isArray(t)?t[0]:t,a.textAlign||$pZKE$import$defaultTextAlign),s=$pZKE$import$TEXT_ALIGN[a.textBaseline||$pZKE$import$defaultTextBaseline],l=n&&n.lineWidth?n.lineWidth:0;return{label:o,anchorX:p*(o.width/$-2*a.scale[0])+2*(.5-p)*l,anchorY:s*o.height/$+2*(.5-s)*l}},t.prototype.execute_=function(t,e,r,i,a,o,n,$){var p;this.pixelCoordinates_&&$pZKE$import$equals(r,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=$pZKE$import$transform2D(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),$pZKE$import$transformSetFromArray(this.renderedTransform_,r));for(var s,l,h,c,E,u,v,m,d,K,f,Z,g,x,_,T,C=0,y=i.length,S=0,I=0,b=0,k=null,L=null,w=this.coordinateCache_,A=this.viewRotation_,R=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,O={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:A},D=this.instructions!=i||this.overlaps?0:200;C<y;){var M=i[C];switch(M[0]){case $pZKE$import$CanvasInstruction.BEGIN_GEOMETRY:g=M[1],T=M[3],g.getGeometry()?void 0===n||$pZKE$import$intersects(n,T.getExtent())?++C:C=M[2]+1:C=M[2];break;case $pZKE$import$CanvasInstruction.BEGIN_PATH:I>D&&(this.fill_(t),I=0),b>D&&(t.stroke(),b=0),I||b||(t.beginPath(),c=NaN,E=NaN),++C;break;case $pZKE$import$CanvasInstruction.CIRCLE:var B=p[S=M[1]],W=p[S+1],N=p[S+2]-B,P=p[S+3]-W,X=Math.sqrt(N*N+P*P);t.moveTo(B+X,W),t.arc(B,W,X,0,2*Math.PI,!0),++C;break;case $pZKE$import$CanvasInstruction.CLOSE_PATH:t.closePath(),++C;break;case $pZKE$import$CanvasInstruction.CUSTOM:S=M[1],s=M[2];var Y=M[3],j=M[4],q=6==M.length?M[5]:void 0;O.geometry=Y,O.feature=g,C in w||(w[C]=[]);var F=w[C];q?q(p,S,s,2,F):(F[0]=p[S],F[1]=p[S+1],F.length=2),j(F,O),++C;break;case $pZKE$import$CanvasInstruction.DRAW_IMAGE:S=M[1],s=M[2],m=M[3],l=M[4],h=M[5];var G=M[6],H=M[7],z=M[8],J=M[9],U=M[10],V=M[11],Q=M[12],tt=M[13],et=M[14],rt=M[15];if(!m&&M.length>=20){d=M[19],K=M[20],f=M[21],Z=M[22];var it=this.drawLabelWithPointPlacement_(d,K,f,Z);m=it.label,M[3]=m;var at=M[23];l=(it.anchorX-at)*this.pixelRatio,M[4]=l;var ot=M[24];h=(it.anchorY-ot)*this.pixelRatio,M[5]=h,G=m.height,M[6]=G,tt=m.width,M[13]=tt}var nt=void 0;M.length>25&&(nt=M[25]);var $t=void 0,pt=void 0,st=void 0;M.length>17?($t=M[16],pt=M[17],st=M[18]):($t=$pZKE$import$defaultPadding,pt=!1,st=!1),U&&R?V+=A:U||R||(V-=A);for(var lt=0;S<s;S+=2)if(!(nt&&nt[lt++]<tt/this.pixelRatio)){var ht=[t,e,m,Wt=this.calculateImageOrLabelDimensions_(m.width,m.height,p[S],p[S+1],tt,G,l,h,z,J,V,Q,a,$t,pt||st,g),H,pt?k:null,st?L:null];if($){if(\"none\"===et)continue;if(\"obstacle\"===et){$.insert(Wt.declutterBox);continue}var ct=void 0,Et=void 0;if(rt){var ut=s-S;if(!rt[ut]){rt[ut]=ht;continue}if(ct=rt[ut],delete rt[ut],Et=$pZKE$var$getDeclutterBox(ct),$.collides(Et))continue}if($.collides(Wt.declutterBox))continue;ct&&($.insert(Et),this.replayImageOrLabel_.apply(this,ct)),$.insert(Wt.declutterBox)}this.replayImageOrLabel_.apply(this,ht)}++C;break;case $pZKE$import$CanvasInstruction.DRAW_CHARS:var vt=M[1],mt=M[2],dt=M[3],Kt=M[4];Z=M[5];var ft=M[6],Zt=M[7],gt=M[8];f=M[9];var xt=M[10];d=M[11],K=M[12];var _t=[M[13],M[13]],Tt=this.textStates[K],Ct=Tt.font,yt=[Tt.scale[0]*Zt,Tt.scale[1]*Zt],St=void 0;Ct in this.widths_?St=this.widths_[Ct]:(St={},this.widths_[Ct]=St);var It=$pZKE$import$lineStringLength(p,vt,mt,2),bt=Math.abs(yt[0])*$pZKE$import$measureAndCacheTextWidth(Ct,d,St);if(Kt||bt<=It){var kt=this.textStates[K].textAlign,Lt=(It-bt)*$pZKE$import$TEXT_ALIGN[kt],wt=$pZKE$import$drawTextOnPath(p,vt,mt,2,d,Lt,ft,Math.abs(yt[0]),$pZKE$import$measureAndCacheTextWidth,Ct,St,R?0:this.viewRotation_);t:if(wt){var At=[],Rt=void 0,Ot=void 0,Dt=void 0,Mt=void 0,Bt=void 0;if(f)for(Rt=0,Ot=wt.length;Rt<Ot;++Rt){Dt=(Bt=wt[Rt])[4],Mt=this.createLabel(Dt,K,\"\",f),l=Bt[2]+(yt[0]<0?-xt:xt),h=dt*Mt.height+2*(.5-dt)*xt*yt[1]/yt[0]-gt;var Wt=this.calculateImageOrLabelDimensions_(Mt.width,Mt.height,Bt[0],Bt[1],Mt.width,Mt.height,l,h,0,0,Bt[3],_t,!1,$pZKE$import$defaultPadding,!1,g);if($&&$.collides(Wt.declutterBox))break t;At.push([t,e,Mt,Wt,1,null,null])}if(Z)for(Rt=0,Ot=wt.length;Rt<Ot;++Rt){Dt=(Bt=wt[Rt])[4],Mt=this.createLabel(Dt,K,Z,\"\"),l=Bt[2],h=dt*Mt.height-gt;Wt=this.calculateImageOrLabelDimensions_(Mt.width,Mt.height,Bt[0],Bt[1],Mt.width,Mt.height,l,h,0,0,Bt[3],_t,!1,$pZKE$import$defaultPadding,!1,g);if($&&$.collides(Wt.declutterBox))break t;At.push([t,e,Mt,Wt,1,null,null])}$&&$.load(At.map($pZKE$var$getDeclutterBox));for(var Nt=0,Pt=At.length;Nt<Pt;++Nt)this.replayImageOrLabel_.apply(this,At[Nt])}}++C;break;case $pZKE$import$CanvasInstruction.END_GEOMETRY:if(void 0!==o){var Xt=o(g=M[1],T);if(Xt)return Xt}++C;break;case $pZKE$import$CanvasInstruction.FILL:D?I++:this.fill_(t),++C;break;case $pZKE$import$CanvasInstruction.MOVE_TO_LINE_TO:for(S=M[1],s=M[2],x=p[S],v=(_=p[S+1])+.5|0,(u=x+.5|0)===c&&v===E||(t.moveTo(x,_),c=u,E=v),S+=2;S<s;S+=2)u=(x=p[S])+.5|0,v=(_=p[S+1])+.5|0,S!=s-2&&u===c&&v===E||(t.lineTo(x,_),c=u,E=v);++C;break;case $pZKE$import$CanvasInstruction.SET_FILL_STYLE:k=M,this.alignFill_=M[2],I&&(this.fill_(t),I=0,b&&(t.stroke(),b=0)),t.fillStyle=M[1],++C;break;case $pZKE$import$CanvasInstruction.SET_STROKE_STYLE:L=M,b&&(t.stroke(),b=0),this.setStrokeStyle_(t,M),++C;break;case $pZKE$import$CanvasInstruction.STROKE:D?b++:t.stroke(),++C;break;default:++C}}I&&this.fill_(t),b&&t.stroke()},t.prototype.execute=function(t,e,r,i,a,o){this.viewRotation_=i,this.execute_(t,e,r,this.instructions,a,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,e,r,i,a){return this.viewRotation_=r,this.execute_(t,1,e,this.hitDetectionInstructions,!0,i,a)},t}();$pZKE$exports.default=$pZKE$export$default;"},"sourceMaps":null,"error":null,"hash":"fdbfdcf8849ab6a9a5514a2232c81f68","cacheData":{"env":{},"imports":{"$pZKE$import$CanvasInstruction":["./Instruction.js","default"],"$pZKE$import$TEXT_ALIGN":["./TextBuilder.js","TEXT_ALIGN"],"$pZKE$import$WORKER_OFFSCREEN_CANVAS":["../../has.js","WORKER_OFFSCREEN_CANVAS"],"$pZKE$import$applyTransform":["../../transform.js","apply"],"$pZKE$import$composeTransform":["../../transform.js","compose"],"$pZKE$import$createTransform":["../../transform.js","create"],"$pZKE$import$transformSetFromArray":["../../transform.js","setFromArray"],"$pZKE$import$createEmpty":["../../extent.js","createEmpty"],"$pZKE$import$createOrUpdate":["../../extent.js","createOrUpdate"],"$pZKE$import$intersects":["../../extent.js","intersects"],"$pZKE$import$defaultPadding":["../canvas.js","defaultPadding"],"$pZKE$import$defaultTextAlign":["../canvas.js","defaultTextAlign"],"$pZKE$import$defaultTextBaseline":["../canvas.js","defaultTextBaseline"],"$pZKE$import$drawImageOrLabel":["../canvas.js","drawImageOrLabel"],"$pZKE$import$getTextDimensions":["../canvas.js","getTextDimensions"],"$pZKE$import$measureAndCacheTextWidth":["../canvas.js","measureAndCacheTextWidth"],"$pZKE$import$drawTextOnPath":["../../geom/flat/textpath.js","drawTextOnPath"],"$pZKE$import$equals":["../../array.js","equals"],"$pZKE$import$lineStringLength":["../../geom/flat/length.js","lineStringLength"],"$pZKE$import$transform2D":["../../geom/flat/transform.js","transform2D"]},"exports":{"default":"$pZKE$export$default"},"wildcards":[],"sideEffects":false,"isES6Module":true}}