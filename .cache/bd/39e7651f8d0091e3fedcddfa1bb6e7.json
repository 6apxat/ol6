{"id":"IsRZ","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/package.json","includedInParent":true,"mtime":1679700660922},{"name":"./basedecoder.js","loc":{"line":1,"column":24,"index":24},"parent":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/compression/jpeg.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/compression/basedecoder.js"}],"generated":{"js":"var $IsRZ$exports={};function $IsRZ$var$_inherits(r,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,\"prototype\",{writable:!1}),e&&$IsRZ$var$_setPrototypeOf(r,e)}function $IsRZ$var$_setPrototypeOf(r,e){return($IsRZ$var$_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r})(r,e)}function $IsRZ$var$_createSuper(r){var e=$IsRZ$var$_isNativeReflectConstruct();return function(){var t,a=$IsRZ$var$_getPrototypeOf(r);if(e){var n=$IsRZ$var$_getPrototypeOf(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return $IsRZ$var$_possibleConstructorReturn(this,t)}}function $IsRZ$var$_possibleConstructorReturn(r,e){if(e&&(\"object\"===$IsRZ$var$_typeof(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return $IsRZ$var$_assertThisInitialized(r)}function $IsRZ$var$_assertThisInitialized(r){if(void 0===r)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return r}function $IsRZ$var$_isNativeReflectConstruct(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function $IsRZ$var$_getPrototypeOf(r){return($IsRZ$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function $IsRZ$var$_classCallCheck(r,e){if(!(r instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function $IsRZ$var$_defineProperties(r,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(r,$IsRZ$var$_toPropertyKey(a.key),a)}}function $IsRZ$var$_createClass(r,e,t){return e&&$IsRZ$var$_defineProperties(r.prototype,e),t&&$IsRZ$var$_defineProperties(r,t),Object.defineProperty(r,\"prototype\",{writable:!1}),r}function $IsRZ$var$_toPropertyKey(r){var e=$IsRZ$var$_toPrimitive(r,\"string\");return\"symbol\"===$IsRZ$var$_typeof(e)?e:String(e)}function $IsRZ$var$_toPrimitive(r,e){if(\"object\"!==$IsRZ$var$_typeof(r)||null===r)return r;var t=r[Symbol.toPrimitive];if(void 0!==t){var a=t.call(r,e||\"default\");if(\"object\"!==$IsRZ$var$_typeof(a))return a;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(r)}function $IsRZ$var$_typeof(r){return($IsRZ$var$_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&\"function\"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?\"symbol\":typeof r})(r)}$parcel$require(\"IsRZ\",\"./basedecoder.js\");var $IsRZ$var$dctZigZag=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),$IsRZ$var$dctCos1=4017,$IsRZ$var$dctSin1=799,$IsRZ$var$dctCos3=3406,$IsRZ$var$dctSin3=2276,$IsRZ$var$dctCos6=1567,$IsRZ$var$dctSin6=3784,$IsRZ$var$dctSqrt2=5793,$IsRZ$var$dctSqrt1d2=2896;function $IsRZ$var$buildHuffmanTable(r,e){for(var t=0,a=[],n=16;n>0&&!r[n-1];)--n;a.push({children:[],index:0});for(var s,o=a[0],i=0;i<n;i++){for(var $=0;$<r[i];$++){for((o=a.pop()).children[o.index]=e[t];o.index>0;)o=a.pop();for(o.index++,a.push(o);a.length<=i;)a.push(s={children:[],index:0}),o.children[o.index]=s.children,o=s;t++}i+1<n&&(a.push(s={children:[],index:0}),o.children[o.index]=s.children,o=s)}return a[0].children}function $IsRZ$var$decodeScan(r,e,t,a,n,s,o,i,$){var c=t.mcusPerLine,f=t.progressive,v=e,u=e,l=0,d=0;function h(){if(d>0)return l>>--d&1;if(255===(l=r[u++])){var e=r[u++];if(e)throw new Error(\"unexpected marker: \".concat((l<<8|e).toString(16)))}return d=7,l>>>7}function p(r){for(var e,t=r;null!==(e=h());){if(\"number\"==typeof(t=t[e]))return t;if(\"object\"!==$IsRZ$var$_typeof(t))throw new Error(\"invalid huffman sequence\")}return null}function R(r){for(var e=r,t=0;e>0;){var a=h();if(null===a)return;t=t<<1|a,--e}return t}function I(r){var e=R(r);return e>=1<<r-1?e:e+(-1<<r)+1}var Z=0;var b,m=0;function y(r,e,t,a,n){var s=t%c,o=(t/c|0)*r.v+a,i=s*r.h+n;e(r,r.blocks[o][i])}function C(r,e,t){var a=t/r.blocksPerLine|0,n=t%r.blocksPerLine;e(r,r.blocks[a][n])}var w,g,P,S,_,k,T=a.length;k=f?0===s?0===i?function(r,e){var t=p(r.huffmanTableDC),a=0===t?0:I(t)<<$;r.pred+=a,e[0]=r.pred}:function(r,e){e[0]|=h()<<$}:0===i?function(r,e){if(Z>0)Z--;else for(var t=s,a=o;t<=a;){var n=p(r.huffmanTableAC),i=15&n,c=n>>4;if(0===i){if(c<15){Z=R(c)+(1<<c)-1;break}t+=16}else e[$IsRZ$var$dctZigZag[t+=c]]=I(i)*(1<<$),t++}}:function(r,e){for(var t=s,a=o,n=0;t<=a;){var i=$IsRZ$var$dctZigZag[t],c=e[i]<0?-1:1;switch(m){case 0:var f=p(r.huffmanTableAC),v=15&f;if(n=f>>4,0===v)n<15?(Z=R(n)+(1<<n),m=4):(n=16,m=1);else{if(1!==v)throw new Error(\"invalid ACn encoding\");b=I(v),m=n?2:3}continue;case 1:case 2:e[i]?e[i]+=(h()<<$)*c:0==--n&&(m=2===m?3:0);break;case 3:e[i]?e[i]+=(h()<<$)*c:(e[i]=b<<$,m=0);break;case 4:e[i]&&(e[i]+=(h()<<$)*c)}t++}4===m&&0==--Z&&(m=0)}:function(r,e){var t=p(r.huffmanTableDC),a=0===t?0:I(t);r.pred+=a,e[0]=r.pred;for(var n=1;n<64;){var s=p(r.huffmanTableAC),o=15&s,i=s>>4;if(0===o){if(i<15)break;n+=16}else e[$IsRZ$var$dctZigZag[n+=i]]=I(o),n++}};var O,x,q=0;x=1===T?a[0].blocksPerLine*a[0].blocksPerColumn:c*t.mcusPerColumn;for(var j=n||x;q<x;){for(g=0;g<T;g++)a[g].pred=0;if(Z=0,1===T)for(w=a[0],_=0;_<j;_++)C(w,k,q),q++;else for(_=0;_<j;_++){for(g=0;g<T;g++){var A=w=a[g],E=A.h,L=A.v;for(P=0;P<L;P++)for(S=0;S<E;S++)y(w,k,q,P,S)}if(++q===x)break}if(d=0,(O=r[u]<<8|r[u+1])<65280)throw new Error(\"marker was not found\");if(!(O>=65488&&O<=65495))break;u+=2}return u-v}function $IsRZ$var$buildComponentData(r,e){var t=[],a=e.blocksPerLine,n=e.blocksPerColumn,s=a<<3,o=new Int32Array(64),i=new Uint8Array(64);function $(r,t,a){var n,s,o,i,$,c,f,v,u,l,d=e.quantizationTable,h=a;for(l=0;l<64;l++)h[l]=r[l]*d[l];for(l=0;l<8;++l){var p=8*l;0!==h[1+p]||0!==h[2+p]||0!==h[3+p]||0!==h[4+p]||0!==h[5+p]||0!==h[6+p]||0!==h[7+p]?(n=$IsRZ$var$dctSqrt2*h[0+p]+128>>8,s=$IsRZ$var$dctSqrt2*h[4+p]+128>>8,o=h[2+p],i=h[6+p],$=$IsRZ$var$dctSqrt1d2*(h[1+p]-h[7+p])+128>>8,v=$IsRZ$var$dctSqrt1d2*(h[1+p]+h[7+p])+128>>8,c=h[3+p]<<4,f=h[5+p]<<4,u=n-s+1>>1,n=n+s+1>>1,s=u,u=o*$IsRZ$var$dctSin6+i*$IsRZ$var$dctCos6+128>>8,o=o*$IsRZ$var$dctCos6-i*$IsRZ$var$dctSin6+128>>8,i=u,u=$-f+1>>1,$=$+f+1>>1,f=u,u=v+c+1>>1,c=v-c+1>>1,v=u,u=n-i+1>>1,n=n+i+1>>1,i=u,u=s-o+1>>1,s=s+o+1>>1,o=u,u=$*$IsRZ$var$dctSin3+v*$IsRZ$var$dctCos3+2048>>12,$=$*$IsRZ$var$dctCos3-v*$IsRZ$var$dctSin3+2048>>12,v=u,u=c*$IsRZ$var$dctSin1+f*$IsRZ$var$dctCos1+2048>>12,c=c*$IsRZ$var$dctCos1-f*$IsRZ$var$dctSin1+2048>>12,f=u,h[0+p]=n+v,h[7+p]=n-v,h[1+p]=s+f,h[6+p]=s-f,h[2+p]=o+c,h[5+p]=o-c,h[3+p]=i+$,h[4+p]=i-$):(u=$IsRZ$var$dctSqrt2*h[0+p]+512>>10,h[0+p]=u,h[1+p]=u,h[2+p]=u,h[3+p]=u,h[4+p]=u,h[5+p]=u,h[6+p]=u,h[7+p]=u)}for(l=0;l<8;++l){var R=l;0!==h[8+R]||0!==h[16+R]||0!==h[24+R]||0!==h[32+R]||0!==h[40+R]||0!==h[48+R]||0!==h[56+R]?(n=$IsRZ$var$dctSqrt2*h[0+R]+2048>>12,s=$IsRZ$var$dctSqrt2*h[32+R]+2048>>12,o=h[16+R],i=h[48+R],$=$IsRZ$var$dctSqrt1d2*(h[8+R]-h[56+R])+2048>>12,v=$IsRZ$var$dctSqrt1d2*(h[8+R]+h[56+R])+2048>>12,c=h[24+R],f=h[40+R],u=n-s+1>>1,n=n+s+1>>1,s=u,u=o*$IsRZ$var$dctSin6+i*$IsRZ$var$dctCos6+2048>>12,o=o*$IsRZ$var$dctCos6-i*$IsRZ$var$dctSin6+2048>>12,i=u,u=$-f+1>>1,$=$+f+1>>1,f=u,u=v+c+1>>1,c=v-c+1>>1,v=u,u=n-i+1>>1,n=n+i+1>>1,i=u,u=s-o+1>>1,s=s+o+1>>1,o=u,u=$*$IsRZ$var$dctSin3+v*$IsRZ$var$dctCos3+2048>>12,$=$*$IsRZ$var$dctCos3-v*$IsRZ$var$dctSin3+2048>>12,v=u,u=c*$IsRZ$var$dctSin1+f*$IsRZ$var$dctCos1+2048>>12,c=c*$IsRZ$var$dctCos1-f*$IsRZ$var$dctSin1+2048>>12,f=u,h[0+R]=n+v,h[56+R]=n-v,h[8+R]=s+f,h[48+R]=s-f,h[16+R]=o+c,h[40+R]=o-c,h[24+R]=i+$,h[32+R]=i-$):(u=$IsRZ$var$dctSqrt2*a[l+0]+8192>>14,h[0+R]=u,h[8+R]=u,h[16+R]=u,h[24+R]=u,h[32+R]=u,h[40+R]=u,h[48+R]=u,h[56+R]=u)}for(l=0;l<64;++l){var I=128+(h[l]+8>>4);t[l]=I<0?0:I>255?255:I}}for(var c=0;c<n;c++){for(var f=c<<3,v=0;v<8;v++)t.push(new Uint8Array(s));for(var u=0;u<a;u++){$(e.blocks[c][u],i,o);for(var l=0,d=u<<3,h=0;h<8;h++)for(var p=t[f+h],R=0;R<8;R++)p[d+R]=i[l++]}}return t}var $IsRZ$var$JpegStreamReader=function(){function r(){$IsRZ$var$_classCallCheck(this,r),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return $IsRZ$var$_createClass(r,[{key:\"resetFrames\",value:function(){this.frames=[]}},{key:\"parse\",value:function(r){var e=0;function t(){var t=r[e]<<8|r[e+1];return e+=2,t}function a(r){var e,t,a=0,n=0;for(t in r.components)r.components.hasOwnProperty(t)&&(a<(e=r.components[t]).h&&(a=e.h),n<e.v&&(n=e.v));var s=Math.ceil(r.samplesPerLine/8/a),o=Math.ceil(r.scanLines/8/n);for(t in r.components)if(r.components.hasOwnProperty(t)){e=r.components[t];for(var i=Math.ceil(Math.ceil(r.samplesPerLine/8)*e.h/a),$=Math.ceil(Math.ceil(r.scanLines/8)*e.v/n),c=s*e.h,f=o*e.v,v=[],u=0;u<f;u++){for(var l=[],d=0;d<c;d++)l.push(new Int32Array(64));v.push(l)}e.blocksPerLine=i,e.blocksPerColumn=$,e.blocks=v}r.maxH=a,r.maxV=n,r.mcusPerLine=s,r.mcusPerColumn=o}var n,s,o=t();if(65496!==o)throw new Error(\"SOI not found\");for(o=t();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var i=(n=void 0,s=void 0,n=t(),s=r.subarray(e,e+n-2),e+=s.length,s);65504===o&&74===i[0]&&70===i[1]&&73===i[2]&&70===i[3]&&0===i[4]&&(this.jfif={version:{major:i[5],minor:i[6]},densityUnits:i[7],xDensity:i[8]<<8|i[9],yDensity:i[10]<<8|i[11],thumbWidth:i[12],thumbHeight:i[13],thumbData:i.subarray(14,14+3*i[12]*i[13])}),65518===o&&65===i[0]&&100===i[1]&&111===i[2]&&98===i[3]&&101===i[4]&&0===i[5]&&(this.adobe={version:i[6],flags0:i[7]<<8|i[8],flags1:i[9]<<8|i[10],transformCode:i[11]});break;case 65499:for(var $=t()+e-2;e<$;){var c=r[e++],f=new Int32Array(64);if(c>>4==0)for(var v=0;v<64;v++){f[$IsRZ$var$dctZigZag[v]]=r[e++]}else{if(c>>4!=1)throw new Error(\"DQT: invalid table spec\");for(var u=0;u<64;u++){f[$IsRZ$var$dctZigZag[u]]=t()}}this.quantizationTables[15&c]=f}break;case 65472:case 65473:case 65474:t();for(var l={extended:65473===o,progressive:65474===o,precision:r[e++],scanLines:t(),samplesPerLine:t(),components:{},componentsOrder:[]},d=r[e++],h=void 0,p=0;p<d;p++){h=r[e];var R=r[e+1]>>4,I=15&r[e+1],Z=r[e+2];l.componentsOrder.push(h),l.components[h]={h:R,v:I,quantizationIdx:Z},e+=3}a(l),this.frames.push(l);break;case 65476:for(var b=t(),m=2;m<b;){for(var y=r[e++],C=new Uint8Array(16),w=0,g=0;g<16;g++,e++)C[g]=r[e],w+=C[g];for(var P=new Uint8Array(w),S=0;S<w;S++,e++)P[S]=r[e];m+=17+w,y>>4==0?this.huffmanTablesDC[15&y]=$IsRZ$var$buildHuffmanTable(C,P):this.huffmanTablesAC[15&y]=$IsRZ$var$buildHuffmanTable(C,P)}break;case 65501:t(),this.resetInterval=t();break;case 65498:t();for(var _=r[e++],k=[],T=this.frames[0],O=0;O<_;O++){var x=T.components[r[e++]],q=r[e++];x.huffmanTableDC=this.huffmanTablesDC[q>>4],x.huffmanTableAC=this.huffmanTablesAC[15&q],k.push(x)}var j=r[e++],A=r[e++],E=r[e++],L=$IsRZ$var$decodeScan(r,e,T,k,this.resetInterval,j,A,E>>4,15&E);e+=L;break;case 65535:255!==r[e]&&e--;break;default:if(255===r[e-3]&&r[e-2]>=192&&r[e-2]<=254){e-=3;break}throw new Error(\"unknown JPEG marker \".concat(o.toString(16)))}o=t()}}},{key:\"getResult\",value:function(){var r=this.frames;if(0===this.frames.length)throw new Error(\"no frames were decoded\");this.frames.length>1&&console.warn(\"more than one frame is not supported\");for(var e=0;e<this.frames.length;e++)for(var t=this.frames[e].components,a=0,n=Object.keys(t);a<n.length;a++){var s=n[a];t[s].quantizationTable=this.quantizationTables[t[s].quantizationIdx],delete t[s].quantizationIdx}for(var o=r[0],i=o.components,$=o.componentsOrder,c=[],f=o.samplesPerLine,v=o.scanLines,u=0;u<$.length;u++){var l=i[$[u]];c.push({lines:$IsRZ$var$buildComponentData(o,l),scaleX:l.h/o.maxH,scaleY:l.v/o.maxV})}for(var d=new Uint8Array(f*v*c.length),h=0,p=0;p<v;++p)for(var R=0;R<f;++R)for(var I=0;I<c.length;++I){var Z=c[I];d[h]=Z.lines[0|p*Z.scaleY][0|R*Z.scaleX],++h}return d}}]),r}(),$IsRZ$export$default=function(r){$IsRZ$var$_inherits(t,$IsRZ$import$BaseDecoder);var e=$IsRZ$var$_createSuper(t);function t(r){var a;return $IsRZ$var$_classCallCheck(this,t),(a=e.call(this)).reader=new $IsRZ$var$JpegStreamReader,r.JPEGTables&&a.reader.parse(r.JPEGTables),a}return $IsRZ$var$_createClass(t,[{key:\"decodeBlock\",value:function(r){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(r)),this.reader.getResult().buffer}}]),t}();$IsRZ$exports.default=$IsRZ$export$default;"},"sourceMaps":null,"error":null,"hash":"94a11b2428663bfb111df72e8489348c","cacheData":{"env":{},"imports":{"$IsRZ$import$BaseDecoder":["./basedecoder.js","default"]},"exports":{"default":"$IsRZ$export$default"},"wildcards":[],"sideEffects":false,"isES6Module":true}}