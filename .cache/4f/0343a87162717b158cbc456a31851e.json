{"id":"e4Kb","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/ol/package.json","includedInParent":true,"mtime":1679700665093},{"name":"../events/EventType.js","loc":{"line":19,"column":22,"index":823},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/ImageWMS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/EventType.js"},{"name":"./Image.js","loc":{"line":20,"column":54,"index":903},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/ImageWMS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Image.js"},{"name":"../Image.js","loc":{"line":21,"column":25,"index":942},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/ImageWMS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/Image.js"},{"name":"./wms.js","loc":{"line":22,"column":32,"index":989},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/ImageWMS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/wms.js"},{"name":"../uri.js","loc":{"line":23,"column":29,"index":1030},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/ImageWMS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/uri.js"},{"name":"../asserts.js","loc":{"line":24,"column":23,"index":1066},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/ImageWMS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/asserts.js"},{"name":"../obj.js","loc":{"line":25,"column":23,"index":1106},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/ImageWMS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/obj.js"},{"name":"../reproj.js","loc":{"line":26,"column":42,"index":1161},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/ImageWMS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj.js"},{"name":"../math.js","loc":{"line":27,"column":35,"index":1212},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/ImageWMS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/math.js"},{"name":"../string.js","loc":{"line":28,"column":32,"index":1258},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/ImageWMS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/string.js"},{"name":"../extent.js","loc":{"line":29,"column":83,"index":1357},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/ImageWMS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/extent.js"},{"name":"../proj.js","loc":{"line":30,"column":48,"index":1421},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/ImageWMS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/proj.js"}],"generated":{"js":"var $e4Kb$exports={};$parcel$require(\"e4Kb\",\"../events/EventType.js\"),$parcel$require(\"e4Kb\",\"./Image.js\"),$parcel$require(\"e4Kb\",\"../Image.js\"),$parcel$require(\"e4Kb\",\"./wms.js\"),$parcel$require(\"e4Kb\",\"../uri.js\"),$parcel$require(\"e4Kb\",\"../asserts.js\"),$parcel$require(\"e4Kb\",\"../obj.js\"),$parcel$require(\"e4Kb\",\"../reproj.js\"),$parcel$require(\"e4Kb\",\"../math.js\"),$parcel$require(\"e4Kb\",\"../string.js\"),$parcel$require(\"e4Kb\",\"../extent.js\"),$parcel$require(\"e4Kb\",\"../proj.js\");var $e4Kb$var$__extends=$e4Kb$exports&&$e4Kb$exports.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if(\"function\"!=typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$e4Kb$var$DECIMALS=4,$e4Kb$var$GETFEATUREINFO_IMAGE_SIZE=[101,101],$e4Kb$export$default=function(e){function t(t){var r=this,i=t||{},o=void 0===i.imageSmoothing||i.imageSmoothing;return void 0!==i.interpolate&&(o=i.interpolate),(r=e.call(this,{attributions:i.attributions,interpolate:o,projection:i.projection,resolutions:i.resolutions})||this).crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,r.url_=i.url,r.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:$e4Kb$import$defaultImageLoadFunction,r.params_=i.params||{},r.v13_=!0,r.updateV13_(),r.serverType_=i.serverType,r.hidpi_=void 0===i.hidpi||i.hidpi,r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==i.ratio?i.ratio:1.5,r}return $e4Kb$var$__extends(t,e),t.prototype.getFeatureInfoUrl=function(e,t,r,i){if(void 0!==this.url_){var o=$e4Kb$import$getProjection(r),$=this.getProjection();$&&$!==o&&(t=$e4Kb$import$calculateSourceResolution($,o,e,t),e=$e4Kb$import$transform(e,o,$));var a=$e4Kb$import$getForViewAndSize(e,t,0,$e4Kb$var$GETFEATUREINFO_IMAGE_SIZE),n={SERVICE:\"WMS\",VERSION:$e4Kb$import$DEFAULT_VERSION,REQUEST:\"GetFeatureInfo\",FORMAT:\"image/png\",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};$e4Kb$import$assign(n,this.params_,i);var s=$e4Kb$import$floor((e[0]-a[0])/t,$e4Kb$var$DECIMALS),p=$e4Kb$import$floor((a[3]-e[1])/t,$e4Kb$var$DECIMALS);return n[this.v13_?\"I\":\"X\"]=s,n[this.v13_?\"J\":\"Y\"]=p,this.getRequestUrl_(a,$e4Kb$var$GETFEATUREINFO_IMAGE_SIZE,1,$||o,n)}},t.prototype.getLegendUrl=function(e,t){if(void 0!==this.url_){var r={SERVICE:\"WMS\",VERSION:$e4Kb$import$DEFAULT_VERSION,REQUEST:\"GetLegendGraphic\",FORMAT:\"image/png\"};if(void 0===t||void 0===t.LAYER){var i=this.params_.LAYERS;if(!(!Array.isArray(i)||1===i.length))return;r.LAYER=i}if(void 0!==e){var o=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=e*o/28e-5}return $e4Kb$import$assign(r,t),$e4Kb$import$appendParams(this.url_,r)}},t.prototype.getParams=function(){return this.params_},t.prototype.getImageInternal=function(e,t,r,i){if(void 0===this.url_)return null;t=this.findNearestResolution(t),1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var o=t/r,$=$e4Kb$import$getCenter(e),a=$e4Kb$import$ceil($e4Kb$import$getWidth(e)/o,$e4Kb$var$DECIMALS),n=$e4Kb$import$ceil($e4Kb$import$getHeight(e)/o,$e4Kb$var$DECIMALS),s=$e4Kb$import$getForViewAndSize($,o,0,[a,n]),p=$e4Kb$import$ceil(this.ratio_*$e4Kb$import$getWidth(e)/o,$e4Kb$var$DECIMALS),u=$e4Kb$import$ceil(this.ratio_*$e4Kb$import$getHeight(e)/o,$e4Kb$var$DECIMALS),m=$e4Kb$import$getForViewAndSize($,o,0,[p,u]),g=this.image_;if(g&&this.renderedRevision_==this.getRevision()&&g.getResolution()==t&&g.getPixelRatio()==r&&$e4Kb$import$containsExtent(g.getExtent(),s))return g;var _={SERVICE:\"WMS\",VERSION:$e4Kb$import$DEFAULT_VERSION,REQUEST:\"GetMap\",FORMAT:\"image/png\",TRANSPARENT:!0};$e4Kb$import$assign(_,this.params_),this.imageSize_[0]=$e4Kb$import$round($e4Kb$import$getWidth(m)/o,$e4Kb$var$DECIMALS),this.imageSize_[1]=$e4Kb$import$round($e4Kb$import$getHeight(m)/o,$e4Kb$var$DECIMALS);var h=this.getRequestUrl_(m,this.imageSize_,r,i,_);return this.image_=new $e4Kb$import$ImageWrapper(m,t,r,h,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener($e4Kb$import$EventType.CHANGE,this.handleImageChange.bind(this)),this.image_},t.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},t.prototype.getRequestUrl_=function(e,t,r,i,o){if($e4Kb$import$assert(void 0!==this.url_,9),o[this.v13_?\"CRS\":\"SRS\"]=i.getCode(),\"STYLES\"in this.params_||(o.STYLES=\"\"),1!=r)switch(this.serverType_){case\"geoserver\":var $=90*r+.5|0;\"FORMAT_OPTIONS\"in o?o.FORMAT_OPTIONS+=\";dpi:\"+$:o.FORMAT_OPTIONS=\"dpi:\"+$;break;case\"mapserver\":o.MAP_RESOLUTION=90*r;break;case\"carmentaserver\":case\"qgis\":o.DPI=90*r;break;default:$e4Kb$import$assert(!1,8)}o.WIDTH=t[0],o.HEIGHT=t[1];var a,n=i.getAxisOrientation();return a=this.v13_&&\"ne\"==n.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,o.BBOX=a.join(\",\"),$e4Kb$import$appendParams(this.url_,o)},t.prototype.getUrl=function(){return this.url_},t.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},t.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},t.prototype.updateParams=function(e){$e4Kb$import$assign(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},t.prototype.updateV13_=function(){var e=this.params_.VERSION||$e4Kb$import$DEFAULT_VERSION;this.v13_=$e4Kb$import$compareVersions(e,\"1.3\")>=0},t}($e4Kb$import$ImageSource);$e4Kb$exports.default=$e4Kb$export$default;"},"sourceMaps":null,"error":null,"hash":"98f0a9aacffda7c167acfed9de5f4b4c","cacheData":{"env":{},"imports":{"$e4Kb$import$EventType":["../events/EventType.js","default"],"$e4Kb$import$ImageSource":["./Image.js","default"],"$e4Kb$import$defaultImageLoadFunction":["./Image.js","defaultImageLoadFunction"],"$e4Kb$import$ImageWrapper":["../Image.js","default"],"$e4Kb$import$DEFAULT_VERSION":["./wms.js","DEFAULT_VERSION"],"$e4Kb$import$appendParams":["../uri.js","appendParams"],"$e4Kb$import$assert":["../asserts.js","assert"],"$e4Kb$import$assign":["../obj.js","assign"],"$e4Kb$import$calculateSourceResolution":["../reproj.js","calculateSourceResolution"],"$e4Kb$import$ceil":["../math.js","ceil"],"$e4Kb$import$floor":["../math.js","floor"],"$e4Kb$import$round":["../math.js","round"],"$e4Kb$import$compareVersions":["../string.js","compareVersions"],"$e4Kb$import$containsExtent":["../extent.js","containsExtent"],"$e4Kb$import$getCenter":["../extent.js","getCenter"],"$e4Kb$import$getForViewAndSize":["../extent.js","getForViewAndSize"],"$e4Kb$import$getHeight":["../extent.js","getHeight"],"$e4Kb$import$getWidth":["../extent.js","getWidth"],"$e4Kb$import$getProjection":["../proj.js","get"],"$e4Kb$import$transform":["../proj.js","transform"]},"exports":{"default":"$e4Kb$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}