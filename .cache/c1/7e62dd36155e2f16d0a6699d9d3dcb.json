{"id":"NnGW","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/ol/package.json","includedInParent":true,"mtime":1679700665093},{"name":"../CollectionEventType.js","loc":{"line":19,"column":32,"index":834},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/CollectionEventType.js"},{"name":"../events/EventType.js","loc":{"line":20,"column":22,"index":885},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/EventType.js"},{"name":"./Pointer.js","loc":{"line":21,"column":31,"index":942},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Pointer.js"},{"name":"../structs/RBush.js","loc":{"line":22,"column":18,"index":976},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/structs/RBush.js"},{"name":"../source/VectorEventType.js","loc":{"line":23,"column":28,"index":1027},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/VectorEventType.js"},{"name":"../functions.js","loc":{"line":24,"column":28,"index":1087},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/functions.js"},{"name":"../extent.js","loc":{"line":25,"column":44,"index":1150},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/extent.js"},{"name":"../coordinate.js","loc":{"line":26,"column":68,"index":1234},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/coordinate.js"},{"name":"../geom/Polygon.js","loc":{"line":27,"column":27,"index":1281},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/Polygon.js"},{"name":"../proj.js","loc":{"line":28,"column":73,"index":1376},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/proj.js"},{"name":"../util.js","loc":{"line":29,"column":23,"index":1413},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/util.js"},{"name":"../obj.js","loc":{"line":30,"column":26,"index":1453},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/obj.js"},{"name":"../events.js","loc":{"line":31,"column":38,"index":1504},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Snap.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events.js"}],"generated":{"js":"var $NnGW$exports={};$parcel$require(\"NnGW\",\"../CollectionEventType.js\"),$parcel$require(\"NnGW\",\"../events/EventType.js\"),$parcel$require(\"NnGW\",\"./Pointer.js\"),$parcel$require(\"NnGW\",\"../structs/RBush.js\"),$parcel$require(\"NnGW\",\"../source/VectorEventType.js\"),$parcel$require(\"NnGW\",\"../functions.js\"),$parcel$require(\"NnGW\",\"../extent.js\"),$parcel$require(\"NnGW\",\"../coordinate.js\"),$parcel$require(\"NnGW\",\"../geom/Polygon.js\"),$parcel$require(\"NnGW\",\"../proj.js\"),$parcel$require(\"NnGW\",\"../util.js\"),$parcel$require(\"NnGW\",\"../obj.js\"),$parcel$require(\"NnGW\",\"../events.js\");var $NnGW$var$__extends=$NnGW$exports&&$NnGW$exports.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if(\"function\"!=typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function $NnGW$var$getFeatureFromEvent(e){return e.feature?e.feature:e.element?e.element:void 0}var $NnGW$var$tempSegment=[],$NnGW$export$default=function(e){function t(t){var r=this,n=t||{},o=n;return o.handleDownEvent||(o.handleDownEvent=$NnGW$import$TRUE),o.stopDown||(o.stopDown=$NnGW$import$FALSE),(r=e.call(this,o)||this).source_=n.source?n.source:null,r.vertex_=void 0===n.vertex||n.vertex,r.edge_=void 0===n.edge||n.edge,r.features_=n.features?n.features:null,r.featuresListenerKeys_=[],r.featureChangeListenerKeys_={},r.indexedFeaturesExtents_={},r.pendingFeatures_={},r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.rBush_=new $NnGW$import$RBush,r.GEOMETRY_SEGMENTERS_={Point:r.segmentPointGeometry_.bind(r),LineString:r.segmentLineStringGeometry_.bind(r),LinearRing:r.segmentLineStringGeometry_.bind(r),Polygon:r.segmentPolygonGeometry_.bind(r),MultiPoint:r.segmentMultiPointGeometry_.bind(r),MultiLineString:r.segmentMultiLineStringGeometry_.bind(r),MultiPolygon:r.segmentMultiPolygonGeometry_.bind(r),GeometryCollection:r.segmentGeometryCollectionGeometry_.bind(r),Circle:r.segmentCircleGeometry_.bind(r)},r}return $NnGW$var$__extends(t,e),t.prototype.addFeature=function(e,t){var r=void 0===t||t,n=$NnGW$import$getUid(e),o=e.getGeometry();if(o){var i=this.GEOMETRY_SEGMENTERS_[o.getType()];if(i){this.indexedFeaturesExtents_[n]=o.getExtent($NnGW$import$createEmpty());var s=[];if(i(s,o),1===s.length)this.rBush_.insert($NnGW$import$boundingExtent(s[0]),{feature:e,segment:s[0]});else if(s.length>1){var a=s.map(function(e){return $NnGW$import$boundingExtent(e)}),u=s.map(function(t){return{feature:e,segment:t}});this.rBush_.load(a,u)}}}r&&(this.featureChangeListenerKeys_[n]=$NnGW$import$listen(e,$NnGW$import$EventType.CHANGE,this.handleFeatureChange_,this))},t.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},t.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},t.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},t.prototype.handleEvent=function(t){var r=this.snapTo(t.pixel,t.coordinate,t.map);return r&&(t.coordinate=r.vertex.slice(0,2),t.pixel=r.vertexPixel),e.prototype.handleEvent.call(this,t)},t.prototype.handleFeatureAdd_=function(e){var t=$NnGW$var$getFeatureFromEvent(e);this.addFeature(t)},t.prototype.handleFeatureRemove_=function(e){var t=$NnGW$var$getFeatureFromEvent(e);this.removeFeature(t)},t.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var r=$NnGW$import$getUid(t);r in this.pendingFeatures_||(this.pendingFeatures_[r]=t)}else this.updateFeature_(t)},t.prototype.handleUpEvent=function(e){var t=$NnGW$import$getValues(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},t.prototype.removeFeature=function(e,t){var r=void 0===t||t,n=$NnGW$import$getUid(e),o=this.indexedFeaturesExtents_[n];if(o){var i=this.rBush_,s=[];i.forEachInExtent(o,function(t){e===t.feature&&s.push(t)});for(var a=s.length-1;a>=0;--a)i.remove(s[a])}r&&($NnGW$import$unlistenByKey(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},t.prototype.setMap=function(t){var r=this.getMap(),n=this.featuresListenerKeys_,o=this.getFeatures_();r&&(n.forEach($NnGW$import$unlistenByKey),n.length=0,o.forEach(this.forEachFeatureRemove_.bind(this))),e.prototype.setMap.call(this,t),t&&(this.features_?n.push($NnGW$import$listen(this.features_,$NnGW$import$CollectionEventType.ADD,this.handleFeatureAdd_,this),$NnGW$import$listen(this.features_,$NnGW$import$CollectionEventType.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push($NnGW$import$listen(this.source_,$NnGW$import$VectorEventType.ADDFEATURE,this.handleFeatureAdd_,this),$NnGW$import$listen(this.source_,$NnGW$import$VectorEventType.REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_.bind(this)))},t.prototype.snapTo=function(e,t,r){var n=r.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=r.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),i=$NnGW$import$boundingExtent([n,o]),s=this.rBush_.getInExtent(i),a=s.length;if(0===a)return null;var u,$=r.getView().getProjection(),p=$NnGW$import$fromUserCoordinate(t,$),l=1/0,h=this.pixelTolerance_*this.pixelTolerance_,c=function(){if(u){var t=r.getPixelFromCoordinate(u);if($NnGW$import$squaredDistance(e,t)<=h)return{vertex:u,vertexPixel:[Math.round(t[0]),Math.round(t[1])]}}return null};if(this.vertex_){for(var m=0;m<a;++m){\"Circle\"!==(g=s[m]).feature.getGeometry().getType()&&g.segment.forEach(function(e){var t=$NnGW$import$fromUserCoordinate(e,$),r=$NnGW$import$squaredDistance(p,t);r<l&&(u=e,l=r)})}if(W=c())return W}if(this.edge_){for(m=0;m<a;++m){var g,f=null;if(\"Circle\"===(g=s[m]).feature.getGeometry().getType()){var d=g.feature.getGeometry(),G=$NnGW$import$getUserProjection();G&&(d=d.clone().transform(G,$)),f=$NnGW$import$toUserCoordinate($NnGW$import$closestOnCircle(p,d),$)}else{var v=g.segment,_=v[0],y=v[1];y&&($NnGW$var$tempSegment[0]=$NnGW$import$fromUserCoordinate(_,$),$NnGW$var$tempSegment[1]=$NnGW$import$fromUserCoordinate(y,$),f=$NnGW$import$closestOnSegment(p,$NnGW$var$tempSegment))}if(f){var N=$NnGW$import$squaredDistance(p,f);N<l&&(u=f,l=N)}}var W;if(W=c())return W}return null},t.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},t.prototype.segmentCircleGeometry_=function(e,t){var r=this.getMap().getView().getProjection(),n=t,o=$NnGW$import$getUserProjection();o&&(n=n.clone().transform(o,r));var i=$NnGW$import$fromCircle(n);o&&i.transform(r,o);for(var s=i.getCoordinates()[0],a=0,u=s.length-1;a<u;++a)e.push(s.slice(a,a+2))},t.prototype.segmentGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var o=this.GEOMETRY_SEGMENTERS_[r[n].getType()];o&&o(e,r[n])}},t.prototype.segmentLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length-1;n<o;++n)e.push(r.slice(n,n+2))},t.prototype.segmentMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],s=0,a=i.length-1;s<a;++s)e.push(i.slice(s,s+2))},t.prototype.segmentMultiPointGeometry_=function(e,t){t.getCoordinates().forEach(function(t){e.push([t])})},t.prototype.segmentMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],s=0,a=i.length;s<a;++s)for(var u=i[s],$=0,p=u.length-1;$<p;++$)e.push(u.slice($,$+2))},t.prototype.segmentPointGeometry_=function(e,t){e.push([t.getCoordinates()])},t.prototype.segmentPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],s=0,a=i.length-1;s<a;++s)e.push(i.slice(s,s+2))},t}($NnGW$import$PointerInteraction);$NnGW$exports.default=$NnGW$export$default;"},"sourceMaps":null,"error":null,"hash":"6b40e60db6285ce890190341d040aa9c","cacheData":{"env":{},"imports":{"$NnGW$import$CollectionEventType":["../CollectionEventType.js","default"],"$NnGW$import$EventType":["../events/EventType.js","default"],"$NnGW$import$PointerInteraction":["./Pointer.js","default"],"$NnGW$import$RBush":["../structs/RBush.js","default"],"$NnGW$import$VectorEventType":["../source/VectorEventType.js","default"],"$NnGW$import$FALSE":["../functions.js","FALSE"],"$NnGW$import$TRUE":["../functions.js","TRUE"],"$NnGW$import$boundingExtent":["../extent.js","boundingExtent"],"$NnGW$import$createEmpty":["../extent.js","createEmpty"],"$NnGW$import$closestOnCircle":["../coordinate.js","closestOnCircle"],"$NnGW$import$closestOnSegment":["../coordinate.js","closestOnSegment"],"$NnGW$import$squaredDistance":["../coordinate.js","squaredDistance"],"$NnGW$import$fromCircle":["../geom/Polygon.js","fromCircle"],"$NnGW$import$fromUserCoordinate":["../proj.js","fromUserCoordinate"],"$NnGW$import$getUserProjection":["../proj.js","getUserProjection"],"$NnGW$import$toUserCoordinate":["../proj.js","toUserCoordinate"],"$NnGW$import$getUid":["../util.js","getUid"],"$NnGW$import$getValues":["../obj.js","getValues"],"$NnGW$import$listen":["../events.js","listen"],"$NnGW$import$unlistenByKey":["../events.js","unlistenByKey"]},"exports":{"default":"$NnGW$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}