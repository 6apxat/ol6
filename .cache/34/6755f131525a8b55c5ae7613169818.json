{"id":"qrxo","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/ol/package.json","includedInParent":true,"mtime":1679700665093},{"name":"../Collection.js","loc":{"line":19,"column":23,"index":827},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/Collection.js"},{"name":"../CollectionEventType.js","loc":{"line":20,"column":32,"index":879},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/CollectionEventType.js"},{"name":"../events/Event.js","loc":{"line":21,"column":18,"index":926},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/Event.js"},{"name":"../events/EventType.js","loc":{"line":22,"column":22,"index":970},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/EventType.js"},{"name":"../Feature.js","loc":{"line":23,"column":20,"index":1016},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/Feature.js"},{"name":"../MapBrowserEventType.js","loc":{"line":24,"column":32,"index":1065},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/MapBrowserEventType.js"},{"name":"../geom/Point.js","loc":{"line":25,"column":18,"index":1112},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/Point.js"},{"name":"./Pointer.js","loc":{"line":26,"column":31,"index":1163},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Pointer.js"},{"name":"../structs/RBush.js","loc":{"line":27,"column":18,"index":1197},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/structs/RBush.js"},{"name":"../source/VectorEventType.js","loc":{"line":28,"column":28,"index":1248},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/VectorEventType.js"},{"name":"../layer/Vector.js","loc":{"line":29,"column":24,"index":1304},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/layer/Vector.js"},{"name":"../source/Vector.js","loc":{"line":30,"column":25,"index":1351},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Vector.js"},{"name":"../events/condition.js","loc":{"line":31,"column":64,"index":1438},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/condition.js"},{"name":"../extent.js","loc":{"line":32,"column":102,"index":1566},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/extent.js"},{"name":"../coordinate.js","loc":{"line":33,"column":166,"index":1748},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/coordinate.js"},{"name":"../style/Style.js","loc":{"line":34,"column":35,"index":1803},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/style/Style.js"},{"name":"../array.js","loc":{"line":35,"column":33,"index":1857},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/array.js"},{"name":"../geom/Polygon.js","loc":{"line":36,"column":27,"index":1899},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/geom/Polygon.js"},{"name":"../proj.js","loc":{"line":37,"column":103,"index":2024},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/proj.js"},{"name":"../util.js","loc":{"line":38,"column":23,"index":2061},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/interaction/Modify.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/util.js"}],"generated":{"js":"var $qrxo$exports={};$parcel$require(\"qrxo\",\"../Collection.js\"),$parcel$require(\"qrxo\",\"../CollectionEventType.js\"),$parcel$require(\"qrxo\",\"../events/Event.js\"),$parcel$require(\"qrxo\",\"../events/EventType.js\"),$parcel$require(\"qrxo\",\"../Feature.js\"),$parcel$require(\"qrxo\",\"../MapBrowserEventType.js\"),$parcel$require(\"qrxo\",\"../geom/Point.js\"),$parcel$require(\"qrxo\",\"./Pointer.js\"),$parcel$require(\"qrxo\",\"../structs/RBush.js\"),$parcel$require(\"qrxo\",\"../source/VectorEventType.js\"),$parcel$require(\"qrxo\",\"../layer/Vector.js\"),$parcel$require(\"qrxo\",\"../source/Vector.js\"),$parcel$require(\"qrxo\",\"../events/condition.js\"),$parcel$require(\"qrxo\",\"../extent.js\"),$parcel$require(\"qrxo\",\"../coordinate.js\"),$parcel$require(\"qrxo\",\"../style/Style.js\"),$parcel$require(\"qrxo\",\"../array.js\"),$parcel$require(\"qrxo\",\"../geom/Polygon.js\"),$parcel$require(\"qrxo\",\"../proj.js\"),$parcel$require(\"qrxo\",\"../util.js\");var $qrxo$var$__extends=$qrxo$exports&&$qrxo$exports.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if(\"function\"!=typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),$qrxo$var$CIRCLE_CENTER_INDEX=0,$qrxo$var$CIRCLE_CIRCUMFERENCE_INDEX=1,$qrxo$var$tempExtent=[0,0,0,0],$qrxo$var$tempSegment=[],$qrxo$var$ModifyEventType={MODIFYSTART:\"modifystart\",MODIFYEND:\"modifyend\"},$qrxo$export$ModifyEvent=function(e){function t(t,r,o){var i=e.call(this,t)||this;return i.features=r,i.mapBrowserEvent=o,i}return $qrxo$var$__extends(t,e),t}($qrxo$import$Event);$qrxo$exports.ModifyEvent=$qrxo$export$ModifyEvent;var $qrxo$export$default=function(e){function t(t){var r,o=e.call(this,t)||this;if(o.on,o.once,o.un,o.boundHandleFeatureChange_=o.handleFeatureChange_.bind(o),o.condition_=t.condition?t.condition:$qrxo$import$primaryAction,o.defaultDeleteCondition_=function(e){return $qrxo$import$altKeyOnly(e)&&$qrxo$import$singleClick(e)},o.deleteCondition_=t.deleteCondition?t.deleteCondition:o.defaultDeleteCondition_,o.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:$qrxo$import$always,o.vertexFeature_=null,o.vertexSegments_=null,o.lastPixel_=[0,0],o.ignoreNextSingleClick_=!1,o.featuresBeingModified_=null,o.rBush_=new $qrxo$import$RBush,o.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,o.snappedToVertex_=!1,o.changingFeature_=!1,o.dragSegments_=[],o.overlay_=new $qrxo$import$VectorLayer({source:new $qrxo$import$VectorSource({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:$qrxo$var$getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),o.SEGMENT_WRITERS_={Point:o.writePointGeometry_.bind(o),LineString:o.writeLineStringGeometry_.bind(o),LinearRing:o.writeLineStringGeometry_.bind(o),Polygon:o.writePolygonGeometry_.bind(o),MultiPoint:o.writeMultiPointGeometry_.bind(o),MultiLineString:o.writeMultiLineStringGeometry_.bind(o),MultiPolygon:o.writeMultiPolygonGeometry_.bind(o),Circle:o.writeCircleGeometry_.bind(o),GeometryCollection:o.writeGeometryCollectionGeometry_.bind(o)},o.source_=null,o.hitDetection_=null,t.features?r=t.features:t.source&&(o.source_=t.source,r=new $qrxo$import$Collection(o.source_.getFeatures()),o.source_.addEventListener($qrxo$import$VectorEventType.ADDFEATURE,o.handleSourceAdd_.bind(o)),o.source_.addEventListener($qrxo$import$VectorEventType.REMOVEFEATURE,o.handleSourceRemove_.bind(o))),!r)throw new Error(\"The modify interaction requires features, a source or a layer\");return t.hitDetection&&(o.hitDetection_=t.hitDetection),o.features_=r,o.features_.forEach(o.addFeature_.bind(o)),o.features_.addEventListener($qrxo$import$CollectionEventType.ADD,o.handleFeatureAdd_.bind(o)),o.features_.addEventListener($qrxo$import$CollectionEventType.REMOVE,o.handleFeatureRemove_.bind(o)),o.lastPointerEvent_=null,o.delta_=[0,0],o.snapToPointer_=void 0===t.snapToPointer?!o.hitDetection_:t.snapToPointer,o}return $qrxo$var$__extends(t,e),t.prototype.addFeature_=function(e){var t=e.getGeometry();if(t){var r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),e.addEventListener($qrxo$import$EventType.CHANGE,this.boundHandleFeatureChange_)},t.prototype.willModifyFeatures_=function(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new $qrxo$import$Collection;for(var r=this.featuresBeingModified_.getArray(),o=0,i=t.length;o<i;++o)for(var n=t[o],a=0,s=n.length;a<s;++a){var $=n[a].feature;$&&-1===r.indexOf($)&&this.featuresBeingModified_.push($)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new $qrxo$export$ModifyEvent($qrxo$var$ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}},t.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener($qrxo$import$EventType.CHANGE,this.boundHandleFeatureChange_)},t.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(var o=r.length-1;o>=0;--o){for(var i=r[o],n=this.dragSegments_.length-1;n>=0;--n)this.dragSegments_[n][0]===i&&this.dragSegments_.splice(n,1);t.remove(i)}},t.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.prototype.setActive.call(this,t)},t.prototype.setMap=function(t){this.overlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},t.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},t.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},t.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},t.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},t.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),o={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),o)},t.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o){var n=r[o],a={feature:e,geometry:t,depth:[o],index:o,segment:[n,n]};this.rBush_.insert(t.getExtent(),a)}},t.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length-1;o<i;++o){var n=r.slice(o,o+2),a={feature:e,geometry:t,index:o,segment:n};this.rBush_.insert($qrxo$import$boundingExtent(n),a)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length-1;a<s;++a){var $=n.slice(a,a+2),u={feature:e,geometry:t,depth:[o],index:a,segment:$};this.rBush_.insert($qrxo$import$boundingExtent($),u)}},t.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length-1;a<s;++a){var $=n.slice(a,a+2),u={feature:e,geometry:t,depth:[o],index:a,segment:$};this.rBush_.insert($qrxo$import$boundingExtent($),u)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length;a<s;++a)for(var $=n[a],u=0,d=$.length-1;u<d;++u){var g=$.slice(u,u+2),p={feature:e,geometry:t,depth:[a,o],index:u,segment:g};this.rBush_.insert($qrxo$import$boundingExtent(g),p)}},t.prototype.writeCircleGeometry_=function(e,t){var r=t.getCenter(),o={feature:e,geometry:t,index:$qrxo$var$CIRCLE_CENTER_INDEX,segment:[r,r]},i={feature:e,geometry:t,index:$qrxo$var$CIRCLE_CIRCUMFERENCE_INDEX,segment:[r,r]},n=[o,i];o.featureSegments=n,i.featureSegments=n,this.rBush_.insert($qrxo$import$createExtent(r),o);var a=t,s=$qrxo$import$getUserProjection();if(s&&this.getMap()){var $=this.getMap().getView().getProjection();a=a.clone().transform(s,$),a=$qrxo$import$fromCircle(a).transform($,s)}this.rBush_.insert(a.getExtent(),i)},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),o=0;o<r.length;++o){var i=r[o];(0,this.SEGMENT_WRITERS_[i.getType()])(e,i)}},t.prototype.createOrUpdateVertexFeature_=function(e,t,r){var o=this.vertexFeature_;o?o.getGeometry().setCoordinates(e):(o=new $qrxo$import$Feature(new $qrxo$import$Point(e)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o));return o.set(\"features\",t),o.set(\"geometries\",r),o},t.prototype.handleEvent=function(t){return!t.originalEvent||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=$qrxo$import$MapBrowserEventType.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(r=!(t.type!=$qrxo$import$MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==$qrxo$import$MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),e.prototype.handleEvent.call(this,t)&&!r);var r},t.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);for(var t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],o=[],i=0,n=this.dragSegments_.length;i<n;++i){var a=this.dragSegments_[i],s=a[0],$=s.feature;-1===r.indexOf($)&&r.push($);var u=s.geometry;-1===o.indexOf(u)&&o.push(u);for(var d=s.depth,g=void 0,p=s.segment,l=a[1];t.length<u.getStride();)t.push(p[l][t.length]);switch(u.getType()){case\"Point\":g=t,p[0]=t,p[1]=t;break;case\"MultiPoint\":(g=u.getCoordinates())[s.index]=t,p[0]=t,p[1]=t;break;case\"LineString\":(g=u.getCoordinates())[s.index+l]=t,p[l]=t;break;case\"MultiLineString\":case\"Polygon\":(g=u.getCoordinates())[d[0]][s.index+l]=t,p[l]=t;break;case\"MultiPolygon\":(g=u.getCoordinates())[d[1]][d[0]][s.index+l]=t,p[l]=t;break;case\"Circle\":if(p[0]=t,p[1]=t,s.index===$qrxo$var$CIRCLE_CENTER_INDEX)this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;var h=e.map.getView().getProjection(),x=$qrxo$import$coordinateDistance($qrxo$import$fromUserCoordinate(u.getCenter(),h),$qrxo$import$fromUserCoordinate(t,h)),m=$qrxo$import$getUserProjection();if(m){var c=u.clone().transform(m,h);c.setRadius(x),x=c.transform(h,m).getRadius()}u.setRadius(x),this.changingFeature_=!1}}g&&this.setGeometryCoordinates_(u,g)}this.createOrUpdateVertexFeature_(t,r,o)},t.prototype.handleDownEvent=function(e){if(!this.condition_(e))return!1;var t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;var r=this.vertexFeature_;if(r){var o=e.map.getView().getProjection(),i=[],n=r.getGeometry().getCoordinates(),a=$qrxo$import$boundingExtent([n]),s=this.rBush_.getInExtent(a),$={};s.sort($qrxo$var$compareIndexes);for(var u=0,d=s.length;u<d;++u){var g=s[u],p=g.segment,l=$qrxo$import$getUid(g.geometry),h=g.depth;if(h&&(l+=\"-\"+h.join(\"-\")),$[l]||($[l]=new Array(2)),\"Circle\"!==g.geometry.getType()||g.index!==$qrxo$var$CIRCLE_CIRCUMFERENCE_INDEX)if(!$qrxo$import$coordinatesEqual(p[0],n)||$[l][0])if(!$qrxo$import$coordinatesEqual(p[1],n)||$[l][1])$qrxo$import$getUid(p)in this.vertexSegments_&&!$[l][0]&&!$[l][1]&&this.insertVertexCondition_(e)&&i.push(g);else{if($[l][0]&&0===$[l][0].index){var x=g.geometry.getCoordinates();switch(g.geometry.getType()){case\"LineString\":case\"MultiLineString\":continue;case\"MultiPolygon\":x=x[h[1]];case\"Polygon\":if(g.index!==x[h[0]].length-2)continue}}this.dragSegments_.push([g,1]),$[l][1]=g}else this.dragSegments_.push([g,0]),$[l][0]=g;else{var m=$qrxo$var$closestOnSegmentData(t,g,o);$qrxo$import$coordinatesEqual(m,n)&&!$[l][0]&&(this.dragSegments_.push([g,0]),$[l][0]=g)}}i.length&&this.willModifyFeatures_(e,[i]);for(var c=i.length-1;c>=0;--c)this.insertVertex_(i[c],n)}return!!this.vertexFeature_},t.prototype.handleUpEvent=function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],o=r.geometry;if(\"Circle\"===o.getType()){var i=o.getCenter(),n=r.featureSegments[0],a=r.featureSegments[1];n.segment[0]=i,n.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.rBush_.update($qrxo$import$createExtent(i),n);var s=o,$=$qrxo$import$getUserProjection();if($){var u=e.map.getView().getProjection();s=s.clone().transform($,u),s=$qrxo$import$fromCircle(s).transform(u,$)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update($qrxo$import$boundingExtent(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new $qrxo$export$ModifyEvent($qrxo$var$ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1},t.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)},t.prototype.handlePointerAtPixel_=function(e,t,r){var o,i,n=this,a=r||t.getCoordinateFromPixel(e),s=t.getView().getProjection();if(this.hitDetection_){var $=\"object\"==typeof this.hitDetection_?function(e){return e===n.hitDetection_}:void 0;t.forEachFeatureAtPixel(e,function(e,t,r){if(\"Point\"===(r=r||e.getGeometry()).getType()&&$qrxo$import$includes(n.features_.getArray(),e)){i=r;var a=r.getFlatCoordinates().slice(0,2);o=[{feature:e,geometry:r,segment:[a,a]}]}return!0},{layerFilter:$})}if(!o){var u=$qrxo$import$fromUserExtent($qrxo$import$createExtent(a,$qrxo$var$tempExtent),s),d=t.getView().getResolution()*this.pixelTolerance_,g=$qrxo$import$toUserExtent($qrxo$import$bufferExtent(u,d,$qrxo$var$tempExtent),s);o=this.rBush_.getInExtent(g)}if(o&&o.length>0){var p=o.sort(function(e,t){return $qrxo$var$projectedDistanceToSegmentDataSquared(a,e,s)-$qrxo$var$projectedDistanceToSegmentDataSquared(a,t,s)})[0],l=p.segment,h=$qrxo$var$closestOnSegmentData(a,p,s),x=t.getPixelFromCoordinate(h),m=$qrxo$import$coordinateDistance(e,x);if(i||m<=this.pixelTolerance_){var c={};if(c[$qrxo$import$getUid(l)]=!0,this.snapToPointer_||(this.delta_[0]=h[0]-a[0],this.delta_[1]=h[1]-a[1]),\"Circle\"===p.geometry.getType()&&p.index===$qrxo$var$CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h,[p.feature],[p.geometry]);else{var _=t.getPixelFromCoordinate(l[0]),v=t.getPixelFromCoordinate(l[1]),f=$qrxo$import$squaredCoordinateDistance(x,_),y=$qrxo$import$squaredCoordinateDistance(x,v);m=Math.sqrt(Math.min(f,y)),this.snappedToVertex_=m<=this.pixelTolerance_,this.snappedToVertex_&&(h=f>y?l[1]:l[0]),this.createOrUpdateVertexFeature_(h,[p.feature],[p.geometry]);var q={};q[$qrxo$import$getUid(p.geometry)]=!0;for(var E=1,C=o.length;E<C;++E){var S=o[E].segment;if(!($qrxo$import$coordinatesEqual(l[0],S[0])&&$qrxo$import$coordinatesEqual(l[1],S[1])||$qrxo$import$coordinatesEqual(l[0],S[1])&&$qrxo$import$coordinatesEqual(l[1],S[0])))break;var F=$qrxo$import$getUid(o[E].geometry);F in q||(q[F]=!0,c[$qrxo$import$getUid(S)]=!0)}}return void(this.vertexSegments_=c)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},t.prototype.insertVertex_=function(e,t){for(var r,o=e.segment,i=e.feature,n=e.geometry,a=e.depth,s=e.index;t.length<n.getStride();)t.push(0);switch(n.getType()){case\"MultiLineString\":case\"Polygon\":(r=n.getCoordinates())[a[0]].splice(s+1,0,t);break;case\"MultiPolygon\":(r=n.getCoordinates())[a[1]][a[0]].splice(s+1,0,t);break;case\"LineString\":(r=n.getCoordinates()).splice(s+1,0,t);break;default:return}this.setGeometryCoordinates_(n,r);var $=this.rBush_;$.remove(e),this.updateSegmentIndices_(n,s,a,1);var u={segment:[o[0],t],feature:i,geometry:n,depth:a,index:s};$.insert($qrxo$import$boundingExtent(u.segment),u),this.dragSegments_.push([u,1]);var d={segment:[t,o[1]],feature:i,geometry:n,depth:a,index:s+1};$.insert($qrxo$import$boundingExtent(d.segment),d),this.dragSegments_.push([d,0]),this.ignoreNextSingleClick_=!0},t.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=$qrxo$import$MapBrowserEventType.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);var t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new $qrxo$export$ModifyEvent($qrxo$var$ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1},t.prototype.removeVertex_=function(){var e,t,r,o,i,n,a,s,$,u,d,g=this.dragSegments_,p={},l=!1;for(i=g.length-1;i>=0;--i)u=(r=g[i])[0],d=$qrxo$import$getUid(u.feature),u.depth&&(d+=\"-\"+u.depth.join(\"-\")),d in p||(p[d]={}),0===r[1]?(p[d].right=u,p[d].index=u.index):1==r[1]&&(p[d].left=u,p[d].index=u.index+1);for(d in p){switch($=p[d].right,a=p[d].left,(s=(n=p[d].index)-1)<0&&(s=0),e=t=(o=(u=void 0!==a?a:$).geometry).getCoordinates(),l=!1,o.getType()){case\"MultiLineString\":t[u.depth[0]].length>2&&(t[u.depth[0]].splice(n,1),l=!0);break;case\"LineString\":t.length>2&&(t.splice(n,1),l=!0);break;case\"MultiPolygon\":e=e[u.depth[1]];case\"Polygon\":(e=e[u.depth[0]]).length>4&&(n==e.length-1&&(n=0),e.splice(n,1),l=!0,0===n&&(e.pop(),e.push(e[0]),s=e.length-1))}if(l){this.setGeometryCoordinates_(o,t);var h=[];if(void 0!==a&&(this.rBush_.remove(a),h.push(a.segment[0])),void 0!==$&&(this.rBush_.remove($),h.push($.segment[1])),void 0!==a&&void 0!==$){var x={depth:u.depth,feature:u.feature,geometry:u.geometry,index:s,segment:h};this.rBush_.insert($qrxo$import$boundingExtent(x.segment),x)}this.updateSegmentIndices_(o,n,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),g.length=0}}return l},t.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},t.prototype.updateSegmentIndices_=function(e,t,r,o){this.rBush_.forEachInExtent(e.getExtent(),function(i){i.geometry===e&&(void 0===r||void 0===i.depth||$qrxo$import$equals(i.depth,r))&&i.index>t&&(i.index+=o)})},t}($qrxo$import$PointerInteraction);function $qrxo$var$compareIndexes(e,t){return e.index-t.index}function $qrxo$var$projectedDistanceToSegmentDataSquared(e,t,r){var o=t.geometry;if(\"Circle\"===o.getType()){var i=o;if(t.index===$qrxo$var$CIRCLE_CIRCUMFERENCE_INDEX){var n=$qrxo$import$getUserProjection();n&&(i=i.clone().transform(n,r));var a=$qrxo$import$squaredCoordinateDistance(i.getCenter(),$qrxo$import$fromUserCoordinate(e,r)),s=Math.sqrt(a)-i.getRadius();return s*s}}var $=$qrxo$import$fromUserCoordinate(e,r);return $qrxo$var$tempSegment[0]=$qrxo$import$fromUserCoordinate(t.segment[0],r),$qrxo$var$tempSegment[1]=$qrxo$import$fromUserCoordinate(t.segment[1],r),$qrxo$import$squaredDistanceToSegment($,$qrxo$var$tempSegment)}function $qrxo$var$closestOnSegmentData(e,t,r){var o=t.geometry;if(\"Circle\"===o.getType()&&t.index===$qrxo$var$CIRCLE_CIRCUMFERENCE_INDEX){var i=o,n=$qrxo$import$getUserProjection();return n&&(i=i.clone().transform(n,r)),$qrxo$import$toUserCoordinate(i.getClosestPoint($qrxo$import$fromUserCoordinate(e,r)),r)}var a=$qrxo$import$fromUserCoordinate(e,r);return $qrxo$var$tempSegment[0]=$qrxo$import$fromUserCoordinate(t.segment[0],r),$qrxo$var$tempSegment[1]=$qrxo$import$fromUserCoordinate(t.segment[1],r),$qrxo$import$toUserCoordinate($qrxo$import$closestOnSegment(a,$qrxo$var$tempSegment),r)}function $qrxo$var$getDefaultStyleFunction(){var e=$qrxo$import$createEditingStyle();return function(t,r){return e.Point}}$qrxo$exports.default=$qrxo$export$default;"},"sourceMaps":null,"error":null,"hash":"44b4d1ec7d05ba97a1b4d0ffa330a049","cacheData":{"env":{},"imports":{"$qrxo$import$Collection":["../Collection.js","default"],"$qrxo$import$CollectionEventType":["../CollectionEventType.js","default"],"$qrxo$import$Event":["../events/Event.js","default"],"$qrxo$import$EventType":["../events/EventType.js","default"],"$qrxo$import$Feature":["../Feature.js","default"],"$qrxo$import$MapBrowserEventType":["../MapBrowserEventType.js","default"],"$qrxo$import$Point":["../geom/Point.js","default"],"$qrxo$import$PointerInteraction":["./Pointer.js","default"],"$qrxo$import$RBush":["../structs/RBush.js","default"],"$qrxo$import$VectorEventType":["../source/VectorEventType.js","default"],"$qrxo$import$VectorLayer":["../layer/Vector.js","default"],"$qrxo$import$VectorSource":["../source/Vector.js","default"],"$qrxo$import$altKeyOnly":["../events/condition.js","altKeyOnly"],"$qrxo$import$always":["../events/condition.js","always"],"$qrxo$import$primaryAction":["../events/condition.js","primaryAction"],"$qrxo$import$singleClick":["../events/condition.js","singleClick"],"$qrxo$import$boundingExtent":["../extent.js","boundingExtent"],"$qrxo$import$bufferExtent":["../extent.js","buffer"],"$qrxo$import$createExtent":["../extent.js","createOrUpdateFromCoordinate"],"$qrxo$import$closestOnSegment":["../coordinate.js","closestOnSegment"],"$qrxo$import$coordinateDistance":["../coordinate.js","distance"],"$qrxo$import$coordinatesEqual":["../coordinate.js","equals"],"$qrxo$import$squaredCoordinateDistance":["../coordinate.js","squaredDistance"],"$qrxo$import$squaredDistanceToSegment":["../coordinate.js","squaredDistanceToSegment"],"$qrxo$import$createEditingStyle":["../style/Style.js","createEditingStyle"],"$qrxo$import$equals":["../array.js","equals"],"$qrxo$import$includes":["../array.js","includes"],"$qrxo$import$fromCircle":["../geom/Polygon.js","fromCircle"],"$qrxo$import$fromUserCoordinate":["../proj.js","fromUserCoordinate"],"$qrxo$import$fromUserExtent":["../proj.js","fromUserExtent"],"$qrxo$import$getUserProjection":["../proj.js","getUserProjection"],"$qrxo$import$toUserCoordinate":["../proj.js","toUserCoordinate"],"$qrxo$import$toUserExtent":["../proj.js","toUserExtent"],"$qrxo$import$getUid":["../util.js","getUid"]},"exports":{"ModifyEvent":"$qrxo$export$ModifyEvent","default":"$qrxo$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}