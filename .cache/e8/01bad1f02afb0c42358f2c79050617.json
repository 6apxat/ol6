{"id":"LIR5","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/ol/package.json","includedInParent":true,"mtime":1679700665093},{"name":"./TileImage.js","loc":{"line":19,"column":22,"index":819},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/WMTS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/TileImage.js"},{"name":"../uri.js","loc":{"line":20,"column":29,"index":866},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/WMTS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/uri.js"},{"name":"../obj.js","loc":{"line":21,"column":23,"index":902},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/WMTS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/obj.js"},{"name":"../extent.js","loc":{"line":22,"column":31,"index":946},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/WMTS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/extent.js"},{"name":"../tilegrid/WMTS.js","loc":{"line":23,"column":48,"index":1010},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/WMTS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/tilegrid/WMTS.js"},{"name":"../tileurlfunction.js","loc":{"line":24,"column":54,"index":1087},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/WMTS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/tileurlfunction.js"},{"name":"../proj.js","loc":{"line":25,"column":66,"index":1178},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/WMTS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/proj.js"},{"name":"../array.js","loc":{"line":26,"column":42,"index":1234},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/WMTS.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/array.js"}],"generated":{"js":"var $LIR5$exports={};$parcel$require(\"LIR5\",\"./TileImage.js\"),$parcel$require(\"LIR5\",\"../uri.js\"),$parcel$require(\"LIR5\",\"../obj.js\"),$parcel$require(\"LIR5\",\"../extent.js\"),$parcel$require(\"LIR5\",\"../tilegrid/WMTS.js\"),$parcel$require(\"LIR5\",\"../tileurlfunction.js\"),$parcel$require(\"LIR5\",\"../proj.js\"),$parcel$require(\"LIR5\",\"../array.js\");var $LIR5$var$__extends=$LIR5$exports&&$LIR5$exports.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if(\"function\"!=typeof i&&null!==i)throw new TypeError(\"Class extends value \"+String(i)+\" is not a constructor or null\");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$LIR5$export$default=function(t){function e(e){var i=this,r=void 0===e.imageSmoothing||e.imageSmoothing;void 0!==e.interpolate&&(r=e.interpolate);var n=void 0!==e.requestEncoding?e.requestEncoding:\"KVP\",o=e.tileGrid,a=e.urls;return void 0===a&&void 0!==e.url&&(a=$LIR5$import$expandUrl(e.url)),(i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:r,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:o,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:a,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition,zDirection:e.zDirection})||this).version_=void 0!==e.version?e.version:\"1.0.0\",i.format_=void 0!==e.format?e.format:\"image/jpeg\",i.dimensions_=void 0!==e.dimensions?e.dimensions:{},i.layer_=e.layer,i.matrixSet_=e.matrixSet,i.style_=e.style,i.requestEncoding_=n,i.setKey(i.getKeyForDimensions_()),a&&a.length>0&&(i.tileUrlFunction=$LIR5$import$createFromTileUrlFunctions(a.map(i.createFromWMTSTemplate.bind(i)))),i}return $LIR5$var$__extends(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join(\"\\n\");this.setTileUrlFunction($LIR5$import$createFromTileUrlFunctions(t.map(this.createFromWMTSTemplate.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+\"-\"+this.dimensions_[i];return e.join(\"/\")},e.prototype.updateDimensions=function(t){$LIR5$import$assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e.prototype.createFromWMTSTemplate=function(t){var e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};\"KVP\"==e&&$LIR5$import$assign(i,{Service:\"WMTS\",Request:\"GetTile\",Version:this.version_,Format:this.format_}),t=\"KVP\"==e?$LIR5$import$appendParams(t,i):t.replace(/\\{(\\w+?)\\}/g,function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t});var r=this.tileGrid,n=this.dimensions_;return function(i,o,a){if(i){var s={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};$LIR5$import$assign(s,n);var l=t;return l=\"KVP\"==e?$LIR5$import$appendParams(l,s):l.replace(/\\{(\\w+?)\\}/g,function(t,e){return s[e]})}}},e}($LIR5$import$TileImage);function $LIR5$export$optionsFromCapabilities(t,e){var i=t.Contents.Layer,r=$LIR5$import$find(i,function(t,i,r){return t.Identifier==e.layer});if(null===r)return null;var n,o=t.Contents.TileMatrixSet;(n=r.TileMatrixSetLink.length>1?\"projection\"in e?$LIR5$import$findIndex(r.TileMatrixSetLink,function(t,i,r){var n=$LIR5$import$find(o,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,a=$LIR5$import$getProjection(n),s=$LIR5$import$getProjection(e.projection);return a&&s?$LIR5$import$equivalent(a,s):n==e.projection}):$LIR5$import$findIndex(r.TileMatrixSetLink,function(t,i,r){return t.TileMatrixSet==e.matrixSet}):0)<0&&(n=0);var a=r.TileMatrixSetLink[n].TileMatrixSet,s=r.TileMatrixSetLink[n].TileMatrixSetLimits,l=r.Format[0];\"format\"in e&&(l=e.format),(n=$LIR5$import$findIndex(r.Style,function(t,i,r){return\"style\"in e?t.Title==e.style:t.isDefault}))<0&&(n=0);var p=r.Style[n].Identifier,$={};\"Dimension\"in r&&r.Dimension.forEach(function(t,e,i){var r=t.Identifier,n=t.Default;void 0===n&&(n=t.Value[0]),$[r]=n});var u,c=t.Contents.TileMatrixSet,m=$LIR5$import$find(c,function(t,e,i){return t.Identifier==a}),f=m.SupportedCRS;if(f&&(u=$LIR5$import$getProjection(f)),\"projection\"in e){var d=$LIR5$import$getProjection(e.projection);d&&(u&&!$LIR5$import$equivalent(d,u)||(u=d))}var L=!1,R=\"ne\"==u.getAxisOrientation().substr(0,2),I=m.TileMatrix[0],x={MinTileCol:0,MinTileRow:0,MaxTileCol:I.MatrixWidth-1,MaxTileRow:I.MatrixHeight-1};if(s){x=s[s.length-1];var g=$LIR5$import$find(m.TileMatrix,function(t){return t.Identifier===x.TileMatrix||m.Identifier+\":\"+t.Identifier===x.TileMatrix});g&&(I=g)}var h=28e-5*I.ScaleDenominator/u.getMetersPerUnit(),T=R?[I.TopLeftCorner[1],I.TopLeftCorner[0]]:I.TopLeftCorner,v=I.TileWidth*h,y=I.TileHeight*h,S=m.BoundingBox;S&&R&&(S=[S[1],S[0],S[3],S[2]]);var _=[T[0]+v*x.MinTileCol,T[1]-y*(1+x.MaxTileRow),T[0]+v*(1+x.MaxTileCol),T[1]-y*x.MinTileRow];if(void 0!==S&&!$LIR5$import$containsExtent(S,_)){var M=r.WGS84BoundingBox,j=$LIR5$import$getProjection(\"EPSG:4326\").getExtent();if(_=S,M)L=M[0]===j[0]&&M[2]===j[2];else{var C=$LIR5$import$transformExtent(S,m.SupportedCRS,\"EPSG:4326\");L=C[0]-1e-10<=j[0]&&C[2]+1e-10>=j[2]}}var P=$LIR5$import$createFromCapabilitiesMatrixSet(m,_,s),F=[],E=e.requestEncoding;if(E=void 0!==E?E:\"\",\"OperationsMetadata\"in t&&\"GetTile\"in t.OperationsMetadata)for(var q=t.OperationsMetadata.GetTile.DCP.HTTP.Get,b=0,w=q.length;b<w;++b)if(q[b].Constraint){var D=$LIR5$import$find(q[b].Constraint,function(t){return\"GetEncoding\"==t.name}).AllowedValues.Value;if(\"\"===E&&(E=D[0]),\"KVP\"!==E)break;$LIR5$import$includes(D,\"KVP\")&&F.push(q[b].href)}else q[b].href&&(E=\"KVP\",F.push(q[b].href));return 0===F.length&&(E=\"REST\",r.ResourceURL.forEach(function(t){\"tile\"===t.resourceType&&(l=t.format,F.push(t.template))})),{urls:F,layer:e.layer,matrixSet:a,format:l,projection:u,requestEncoding:E,tileGrid:P,style:p,dimensions:$,wrapX:L,crossOrigin:e.crossOrigin}}$LIR5$exports.default=$LIR5$export$default,$LIR5$exports.optionsFromCapabilities=$LIR5$export$optionsFromCapabilities;"},"sourceMaps":null,"error":null,"hash":"b88c62e7bd1c5ec46ac7434eed39da9d","cacheData":{"env":{},"imports":{"$LIR5$import$TileImage":["./TileImage.js","default"],"$LIR5$import$appendParams":["../uri.js","appendParams"],"$LIR5$import$assign":["../obj.js","assign"],"$LIR5$import$containsExtent":["../extent.js","containsExtent"],"$LIR5$import$createFromCapabilitiesMatrixSet":["../tilegrid/WMTS.js","createFromCapabilitiesMatrixSet"],"$LIR5$import$createFromTileUrlFunctions":["../tileurlfunction.js","createFromTileUrlFunctions"],"$LIR5$import$expandUrl":["../tileurlfunction.js","expandUrl"],"$LIR5$import$equivalent":["../proj.js","equivalent"],"$LIR5$import$getProjection":["../proj.js","get"],"$LIR5$import$transformExtent":["../proj.js","transformExtent"],"$LIR5$import$find":["../array.js","find"],"$LIR5$import$findIndex":["../array.js","findIndex"],"$LIR5$import$includes":["../array.js","includes"]},"exports":{"default":"$LIR5$export$default","optionsFromCapabilities":"$LIR5$export$optionsFromCapabilities"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}