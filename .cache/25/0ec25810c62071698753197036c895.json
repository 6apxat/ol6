{"id":"FFf1","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/ol/package.json","includedInParent":true,"mtime":1679700665093},{"name":"../asserts.js","loc":{"line":13,"column":23,"index":442},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/format/IIIFInfo.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/asserts.js"},{"name":"../array.js","loc":{"line":14,"column":25,"index":484},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/format/IIIFInfo.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/array.js"}],"generated":{"js":"var $FFf1$exports={};$parcel$require(\"FFf1\",\"../asserts.js\"),$parcel$require(\"FFf1\",\"../array.js\");var $FFf1$var$__spreadArray=$FFf1$exports&&$FFf1$exports.__spreadArray||function(e,i,r){if(r||2===arguments.length)for(var o,t=0,a=i.length;t<a;t++)!o&&t in i||(o||(o=Array.prototype.slice.call(i,0,t)),o[t]=i[t]);return e.concat(o||Array.prototype.slice.call(i))},$FFf1$export$Versions={VERSION1:\"version1\",VERSION2:\"version2\",VERSION3:\"version3\"};$FFf1$exports.Versions=$FFf1$export$Versions;var $FFf1$var$IIIF_PROFILE_VALUES={};$FFf1$var$IIIF_PROFILE_VALUES[$FFf1$export$Versions.VERSION1]={level0:{supports:[],formats:[],qualities:[\"native\"]},level1:{supports:[\"regionByPx\",\"sizeByW\",\"sizeByH\",\"sizeByPct\"],formats:[\"jpg\"],qualities:[\"native\"]},level2:{supports:[\"regionByPx\",\"regionByPct\",\"sizeByW\",\"sizeByH\",\"sizeByPct\",\"sizeByConfinedWh\",\"sizeByWh\"],formats:[\"jpg\",\"png\"],qualities:[\"native\",\"color\",\"grey\",\"bitonal\"]}},$FFf1$var$IIIF_PROFILE_VALUES[$FFf1$export$Versions.VERSION2]={level0:{supports:[],formats:[\"jpg\"],qualities:[\"default\"]},level1:{supports:[\"regionByPx\",\"sizeByW\",\"sizeByH\",\"sizeByPct\"],formats:[\"jpg\"],qualities:[\"default\"]},level2:{supports:[\"regionByPx\",\"regionByPct\",\"sizeByW\",\"sizeByH\",\"sizeByPct\",\"sizeByConfinedWh\",\"sizeByDistortedWh\",\"sizeByWh\"],formats:[\"jpg\",\"png\"],qualities:[\"default\",\"bitonal\"]}},$FFf1$var$IIIF_PROFILE_VALUES[$FFf1$export$Versions.VERSION3]={level0:{supports:[],formats:[\"jpg\"],qualities:[\"default\"]},level1:{supports:[\"regionByPx\",\"regionSquare\",\"sizeByW\",\"sizeByH\",\"sizeByWh\"],formats:[\"jpg\"],qualities:[\"default\"]},level2:{supports:[\"regionByPx\",\"regionSquare\",\"regionByPct\",\"sizeByW\",\"sizeByH\",\"sizeByPct\",\"sizeByConfinedWh\",\"sizeByWh\"],formats:[\"jpg\",\"png\"],qualities:[\"default\"]}},$FFf1$var$IIIF_PROFILE_VALUES.none={none:{supports:[],formats:[],qualities:[]}};var $FFf1$var$COMPLIANCE_VERSION1=/^https?:\\/\\/library\\.stanford\\.edu\\/iiif\\/image-api\\/(?:1\\.1\\/)?compliance\\.html#level[0-2]$/,$FFf1$var$COMPLIANCE_VERSION2=/^https?:\\/\\/iiif\\.io\\/api\\/image\\/2\\/level[0-2](?:\\.json)?$/,$FFf1$var$COMPLIANCE_VERSION3=/(^https?:\\/\\/iiif\\.io\\/api\\/image\\/3\\/level[0-2](?:\\.json)?$)|(^level[0-2]$)/;function $FFf1$var$generateVersion1Options(e){var i=e.getComplianceLevelSupportedFeatures();return void 0===i&&(i=$FFf1$var$IIIF_PROFILE_VALUES[$FFf1$export$Versions.VERSION1].level0),{url:void 0===e.imageInfo[\"@id\"]?void 0:e.imageInfo[\"@id\"].replace(/\\/?(?:info\\.json)?$/g,\"\"),supports:i.supports,formats:$FFf1$var$__spreadArray($FFf1$var$__spreadArray([],i.formats,!0),[void 0===e.imageInfo.formats?[]:e.imageInfo.formats],!1),qualities:$FFf1$var$__spreadArray($FFf1$var$__spreadArray([],i.qualities,!0),[void 0===e.imageInfo.qualities?[]:e.imageInfo.qualities],!1),resolutions:e.imageInfo.scale_factors,tileSize:void 0!==e.imageInfo.tile_width?void 0!==e.imageInfo.tile_height?[e.imageInfo.tile_width,e.imageInfo.tile_height]:[e.imageInfo.tile_width,e.imageInfo.tile_width]:null!=e.imageInfo.tile_height?[e.imageInfo.tile_height,e.imageInfo.tile_height]:void 0}}function $FFf1$var$generateVersion2Options(e){var i=e.getComplianceLevelSupportedFeatures(),r=Array.isArray(e.imageInfo.profile)&&e.imageInfo.profile.length>1,o=r&&e.imageInfo.profile[1].supports?e.imageInfo.profile[1].supports:[],t=r&&e.imageInfo.profile[1].formats?e.imageInfo.profile[1].formats:[],a=r&&e.imageInfo.profile[1].qualities?e.imageInfo.profile[1].qualities:[];return{url:e.imageInfo[\"@id\"].replace(/\\/?(?:info\\.json)?$/g,\"\"),sizes:void 0===e.imageInfo.sizes?void 0:e.imageInfo.sizes.map(function(e){return[e.width,e.height]}),tileSize:void 0===e.imageInfo.tiles?void 0:[e.imageInfo.tiles.map(function(e){return e.width})[0],e.imageInfo.tiles.map(function(e){return void 0===e.height?e.width:e.height})[0]],resolutions:void 0===e.imageInfo.tiles?void 0:e.imageInfo.tiles.map(function(e){return e.scaleFactors})[0],supports:$FFf1$var$__spreadArray($FFf1$var$__spreadArray([],i.supports,!0),o,!0),formats:$FFf1$var$__spreadArray($FFf1$var$__spreadArray([],i.formats,!0),t,!0),qualities:$FFf1$var$__spreadArray($FFf1$var$__spreadArray([],i.qualities,!0),a,!0)}}function $FFf1$var$generateVersion3Options(e){var i=e.getComplianceLevelSupportedFeatures(),r=void 0===e.imageInfo.extraFormats?i.formats:$FFf1$var$__spreadArray($FFf1$var$__spreadArray([],i.formats,!0),e.imageInfo.extraFormats,!0),o=void 0!==e.imageInfo.preferredFormats&&Array.isArray(e.imageInfo.preferredFormats)&&e.imageInfo.preferredFormats.length>0?e.imageInfo.preferredFormats.filter(function(e){return $FFf1$import$includes([\"jpg\",\"png\",\"gif\"],e)}).reduce(function(e,i){return void 0===e&&$FFf1$import$includes(r,i)?i:e},void 0):void 0;return{url:e.imageInfo.id,sizes:void 0===e.imageInfo.sizes?void 0:e.imageInfo.sizes.map(function(e){return[e.width,e.height]}),tileSize:void 0===e.imageInfo.tiles?void 0:[e.imageInfo.tiles.map(function(e){return e.width})[0],e.imageInfo.tiles.map(function(e){return e.height})[0]],resolutions:void 0===e.imageInfo.tiles?void 0:e.imageInfo.tiles.map(function(e){return e.scaleFactors})[0],supports:void 0===e.imageInfo.extraFeatures?i.supports:$FFf1$var$__spreadArray($FFf1$var$__spreadArray([],i.supports,!0),e.imageInfo.extraFeatures,!0),formats:r,qualities:void 0===e.imageInfo.extraQualities?i.qualities:$FFf1$var$__spreadArray($FFf1$var$__spreadArray([],i.qualities,!0),e.imageInfo.extraQualities,!0),preferredFormat:o}}var $FFf1$var$versionFunctions={};$FFf1$var$versionFunctions[$FFf1$export$Versions.VERSION1]=$FFf1$var$generateVersion1Options,$FFf1$var$versionFunctions[$FFf1$export$Versions.VERSION2]=$FFf1$var$generateVersion2Options,$FFf1$var$versionFunctions[$FFf1$export$Versions.VERSION3]=$FFf1$var$generateVersion3Options;var $FFf1$export$default=function(){function e(e){this.setImageInfo(e)}return e.prototype.setImageInfo=function(e){this.imageInfo=\"string\"==typeof e?JSON.parse(e):e},e.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var e=this.imageInfo[\"@context\"]||\"ol-no-context\";\"string\"==typeof e&&(e=[e]);for(var i=0;i<e.length;i++)switch(e[i]){case\"http://library.stanford.edu/iiif/image-api/1.1/context.json\":case\"http://iiif.io/api/image/1/context.json\":return $FFf1$export$Versions.VERSION1;case\"http://iiif.io/api/image/2/context.json\":return $FFf1$export$Versions.VERSION2;case\"http://iiif.io/api/image/3/context.json\":return $FFf1$export$Versions.VERSION3;case\"ol-no-context\":if(this.getComplianceLevelEntryFromProfile($FFf1$export$Versions.VERSION1)&&this.imageInfo.identifier)return $FFf1$export$Versions.VERSION1}$FFf1$import$assert(!1,61)}},e.prototype.getComplianceLevelEntryFromProfile=function(e){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===e&&(e=this.getImageApiVersion()),e){case $FFf1$export$Versions.VERSION1:if($FFf1$var$COMPLIANCE_VERSION1.test(this.imageInfo.profile))return this.imageInfo.profile;break;case $FFf1$export$Versions.VERSION3:if($FFf1$var$COMPLIANCE_VERSION3.test(this.imageInfo.profile))return this.imageInfo.profile;break;case $FFf1$export$Versions.VERSION2:if(\"string\"==typeof this.imageInfo.profile&&$FFf1$var$COMPLIANCE_VERSION2.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&\"string\"==typeof this.imageInfo.profile[0]&&$FFf1$var$COMPLIANCE_VERSION2.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},e.prototype.getComplianceLevelFromProfile=function(e){var i=this.getComplianceLevelEntryFromProfile(e);if(void 0!==i){var r=i.match(/level[0-2](?:\\.json)?$/g);return Array.isArray(r)?r[0].replace(\".json\",\"\"):void 0}},e.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var e=this.getImageApiVersion(),i=this.getComplianceLevelFromProfile(e);return void 0===i?$FFf1$var$IIIF_PROFILE_VALUES.none.none:$FFf1$var$IIIF_PROFILE_VALUES[e][i]}},e.prototype.getTileSourceOptions=function(e){var i=e||{},r=this.getImageApiVersion();if(void 0!==r){var o=void 0===r?void 0:$FFf1$var$versionFunctions[r](this);if(void 0!==o)return{url:o.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:o.sizes,format:void 0!==i.format&&$FFf1$import$includes(o.formats,i.format)?i.format:void 0!==o.preferredFormat?o.preferredFormat:\"jpg\",supports:o.supports,quality:i.quality&&$FFf1$import$includes(o.qualities,i.quality)?i.quality:$FFf1$import$includes(o.qualities,\"native\")?\"native\":\"default\",resolutions:Array.isArray(o.resolutions)?o.resolutions.sort(function(e,i){return i-e}):void 0,tileSize:o.tileSize}}},e}();$FFf1$exports.default=$FFf1$export$default;"},"sourceMaps":null,"error":null,"hash":"adeb4926c482e8f2057da85422e15829","cacheData":{"env":{},"imports":{"$FFf1$import$assert":["../asserts.js","assert"],"$FFf1$import$includes":["../array.js","includes"]},"exports":{"Versions":"$FFf1$export$Versions","default":"$FFf1$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}