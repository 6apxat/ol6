{"id":"ua0f","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/package.json","includedInParent":true,"mtime":1679700660922},{"name":"@petamoriken/float16","loc":{"line":2,"column":27,"index":55},"parent":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/geotiffimage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/@petamoriken/float16/browser/float16.js"},{"name":"xml-utils/get-attribute.js","loc":{"line":3,"column":25,"index":104},"parent":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/geotiffimage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/xml-utils/get-attribute.js"},{"name":"xml-utils/find-tags-by-name.js","loc":{"line":4,"column":27,"index":161},"parent":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/geotiffimage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/xml-utils/find-tags-by-name.js"},{"name":"./globals.js","loc":{"line":6,"column":63,"index":259},"parent":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/geotiffimage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/globals.js"},{"name":"./rgb.js","loc":{"line":7,"column":95,"index":370},"parent":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/geotiffimage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/rgb.js"},{"name":"./compression/index.js","loc":{"line":8,"column":27,"index":409},"parent":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/geotiffimage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/compression/index.js"},{"name":"./resample.js","loc":{"line":9,"column":46,"index":481},"parent":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/geotiffimage.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/geotiff/dist-module/resample.js"}],"generated":{"js":"var $ua0f$exports={};function $ua0f$var$_typeof(t){return($ua0f$var$_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function $ua0f$var$_slicedToArray(t,e){return $ua0f$var$_arrayWithHoles(t)||$ua0f$var$_iterableToArrayLimit(t,e)||$ua0f$var$_unsupportedIterableToArray(t,e)||$ua0f$var$_nonIterableRest()}function $ua0f$var$_nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function $ua0f$var$_unsupportedIterableToArray(t,e){if(t){if(\"string\"==typeof t)return $ua0f$var$_arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===r&&t.constructor&&(r=t.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$ua0f$var$_arrayLikeToArray(t,e):void 0}}function $ua0f$var$_arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function $ua0f$var$_iterableToArrayLimit(t,e){var r=null==t?null:\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(null!=r){var i,a,n,o,u=[],l=!0,s=!1;try{if(n=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=n.call(r)).done)&&(u.push(i.value),u.length!==e);l=!0);}catch(f){s=!0,a=f}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return u}}function $ua0f$var$_arrayWithHoles(t){if(Array.isArray(t))return t}function $ua0f$var$_regeneratorRuntime(){$ua0f$var$_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a=\"function\"==typeof Symbol?Symbol:{},n=a.iterator||\"@@iterator\",o=a.asyncIterator||\"@@asyncIterator\",u=a.toStringTag||\"@@toStringTag\";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},\"\")}catch(P){l=function(t,e,r){return t[e]=r}}function s(t,e,r,a){var n=e&&e.prototype instanceof h?e:h,o=Object.create(n.prototype),u=new S(a||[]);return i(o,\"_invoke\",{value:b(t,r,u)}),o}function f(t,e,r){try{return{type:\"normal\",arg:t.call(e,r)}}catch(P){return{type:\"throw\",arg:P}}}t.wrap=s;var c={};function h(){}function p(){}function $(){}var y={};l(y,n,function(){return this});var g=Object.getPrototypeOf,v=g&&g(g(T([])));v&&v!==e&&r.call(v,n)&&(y=v);var m=$.prototype=h.prototype=Object.create(y);function d(t){[\"next\",\"throw\",\"return\"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var a;i(this,\"_invoke\",{value:function(i,n){function o(){return new e(function(a,o){!function i(a,n,o,u){var l=f(t[a],t,n);if(\"throw\"!==l.type){var s=l.arg,c=s.value;return c&&\"object\"==$ua0f$var$_typeof(c)&&r.call(c,\"__await\")?e.resolve(c.__await).then(function(t){i(\"next\",t,o,u)},function(t){i(\"throw\",t,o,u)}):e.resolve(c).then(function(t){s.value=t,o(s)},function(t){return i(\"throw\",t,o,u)})}u(l.arg)}(i,n,a,o)})}return a=a?a.then(o,o):o()}})}function b(t,e,r){var i=\"suspendedStart\";return function(a,n){if(\"executing\"===i)throw new Error(\"Generator is already running\");if(\"completed\"===i){if(\"throw\"===a)throw n;return _()}for(r.method=a,r.arg=n;;){var o=r.delegate;if(o){var u=x(o,r);if(u){if(u===c)continue;return u}}if(\"next\"===r.method)r.sent=r._sent=r.arg;else if(\"throw\"===r.method){if(\"suspendedStart\"===i)throw i=\"completed\",r.arg;r.dispatchException(r.arg)}else\"return\"===r.method&&r.abrupt(\"return\",r.arg);i=\"executing\";var l=f(t,e,r);if(\"normal\"===l.type){if(i=r.done?\"completed\":\"suspendedYield\",l.arg===c)continue;return{value:l.arg,done:r.done}}\"throw\"===l.type&&(i=\"completed\",r.method=\"throw\",r.arg=l.arg)}}}function x(t,e){var r=e.method,i=t.iterator[r];if(void 0===i)return e.delegate=null,\"throw\"===r&&t.iterator.return&&(e.method=\"return\",e.arg=void 0,x(t,e),\"throw\"===e.method)||\"return\"!==r&&(e.method=\"throw\",e.arg=new TypeError(\"The iterator does not provide a '\"+r+\"' method\")),c;var a=f(i,t.iterator,e.arg);if(\"throw\"===a.type)return e.method=\"throw\",e.arg=a.arg,e.delegate=null,c;var n=a.arg;return n?n.done?(e[t.resultName]=n.value,e.next=t.nextLoc,\"return\"!==e.method&&(e.method=\"next\",e.arg=void 0),e.delegate=null,c):n:(e.method=\"throw\",e.arg=new TypeError(\"iterator result is not an object\"),e.delegate=null,c)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type=\"normal\",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:\"root\"}],t.forEach(k,this),this.reset(!0)}function T(t){if(t){var e=t[n];if(e)return e.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return p.prototype=$,i(m,\"constructor\",{value:$,configurable:!0}),i($,\"constructor\",{value:p,configurable:!0}),p.displayName=l($,u,\"GeneratorFunction\"),t.isGeneratorFunction=function(t){var e=\"function\"==typeof t&&t.constructor;return!!e&&(e===p||\"GeneratorFunction\"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,$):(t.__proto__=$,l(t,u,\"GeneratorFunction\")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},d(w.prototype),l(w.prototype,o,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,i,a,n){void 0===n&&(n=Promise);var o=new w(s(e,r,i,a),n);return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},d(m),l(m,u,\"Generator\"),l(m,n,function(){return this}),l(m,\"toString\",function(){return\"[object Generator]\"}),t.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=void 0,this.tryEntries.forEach(D),!t)for(var e in this)\"t\"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\"throw\"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(r,i){return o.type=\"throw\",o.arg=t,e.next=r,i&&(e.method=\"next\",e.arg=void 0),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a],o=n.completion;if(\"root\"===n.tryLoc)return i(\"end\");if(n.tryLoc<=this.prev){var u=r.call(n,\"catchLoc\"),l=r.call(n,\"finallyLoc\");if(u&&l){if(this.prev<n.catchLoc)return i(n.catchLoc,!0);if(this.prev<n.finallyLoc)return i(n.finallyLoc)}else if(u){if(this.prev<n.catchLoc)return i(n.catchLoc,!0)}else{if(!l)throw new Error(\"try statement without catch or finally\");if(this.prev<n.finallyLoc)return i(n.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&r.call(a,\"finallyLoc\")&&this.prev<a.finallyLoc){var n=a;break}}n&&(\"break\"===t||\"continue\"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=t,o.arg=e,n?(this.method=\"next\",this.next=n.finallyLoc,c):this.complete(o)},complete:function(t,e){if(\"throw\"===t.type)throw t.arg;return\"break\"===t.type||\"continue\"===t.type?this.next=t.arg:\"return\"===t.type?(this.rval=this.arg=t.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if(\"throw\"===i.type){var a=i.arg;D(r)}return a}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},\"next\"===this.method&&(this.arg=void 0),c}},t}function $ua0f$var$asyncGeneratorStep(t,e,r,i,a,n,o){try{var u=t[n](o),l=u.value}catch(s){return void r(s)}u.done?e(l):Promise.resolve(l).then(i,a)}function $ua0f$var$_asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise(function(i,a){var n=t.apply(e,r);function o(t){$ua0f$var$asyncGeneratorStep(n,i,a,o,u,\"next\",t)}function u(t){$ua0f$var$asyncGeneratorStep(n,i,a,o,u,\"throw\",t)}o(void 0)})}}function $ua0f$var$_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function $ua0f$var$_defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,$ua0f$var$_toPropertyKey(i.key),i)}}function $ua0f$var$_createClass(t,e,r){return e&&$ua0f$var$_defineProperties(t.prototype,e),r&&$ua0f$var$_defineProperties(t,r),Object.defineProperty(t,\"prototype\",{writable:!1}),t}function $ua0f$var$_toPropertyKey(t){var e=$ua0f$var$_toPrimitive(t,\"string\");return\"symbol\"===$ua0f$var$_typeof(e)?e:String(e)}function $ua0f$var$_toPrimitive(t,e){if(\"object\"!==$ua0f$var$_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||\"default\");if(\"object\"!==$ua0f$var$_typeof(i))return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(t)}function $ua0f$var$sum(t,e,r){for(var i=0,a=e;a<r;++a)i+=t[a];return i}function $ua0f$var$arrayForType(t,e,r){switch(t){case 1:if(e<=8)return new Uint8Array(r);if(e<=16)return new Uint16Array(r);if(e<=32)return new Uint32Array(r);break;case 2:if(8===e)return new Int8Array(r);if(16===e)return new Int16Array(r);if(32===e)return new Int32Array(r);break;case 3:switch(e){case 16:case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error(\"Unsupported data format/bitsPerSample\")}function $ua0f$var$needsNormalization(t,e){return(1!==t&&2!==t||!(e<=32)||e%8!=0)&&(3!==t||16!==e&&32!==e&&64!==e)}function $ua0f$var$normalizeArray(t,e,r,i,a,n,o){var u=new DataView(t),l=2===r?1:i,s=$ua0f$var$arrayForType(e,a,2===r?o*n:o*n*i),f=parseInt(\"1\".repeat(a),2);if(1===e){var c=n*(1===r?i*a:a);0!=(7&c)&&(c=c+7&-8);for(var h=0;h<o;++h)for(var p=h*c,$=0;$<n;++$)for(var y=p+$*l*a,g=0;g<l;++g){var v=y+g*a,m=(h*n+$)*l+g,d=Math.floor(v/8),w=v%8;if(w+a<=8)s[m]=u.getUint8(d)>>8-a-w&f;else if(w+a<=16)s[m]=u.getUint16(d)>>16-a-w&f;else if(w+a<=24){var b=u.getUint16(d)<<8|u.getUint8(d+2);s[m]=b>>24-a-w&f}else s[m]=u.getUint32(d)>>32-a-w&f}}return s.buffer}$parcel$require(\"ua0f\",\"@petamoriken/float16\"),$parcel$require(\"ua0f\",\"xml-utils/get-attribute.js\"),$parcel$require(\"ua0f\",\"xml-utils/find-tags-by-name.js\"),$parcel$require(\"ua0f\",\"./globals.js\"),$parcel$require(\"ua0f\",\"./rgb.js\"),$parcel$require(\"ua0f\",\"./compression/index.js\"),$parcel$require(\"ua0f\",\"./resample.js\");var $ua0f$export$default=function(){function t(e,r,i,a,n,o){$ua0f$var$_classCallCheck(this,t),this.fileDirectory=e,this.geoKeys=r,this.dataView=i,this.littleEndian=a,this.tiles=n?{}:null,this.isTiled=!e.StripOffsets;var u=e.PlanarConfiguration;if(this.planarConfiguration=void 0===u?1:u,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error(\"Invalid planar configuration.\");this.source=o}return $ua0f$var$_createClass(t,[{key:\"getFileDirectory\",value:function(){return this.fileDirectory}},{key:\"getGeoKeys\",value:function(){return this.geoKeys}},{key:\"getWidth\",value:function(){return this.fileDirectory.ImageWidth}},{key:\"getHeight\",value:function(){return this.fileDirectory.ImageLength}},{key:\"getSamplesPerPixel\",value:function(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}},{key:\"getTileWidth\",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:\"getTileHeight\",value:function(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:\"getBlockWidth\",value:function(){return this.getTileWidth()}},{key:\"getBlockHeight\",value:function(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}},{key:\"getBytesPerPixel\",value:function(){for(var t=0,e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}},{key:\"getSampleByteSize\",value:function(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(\"Sample index \".concat(t,\" is out of range.\"));return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}},{key:\"getReaderForSample\",value:function(t){var e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(t,e){return $ua0f$import$getFloat16(this,t,e)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error(\"Unsupported data format/bitsPerSample\")}},{key:\"getSampleFormat\",value:function(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}},{key:\"getBitsPerSample\",value:function(t=0){return this.fileDirectory.BitsPerSample[t]}},{key:\"getArrayForSample\",value:function(t,e){return $ua0f$var$arrayForType(this.getSampleFormat(t),this.getBitsPerSample(t),e)}},{key:\"getTileOrStrip\",value:function(){var t=$ua0f$var$_asyncToGenerator($ua0f$var$_regeneratorRuntime().mark(function t(e,r,i,a,n){var o,u,l,s,f,c,h,p,$=this;return $ua0f$var$_regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=Math.ceil(this.getWidth()/this.getTileWidth()),u=Math.ceil(this.getHeight()/this.getTileHeight()),s=this.tiles,1===this.planarConfiguration?l=r*o+e:2===this.planarConfiguration&&(l=i*o*u+r*o+e),this.isTiled?(f=this.fileDirectory.TileOffsets[l],c=this.fileDirectory.TileByteCounts[l]):(f=this.fileDirectory.StripOffsets[l],c=this.fileDirectory.StripByteCounts[l]),t.next=7,this.source.fetch([{offset:f,length:c}],n);case 7:return h=t.sent[0],null!==s&&s[l]?p=s[l]:(p=$ua0f$var$_asyncToGenerator($ua0f$var$_regeneratorRuntime().mark(function t(){var e,i,n;return $ua0f$var$_regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.decode($.fileDirectory,h);case 2:return e=t.sent,i=$.getSampleFormat(),n=$.getBitsPerSample(),$ua0f$var$needsNormalization(i,n)&&(e=$ua0f$var$normalizeArray(e,i,$.planarConfiguration,$.getSamplesPerPixel(),n,$.getTileWidth(),$.getBlockHeight(r))),t.abrupt(\"return\",e);case 7:case\"end\":return t.stop()}},t)}))(),null!==s&&(s[l]=p)),t.t0=e,t.t1=r,t.t2=i,t.next=14,p;case 14:return t.t3=t.sent,t.abrupt(\"return\",{x:t.t0,y:t.t1,sample:t.t2,data:t.t3});case 16:case\"end\":return t.stop()}},t,this)}));return function(e,r,i,a,n){return t.apply(this,arguments)}}()},{key:\"_readRaster\",value:function(){var t=$ua0f$var$_asyncToGenerator($ua0f$var$_regeneratorRuntime().mark(function t(e,r,i,a,n,o,u,l,s){var f,c,h,p,$,y,g,v,m,d,w,b,x,k,D,S,T,_,P,A,I=this;return $ua0f$var$_regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(f=this.getTileWidth(),c=this.getTileHeight(),h=this.getWidth(),p=this.getHeight(),$=Math.max(Math.floor(e[0]/f),0),y=Math.min(Math.ceil(e[2]/f),Math.ceil(h/f)),g=Math.max(Math.floor(e[1]/c),0),v=Math.min(Math.ceil(e[3]/c),Math.ceil(p/c)),m=e[2]-e[0],d=this.getBytesPerPixel(),w=[],b=[],x=0;x<r.length;++x)1===this.planarConfiguration?w.push($ua0f$var$sum(this.fileDirectory.BitsPerSample,0,r[x])/8):w.push(0),b.push(this.getReaderForSample(r[x]));k=[],D=this.littleEndian,S=g;case 16:if(!(S<v)){t.next=32;break}T=$;case 18:if(!(T<y)){t.next=29;break}_=$ua0f$var$_regeneratorRuntime().mark(function t(){var o,u,l;return $ua0f$var$_regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=P,u=r[P],2===I.planarConfiguration&&(d=I.getSampleByteSize(P)),l=I.getTileOrStrip(T,S,u,n,s),k.push(l),l.then(function(t){for(var n=t.data,u=new DataView(n),l=I.getBlockHeight(t.y),s=t.y*c,$=t.x*f,y=s+l,g=(t.x+1)*f,v=b[o],x=Math.min(l,l-(y-e[3]),p-s),k=Math.min(f,f-(g-e[2]),h-$),S=Math.max(0,e[1]-s);S<x;++S)for(var T=Math.max(0,e[0]-$);T<k;++T){var _=(S*f+T)*d,P=v.call(u,_+w[o],D),A=void 0;a?(A=(S+s-e[1])*m*r.length+(T+$-e[0])*r.length+o,i[A]=P):(A=(S+s-e[1])*m+T+$-e[0],i[o][A]=P)}});case 6:case\"end\":return t.stop()}},t)}),P=0;case 21:if(!(P<r.length)){t.next=26;break}return t.delegateYield(_(),\"t0\",23);case 23:++P,t.next=21;break;case 26:++T,t.next=18;break;case 29:++S,t.next=16;break;case 32:return t.next=34,Promise.all(k);case 34:if(!(o&&e[2]-e[0]!==o||u&&e[3]-e[1]!==u)){t.next=39;break}return(A=a?$ua0f$import$resampleInterleaved(i,e[2]-e[0],e[3]-e[1],o,u,r.length,l):$ua0f$import$resample(i,e[2]-e[0],e[3]-e[1],o,u,l)).width=o,A.height=u,t.abrupt(\"return\",A);case 39:return i.width=o||e[2]-e[0],i.height=u||e[3]-e[1],t.abrupt(\"return\",i);case 42:case\"end\":return t.stop()}},t,this)}));return function(e,r,i,a,n,o,u,l,s){return t.apply(this,arguments)}}()},{key:\"readRasters\",value:function(){var t=$ua0f$var$_asyncToGenerator($ua0f$var$_regeneratorRuntime().mark(function t({window:e,samples:r=[],interleave:i,pool:a=null,width:n,height:o,resampleMethod:u,fillValue:l,signal:s}={}){var f,c,h,p,$,y,g,v,m,d,w,b,x,k;return $ua0f$var$_regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!((f=e||[0,0,this.getWidth(),this.getHeight()])[0]>f[2]||f[1]>f[3])){t.next=3;break}throw new Error(\"Invalid subsets\");case 3:if(c=f[2]-f[0],h=f[3]-f[1],p=c*h,$=this.getSamplesPerPixel(),r&&r.length){t.next=11;break}for(y=0;y<$;++y)r.push(y);t.next=18;break;case 11:g=0;case 12:if(!(g<r.length)){t.next=18;break}if(!(r[g]>=$)){t.next=15;break}return t.abrupt(\"return\",Promise.reject(new RangeError(\"Invalid sample index '\".concat(r[g],\"'.\"))));case 15:++g,t.next=12;break;case 18:if(i)m=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,d=Math.max.apply(null,this.fileDirectory.BitsPerSample),v=$ua0f$var$arrayForType(m,d,p*r.length),l&&v.fill(l);else for(v=[],w=0;w<r.length;++w)b=this.getArrayForSample(r[w],p),Array.isArray(l)&&w<l.length?b.fill(l[w]):l&&!Array.isArray(l)&&b.fill(l),v.push(b);if(t.t0=a,t.t0){t.next=24;break}return t.next=23,$ua0f$import$getDecoder(this.fileDirectory);case 23:t.t0=t.sent;case 24:return x=t.t0,t.next=27,this._readRaster(f,r,v,i,x,n,o,u,s);case 27:return k=t.sent,t.abrupt(\"return\",k);case 29:case\"end\":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:\"readRGB\",value:function(){var t=$ua0f$var$_asyncToGenerator($ua0f$var$_regeneratorRuntime().mark(function t({window:e,interleave:r=!0,pool:i=null,width:a,height:n,resampleMethod:o,enableAlpha:u=!1,signal:l}={}){var s,f,c,h,p,$,y,g,v,m,d,w,b,x,k;return $ua0f$var$_regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!((s=e||[0,0,this.getWidth(),this.getHeight()])[0]>s[2]||s[1]>s[3])){t.next=3;break}throw new Error(\"Invalid subsets\");case 3:if((f=this.fileDirectory.PhotometricInterpretation)!==$ua0f$import$photometricInterpretations.RGB){t.next=8;break}if(c=[0,1,2],this.fileDirectory.ExtraSamples!==$ua0f$import$ExtraSamplesValues.Unspecified&&u)for(c=[],h=0;h<this.fileDirectory.BitsPerSample.length;h+=1)c.push(h);return t.abrupt(\"return\",this.readRasters({window:e,interleave:r,samples:c,pool:i,width:a,height:n,resampleMethod:o,signal:l}));case 8:t.t0=f,t.next=t.t0===$ua0f$import$photometricInterpretations.WhiteIsZero?11:t.t0===$ua0f$import$photometricInterpretations.BlackIsZero?11:t.t0===$ua0f$import$photometricInterpretations.Palette?11:t.t0===$ua0f$import$photometricInterpretations.CMYK?13:t.t0===$ua0f$import$photometricInterpretations.YCbCr?15:t.t0===$ua0f$import$photometricInterpretations.CIELab?15:17;break;case 11:return p=[0],t.abrupt(\"break\",18);case 13:return p=[0,1,2,3],t.abrupt(\"break\",18);case 15:return p=[0,1,2],t.abrupt(\"break\",18);case 17:throw new Error(\"Invalid or unsupported photometric interpretation.\");case 18:return $={window:s,interleave:!0,samples:p,pool:i,width:a,height:n,resampleMethod:o,signal:l},y=this.fileDirectory,t.next=22,this.readRasters($);case 22:g=t.sent,v=Math.pow(2,this.fileDirectory.BitsPerSample[0]),t.t1=f,t.next=t.t1===$ua0f$import$photometricInterpretations.WhiteIsZero?27:t.t1===$ua0f$import$photometricInterpretations.BlackIsZero?29:t.t1===$ua0f$import$photometricInterpretations.Palette?31:t.t1===$ua0f$import$photometricInterpretations.CMYK?33:t.t1===$ua0f$import$photometricInterpretations.YCbCr?35:t.t1===$ua0f$import$photometricInterpretations.CIELab?37:39;break;case 27:return m=$ua0f$import$fromWhiteIsZero(g,v),t.abrupt(\"break\",40);case 29:return m=$ua0f$import$fromBlackIsZero(g,v),t.abrupt(\"break\",40);case 31:return m=$ua0f$import$fromPalette(g,y.ColorMap),t.abrupt(\"break\",40);case 33:return m=$ua0f$import$fromCMYK(g),t.abrupt(\"break\",40);case 35:return m=$ua0f$import$fromYCbCr(g),t.abrupt(\"break\",40);case 37:return m=$ua0f$import$fromCIELab(g),t.abrupt(\"break\",40);case 39:throw new Error(\"Unsupported photometric interpretation.\");case 40:if(!r){for(d=new Uint8Array(m.length/3),w=new Uint8Array(m.length/3),b=new Uint8Array(m.length/3),x=0,k=0;x<m.length;x+=3,++k)d[k]=m[x],w[k]=m[x+1],b[k]=m[x+2];m=[d,w,b]}return m.width=g.width,m.height=g.height,t.abrupt(\"return\",m);case 44:case\"end\":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:\"getTiePoints\",value:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var t=[],e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}},{key:\"getGDALMetadata\",value:function(t=null){var e={};if(!this.fileDirectory.GDAL_METADATA)return null;var r=this.fileDirectory.GDAL_METADATA,i=$ua0f$import$findTagsByName(r,\"Item\");i=null===t?i.filter(function(t){return void 0===$ua0f$import$getAttribute(t,\"sample\")}):i.filter(function(e){return Number($ua0f$import$getAttribute(e,\"sample\"))===t});for(var a=0;a<i.length;++a){var n=i[a];e[$ua0f$import$getAttribute(n,\"name\")]=n.inner}return e}},{key:\"getGDALNoData\",value:function(){if(!this.fileDirectory.GDAL_NODATA)return null;var t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}},{key:\"getOrigin\",value:function(){var t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error(\"The image does not have an affine transformation.\")}},{key:\"getResolution\",value:function(t=null){var e=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(r)return[r[0],r[5],r[10]];if(t){var i=$ua0f$var$_slicedToArray(t.getResolution(),3),a=i[0],n=i[1],o=i[2];return[a*t.getWidth()/this.getWidth(),n*t.getHeight()/this.getHeight(),o*t.getWidth()/this.getWidth()]}throw new Error(\"The image does not have an affine transformation.\")}},{key:\"pixelIsArea\",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:\"getBoundingBox\",value:function(){var t=this.getOrigin(),e=this.getResolution(),r=t[0],i=t[1],a=r+e[0]*this.getWidth(),n=i+e[1]*this.getHeight();return[Math.min(r,a),Math.min(i,n),Math.max(r,a),Math.max(i,n)]}}]),t}();$ua0f$exports.default=$ua0f$export$default;"},"sourceMaps":null,"error":null,"hash":"c0c13d219eda08f227172f74030c87c2","cacheData":{"env":{},"imports":{"$ua0f$import$getFloat16":["@petamoriken/float16","getFloat16"],"$ua0f$import$getAttribute":["xml-utils/get-attribute.js","default"],"$ua0f$import$findTagsByName":["xml-utils/find-tags-by-name.js","default"],"$ua0f$import$photometricInterpretations":["./globals.js","photometricInterpretations"],"$ua0f$import$ExtraSamplesValues":["./globals.js","ExtraSamplesValues"],"$ua0f$import$fromWhiteIsZero":["./rgb.js","fromWhiteIsZero"],"$ua0f$import$fromBlackIsZero":["./rgb.js","fromBlackIsZero"],"$ua0f$import$fromPalette":["./rgb.js","fromPalette"],"$ua0f$import$fromCMYK":["./rgb.js","fromCMYK"],"$ua0f$import$fromYCbCr":["./rgb.js","fromYCbCr"],"$ua0f$import$fromCIELab":["./rgb.js","fromCIELab"],"$ua0f$import$getDecoder":["./compression/index.js","getDecoder"],"$ua0f$import$resample":["./resample.js","resample"],"$ua0f$import$resampleInterleaved":["./resample.js","resampleInterleaved"]},"exports":{"default":"$ua0f$export$default"},"wildcards":[],"sideEffects":false,"isES6Module":true}}