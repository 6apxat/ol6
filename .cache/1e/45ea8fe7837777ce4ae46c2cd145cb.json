{"id":"WlOd","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/ol/package.json","includedInParent":true,"mtime":1679700665093},{"name":"./common.js","loc":{"line":19,"column":32,"index":829},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj/Tile.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj/common.js"},{"name":"../events/EventType.js","loc":{"line":20,"column":22,"index":866},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj/Tile.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/EventType.js"},{"name":"../Tile.js","loc":{"line":21,"column":17,"index":909},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj/Tile.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/Tile.js"},{"name":"../TileState.js","loc":{"line":22,"column":22,"index":945},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj/Tile.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/TileState.js"},{"name":"./Triangulation.js","loc":{"line":23,"column":26,"index":990},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj/Tile.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj/Triangulation.js"},{"name":"../reproj.js","loc":{"line":24,"column":90,"index":1102},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj/Tile.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj.js"},{"name":"../math.js","loc":{"line":25,"column":22,"index":1140},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj/Tile.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/math.js"},{"name":"../extent.js","loc":{"line":26,"column":41,"index":1195},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj/Tile.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/extent.js"},{"name":"../events.js","loc":{"line":27,"column":38,"index":1249},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj/Tile.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events.js"},{"name":"../dom.js","loc":{"line":28,"column":30,"index":1295},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj/Tile.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/dom.js"}],"generated":{"js":"var $WlOd$exports={};$parcel$require(\"WlOd\",\"./common.js\"),$parcel$require(\"WlOd\",\"../events/EventType.js\"),$parcel$require(\"WlOd\",\"../Tile.js\"),$parcel$require(\"WlOd\",\"../TileState.js\"),$parcel$require(\"WlOd\",\"./Triangulation.js\"),$parcel$require(\"WlOd\",\"../reproj.js\"),$parcel$require(\"WlOd\",\"../math.js\"),$parcel$require(\"WlOd\",\"../extent.js\"),$parcel$require(\"WlOd\",\"../events.js\"),$parcel$require(\"WlOd\",\"../dom.js\");var $WlOd$var$__extends=$WlOd$exports&&$WlOd$exports.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if(\"function\"!=typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$WlOd$export$default=function(t){function e(e,r,i,o,l,s,n,a,$,p,d,u){var c=t.call(this,l,$WlOd$import$TileState.IDLE,{interpolate:!!u})||this;c.renderEdges_=void 0!==d&&d,c.pixelRatio_=n,c.gutter_=a,c.canvas_=null,c.sourceTileGrid_=r,c.targetTileGrid_=o,c.wrappedTileCoord_=s||l,c.sourceTiles_=[],c.sourcesListenerKeys_=null,c.sourceZ_=0;var _=o.getTileCoordExtent(c.wrappedTileCoord_),O=c.targetTileGrid_.getExtent(),h=c.sourceTileGrid_.getExtent(),T=O?$WlOd$import$getIntersection(_,O):_;if(0===$WlOd$import$getArea(T))return c.state=$WlOd$import$TileState.EMPTY,c;var W=e.getExtent();W&&(h=h?$WlOd$import$getIntersection(h,W):W);var g=o.getResolution(c.wrappedTileCoord_[0]),m=$WlOd$import$calculateSourceExtentResolution(e,i,T,g);if(!isFinite(m)||m<=0)return c.state=$WlOd$import$TileState.EMPTY,c;var f=void 0!==p?p:$WlOd$import$ERROR_THRESHOLD;if(c.triangulation_=new $WlOd$import$Triangulation(e,i,T,h,m*f,g),0===c.triangulation_.getTriangles().length)return c.state=$WlOd$import$TileState.EMPTY,c;c.sourceZ_=r.getZForResolution(m);var v=c.triangulation_.calculateSourceExtent();if(h&&(e.canWrapX()?(v[1]=$WlOd$import$clamp(v[1],h[1],h[3]),v[3]=$WlOd$import$clamp(v[3],h[1],h[3])):v=$WlOd$import$getIntersection(v,h)),$WlOd$import$getArea(v)){for(var E=r.getTileRangeForExtentAndZ(v,c.sourceZ_),S=E.minX;S<=E.maxX;S++)for(var y=E.minY;y<=E.maxY;y++){var x=$(c.sourceZ_,S,y,n);x&&c.sourceTiles_.push(x)}0===c.sourceTiles_.length&&(c.state=$WlOd$import$TileState.EMPTY)}else c.state=$WlOd$import$TileState.EMPTY;return c}return $WlOd$var$__extends(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,i){e&&e.getState()==$WlOd$import$TileState.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=$WlOd$import$TileState.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),i=\"number\"==typeof r?r:r[0],o=\"number\"==typeof r?r:r[1],l=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),n=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=$WlOd$import$renderReprojected(i,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),l,n,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=$WlOd$import$TileState.LOADED}this.changed()},e.prototype.load=function(){if(this.state==$WlOd$import$TileState.IDLE){this.state=$WlOd$import$TileState.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,i){var o=e.getState();if(o==$WlOd$import$TileState.IDLE||o==$WlOd$import$TileState.LOADING){t++;var l=$WlOd$import$listen(e,$WlOd$import$EventType.CHANGE,function(r){var i=e.getState();i!=$WlOd$import$TileState.LOADED&&i!=$WlOd$import$TileState.ERROR&&i!=$WlOd$import$TileState.EMPTY||($WlOd$import$unlistenByKey(l),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(l)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,e,r){t.getState()==$WlOd$import$TileState.IDLE&&t.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach($WlOd$import$unlistenByKey),this.sourcesListenerKeys_=null},e.prototype.release=function(){this.canvas_&&($WlOd$import$releaseCanvas(this.canvas_.getContext(\"2d\")),$WlOd$import$canvasPool.push(this.canvas_),this.canvas_=null),t.prototype.release.call(this)},e}($WlOd$import$Tile);$WlOd$exports.default=$WlOd$export$default;"},"sourceMaps":null,"error":null,"hash":"339974aea4167d7b5b30b3b3b2554751","cacheData":{"env":{},"imports":{"$WlOd$import$ERROR_THRESHOLD":["./common.js","ERROR_THRESHOLD"],"$WlOd$import$EventType":["../events/EventType.js","default"],"$WlOd$import$Tile":["../Tile.js","default"],"$WlOd$import$TileState":["../TileState.js","default"],"$WlOd$import$Triangulation":["./Triangulation.js","default"],"$WlOd$import$calculateSourceExtentResolution":["../reproj.js","calculateSourceExtentResolution"],"$WlOd$import$canvasPool":["../reproj.js","canvasPool"],"$WlOd$import$renderReprojected":["../reproj.js","render"],"$WlOd$import$clamp":["../math.js","clamp"],"$WlOd$import$getArea":["../extent.js","getArea"],"$WlOd$import$getIntersection":["../extent.js","getIntersection"],"$WlOd$import$listen":["../events.js","listen"],"$WlOd$import$unlistenByKey":["../events.js","unlistenByKey"],"$WlOd$import$releaseCanvas":["../dom.js","releaseCanvas"]},"exports":{"default":"$WlOd$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}