{"id":"w95b","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/ol/package.json","includedInParent":true,"mtime":1679700665093},{"name":"../Disposable.js","loc":{"line":19,"column":23,"index":822},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/Disposable.js"},{"name":"../events/Event.js","loc":{"line":20,"column":18,"index":860},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/Event.js"},{"name":"../events/EventType.js","loc":{"line":21,"column":22,"index":904},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/events/EventType.js"},{"name":"../ImageCanvas.js","loc":{"line":22,"column":24,"index":954},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/ImageCanvas.js"},{"name":"../layer/Image.js","loc":{"line":23,"column":23,"index":998},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/layer/Image.js"},{"name":"./Image.js","loc":{"line":24,"column":24,"index":1043},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Image.js"},{"name":"./Source.js","loc":{"line":25,"column":19,"index":1076},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Source.js"},{"name":"../layer/Tile.js","loc":{"line":26,"column":22,"index":1113},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/layer/Tile.js"},{"name":"../TileQueue.js","loc":{"line":27,"column":22,"index":1155},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/TileQueue.js"},{"name":"./Tile.js","loc":{"line":28,"column":23,"index":1197},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Tile.js"},{"name":"../obj.js","loc":{"line":29,"column":23,"index":1233},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/obj.js"},{"name":"../dom.js","loc":{"line":30,"column":38,"index":1284},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/dom.js"},{"name":"../transform.js","loc":{"line":31,"column":42,"index":1339},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/transform.js"},{"name":"../extent.js","loc":{"line":32,"column":55,"index":1413},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/extent.js"},{"name":"../util.js","loc":{"line":33,"column":23,"index":1452},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/util.js"},{"name":"buffer","parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/source/Raster.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/buffer/index.js"}],"generated":{"js":"var $w95b$exports={},$w95b$var$Buffer=require(\"buffer\").Buffer;$parcel$require(\"w95b\",\"../Disposable.js\"),$parcel$require(\"w95b\",\"../events/Event.js\"),$parcel$require(\"w95b\",\"../events/EventType.js\"),$parcel$require(\"w95b\",\"../ImageCanvas.js\"),$parcel$require(\"w95b\",\"../layer/Image.js\"),$parcel$require(\"w95b\",\"./Image.js\"),$parcel$require(\"w95b\",\"./Source.js\"),$parcel$require(\"w95b\",\"../layer/Tile.js\"),$parcel$require(\"w95b\",\"../TileQueue.js\"),$parcel$require(\"w95b\",\"./Tile.js\"),$parcel$require(\"w95b\",\"../obj.js\"),$parcel$require(\"w95b\",\"../dom.js\"),$parcel$require(\"w95b\",\"../transform.js\"),$parcel$require(\"w95b\",\"../extent.js\"),$parcel$require(\"w95b\",\"../util.js\");var $w95b$var$context,$w95b$var$__extends=$w95b$exports&&$w95b$exports.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if(\"function\"!=typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),$w95b$var$hasImageData=!0;try{new ImageData(10,10)}catch(_){$w95b$var$hasImageData=!1}function $w95b$export$newImageData(e,t,r){if($w95b$var$hasImageData)return new ImageData(e,t,r);$w95b$var$context||($w95b$var$context=document.createElement(\"canvas\").getContext(\"2d\"));var a=$w95b$var$context.createImageData(t,r);return a.data.set(e),a}function $w95b$var$createMinion(e){var t=!0;try{new ImageData(10,10)}catch(_){t=!1}function r(e,r,a){return t?new ImageData(e,r,a):{data:e,width:r,height:a}}return function(t){var a=t.buffers,n=t.meta,i=t.imageOps,o=t.width,s=t.height,$=a.length,u=a[0].byteLength;if(i){for(var p=new Array($),c=0;c<$;++c)p[c]=r(new Uint8ClampedArray(a[c]),o,s);return e(p,n).data.buffer}var l=new Uint8ClampedArray(u),h=new Array($),w=new Array($);for(c=0;c<$;++c)h[c]=new Uint8ClampedArray(a[c]),w[c]=[0,0,0,0];for(var d=0;d<u;d+=4){for(var v=0;v<$;++v){var b=h[v];w[v][0]=b[d],w[v][1]=b[d+1],w[v][2]=b[d+2],w[v][3]=b[d+3]}var f=e(w,n);l[d]=f[0],l[d+1]=f[1],l[d+2]=f[2],l[d+3]=f[3]}return l.buffer}}function $w95b$var$createWorker(e,t){var r=Object.keys(e.lib||{}).map(function(t){return\"var \"+t+\" = \"+e.lib[t].toString()+\";\"}).concat([\"var __minion__ = (\"+$w95b$var$createMinion.toString()+\")(\",e.operation.toString(),\");\",'self.addEventListener(\"message\", function(event) {',\"  var buffer = __minion__(event.data);\",\"  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);\",\"});\"]),a=new Worker(\"undefined\"==typeof Blob?\"data:text/javascript;base64,\"+$w95b$var$Buffer.from(r.join(\"\\n\"),\"binary\").toString(\"base64\"):URL.createObjectURL(new Blob(r,{type:\"text/javascript\"})));return a.addEventListener(\"message\",t),a}function $w95b$var$createFauxWorker(e,t){var r=$w95b$var$createMinion(e.operation),a=!1;return{postMessage:function(e){setTimeout(function(){a||t({data:{buffer:r(e),meta:e.meta}})},0)},terminate:function(){a=!0}}}$w95b$exports.newImageData=$w95b$export$newImageData;var $w95b$export$Processor=function(e){function t(t){var r,a=e.call(this)||this;a._imageOps=!!t.imageOps,r=0===t.threads?0:a._imageOps?1:t.threads||1;var n=new Array(r);if(r)for(var i=0;i<r;++i)n[i]=$w95b$var$createWorker(t,a._onWorkerMessage.bind(a,i));else n[0]=$w95b$var$createFauxWorker(t,a._onWorkerMessage.bind(a,0));return a._workers=n,a._queue=[],a._maxQueueLength=t.queue||1/0,a._running=0,a._dataLookup={},a._job=null,a}return $w95b$var$__extends(t,e),t.prototype.process=function(e,t,r){this._enqueue({inputs:e,meta:t,callback:r}),this._dispatch()},t.prototype._enqueue=function(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},t.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var e=this._queue.shift();this._job=e;var t=e.inputs[0].width,r=e.inputs[0].height,a=e.inputs.map(function(e){return e.data.buffer}),n=this._workers.length;if(this._running=n,1!==n)for(var i=e.inputs[0].data.length,o=4*Math.ceil(i/4/n),s=0;s<n;++s){for(var $=s*o,u=[],p=0,c=a.length;p<c;++p)u.push(a[p].slice($,$+o));this._workers[s].postMessage({buffers:u,meta:e.meta,imageOps:this._imageOps,width:t,height:r},u)}else this._workers[0].postMessage({buffers:a,meta:e.meta,imageOps:this._imageOps,width:t,height:r},a)}},t.prototype._onWorkerMessage=function(e,t){this.disposed||(this._dataLookup[e]=t.data,--this._running,0===this._running&&this._resolveJob())},t.prototype._resolveJob=function(){var e,t,r=this._job,a=this._workers.length;if(1===a)e=new Uint8ClampedArray(this._dataLookup[0].buffer),t=this._dataLookup[0].meta;else{var n=r.inputs[0].data.length;e=new Uint8ClampedArray(n),t=new Array(a);for(var i=4*Math.ceil(n/4/a),o=0;o<a;++o){var s=this._dataLookup[o].buffer,$=o*i;e.set(new Uint8ClampedArray(s),$),t[o]=this._dataLookup[o].meta}}this._job=null,this._dataLookup={},r.callback(null,$w95b$export$newImageData(e,r.inputs[0].width,r.inputs[0].height),t),this._dispatch()},t.prototype.disposeInternal=function(){for(var e=0;e<this._workers.length;++e)this._workers[e].terminate();this._workers.length=0},t}($w95b$import$Disposable);$w95b$exports.Processor=$w95b$export$Processor;var $w95b$var$RasterEventType={BEFOREOPERATIONS:\"beforeoperations\",AFTEROPERATIONS:\"afteroperations\"},$w95b$var$RasterOperationType={PIXEL:\"pixel\",IMAGE:\"image\"},$w95b$export$RasterSourceEvent=function(e){function t(t,r,a){var n=e.call(this,t)||this;return n.extent=r.extent,n.resolution=r.viewState.resolution/r.pixelRatio,n.data=a,n}return $w95b$var$__extends(t,e),t}($w95b$import$Event);$w95b$exports.RasterSourceEvent=$w95b$export$RasterSourceEvent;var $w95b$export$default=function(e){function t(t){var r=e.call(this,{projection:null})||this;r.on,r.once,r.un,r.processor_=null,r.operationType_=void 0!==t.operationType?t.operationType:$w95b$var$RasterOperationType.PIXEL,r.threads_=void 0!==t.threads?t.threads:1,r.layers_=$w95b$var$createLayers(t.sources);for(var a=r.changed.bind(r),n=0,i=r.layers_.length;n<i;++n)r.layers_[n].addEventListener($w95b$import$EventType.CHANGE,a);return r.tileQueue_=new $w95b$import$TileQueue(function(){return 1},r.changed.bind(r)),r.requestedFrameState_,r.renderedImageCanvas_=null,r.renderedRevision_,r.frameState_={animate:!1,coordinateToPixelTransform:$w95b$import$createTransform(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:$w95b$var$getLayerStatesArray(r.layers_),pixelRatio:1,pixelToCoordinateTransform:$w95b$import$createTransform(),postRenderFunctions:[],size:[0,0],tileQueue:r.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:$w95b$import$getUid(r),renderTargets:{}},r.setAttributions(function(e){for(var r=[],a=0,n=t.sources.length;a<n;++a){var i=t.sources[a],o=(i instanceof $w95b$import$Source?i:i.getSource()).getAttributions();if(\"function\"==typeof o){var s=o(e);r.push.apply(r,s)}}return 0!==r.length?r:null}),void 0!==t.operation&&r.setOperation(t.operation,t.lib),r}return $w95b$var$__extends(t,e),t.prototype.setOperation=function(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new $w95b$export$Processor({operation:e,imageOps:this.operationType_===$w95b$var$RasterOperationType.IMAGE,queue:1,lib:t,threads:this.threads_}),this.changed()},t.prototype.updateFrameState_=function(e,t,r){var a=$w95b$import$assign({},this.frameState_);a.viewState=$w95b$import$assign({},a.viewState);var n=$w95b$import$getCenter(e);a.extent=e.slice(),a.size[0]=Math.round($w95b$import$getWidth(e)/t),a.size[1]=Math.round($w95b$import$getHeight(e)/t),a.time=Date.now();var i=a.viewState;return i.center=n,i.projection=r,i.resolution=t,a},t.prototype.allSourcesReady_=function(){for(var e=!0,t=0,r=this.layers_.length;t<r;++t)if(\"ready\"!==this.layers_[t].getSource().getState()){e=!1;break}return e},t.prototype.getImage=function(e,t,r,a){if(!this.allSourcesReady_())return null;var n=this.updateFrameState_(e,t,a);if(this.requestedFrameState_=n,this.renderedImageCanvas_){var i=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();t===i&&$w95b$import$equals(e,o)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),n.tileQueue.loadMoreTiles(16,16),n.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},t.prototype.processSources_=function(){for(var e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t),a=0;a<t;++a){e.layerIndex=a;var n=$w95b$var$getImageData(this.layers_[a],e);if(!n)return;r[a]=n}var i={};this.dispatchEvent(new $w95b$export$RasterSourceEvent($w95b$var$RasterEventType.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))},t.prototype.onWorkerComplete_=function(e,t,r,a){if(!t&&r){var n=e.extent,i=e.viewState.resolution;if(i===this.requestedFrameState_.viewState.resolution&&$w95b$import$equals(n,this.requestedFrameState_.extent)){var o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext(\"2d\");else{var s=Math.round($w95b$import$getWidth(n)/i),$=Math.round($w95b$import$getHeight(n)/i);o=$w95b$import$createCanvasContext2D(s,$),this.renderedImageCanvas_=new $w95b$import$ImageCanvas(n,i,1,o.canvas)}o.putImageData(r,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new $w95b$export$RasterSourceEvent($w95b$var$RasterEventType.AFTEROPERATIONS,e,a)),e.animate&&requestAnimationFrame(this.changed.bind(this))}}},t.prototype.disposeInternal=function(){this.processor_&&this.processor_.dispose(),e.prototype.disposeInternal.call(this)},t}($w95b$import$ImageSource);$w95b$export$default.prototype.dispose;var $w95b$var$sharedContext=null;function $w95b$var$getImageData(e,t){var r=e.getRenderer();if(!r)throw new Error(\"Unsupported layer type: \"+e);if(!r.prepareFrame(t))return null;var a=t.size[0],n=t.size[1];if(0===a||0===n)return null;var i,o=r.renderFrame(t,null);if(o instanceof HTMLCanvasElement)i=o;else{if(o&&(i=o.firstElementChild),!(i instanceof HTMLCanvasElement))throw new Error(\"Unsupported rendered element: \"+i);if(i.width===a&&i.height===n)return i.getContext(\"2d\").getImageData(0,0,a,n)}if($w95b$var$sharedContext){var s=$w95b$var$sharedContext.canvas;s.width!==a||s.height!==n?$w95b$var$sharedContext=$w95b$import$createCanvasContext2D(a,n):$w95b$var$sharedContext.clearRect(0,0,a,n)}else $w95b$var$sharedContext=$w95b$import$createCanvasContext2D(a,n);return $w95b$var$sharedContext.drawImage(i,0,0,a,n),$w95b$var$sharedContext.getImageData(0,0,a,n)}function $w95b$var$getLayerStatesArray(e){return e.map(function(e){return e.getLayerState()})}function $w95b$var$createLayers(e){for(var t=e.length,r=new Array(t),a=0;a<t;++a)r[a]=$w95b$var$createLayer(e[a]);return r}function $w95b$var$createLayer(e){var t;return e instanceof $w95b$import$Source?e instanceof $w95b$import$TileSource?t=new $w95b$import$TileLayer({source:e}):e instanceof $w95b$import$ImageSource&&(t=new $w95b$import$ImageLayer({source:e})):t=e,t}$w95b$exports.default=$w95b$export$default;"},"sourceMaps":null,"error":null,"hash":"1604165551d348a5754ce7cf1f30f3d1","cacheData":{"env":{},"imports":{"$w95b$import$Disposable":["../Disposable.js","default"],"$w95b$import$Event":["../events/Event.js","default"],"$w95b$import$EventType":["../events/EventType.js","default"],"$w95b$import$ImageCanvas":["../ImageCanvas.js","default"],"$w95b$import$ImageLayer":["../layer/Image.js","default"],"$w95b$import$ImageSource":["./Image.js","default"],"$w95b$import$Source":["./Source.js","default"],"$w95b$import$TileLayer":["../layer/Tile.js","default"],"$w95b$import$TileQueue":["../TileQueue.js","default"],"$w95b$import$TileSource":["./Tile.js","default"],"$w95b$import$assign":["../obj.js","assign"],"$w95b$import$createCanvasContext2D":["../dom.js","createCanvasContext2D"],"$w95b$import$createTransform":["../transform.js","create"],"$w95b$import$equals":["../extent.js","equals"],"$w95b$import$getCenter":["../extent.js","getCenter"],"$w95b$import$getHeight":["../extent.js","getHeight"],"$w95b$import$getWidth":["../extent.js","getWidth"],"$w95b$import$getUid":["../util.js","getUid"]},"exports":{"newImageData":"$w95b$export$newImageData","Processor":"$w95b$export$Processor","RasterSourceEvent":"$w95b$export$RasterSourceEvent","default":"$w95b$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}