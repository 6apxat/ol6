{"id":"U255","dependencies":[{"name":"/home/i6apxat/htdocs/ol6/package.json","includedInParent":true,"mtime":1679700623179},{"name":"/home/i6apxat/htdocs/ol6/node_modules/ol/package.json","includedInParent":true,"mtime":1679700665093},{"name":"./renderer/canvas/common.js","loc":{"line":4,"column":41,"index":70},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/renderer/canvas/common.js"},{"name":"./obj.js","loc":{"line":5,"column":23,"index":124},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/obj.js"},{"name":"./extent.js","loc":{"line":6,"column":116,"index":252},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/extent.js"},{"name":"./dom.js","loc":{"line":7,"column":38,"index":305},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/dom.js"},{"name":"./proj.js","loc":{"line":8,"column":46,"index":363},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/proj.js"},{"name":"./math.js","loc":{"line":9,"column":34,"index":410},"parent":"/home/i6apxat/htdocs/ol6/node_modules/ol/reproj.js","resolved":"/home/i6apxat/htdocs/ol6/node_modules/ol/math.js"}],"generated":{"js":"var $U255$var$brokenDiagonalRendering_,$U255$exports={};$parcel$require(\"U255\",\"./renderer/canvas/common.js\"),$parcel$require(\"U255\",\"./obj.js\"),$parcel$require(\"U255\",\"./extent.js\"),$parcel$require(\"U255\",\"./dom.js\"),$parcel$require(\"U255\",\"./proj.js\"),$parcel$require(\"U255\",\"./math.js\");var $U255$export$canvasPool=[];function $U255$var$drawTestTriangle(e,r,t,o,a){e.beginPath(),e.moveTo(0,0),e.lineTo(r,t),e.lineTo(o,a),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(r,o)+1,Math.max(t,a)),e.restore()}function $U255$var$verifyBrokenDiagonalRendering(e,r){return Math.abs(e[4*r]-210)>2||Math.abs(e[4*r+3]-191.25)>2}function $U255$var$isBrokenDiagonalRendering(){if(void 0===$U255$var$brokenDiagonalRendering_){var e=document.createElement(\"canvas\").getContext(\"2d\");e.globalCompositeOperation=\"lighter\",e.fillStyle=\"rgba(210, 0, 0, 0.75)\",$U255$var$drawTestTriangle(e,4,5,4,0),$U255$var$drawTestTriangle(e,4,5,0,5);var r=e.getImageData(0,0,3,3).data;$U255$var$brokenDiagonalRendering_=$U255$var$verifyBrokenDiagonalRendering(r,0)||$U255$var$verifyBrokenDiagonalRendering(r,4)||$U255$var$verifyBrokenDiagonalRendering(r,8)}return $U255$var$brokenDiagonalRendering_}function $U255$export$calculateSourceResolution(e,r,t,o){var a=$U255$import$transform(t,r,e),n=$U255$import$getPointResolution(r,o,t),$=r.getMetersPerUnit();void 0!==$&&(n*=$);var i=e.getMetersPerUnit();void 0!==i&&(n/=i);var l=e.getExtent();if(!l||$U255$import$containsCoordinate(l,a)){var s=$U255$import$getPointResolution(e,n,a)/n;isFinite(s)&&s>0&&(n/=s)}return n}function $U255$export$calculateSourceExtentResolution(e,r,t,o){var a=$U255$import$getCenter(t),n=$U255$export$calculateSourceResolution(e,r,a,o);return(!isFinite(n)||n<=0)&&$U255$import$forEachCorner(t,function(t){return n=$U255$export$calculateSourceResolution(e,r,t,o),isFinite(n)&&n>0}),n}function $U255$export$render(e,r,t,o,a,n,$,i,l,s,c,g){var u=$U255$import$createCanvasContext2D(Math.round(t*e),Math.round(t*r),$U255$export$canvasPool);if(g||$U255$import$assign(u,$U255$import$IMAGE_SMOOTHING_DISABLED),0===l.length)return u.canvas;function v(e){return Math.round(e*t)/t}u.scale(t,t),u.globalCompositeOperation=\"lighter\";var U=$U255$import$createEmpty();l.forEach(function(e,r,t){$U255$import$extend(U,e.extent)});var p=$U255$import$getWidth(U),m=$U255$import$getHeight(U),d=$U255$import$createCanvasContext2D(Math.round(t*p/o),Math.round(t*m/o));g||$U255$import$assign(d,$U255$import$IMAGE_SMOOTHING_DISABLED);var h=t/o;l.forEach(function(e,r,t){var o=e.extent[0]-U[0],a=-(e.extent[3]-U[3]),n=$U255$import$getWidth(e.extent),$=$U255$import$getHeight(e.extent);e.image.width>0&&e.image.height>0&&d.drawImage(e.image,s,s,e.image.width-2*s,e.image.height-2*s,o*h,a*h,n*h,$*h)});var f=$U255$import$getTopLeft($);return i.getTriangles().forEach(function(e,r,a){var $=e.source,i=e.target,l=$[0][0],s=$[0][1],c=$[1][0],p=$[1][1],m=$[2][0],h=$[2][1],x=v((i[0][0]-f[0])/n),T=v(-(i[0][1]-f[1])/n),R=v((i[1][0]-f[0])/n),D=v(-(i[1][1]-f[1])/n),b=v((i[2][0]-f[0])/n),E=v(-(i[2][1]-f[1])/n),M=l,S=s;l=0,s=0,c-=M,p-=S,m-=M,h-=S;var k=$U255$import$solveLinearSystem([[c,p,0,0,R-x],[m,h,0,0,b-x],[0,0,c,p,D-T],[0,0,m,h,E-T]]);if(k){if(u.save(),u.beginPath(),$U255$var$isBrokenDiagonalRendering()||!g){u.moveTo(R,D);for(var P=x-R,C=T-D,I=0;I<4;I++)u.lineTo(R+v((I+1)*P/4),D+v(I*C/3)),3!=I&&u.lineTo(R+v((I+1)*P/4),D+v((I+1)*C/3));u.lineTo(b,E)}else u.moveTo(R,D),u.lineTo(x,T),u.lineTo(b,E);u.clip(),u.transform(k[0],k[2],k[1],k[3],x,T),u.translate(U[0]-M,U[3]-S),u.scale(o/t,-o/t),u.drawImage(d.canvas,0,0),u.restore()}}),c&&(u.save(),u.globalCompositeOperation=\"source-over\",u.strokeStyle=\"black\",u.lineWidth=1,i.getTriangles().forEach(function(e,r,t){var o=e.target,a=(o[0][0]-f[0])/n,$=-(o[0][1]-f[1])/n,i=(o[1][0]-f[0])/n,l=-(o[1][1]-f[1])/n,s=(o[2][0]-f[0])/n,c=-(o[2][1]-f[1])/n;u.beginPath(),u.moveTo(i,l),u.lineTo(a,$),u.lineTo(s,c),u.closePath(),u.stroke()}),u.restore()),u.canvas}$U255$exports.canvasPool=$U255$export$canvasPool,$U255$exports.calculateSourceResolution=$U255$export$calculateSourceResolution,$U255$exports.calculateSourceExtentResolution=$U255$export$calculateSourceExtentResolution,$U255$exports.render=$U255$export$render;"},"sourceMaps":null,"error":null,"hash":"7dcfcfddc95d6367c0ddd76b335bdd81","cacheData":{"env":{},"imports":{"$U255$import$IMAGE_SMOOTHING_DISABLED":["./renderer/canvas/common.js","IMAGE_SMOOTHING_DISABLED"],"$U255$import$assign":["./obj.js","assign"],"$U255$import$containsCoordinate":["./extent.js","containsCoordinate"],"$U255$import$createEmpty":["./extent.js","createEmpty"],"$U255$import$extend":["./extent.js","extend"],"$U255$import$forEachCorner":["./extent.js","forEachCorner"],"$U255$import$getCenter":["./extent.js","getCenter"],"$U255$import$getHeight":["./extent.js","getHeight"],"$U255$import$getTopLeft":["./extent.js","getTopLeft"],"$U255$import$getWidth":["./extent.js","getWidth"],"$U255$import$createCanvasContext2D":["./dom.js","createCanvasContext2D"],"$U255$import$getPointResolution":["./proj.js","getPointResolution"],"$U255$import$transform":["./proj.js","transform"],"$U255$import$solveLinearSystem":["./math.js","solveLinearSystem"]},"exports":{"canvasPool":"$U255$export$canvasPool","calculateSourceResolution":"$U255$export$calculateSourceResolution","calculateSourceExtentResolution":"$U255$export$calculateSourceExtentResolution","render":"$U255$export$render"},"wildcards":[],"sideEffects":false,"isES6Module":true}}